import{Y as L,Z as N,j as e,X as n,ab as b,r as a,a0 as v}from"./index-905a8f83.js";import{ck as B,u as h,cJ as C,ch as k,az as z,cj as D,bO as A,aS as F,cK as I,cL as M,ca as R}from"./index-0c145e9c.js";import{S as _}from"./Skeleton-2d0f1c11.js";const O=()=>e.jsxs(n,{children:[e.jsx(n,{align:"center",direction:"row",justify:"space-between",mb:18,children:e.jsx(n,{align:"center",direction:"row",children:e.jsx(P,{children:"Edit node name"})})}),e.jsx(n,{mb:12,children:e.jsx(B,{id:"cy-topic",maxLength:50,name:"topic",placeholder:"Add your topic",rules:{...b}})})]}),P=L(N)`
  font-size: 22px;
  font-weight: 600;
  font-family: 'Barlow';
`,V=()=>{const{close:c}=h("editNodeName"),[r]=C(o=>[o.data]),d=k({mode:"onChange"}),{watch:j,setValue:l,reset:u}=d,[p,m]=a.useState(!1),[f,x]=a.useState(!1),[t,y]=a.useState(),s=z();a.useEffect(()=>(t&&l("topic",t==null?void 0:t.topic),()=>{u()}),[t,l,u]),a.useEffect(()=>{(async()=>{if(s){x(!0);try{const{data:i}=await I({search:s==null?void 0:s.name}),E=i.find(T=>T.topic===s.name);y(E)}catch(i){console.log(i)}finally{x(!1)}}})()},[s]);const g=j("topic"),S=()=>{c()},w=async()=>{m(!0);try{if(await M((t==null?void 0:t.ref_id)||"",{topic:g.trim()}),r){const o={...r};console.log(o)}S()}catch(o){console.warn(o)}finally{m(!1)}};return e.jsxs(D,{...d,children:[f?e.jsx(n,{my:24,children:e.jsx(_,{})}):e.jsx(O,{}),e.jsxs(A,{color:"secondary",disabled:p||f,onClick:w,size:"large",variant:"contained",children:["Save",p&&e.jsx(F,{color:v.BLUE_PRESS_STATE,size:10})]})]})},K=()=>{const{close:c}=h("editNodeName");return e.jsx(R,{id:"editNodeName",kind:"regular",onClose:c,preventOutsideClose:!0,children:e.jsx(V,{})})};export{K as EditNodeNameModal};
