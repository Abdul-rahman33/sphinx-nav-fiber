import{r as P,g as Bm,_ as as,aH as U_,j as D,R as Vc,aI as tS,W as F_,Y as Cs,a0 as zn,X as cn,N as N_,aJ as nS,aK as rS,aL as sS,c as iS,Z as $r,aM as oS,Q as aS}from"./index-68956f59.js";import{L as ap,T as gu,R as lS,U as Qs,B as jm,M as zf,C as rr,a as cS,O as Vm,P as vu,b as hl,c as lp,N as uS,A as hS,W as fS,d as L_,e as dS,f as pS,V as mS,g as ye,h as _t,i as gS,j as z_,D as Ki,k as Mh,F as vS,l as Bf,I as B_,m as af,n as Xp,o as Ka,p as _S,q as Gm,r as Es,s as Qp,t as A1,v as jf,w as oo,x as ca,y as yS,z as ua,E as Hm,G as j_,H as lf,J as xS,K as wS,Q as V_,X as fl,Y as Pc,Z as SS,_ as TS,$ as CS,a0 as Wm,a1 as Vf,a2 as cc,a3 as Uc,a4 as ES,a5 as Kh,a6 as bS,a7 as MS,a8 as qm,a9 as Br,aa as dl,ab as OS,ac as Ol,ad as AS,ae as kS,af as PS,ag as RS,ah as DS,ai as ze,aj as IS,ak as ki,al as G_,am as H_,an as Vo,ao as US,ap as pn,aq as k1,ar as Go,as as FS,at as NS,au as LS,av as zS,aw as BS,ax as nn,ay as bs,az as Ms,aA as Re,aB as jS,aC as _u,aD as Zm,aE as W_,aF as VS,aG as q_,aH as Z_,aI as GS,aJ as HS,aK as Ym,aL as Rc,aM as WS,aN as qS,aO as ZS,aP as YS,aQ as Y_,aR as X_,aS as XS,aT as QS}from"./index-a3e6baad.js";import{T as KS,f as P1}from"./index-326a3707.js";var Q_={exports:{}},ha={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */ha.ConcurrentRoot=1;ha.ContinuousEventPriority=4;ha.DefaultEventPriority=16;ha.DiscreteEventPriority=1;ha.IdleEventPriority=536870912;ha.LegacyRoot=0;Q_.exports=ha;var Ja=Q_.exports;function JS(r){let e;const t=new Set,n=(h,f)=>{const d=typeof h=="function"?h(e):h;if(d!==e){const p=e;e=f?d:Object.assign({},e,d),t.forEach(g=>g(e,p))}},s=()=>e,i=(h,f=s,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=f(e);function g(){const _=f(e);if(!d(p,_)){const y=p;h(p=_,y)}}return t.add(g),()=>t.delete(g)},c={setState:n,getState:s,subscribe:(h,f,d)=>f||d?i(h,f,d):(t.add(h),()=>t.delete(h)),destroy:()=>t.clear()};return e=r(n,s,c),c}const $S=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),R1=$S?P.useEffect:P.useLayoutEffect;function eT(r){const e=typeof r=="function"?JS(r):r,t=(n=e.getState,s=Object.is)=>{const[,i]=P.useReducer(x=>x+1,0),o=e.getState(),a=P.useRef(o),c=P.useRef(n),h=P.useRef(s),f=P.useRef(!1),d=P.useRef();d.current===void 0&&(d.current=n(o));let p,g=!1;(a.current!==o||c.current!==n||h.current!==s||f.current)&&(p=n(o),g=!s(d.current,p)),R1(()=>{g&&(d.current=p),a.current=o,c.current=n,h.current=s,f.current=!1});const _=P.useRef(o);R1(()=>{const x=()=>{try{const T=e.getState(),b=c.current(T);h.current(d.current,b)||(a.current=T,d.current=b,i())}catch{f.current=!0,i()}},w=e.subscribe(x);return e.getState()!==_.current&&x(),w},[]);const y=g?p:d.current;return P.useDebugValue(y),y};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const s=n.length<=0;return{value:n.shift(),done:s}}}},t}var K_={exports:{}},J_={exports:{}},$_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function e(W,V){var H=W.length;W.push(V);e:for(;0<H;){var L=H-1>>>1,B=W[L];if(0<s(B,V))W[L]=V,W[H]=B,H=L;else break e}}function t(W){return W.length===0?null:W[0]}function n(W){if(W.length===0)return null;var V=W[0],H=W.pop();if(H!==V){W[0]=H;e:for(var L=0,B=W.length,J=B>>>1;L<J;){var te=2*(L+1)-1,X=W[te],oe=te+1,re=W[oe];if(0>s(X,H))oe<B&&0>s(re,X)?(W[L]=re,W[oe]=H,L=oe):(W[L]=X,W[te]=H,L=te);else if(oe<B&&0>s(re,H))W[L]=re,W[oe]=H,L=oe;else break e}}return V}function s(W,V){var H=W.sortIndex-V.sortIndex;return H!==0?H:W.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;r.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();r.unstable_now=function(){return o.now()-a}}var c=[],h=[],f=1,d=null,p=3,g=!1,_=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(W){for(var V=t(h);V!==null;){if(V.callback===null)n(h);else if(V.startTime<=W)n(h),V.sortIndex=V.expirationTime,e(c,V);else break;V=t(h)}}function E(W){if(y=!1,b(W),!_)if(t(c)!==null)_=!0,Y(C);else{var V=t(h);V!==null&&$(E,V.startTime-W)}}function C(W,V){_=!1,y&&(y=!1,w(k),k=-1),g=!0;var H=p;try{for(b(V),d=t(c);d!==null&&(!(d.expirationTime>V)||W&&!U());){var L=d.callback;if(typeof L=="function"){d.callback=null,p=d.priorityLevel;var B=L(d.expirationTime<=V);V=r.unstable_now(),typeof B=="function"?d.callback=B:d===t(c)&&n(c),b(V)}else n(c);d=t(c)}if(d!==null)var J=!0;else{var te=t(h);te!==null&&$(E,te.startTime-V),J=!1}return J}finally{d=null,p=H,g=!1}}var A=!1,M=null,k=-1,R=5,F=-1;function U(){return!(r.unstable_now()-F<R)}function I(){if(M!==null){var W=r.unstable_now();F=W;var V=!0;try{V=M(!0,W)}finally{V?z():(A=!1,M=null)}}else A=!1}var z;if(typeof T=="function")z=function(){T(I)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,q=j.port2;j.port1.onmessage=I,z=function(){q.postMessage(null)}}else z=function(){x(I,0)};function Y(W){M=W,A||(A=!0,z())}function $(W,V){k=x(function(){W(r.unstable_now())},V)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(W){W.callback=null},r.unstable_continueExecution=function(){_||g||(_=!0,Y(C))},r.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<W?Math.floor(1e3/W):5},r.unstable_getCurrentPriorityLevel=function(){return p},r.unstable_getFirstCallbackNode=function(){return t(c)},r.unstable_next=function(W){switch(p){case 1:case 2:case 3:var V=3;break;default:V=p}var H=p;p=V;try{return W()}finally{p=H}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(W,V){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var H=p;p=W;try{return V()}finally{p=H}},r.unstable_scheduleCallback=function(W,V,H){var L=r.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?L+H:L):H=L,W){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=H+B,W={id:f++,callback:V,priorityLevel:W,startTime:H,expirationTime:B,sortIndex:-1},H>L?(W.sortIndex=H,e(h,W),t(c)===null&&W===t(h)&&(y?(w(k),k=-1):y=!0,$(E,H-L))):(W.sortIndex=B,e(c,W),_||g||(_=!0,Y(C))),W},r.unstable_shouldYield=U,r.unstable_wrapCallback=function(W){var V=p;return function(){var H=p;p=V;try{return W.apply(this,arguments)}finally{p=H}}}})($_);J_.exports=$_;var Kp=J_.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tT=function(e){var t={},n=P,s=Kp,i=Object.assign;function o(l){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+l,m=1;m<arguments.length;m++)u+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),h=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),_=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),C=Symbol.iterator;function A(l){return l===null||typeof l!="object"?null:(l=C&&l[C]||l["@@iterator"],typeof l=="function"?l:null)}function M(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case f:return"Fragment";case h:return"Portal";case p:return"Profiler";case d:return"StrictMode";case x:return"Suspense";case w:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case _:return(l.displayName||"Context")+".Consumer";case g:return(l._context.displayName||"Context")+".Provider";case y:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case T:return u=l.displayName||null,u!==null?u:M(l.type)||"Memo";case b:u=l._payload,l=l._init;try{return M(l(u))}catch{}}return null}function k(l){var u=l.type;switch(l.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=u.render,l=l.displayName||l.name||"",u.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M(u);case 8:return u===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function R(l){var u=l,m=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,u.flags&4098&&(m=u.return),l=u.return;while(l)}return u.tag===3?m:null}function F(l){if(R(l)!==l)throw Error(o(188))}function U(l){var u=l.alternate;if(!u){if(u=R(l),u===null)throw Error(o(188));return u!==l?null:l}for(var m=l,v=u;;){var S=m.return;if(S===null)break;var O=S.alternate;if(O===null){if(v=S.return,v!==null){m=v;continue}break}if(S.child===O.child){for(O=S.child;O;){if(O===m)return F(S),l;if(O===v)return F(S),u;O=O.sibling}throw Error(o(188))}if(m.return!==v.return)m=S,v=O;else{for(var N=!1,G=S.child;G;){if(G===m){N=!0,m=S,v=O;break}if(G===v){N=!0,v=S,m=O;break}G=G.sibling}if(!N){for(G=O.child;G;){if(G===m){N=!0,m=O,v=S;break}if(G===v){N=!0,v=O,m=S;break}G=G.sibling}if(!N)throw Error(o(189))}}if(m.alternate!==v)throw Error(o(190))}if(m.tag!==3)throw Error(o(188));return m.stateNode.current===m?l:u}function I(l){return l=U(l),l!==null?z(l):null}function z(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var u=z(l);if(u!==null)return u;l=l.sibling}return null}function j(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){if(l.tag!==4){var u=j(l);if(u!==null)return u}l=l.sibling}return null}var q=Array.isArray,Y=e.getPublicInstance,$=e.getRootHostContext,W=e.getChildHostContext,V=e.prepareForCommit,H=e.resetAfterCommit,L=e.createInstance,B=e.appendInitialChild,J=e.finalizeInitialChildren,te=e.prepareUpdate,X=e.shouldSetTextContent,oe=e.createTextInstance,re=e.scheduleTimeout,Q=e.cancelTimeout,ge=e.noTimeout,ve=e.isPrimaryRenderer,ae=e.supportsMutation,le=e.supportsPersistence,be=e.supportsHydration,Fe=e.getInstanceFromNode,ee=e.preparePortalMount,he=e.getCurrentEventPriority,xe=e.detachDeletedInstance,ce=e.supportsMicrotasks,de=e.scheduleMicrotask,pe=e.supportsTestSelectors,ue=e.findFiberRoot,Me=e.getBoundingRect,Se=e.getTextContent,Ce=e.isHiddenSubtree,Te=e.matchAccessibilityRole,et=e.setFocusIfFocusable,He=e.setupIntersectionObserver,Pe=e.appendChild,We=e.appendChildToContainer,rt=e.commitTextUpdate,Vt=e.commitMount,Ge=e.commitUpdate,xt=e.insertBefore,Qe=e.insertInContainerBefore,Ne=e.removeChild,ct=e.removeChildFromContainer,dt=e.resetTextContent,Gt=e.hideInstance,Ze=e.hideTextInstance,At=e.unhideInstance,bn=e.unhideTextInstance,us=e.clearContainer,ni=e.cloneInstance,hs=e.createContainerChildSet,qn=e.appendChildToContainerChildSet,Zn=e.finalizeContainerChildren,kt=e.replaceContainerChildren,Ii=e.cloneHiddenInstance,Dt=e.cloneHiddenTextInstance,It=e.canHydrateInstance,Sr=e.canHydrateTextInstance,Yn=e.canHydrateSuspenseInstance,ut=e.isSuspenseInstancePending,Xt=e.isSuspenseInstanceFallback,ar=e.registerSuspenseInstanceRetry,Ht=e.getNextHydratableSibling,on=e.getFirstHydratableChild,Mn=e.getFirstHydratableChildWithinContainer,ks=e.getFirstHydratableChildWithinSuspenseInstance,Tr=e.hydrateInstance,ri=e.hydrateTextInstance,fd=e.hydrateSuspenseInstance,Uu=e.getNextHydratableInstanceAfterSuspenseInstance,_o=e.commitHydratedContainer,Ul=e.commitHydratedSuspenseInstance,dd=e.clearSuspenseBoundary,Fu=e.clearSuspenseBoundaryFromContainer,ga=e.shouldDeleteUnhydratedTailInstances,Fl=e.didNotMatchHydratedContainerTextInstance,Nl=e.didNotMatchHydratedTextInstance,Oe;function fs(l){if(Oe===void 0)try{throw Error()}catch(m){var u=m.stack.trim().match(/\n( *(at )?)/);Oe=u&&u[1]||""}return`
`+Oe+l}var Ll=!1;function Ps(l,u){if(!l||Ll)return"";Ll=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(me){var v=me}Reflect.construct(l,[],u)}else{try{u.call()}catch(me){v=me}l.call(u.prototype)}else{try{throw Error()}catch(me){v=me}l()}}catch(me){if(me&&v&&typeof me.stack=="string"){for(var S=me.stack.split(`
`),O=v.stack.split(`
`),N=S.length-1,G=O.length-1;1<=N&&0<=G&&S[N]!==O[G];)G--;for(;1<=N&&0<=G;N--,G--)if(S[N]!==O[G]){if(N!==1||G!==1)do if(N--,G--,0>G||S[N]!==O[G]){var se=`
`+S[N].replace(" at new "," at ");return l.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",l.displayName)),se}while(1<=N&&0<=G);break}}}finally{Ll=!1,Error.prepareStackTrace=m}return(l=l?l.displayName||l.name:"")?fs(l):""}var va=Object.prototype.hasOwnProperty,_a=[],Rs=-1;function Cr(l){return{current:l}}function ht(l){0>Rs||(l.current=_a[Rs],_a[Rs]=null,Rs--)}function pt(l,u){Rs++,_a[Rs]=l.current,l.current=u}var Er={},hn=Cr(Er),gn=Cr(!1),Ds=Er;function Vr(l,u){var m=l.type.contextTypes;if(!m)return Er;var v=l.stateNode;if(v&&v.__reactInternalMemoizedUnmaskedChildContext===u)return v.__reactInternalMemoizedMaskedChildContext;var S={},O;for(O in m)S[O]=u[O];return v&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=u,l.__reactInternalMemoizedMaskedChildContext=S),S}function vn(l){return l=l.childContextTypes,l!=null}function ds(){ht(gn),ht(hn)}function ya(l,u,m){if(hn.current!==Er)throw Error(o(168));pt(hn,u),pt(gn,m)}function xa(l,u,m){var v=l.stateNode;if(u=u.childContextTypes,typeof v.getChildContext!="function")return m;v=v.getChildContext();for(var S in v)if(!(S in u))throw Error(o(108,k(l)||"Unknown",S));return i({},m,v)}function Ui(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Er,Ds=hn.current,pt(hn,l),pt(gn,gn.current),!0}function br(l,u,m){var v=l.stateNode;if(!v)throw Error(o(169));m?(l=xa(l,u,Ds),v.__reactInternalMemoizedMergedChildContext=l,ht(gn),ht(hn),pt(hn,l)):ht(gn),pt(gn,m)}var Mr=Math.clz32?Math.clz32:Nu,wa=Math.log,yo=Math.LN2;function Nu(l){return l>>>=0,l===0?32:31-(wa(l)/yo|0)|0}var si=64,ii=4194304;function oi(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function xo(l,u){var m=l.pendingLanes;if(m===0)return 0;var v=0,S=l.suspendedLanes,O=l.pingedLanes,N=m&268435455;if(N!==0){var G=N&~S;G!==0?v=oi(G):(O&=N,O!==0&&(v=oi(O)))}else N=m&~S,N!==0?v=oi(N):O!==0&&(v=oi(O));if(v===0)return 0;if(u!==0&&u!==v&&!(u&S)&&(S=v&-v,O=u&-u,S>=O||S===16&&(O&4194240)!==0))return u;if(v&4&&(v|=m&16),u=l.entangledLanes,u!==0)for(l=l.entanglements,u&=v;0<u;)m=31-Mr(u),S=1<<m,v|=l[m],u&=~S;return v}function Lu(l,u){switch(l){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zl(l,u){for(var m=l.suspendedLanes,v=l.pingedLanes,S=l.expirationTimes,O=l.pendingLanes;0<O;){var N=31-Mr(O),G=1<<N,se=S[N];se===-1?(!(G&m)||G&v)&&(S[N]=Lu(G,u)):se<=u&&(l.expiredLanes|=G),O&=~G}}function ai(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function Sa(l){for(var u=[],m=0;31>m;m++)u.push(l);return u}function Is(l,u,m){l.pendingLanes|=u,u!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,u=31-Mr(u),l[u]=m}function Fi(l,u){var m=l.pendingLanes&~u;l.pendingLanes=u,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=u,l.mutableReadLanes&=u,l.entangledLanes&=u,u=l.entanglements;var v=l.eventTimes;for(l=l.expirationTimes;0<m;){var S=31-Mr(m),O=1<<S;u[S]=0,v[S]=-1,l[S]=-1,m&=~O}}function Us(l,u){var m=l.entangledLanes|=u;for(l=l.entanglements;m;){var v=31-Mr(m),S=1<<v;S&u|l[v]&u&&(l[v]|=u),m&=~S}}var Je=0;function Bl(l){return l&=-l,1<l?4<l?l&268435455?16:536870912:4:1}var li=s.unstable_scheduleCallback,Ta=s.unstable_cancelCallback,jl=s.unstable_shouldYield,zu=s.unstable_requestPaint,Nt=s.unstable_now,wo=s.unstable_ImmediatePriority,Bu=s.unstable_UserBlockingPriority,Xn=s.unstable_NormalPriority,Vl=s.unstable_IdlePriority,So=null,Or=null;function Gl(l){if(Or&&typeof Or.onCommitFiberRoot=="function")try{Or.onCommitFiberRoot(So,l,void 0,(l.current.flags&128)===128)}catch{}}function ju(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var Ar=typeof Object.is=="function"?Object.is:ju,Qn=null,Fs=!1,Gr=!1;function Hl(l){Qn===null?Qn=[l]:Qn.push(l)}function Wl(l){Fs=!0,Hl(l)}function lr(){if(!Gr&&Qn!==null){Gr=!0;var l=0,u=Je;try{var m=Qn;for(Je=1;l<m.length;l++){var v=m[l];do v=v(!0);while(v!==null)}Qn=null,Fs=!1}catch(S){throw Qn!==null&&(Qn=Qn.slice(l+1)),li(wo,lr),S}finally{Je=u,Gr=!1}}return null}var To=a.ReactCurrentBatchConfig;function Co(l,u){if(Ar(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var m=Object.keys(l),v=Object.keys(u);if(m.length!==v.length)return!1;for(v=0;v<m.length;v++){var S=m[v];if(!va.call(u,S)||!Ar(l[S],u[S]))return!1}return!0}function Eo(l){switch(l.tag){case 5:return fs(l.type);case 16:return fs("Lazy");case 13:return fs("Suspense");case 19:return fs("SuspenseList");case 0:case 2:case 15:return l=Ps(l.type,!1),l;case 11:return l=Ps(l.type.render,!1),l;case 1:return l=Ps(l.type,!0),l;default:return""}}function Kn(l,u){if(l&&l.defaultProps){u=i({},u),l=l.defaultProps;for(var m in l)u[m]===void 0&&(u[m]=l[m]);return u}return u}var _n=Cr(null),Ca=null,ps=null,Ni=null;function Ea(){Ni=ps=Ca=null}function Vu(l,u,m){ve?(pt(_n,u._currentValue),u._currentValue=m):(pt(_n,u._currentValue2),u._currentValue2=m)}function yn(l){var u=_n.current;ht(_n),ve?l._currentValue=u:l._currentValue2=u}function Jn(l,u,m){for(;l!==null;){var v=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,v!==null&&(v.childLanes|=u)):v!==null&&(v.childLanes&u)!==u&&(v.childLanes|=u),l===m)break;l=l.return}}function Qt(l,u){Ca=l,Ni=ps=null,l=l.dependencies,l!==null&&l.firstContext!==null&&(l.lanes&u&&(Dr=!0),l.firstContext=null)}function Kt(l){var u=ve?l._currentValue:l._currentValue2;if(Ni!==l)if(l={context:l,memoizedValue:u,next:null},ps===null){if(Ca===null)throw Error(o(308));ps=l,Ca.dependencies={lanes:0,firstContext:l}}else ps=ps.next=l;return u}var kr=null,Li=!1;function pd(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function n0(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function ci(l,u){return{eventTime:l,lane:u,tag:0,payload:null,callback:null,next:null}}function zi(l,u){var m=l.updateQueue;m!==null&&(m=m.shared,an!==null&&l.mode&1&&!(Ke&2)?(l=m.interleaved,l===null?(u.next=u,kr===null?kr=[m]:kr.push(m)):(u.next=l.next,l.next=u),m.interleaved=u):(l=m.pending,l===null?u.next=u:(u.next=l.next,l.next=u),m.pending=u))}function Gu(l,u,m){if(u=u.updateQueue,u!==null&&(u=u.shared,(m&4194240)!==0)){var v=u.lanes;v&=l.pendingLanes,m|=v,u.lanes=m,Us(l,m)}}function r0(l,u){var m=l.updateQueue,v=l.alternate;if(v!==null&&(v=v.updateQueue,m===v)){var S=null,O=null;if(m=m.firstBaseUpdate,m!==null){do{var N={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};O===null?S=O=N:O=O.next=N,m=m.next}while(m!==null);O===null?S=O=u:O=O.next=u}else S=O=u;m={baseState:v.baseState,firstBaseUpdate:S,lastBaseUpdate:O,shared:v.shared,effects:v.effects},l.updateQueue=m;return}l=m.lastBaseUpdate,l===null?m.firstBaseUpdate=u:l.next=u,m.lastBaseUpdate=u}function Hu(l,u,m,v){var S=l.updateQueue;Li=!1;var O=S.firstBaseUpdate,N=S.lastBaseUpdate,G=S.shared.pending;if(G!==null){S.shared.pending=null;var se=G,me=se.next;se.next=null,N===null?O=me:N.next=me,N=se;var Ee=l.alternate;Ee!==null&&(Ee=Ee.updateQueue,G=Ee.lastBaseUpdate,G!==N&&(G===null?Ee.firstBaseUpdate=me:G.next=me,Ee.lastBaseUpdate=se))}if(O!==null){var je=S.baseState;N=0,Ee=me=se=null,G=O;do{var De=G.lane,wt=G.eventTime;if((v&De)===De){Ee!==null&&(Ee=Ee.next={eventTime:wt,lane:0,tag:G.tag,payload:G.payload,callback:G.callback,next:null});e:{var ke=l,Fn=G;switch(De=u,wt=m,Fn.tag){case 1:if(ke=Fn.payload,typeof ke=="function"){je=ke.call(wt,je,De);break e}je=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=Fn.payload,De=typeof ke=="function"?ke.call(wt,je,De):ke,De==null)break e;je=i({},je,De);break e;case 2:Li=!0}}G.callback!==null&&G.lane!==0&&(l.flags|=64,De=S.effects,De===null?S.effects=[G]:De.push(G))}else wt={eventTime:wt,lane:De,tag:G.tag,payload:G.payload,callback:G.callback,next:null},Ee===null?(me=Ee=wt,se=je):Ee=Ee.next=wt,N|=De;if(G=G.next,G===null){if(G=S.shared.pending,G===null)break;De=G,G=De.next,De.next=null,S.lastBaseUpdate=De,S.shared.pending=null}}while(1);if(Ee===null&&(se=je),S.baseState=se,S.firstBaseUpdate=me,S.lastBaseUpdate=Ee,u=S.shared.interleaved,u!==null){S=u;do N|=S.lane,S=S.next;while(S!==u)}else O===null&&(S.shared.lanes=0);Ia|=N,l.lanes=N,l.memoizedState=je}}function s0(l,u,m){if(l=u.effects,u.effects=null,l!==null)for(u=0;u<l.length;u++){var v=l[u],S=v.callback;if(S!==null){if(v.callback=null,v=m,typeof S!="function")throw Error(o(191,S));S.call(v)}}}var i0=new n.Component().refs;function md(l,u,m,v){u=l.memoizedState,m=m(v,u),m=m==null?u:i({},u,m),l.memoizedState=m,l.lanes===0&&(l.updateQueue.baseState=m)}var Wu={isMounted:function(l){return(l=l._reactInternals)?R(l)===l:!1},enqueueSetState:function(l,u,m){l=l._reactInternals;var v=er(),S=Vi(l),O=ci(v,S);O.payload=u,m!=null&&(O.callback=m),zi(l,O),u=Yr(l,S,v),u!==null&&Gu(u,l,S)},enqueueReplaceState:function(l,u,m){l=l._reactInternals;var v=er(),S=Vi(l),O=ci(v,S);O.tag=1,O.payload=u,m!=null&&(O.callback=m),zi(l,O),u=Yr(l,S,v),u!==null&&Gu(u,l,S)},enqueueForceUpdate:function(l,u){l=l._reactInternals;var m=er(),v=Vi(l),S=ci(m,v);S.tag=2,u!=null&&(S.callback=u),zi(l,S),u=Yr(l,v,m),u!==null&&Gu(u,l,v)}};function o0(l,u,m,v,S,O,N){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(v,O,N):u.prototype&&u.prototype.isPureReactComponent?!Co(m,v)||!Co(S,O):!0}function a0(l,u,m){var v=!1,S=Er,O=u.contextType;return typeof O=="object"&&O!==null?O=Kt(O):(S=vn(u)?Ds:hn.current,v=u.contextTypes,O=(v=v!=null)?Vr(l,S):Er),u=new u(m,O),l.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Wu,l.stateNode=u,u._reactInternals=l,v&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=S,l.__reactInternalMemoizedMaskedChildContext=O),u}function l0(l,u,m,v){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(m,v),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(m,v),u.state!==l&&Wu.enqueueReplaceState(u,u.state,null)}function gd(l,u,m,v){var S=l.stateNode;S.props=m,S.state=l.memoizedState,S.refs=i0,pd(l);var O=u.contextType;typeof O=="object"&&O!==null?S.context=Kt(O):(O=vn(u)?Ds:hn.current,S.context=Vr(l,O)),S.state=l.memoizedState,O=u.getDerivedStateFromProps,typeof O=="function"&&(md(l,u,O,m),S.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(u=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),u!==S.state&&Wu.enqueueReplaceState(S,S.state,null),Hu(l,m,S,v),S.state=l.memoizedState),typeof S.componentDidMount=="function"&&(l.flags|=4194308)}var ba=[],Ma=0,qu=null,Zu=0,Hr=[],Wr=0,bo=null,ui=1,hi="";function Mo(l,u){ba[Ma++]=Zu,ba[Ma++]=qu,qu=l,Zu=u}function c0(l,u,m){Hr[Wr++]=ui,Hr[Wr++]=hi,Hr[Wr++]=bo,bo=l;var v=ui;l=hi;var S=32-Mr(v)-1;v&=~(1<<S),m+=1;var O=32-Mr(u)+S;if(30<O){var N=S-S%5;O=(v&(1<<N)-1).toString(32),v>>=N,S-=N,ui=1<<32-Mr(u)+S|m<<S|v,hi=O+l}else ui=1<<O|m<<S|v,hi=l}function vd(l){l.return!==null&&(Mo(l,1),c0(l,1,0))}function _d(l){for(;l===qu;)qu=ba[--Ma],ba[Ma]=null,Zu=ba[--Ma],ba[Ma]=null;for(;l===bo;)bo=Hr[--Wr],Hr[Wr]=null,hi=Hr[--Wr],Hr[Wr]=null,ui=Hr[--Wr],Hr[Wr]=null}var Pr=null,Rr=null,Ut=!1,ql=!1,ms=null;function u0(l,u){var m=Xr(5,null,null,0);m.elementType="DELETED",m.stateNode=u,m.return=l,u=l.deletions,u===null?(l.deletions=[m],l.flags|=16):u.push(m)}function h0(l,u){switch(l.tag){case 5:return u=It(u,l.type,l.pendingProps),u!==null?(l.stateNode=u,Pr=l,Rr=on(u),!0):!1;case 6:return u=Sr(u,l.pendingProps),u!==null?(l.stateNode=u,Pr=l,Rr=null,!0):!1;case 13:if(u=Yn(u),u!==null){var m=bo!==null?{id:ui,overflow:hi}:null;return l.memoizedState={dehydrated:u,treeContext:m,retryLane:1073741824},m=Xr(18,null,null,0),m.stateNode=u,m.return=l,l.child=m,Pr=l,Rr=null,!0}return!1;default:return!1}}function yd(l){return(l.mode&1)!==0&&(l.flags&128)===0}function xd(l){if(Ut){var u=Rr;if(u){var m=u;if(!h0(l,u)){if(yd(l))throw Error(o(418));u=Ht(m);var v=Pr;u&&h0(l,u)?u0(v,m):(l.flags=l.flags&-4097|2,Ut=!1,Pr=l)}}else{if(yd(l))throw Error(o(418));l.flags=l.flags&-4097|2,Ut=!1,Pr=l}}}function f0(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;Pr=l}function Zl(l){if(!be||l!==Pr)return!1;if(!Ut)return f0(l),Ut=!0,!1;if(l.tag!==3&&(l.tag!==5||ga(l.type)&&!X(l.type,l.memoizedProps))){var u=Rr;if(u){if(yd(l)){for(l=Rr;l;)l=Ht(l);throw Error(o(418))}for(;u;)u0(l,u),u=Ht(u)}}if(f0(l),l.tag===13){if(!be)throw Error(o(316));if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(o(317));Rr=Uu(l)}else Rr=Pr?Ht(l.stateNode):null;return!0}function Oa(){be&&(Rr=Pr=null,ql=Ut=!1)}function wd(l){ms===null?ms=[l]:ms.push(l)}function Yl(l,u,m){if(l=m.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(o(309));var v=m.stateNode}if(!v)throw Error(o(147,l));var S=v,O=""+l;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===O?u.ref:(u=function(N){var G=S.refs;G===i0&&(G=S.refs={}),N===null?delete G[O]:G[O]=N},u._stringRef=O,u)}if(typeof l!="string")throw Error(o(284));if(!m._owner)throw Error(o(290,l))}return l}function Yu(l,u){throw l=Object.prototype.toString.call(u),Error(o(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l))}function d0(l){var u=l._init;return u(l._payload)}function p0(l){function u(K,Z){if(l){var ne=K.deletions;ne===null?(K.deletions=[Z],K.flags|=16):ne.push(Z)}}function m(K,Z){if(!l)return null;for(;Z!==null;)u(K,Z),Z=Z.sibling;return null}function v(K,Z){for(K=new Map;Z!==null;)Z.key!==null?K.set(Z.key,Z):K.set(Z.index,Z),Z=Z.sibling;return K}function S(K,Z){return K=Hi(K,Z),K.index=0,K.sibling=null,K}function O(K,Z,ne){return K.index=ne,l?(ne=K.alternate,ne!==null?(ne=ne.index,ne<Z?(K.flags|=2,Z):ne):(K.flags|=2,Z)):(K.flags|=1048576,Z)}function N(K){return l&&K.alternate===null&&(K.flags|=2),K}function G(K,Z,ne,we){return Z===null||Z.tag!==6?(Z=sp(ne,K.mode,we),Z.return=K,Z):(Z=S(Z,ne),Z.return=K,Z)}function se(K,Z,ne,we){var Ae=ne.type;return Ae===f?Ee(K,Z,ne.props.children,we,ne.key):Z!==null&&(Z.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===b&&d0(Ae)===Z.type)?(we=S(Z,ne.props),we.ref=Yl(K,Z,ne),we.return=K,we):(we=Eh(ne.type,ne.key,ne.props,null,K.mode,we),we.ref=Yl(K,Z,ne),we.return=K,we)}function me(K,Z,ne,we){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==ne.containerInfo||Z.stateNode.implementation!==ne.implementation?(Z=ip(ne,K.mode,we),Z.return=K,Z):(Z=S(Z,ne.children||[]),Z.return=K,Z)}function Ee(K,Z,ne,we,Ae){return Z===null||Z.tag!==7?(Z=Io(ne,K.mode,we,Ae),Z.return=K,Z):(Z=S(Z,ne),Z.return=K,Z)}function je(K,Z,ne){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Z=sp(""+Z,K.mode,ne),Z.return=K,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case c:return ne=Eh(Z.type,Z.key,Z.props,null,K.mode,ne),ne.ref=Yl(K,null,Z),ne.return=K,ne;case h:return Z=ip(Z,K.mode,ne),Z.return=K,Z;case b:var we=Z._init;return je(K,we(Z._payload),ne)}if(q(Z)||A(Z))return Z=Io(Z,K.mode,ne,null),Z.return=K,Z;Yu(K,Z)}return null}function De(K,Z,ne,we){var Ae=Z!==null?Z.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number")return Ae!==null?null:G(K,Z,""+ne,we);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case c:return ne.key===Ae?se(K,Z,ne,we):null;case h:return ne.key===Ae?me(K,Z,ne,we):null;case b:return Ae=ne._init,De(K,Z,Ae(ne._payload),we)}if(q(ne)||A(ne))return Ae!==null?null:Ee(K,Z,ne,we,null);Yu(K,ne)}return null}function wt(K,Z,ne,we,Ae){if(typeof we=="string"&&we!==""||typeof we=="number")return K=K.get(ne)||null,G(Z,K,""+we,Ae);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case c:return K=K.get(we.key===null?ne:we.key)||null,se(Z,K,we,Ae);case h:return K=K.get(we.key===null?ne:we.key)||null,me(Z,K,we,Ae);case b:var Ye=we._init;return wt(K,Z,ne,Ye(we._payload),Ae)}if(q(we)||A(we))return K=K.get(ne)||null,Ee(Z,K,we,Ae,null);Yu(Z,we)}return null}function ke(K,Z,ne,we){for(var Ae=null,Ye=null,Ve=Z,st=Z=0,wn=null;Ve!==null&&st<ne.length;st++){Ve.index>st?(wn=Ve,Ve=null):wn=Ve.sibling;var it=De(K,Ve,ne[st],we);if(it===null){Ve===null&&(Ve=wn);break}l&&Ve&&it.alternate===null&&u(K,Ve),Z=O(it,Z,st),Ye===null?Ae=it:Ye.sibling=it,Ye=it,Ve=wn}if(st===ne.length)return m(K,Ve),Ut&&Mo(K,st),Ae;if(Ve===null){for(;st<ne.length;st++)Ve=je(K,ne[st],we),Ve!==null&&(Z=O(Ve,Z,st),Ye===null?Ae=Ve:Ye.sibling=Ve,Ye=Ve);return Ut&&Mo(K,st),Ae}for(Ve=v(K,Ve);st<ne.length;st++)wn=wt(Ve,K,st,ne[st],we),wn!==null&&(l&&wn.alternate!==null&&Ve.delete(wn.key===null?st:wn.key),Z=O(wn,Z,st),Ye===null?Ae=wn:Ye.sibling=wn,Ye=wn);return l&&Ve.forEach(function(Wi){return u(K,Wi)}),Ut&&Mo(K,st),Ae}function Fn(K,Z,ne,we){var Ae=A(ne);if(typeof Ae!="function")throw Error(o(150));if(ne=Ae.call(ne),ne==null)throw Error(o(151));for(var Ye=Ae=null,Ve=Z,st=Z=0,wn=null,it=ne.next();Ve!==null&&!it.done;st++,it=ne.next()){Ve.index>st?(wn=Ve,Ve=null):wn=Ve.sibling;var Wi=De(K,Ve,it.value,we);if(Wi===null){Ve===null&&(Ve=wn);break}l&&Ve&&Wi.alternate===null&&u(K,Ve),Z=O(Wi,Z,st),Ye===null?Ae=Wi:Ye.sibling=Wi,Ye=Wi,Ve=wn}if(it.done)return m(K,Ve),Ut&&Mo(K,st),Ae;if(Ve===null){for(;!it.done;st++,it=ne.next())it=je(K,it.value,we),it!==null&&(Z=O(it,Z,st),Ye===null?Ae=it:Ye.sibling=it,Ye=it);return Ut&&Mo(K,st),Ae}for(Ve=v(K,Ve);!it.done;st++,it=ne.next())it=wt(Ve,K,st,it.value,we),it!==null&&(l&&it.alternate!==null&&Ve.delete(it.key===null?st:it.key),Z=O(it,Z,st),Ye===null?Ae=it:Ye.sibling=it,Ye=it);return l&&Ve.forEach(function(eS){return u(K,eS)}),Ut&&Mo(K,st),Ae}function Qr(K,Z,ne,we){if(typeof ne=="object"&&ne!==null&&ne.type===f&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case c:e:{for(var Ae=ne.key,Ye=Z;Ye!==null;){if(Ye.key===Ae){if(Ae=ne.type,Ae===f){if(Ye.tag===7){m(K,Ye.sibling),Z=S(Ye,ne.props.children),Z.return=K,K=Z;break e}}else if(Ye.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===b&&d0(Ae)===Ye.type){m(K,Ye.sibling),Z=S(Ye,ne.props),Z.ref=Yl(K,Ye,ne),Z.return=K,K=Z;break e}m(K,Ye);break}else u(K,Ye);Ye=Ye.sibling}ne.type===f?(Z=Io(ne.props.children,K.mode,we,ne.key),Z.return=K,K=Z):(we=Eh(ne.type,ne.key,ne.props,null,K.mode,we),we.ref=Yl(K,Z,ne),we.return=K,K=we)}return N(K);case h:e:{for(Ye=ne.key;Z!==null;){if(Z.key===Ye)if(Z.tag===4&&Z.stateNode.containerInfo===ne.containerInfo&&Z.stateNode.implementation===ne.implementation){m(K,Z.sibling),Z=S(Z,ne.children||[]),Z.return=K,K=Z;break e}else{m(K,Z);break}else u(K,Z);Z=Z.sibling}Z=ip(ne,K.mode,we),Z.return=K,K=Z}return N(K);case b:return Ye=ne._init,Qr(K,Z,Ye(ne._payload),we)}if(q(ne))return ke(K,Z,ne,we);if(A(ne))return Fn(K,Z,ne,we);Yu(K,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"?(ne=""+ne,Z!==null&&Z.tag===6?(m(K,Z.sibling),Z=S(Z,ne),Z.return=K,K=Z):(m(K,Z),Z=sp(ne,K.mode,we),Z.return=K,K=Z),N(K)):m(K,Z)}return Qr}var Aa=p0(!0),m0=p0(!1),Xl={},qr=Cr(Xl),Ql=Cr(Xl),ka=Cr(Xl);function Ns(l){if(l===Xl)throw Error(o(174));return l}function Sd(l,u){pt(ka,u),pt(Ql,l),pt(qr,Xl),l=$(u),ht(qr),pt(qr,l)}function Pa(){ht(qr),ht(Ql),ht(ka)}function g0(l){var u=Ns(ka.current),m=Ns(qr.current);u=W(m,l.type,u),m!==u&&(pt(Ql,l),pt(qr,u))}function Td(l){Ql.current===l&&(ht(qr),ht(Ql))}var Lt=Cr(0);function Xu(l){for(var u=l;u!==null;){if(u.tag===13){var m=u.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||ut(m)||Xt(m)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if(u.flags&128)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Cd=[];function Ed(){for(var l=0;l<Cd.length;l++){var u=Cd[l];ve?u._workInProgressVersionPrimary=null:u._workInProgressVersionSecondary=null}Cd.length=0}var Qu=a.ReactCurrentDispatcher,Zr=a.ReactCurrentBatchConfig,Ra=0,Wt=null,Dn=null,xn=null,Ku=!1,Kl=!1,Jl=0,Ew=0;function In(){throw Error(o(321))}function bd(l,u){if(u===null)return!1;for(var m=0;m<u.length&&m<l.length;m++)if(!Ar(l[m],u[m]))return!1;return!0}function Md(l,u,m,v,S,O){if(Ra=O,Wt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Qu.current=l===null||l.memoizedState===null?Aw:kw,l=m(v,S),Kl){O=0;do{if(Kl=!1,Jl=0,25<=O)throw Error(o(301));O+=1,xn=Dn=null,u.updateQueue=null,Qu.current=Pw,l=m(v,S)}while(Kl)}if(Qu.current=nh,u=Dn!==null&&Dn.next!==null,Ra=0,xn=Dn=Wt=null,Ku=!1,u)throw Error(o(300));return l}function Od(){var l=Jl!==0;return Jl=0,l}function fi(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xn===null?Wt.memoizedState=xn=l:xn=xn.next=l,xn}function Ls(){if(Dn===null){var l=Wt.alternate;l=l!==null?l.memoizedState:null}else l=Dn.next;var u=xn===null?Wt.memoizedState:xn.next;if(u!==null)xn=u,Dn=l;else{if(l===null)throw Error(o(310));Dn=l,l={memoizedState:Dn.memoizedState,baseState:Dn.baseState,baseQueue:Dn.baseQueue,queue:Dn.queue,next:null},xn===null?Wt.memoizedState=xn=l:xn=xn.next=l}return xn}function Oo(l,u){return typeof u=="function"?u(l):u}function Ju(l){var u=Ls(),m=u.queue;if(m===null)throw Error(o(311));m.lastRenderedReducer=l;var v=Dn,S=v.baseQueue,O=m.pending;if(O!==null){if(S!==null){var N=S.next;S.next=O.next,O.next=N}v.baseQueue=S=O,m.pending=null}if(S!==null){O=S.next,v=v.baseState;var G=N=null,se=null,me=O;do{var Ee=me.lane;if((Ra&Ee)===Ee)se!==null&&(se=se.next={lane:0,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),v=me.hasEagerState?me.eagerState:l(v,me.action);else{var je={lane:Ee,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null};se===null?(G=se=je,N=v):se=se.next=je,Wt.lanes|=Ee,Ia|=Ee}me=me.next}while(me!==null&&me!==O);se===null?N=v:se.next=G,Ar(v,u.memoizedState)||(Dr=!0),u.memoizedState=v,u.baseState=N,u.baseQueue=se,m.lastRenderedState=v}if(l=m.interleaved,l!==null){S=l;do O=S.lane,Wt.lanes|=O,Ia|=O,S=S.next;while(S!==l)}else S===null&&(m.lanes=0);return[u.memoizedState,m.dispatch]}function $u(l){var u=Ls(),m=u.queue;if(m===null)throw Error(o(311));m.lastRenderedReducer=l;var v=m.dispatch,S=m.pending,O=u.memoizedState;if(S!==null){m.pending=null;var N=S=S.next;do O=l(O,N.action),N=N.next;while(N!==S);Ar(O,u.memoizedState)||(Dr=!0),u.memoizedState=O,u.baseQueue===null&&(u.baseState=O),m.lastRenderedState=O}return[O,v]}function v0(){}function _0(l,u){var m=Wt,v=Ls(),S=u(),O=!Ar(v.memoizedState,S);if(O&&(v.memoizedState=S,Dr=!0),v=v.queue,ec(w0.bind(null,m,v,l),[l]),v.getSnapshot!==u||O||xn!==null&&xn.memoizedState.tag&1){if(m.flags|=2048,$l(9,x0.bind(null,m,v,S,u),void 0,null),an===null)throw Error(o(349));Ra&30||y0(m,u,S)}return S}function y0(l,u,m){l.flags|=16384,l={getSnapshot:u,value:m},u=Wt.updateQueue,u===null?(u={lastEffect:null,stores:null},Wt.updateQueue=u,u.stores=[l]):(m=u.stores,m===null?u.stores=[l]:m.push(l))}function x0(l,u,m,v){u.value=m,u.getSnapshot=v,S0(u)&&Yr(l,1,-1)}function w0(l,u,m){return m(function(){S0(u)&&Yr(l,1,-1)})}function S0(l){var u=l.getSnapshot;l=l.value;try{var m=u();return!Ar(l,m)}catch{return!0}}function Ad(l){var u=fi();return typeof l=="function"&&(l=l()),u.memoizedState=u.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:l},u.queue=l,l=l.dispatch=Ow.bind(null,Wt,l),[u.memoizedState,l]}function $l(l,u,m,v){return l={tag:l,create:u,destroy:m,deps:v,next:null},u=Wt.updateQueue,u===null?(u={lastEffect:null,stores:null},Wt.updateQueue=u,u.lastEffect=l.next=l):(m=u.lastEffect,m===null?u.lastEffect=l.next=l:(v=m.next,m.next=l,l.next=v,u.lastEffect=l)),l}function T0(){return Ls().memoizedState}function eh(l,u,m,v){var S=fi();Wt.flags|=l,S.memoizedState=$l(1|u,m,void 0,v===void 0?null:v)}function th(l,u,m,v){var S=Ls();v=v===void 0?null:v;var O=void 0;if(Dn!==null){var N=Dn.memoizedState;if(O=N.destroy,v!==null&&bd(v,N.deps)){S.memoizedState=$l(u,m,O,v);return}}Wt.flags|=l,S.memoizedState=$l(1|u,m,O,v)}function kd(l,u){return eh(8390656,8,l,u)}function ec(l,u){return th(2048,8,l,u)}function C0(l,u){return th(4,2,l,u)}function E0(l,u){return th(4,4,l,u)}function b0(l,u){if(typeof u=="function")return l=l(),u(l),function(){u(null)};if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function M0(l,u,m){return m=m!=null?m.concat([l]):null,th(4,4,b0.bind(null,u,l),m)}function Pd(){}function O0(l,u){var m=Ls();u=u===void 0?null:u;var v=m.memoizedState;return v!==null&&u!==null&&bd(u,v[1])?v[0]:(m.memoizedState=[l,u],l)}function A0(l,u){var m=Ls();u=u===void 0?null:u;var v=m.memoizedState;return v!==null&&u!==null&&bd(u,v[1])?v[0]:(l=l(),m.memoizedState=[l,u],l)}function bw(l,u){var m=Je;Je=m!==0&&4>m?m:4,l(!0);var v=Zr.transition;Zr.transition={};try{l(!1),u()}finally{Je=m,Zr.transition=v}}function k0(){return Ls().memoizedState}function Mw(l,u,m){var v=Vi(l);m={lane:v,action:m,hasEagerState:!1,eagerState:null,next:null},P0(l)?R0(u,m):(D0(l,u,m),m=er(),l=Yr(l,v,m),l!==null&&I0(l,u,v))}function Ow(l,u,m){var v=Vi(l),S={lane:v,action:m,hasEagerState:!1,eagerState:null,next:null};if(P0(l))R0(u,S);else{D0(l,u,S);var O=l.alternate;if(l.lanes===0&&(O===null||O.lanes===0)&&(O=u.lastRenderedReducer,O!==null))try{var N=u.lastRenderedState,G=O(N,m);if(S.hasEagerState=!0,S.eagerState=G,Ar(G,N))return}catch{}finally{}m=er(),l=Yr(l,v,m),l!==null&&I0(l,u,v)}}function P0(l){var u=l.alternate;return l===Wt||u!==null&&u===Wt}function R0(l,u){Kl=Ku=!0;var m=l.pending;m===null?u.next=u:(u.next=m.next,m.next=u),l.pending=u}function D0(l,u,m){an!==null&&l.mode&1&&!(Ke&2)?(l=u.interleaved,l===null?(m.next=m,kr===null?kr=[u]:kr.push(u)):(m.next=l.next,l.next=m),u.interleaved=m):(l=u.pending,l===null?m.next=m:(m.next=l.next,l.next=m),u.pending=m)}function I0(l,u,m){if(m&4194240){var v=u.lanes;v&=l.pendingLanes,m|=v,u.lanes=m,Us(l,m)}}var nh={readContext:Kt,useCallback:In,useContext:In,useEffect:In,useImperativeHandle:In,useInsertionEffect:In,useLayoutEffect:In,useMemo:In,useReducer:In,useRef:In,useState:In,useDebugValue:In,useDeferredValue:In,useTransition:In,useMutableSource:In,useSyncExternalStore:In,useId:In,unstable_isNewReconciler:!1},Aw={readContext:Kt,useCallback:function(l,u){return fi().memoizedState=[l,u===void 0?null:u],l},useContext:Kt,useEffect:kd,useImperativeHandle:function(l,u,m){return m=m!=null?m.concat([l]):null,eh(4194308,4,b0.bind(null,u,l),m)},useLayoutEffect:function(l,u){return eh(4194308,4,l,u)},useInsertionEffect:function(l,u){return eh(4,2,l,u)},useMemo:function(l,u){var m=fi();return u=u===void 0?null:u,l=l(),m.memoizedState=[l,u],l},useReducer:function(l,u,m){var v=fi();return u=m!==void 0?m(u):u,v.memoizedState=v.baseState=u,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:u},v.queue=l,l=l.dispatch=Mw.bind(null,Wt,l),[v.memoizedState,l]},useRef:function(l){var u=fi();return l={current:l},u.memoizedState=l},useState:Ad,useDebugValue:Pd,useDeferredValue:function(l){var u=Ad(l),m=u[0],v=u[1];return kd(function(){var S=Zr.transition;Zr.transition={};try{v(l)}finally{Zr.transition=S}},[l]),m},useTransition:function(){var l=Ad(!1),u=l[0];return l=bw.bind(null,l[1]),fi().memoizedState=l,[u,l]},useMutableSource:function(){},useSyncExternalStore:function(l,u,m){var v=Wt,S=fi();if(Ut){if(m===void 0)throw Error(o(407));m=m()}else{if(m=u(),an===null)throw Error(o(349));Ra&30||y0(v,u,m)}S.memoizedState=m;var O={value:m,getSnapshot:u};return S.queue=O,kd(w0.bind(null,v,O,l),[l]),v.flags|=2048,$l(9,x0.bind(null,v,O,m,u),void 0,null),m},useId:function(){var l=fi(),u=an.identifierPrefix;if(Ut){var m=hi,v=ui;m=(v&~(1<<32-Mr(v)-1)).toString(32)+m,u=":"+u+"R"+m,m=Jl++,0<m&&(u+="H"+m.toString(32)),u+=":"}else m=Ew++,u=":"+u+"r"+m.toString(32)+":";return l.memoizedState=u},unstable_isNewReconciler:!1},kw={readContext:Kt,useCallback:O0,useContext:Kt,useEffect:ec,useImperativeHandle:M0,useInsertionEffect:C0,useLayoutEffect:E0,useMemo:A0,useReducer:Ju,useRef:T0,useState:function(){return Ju(Oo)},useDebugValue:Pd,useDeferredValue:function(l){var u=Ju(Oo),m=u[0],v=u[1];return ec(function(){var S=Zr.transition;Zr.transition={};try{v(l)}finally{Zr.transition=S}},[l]),m},useTransition:function(){var l=Ju(Oo)[0],u=Ls().memoizedState;return[l,u]},useMutableSource:v0,useSyncExternalStore:_0,useId:k0,unstable_isNewReconciler:!1},Pw={readContext:Kt,useCallback:O0,useContext:Kt,useEffect:ec,useImperativeHandle:M0,useInsertionEffect:C0,useLayoutEffect:E0,useMemo:A0,useReducer:$u,useRef:T0,useState:function(){return $u(Oo)},useDebugValue:Pd,useDeferredValue:function(l){var u=$u(Oo),m=u[0],v=u[1];return ec(function(){var S=Zr.transition;Zr.transition={};try{v(l)}finally{Zr.transition=S}},[l]),m},useTransition:function(){var l=$u(Oo)[0],u=Ls().memoizedState;return[l,u]},useMutableSource:v0,useSyncExternalStore:_0,useId:k0,unstable_isNewReconciler:!1};function Rd(l,u){try{var m="",v=u;do m+=Eo(v),v=v.return;while(v);var S=m}catch(O){S=`
Error generating stack: `+O.message+`
`+O.stack}return{value:l,source:u,stack:S}}function Dd(l,u){try{console.error(u.value)}catch(m){setTimeout(function(){throw m})}}var Rw=typeof WeakMap=="function"?WeakMap:Map;function U0(l,u,m){m=ci(-1,m),m.tag=3,m.payload={element:null};var v=u.value;return m.callback=function(){_h||(_h=!0,Kd=v),Dd(l,u)},m}function F0(l,u,m){m=ci(-1,m),m.tag=3;var v=l.type.getDerivedStateFromError;if(typeof v=="function"){var S=u.value;m.payload=function(){return v(S)},m.callback=function(){Dd(l,u)}}var O=l.stateNode;return O!==null&&typeof O.componentDidCatch=="function"&&(m.callback=function(){Dd(l,u),typeof v!="function"&&(Bi===null?Bi=new Set([this]):Bi.add(this));var N=u.stack;this.componentDidCatch(u.value,{componentStack:N!==null?N:""})}),m}function N0(l,u,m){var v=l.pingCache;if(v===null){v=l.pingCache=new Rw;var S=new Set;v.set(u,S)}else S=v.get(u),S===void 0&&(S=new Set,v.set(u,S));S.has(m)||(S.add(m),l=qw.bind(null,l,u,m),u.then(l,l))}function L0(l){do{var u;if((u=l.tag===13)&&(u=l.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return l;l=l.return}while(l!==null);return null}function z0(l,u,m,v,S){return l.mode&1?(l.flags|=65536,l.lanes=S,l):(l===u?l.flags|=65536:(l.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(u=ci(-1,1),u.tag=2,zi(m,u))),m.lanes|=1),l)}function zs(l){l.flags|=4}function B0(l,u){if(l!==null&&l.child===u.child)return!0;if(u.flags&16)return!1;for(l=u.child;l!==null;){if(l.flags&12854||l.subtreeFlags&12854)return!1;l=l.sibling}return!0}var tc,nc,rh,sh;if(ae)tc=function(l,u){for(var m=u.child;m!==null;){if(m.tag===5||m.tag===6)B(l,m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===u)break;for(;m.sibling===null;){if(m.return===null||m.return===u)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},nc=function(){},rh=function(l,u,m,v,S){if(l=l.memoizedProps,l!==v){var O=u.stateNode,N=Ns(qr.current);m=te(O,m,l,v,S,N),(u.updateQueue=m)&&zs(u)}},sh=function(l,u,m,v){m!==v&&zs(u)};else if(le){tc=function(l,u,m,v){for(var S=u.child;S!==null;){if(S.tag===5){var O=S.stateNode;m&&v&&(O=Ii(O,S.type,S.memoizedProps,S)),B(l,O)}else if(S.tag===6)O=S.stateNode,m&&v&&(O=Dt(O,S.memoizedProps,S)),B(l,O);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)O=S.child,O!==null&&(O.return=S),tc(l,S,!0,!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===u)break;for(;S.sibling===null;){if(S.return===null||S.return===u)return;S=S.return}S.sibling.return=S.return,S=S.sibling}};var j0=function(l,u,m,v){for(var S=u.child;S!==null;){if(S.tag===5){var O=S.stateNode;m&&v&&(O=Ii(O,S.type,S.memoizedProps,S)),qn(l,O)}else if(S.tag===6)O=S.stateNode,m&&v&&(O=Dt(O,S.memoizedProps,S)),qn(l,O);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)O=S.child,O!==null&&(O.return=S),j0(l,S,!0,!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===u)break;for(;S.sibling===null;){if(S.return===null||S.return===u)return;S=S.return}S.sibling.return=S.return,S=S.sibling}};nc=function(l,u){var m=u.stateNode;if(!B0(l,u)){l=m.containerInfo;var v=hs(l);j0(v,u,!1,!1),m.pendingChildren=v,zs(u),Zn(l,v)}},rh=function(l,u,m,v,S){var O=l.stateNode,N=l.memoizedProps;if((l=B0(l,u))&&N===v)u.stateNode=O;else{var G=u.stateNode,se=Ns(qr.current),me=null;N!==v&&(me=te(G,m,N,v,S,se)),l&&me===null?u.stateNode=O:(O=ni(O,me,m,N,v,u,l,G),J(O,m,v,S,se)&&zs(u),u.stateNode=O,l?zs(u):tc(O,u,!1,!1))}},sh=function(l,u,m,v){m!==v?(l=Ns(ka.current),m=Ns(qr.current),u.stateNode=oe(v,l,m,u),zs(u)):u.stateNode=l.stateNode}}else nc=function(){},rh=function(){},sh=function(){};function rc(l,u){if(!Ut)switch(l.tailMode){case"hidden":u=l.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?l.tail=null:m.sibling=null;break;case"collapsed":m=l.tail;for(var v=null;m!==null;)m.alternate!==null&&(v=m),m=m.sibling;v===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:v.sibling=null}}function Un(l){var u=l.alternate!==null&&l.alternate.child===l.child,m=0,v=0;if(u)for(var S=l.child;S!==null;)m|=S.lanes|S.childLanes,v|=S.subtreeFlags&14680064,v|=S.flags&14680064,S.return=l,S=S.sibling;else for(S=l.child;S!==null;)m|=S.lanes|S.childLanes,v|=S.subtreeFlags,v|=S.flags,S.return=l,S=S.sibling;return l.subtreeFlags|=v,l.childLanes=m,u}function Dw(l,u,m){var v=u.pendingProps;switch(_d(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Un(u),null;case 1:return vn(u.type)&&ds(),Un(u),null;case 3:return v=u.stateNode,Pa(),ht(gn),ht(hn),Ed(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(l===null||l.child===null)&&(Zl(u)?zs(u):l===null||l.memoizedState.isDehydrated&&!(u.flags&256)||(u.flags|=1024,ms!==null&&(ep(ms),ms=null))),nc(l,u),Un(u),null;case 5:Td(u),m=Ns(ka.current);var S=u.type;if(l!==null&&u.stateNode!=null)rh(l,u,S,v,m),l.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!v){if(u.stateNode===null)throw Error(o(166));return Un(u),null}if(l=Ns(qr.current),Zl(u)){if(!be)throw Error(o(175));l=Tr(u.stateNode,u.type,u.memoizedProps,m,l,u,!ql),u.updateQueue=l,l!==null&&zs(u)}else{var O=L(S,v,m,l,u);tc(O,u,!1,!1),u.stateNode=O,J(O,S,v,m,l)&&zs(u)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return Un(u),null;case 6:if(l&&u.stateNode!=null)sh(l,u,l.memoizedProps,v);else{if(typeof v!="string"&&u.stateNode===null)throw Error(o(166));if(l=Ns(ka.current),m=Ns(qr.current),Zl(u)){if(!be)throw Error(o(176));if(l=u.stateNode,v=u.memoizedProps,(m=ri(l,v,u,!ql))&&(S=Pr,S!==null))switch(O=(S.mode&1)!==0,S.tag){case 3:Fl(S.stateNode.containerInfo,l,v,O);break;case 5:Nl(S.type,S.memoizedProps,S.stateNode,l,v,O)}m&&zs(u)}else u.stateNode=oe(v,l,m,u)}return Un(u),null;case 13:if(ht(Lt),v=u.memoizedState,Ut&&Rr!==null&&u.mode&1&&!(u.flags&128)){for(l=Rr;l;)l=Ht(l);return Oa(),u.flags|=98560,u}if(v!==null&&v.dehydrated!==null){if(v=Zl(u),l===null){if(!v)throw Error(o(318));if(!be)throw Error(o(344));if(l=u.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(o(317));fd(l,u)}else Oa(),!(u.flags&128)&&(u.memoizedState=null),u.flags|=4;return Un(u),null}return ms!==null&&(ep(ms),ms=null),u.flags&128?(u.lanes=m,u):(v=v!==null,m=!1,l===null?Zl(u):m=l.memoizedState!==null,v&&!m&&(u.child.flags|=8192,u.mode&1&&(l===null||Lt.current&1?fn===0&&(fn=3):np())),u.updateQueue!==null&&(u.flags|=4),Un(u),null);case 4:return Pa(),nc(l,u),l===null&&ee(u.stateNode.containerInfo),Un(u),null;case 10:return yn(u.type._context),Un(u),null;case 17:return vn(u.type)&&ds(),Un(u),null;case 19:if(ht(Lt),S=u.memoizedState,S===null)return Un(u),null;if(v=(u.flags&128)!==0,O=S.rendering,O===null)if(v)rc(S,!1);else{if(fn!==0||l!==null&&l.flags&128)for(l=u.child;l!==null;){if(O=Xu(l),O!==null){for(u.flags|=128,rc(S,!1),l=O.updateQueue,l!==null&&(u.updateQueue=l,u.flags|=4),u.subtreeFlags=0,l=m,v=u.child;v!==null;)m=v,S=l,m.flags&=14680066,O=m.alternate,O===null?(m.childLanes=0,m.lanes=S,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=O.childLanes,m.lanes=O.lanes,m.child=O.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=O.memoizedProps,m.memoizedState=O.memoizedState,m.updateQueue=O.updateQueue,m.type=O.type,S=O.dependencies,m.dependencies=S===null?null:{lanes:S.lanes,firstContext:S.firstContext}),v=v.sibling;return pt(Lt,Lt.current&1|2),u.child}l=l.sibling}S.tail!==null&&Nt()>Qd&&(u.flags|=128,v=!0,rc(S,!1),u.lanes=4194304)}else{if(!v)if(l=Xu(O),l!==null){if(u.flags|=128,v=!0,l=l.updateQueue,l!==null&&(u.updateQueue=l,u.flags|=4),rc(S,!0),S.tail===null&&S.tailMode==="hidden"&&!O.alternate&&!Ut)return Un(u),null}else 2*Nt()-S.renderingStartTime>Qd&&m!==1073741824&&(u.flags|=128,v=!0,rc(S,!1),u.lanes=4194304);S.isBackwards?(O.sibling=u.child,u.child=O):(l=S.last,l!==null?l.sibling=O:u.child=O,S.last=O)}return S.tail!==null?(u=S.tail,S.rendering=u,S.tail=u.sibling,S.renderingStartTime=Nt(),u.sibling=null,l=Lt.current,pt(Lt,v?l&1|2:l&1),u):(Un(u),null);case 22:case 23:return tp(),v=u.memoizedState!==null,l!==null&&l.memoizedState!==null!==v&&(u.flags|=8192),v&&u.mode&1?Ir&1073741824&&(Un(u),ae&&u.subtreeFlags&6&&(u.flags|=8192)):Un(u),null;case 24:return null;case 25:return null}throw Error(o(156,u.tag))}var Iw=a.ReactCurrentOwner,Dr=!1;function $n(l,u,m,v){u.child=l===null?m0(u,null,m,v):Aa(u,l.child,m,v)}function V0(l,u,m,v,S){m=m.render;var O=u.ref;return Qt(u,S),v=Md(l,u,m,v,O,S),m=Od(),l!==null&&!Dr?(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~S,di(l,u,S)):(Ut&&m&&vd(u),u.flags|=1,$n(l,u,v,S),u.child)}function G0(l,u,m,v,S){if(l===null){var O=m.type;return typeof O=="function"&&!rp(O)&&O.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(u.tag=15,u.type=O,H0(l,u,O,v,S)):(l=Eh(m.type,null,v,u,u.mode,S),l.ref=u.ref,l.return=u,u.child=l)}if(O=l.child,!(l.lanes&S)){var N=O.memoizedProps;if(m=m.compare,m=m!==null?m:Co,m(N,v)&&l.ref===u.ref)return di(l,u,S)}return u.flags|=1,l=Hi(O,v),l.ref=u.ref,l.return=u,u.child=l}function H0(l,u,m,v,S){if(l!==null&&Co(l.memoizedProps,v)&&l.ref===u.ref)if(Dr=!1,(l.lanes&S)!==0)l.flags&131072&&(Dr=!0);else return u.lanes=l.lanes,di(l,u,S);return Id(l,u,m,v,S)}function W0(l,u,m){var v=u.pendingProps,S=v.children,O=l!==null?l.memoizedState:null;if(v.mode==="hidden")if(!(u.mode&1))u.memoizedState={baseLanes:0,cachePool:null},pt(Da,Ir),Ir|=m;else if(m&1073741824)u.memoizedState={baseLanes:0,cachePool:null},v=O!==null?O.baseLanes:m,pt(Da,Ir),Ir|=v;else return l=O!==null?O.baseLanes|m:m,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:l,cachePool:null},u.updateQueue=null,pt(Da,Ir),Ir|=l,null;else O!==null?(v=O.baseLanes|m,u.memoizedState=null):v=m,pt(Da,Ir),Ir|=v;return $n(l,u,S,m),u.child}function q0(l,u){var m=u.ref;(l===null&&m!==null||l!==null&&l.ref!==m)&&(u.flags|=512,u.flags|=2097152)}function Id(l,u,m,v,S){var O=vn(m)?Ds:hn.current;return O=Vr(u,O),Qt(u,S),m=Md(l,u,m,v,O,S),v=Od(),l!==null&&!Dr?(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~S,di(l,u,S)):(Ut&&v&&vd(u),u.flags|=1,$n(l,u,m,S),u.child)}function Z0(l,u,m,v,S){if(vn(m)){var O=!0;Ui(u)}else O=!1;if(Qt(u,S),u.stateNode===null)l!==null&&(l.alternate=null,u.alternate=null,u.flags|=2),a0(u,m,v),gd(u,m,v,S),v=!0;else if(l===null){var N=u.stateNode,G=u.memoizedProps;N.props=G;var se=N.context,me=m.contextType;typeof me=="object"&&me!==null?me=Kt(me):(me=vn(m)?Ds:hn.current,me=Vr(u,me));var Ee=m.getDerivedStateFromProps,je=typeof Ee=="function"||typeof N.getSnapshotBeforeUpdate=="function";je||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(G!==v||se!==me)&&l0(u,N,v,me),Li=!1;var De=u.memoizedState;N.state=De,Hu(u,v,N,S),se=u.memoizedState,G!==v||De!==se||gn.current||Li?(typeof Ee=="function"&&(md(u,m,Ee,v),se=u.memoizedState),(G=Li||o0(u,m,G,v,De,se,me))?(je||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(u.flags|=4194308)):(typeof N.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=v,u.memoizedState=se),N.props=v,N.state=se,N.context=me,v=G):(typeof N.componentDidMount=="function"&&(u.flags|=4194308),v=!1)}else{N=u.stateNode,n0(l,u),G=u.memoizedProps,me=u.type===u.elementType?G:Kn(u.type,G),N.props=me,je=u.pendingProps,De=N.context,se=m.contextType,typeof se=="object"&&se!==null?se=Kt(se):(se=vn(m)?Ds:hn.current,se=Vr(u,se));var wt=m.getDerivedStateFromProps;(Ee=typeof wt=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(G!==je||De!==se)&&l0(u,N,v,se),Li=!1,De=u.memoizedState,N.state=De,Hu(u,v,N,S);var ke=u.memoizedState;G!==je||De!==ke||gn.current||Li?(typeof wt=="function"&&(md(u,m,wt,v),ke=u.memoizedState),(me=Li||o0(u,m,me,v,De,ke,se)||!1)?(Ee||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(v,ke,se),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(v,ke,se)),typeof N.componentDidUpdate=="function"&&(u.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof N.componentDidUpdate!="function"||G===l.memoizedProps&&De===l.memoizedState||(u.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||G===l.memoizedProps&&De===l.memoizedState||(u.flags|=1024),u.memoizedProps=v,u.memoizedState=ke),N.props=v,N.state=ke,N.context=se,v=me):(typeof N.componentDidUpdate!="function"||G===l.memoizedProps&&De===l.memoizedState||(u.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||G===l.memoizedProps&&De===l.memoizedState||(u.flags|=1024),v=!1)}return Ud(l,u,m,v,O,S)}function Ud(l,u,m,v,S,O){q0(l,u);var N=(u.flags&128)!==0;if(!v&&!N)return S&&br(u,m,!1),di(l,u,O);v=u.stateNode,Iw.current=u;var G=N&&typeof m.getDerivedStateFromError!="function"?null:v.render();return u.flags|=1,l!==null&&N?(u.child=Aa(u,l.child,null,O),u.child=Aa(u,null,G,O)):$n(l,u,G,O),u.memoizedState=v.state,S&&br(u,m,!0),u.child}function Y0(l){var u=l.stateNode;u.pendingContext?ya(l,u.pendingContext,u.pendingContext!==u.context):u.context&&ya(l,u.context,!1),Sd(l,u.containerInfo)}function X0(l,u,m,v,S){return Oa(),wd(S),u.flags|=256,$n(l,u,m,v),u.child}var ih={dehydrated:null,treeContext:null,retryLane:0};function oh(l){return{baseLanes:l,cachePool:null}}function Q0(l,u,m){var v=u.pendingProps,S=Lt.current,O=!1,N=(u.flags&128)!==0,G;if((G=N)||(G=l!==null&&l.memoizedState===null?!1:(S&2)!==0),G?(O=!0,u.flags&=-129):(l===null||l.memoizedState!==null)&&(S|=1),pt(Lt,S&1),l===null)return xd(u),l=u.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?(u.mode&1?Xt(l)?u.lanes=8:u.lanes=1073741824:u.lanes=1,null):(S=v.children,l=v.fallback,O?(v=u.mode,O=u.child,S={mode:"hidden",children:S},!(v&1)&&O!==null?(O.childLanes=0,O.pendingProps=S):O=bh(S,v,0,null),l=Io(l,v,m,null),O.return=u,l.return=u,O.sibling=l,u.child=O,u.child.memoizedState=oh(m),u.memoizedState=ih,l):Fd(u,S));if(S=l.memoizedState,S!==null){if(G=S.dehydrated,G!==null){if(N)return u.flags&256?(u.flags&=-257,ah(l,u,m,Error(o(422)))):u.memoizedState!==null?(u.child=l.child,u.flags|=128,null):(O=v.fallback,S=u.mode,v=bh({mode:"visible",children:v.children},S,0,null),O=Io(O,S,m,null),O.flags|=2,v.return=u,O.return=u,v.sibling=O,u.child=v,u.mode&1&&Aa(u,l.child,null,m),u.child.memoizedState=oh(m),u.memoizedState=ih,O);if(!(u.mode&1))u=ah(l,u,m,null);else if(Xt(G))u=ah(l,u,m,Error(o(419)));else if(v=(m&l.childLanes)!==0,Dr||v){if(v=an,v!==null){switch(m&-m){case 4:O=2;break;case 16:O=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:O=32;break;case 536870912:O=268435456;break;default:O=0}v=O&(v.suspendedLanes|m)?0:O,v!==0&&v!==S.retryLane&&(S.retryLane=v,Yr(l,v,-1))}np(),u=ah(l,u,m,Error(o(421)))}else ut(G)?(u.flags|=128,u.child=l.child,u=Zw.bind(null,l),ar(G,u),u=null):(m=S.treeContext,be&&(Rr=ks(G),Pr=u,Ut=!0,ms=null,ql=!1,m!==null&&(Hr[Wr++]=ui,Hr[Wr++]=hi,Hr[Wr++]=bo,ui=m.id,hi=m.overflow,bo=u)),u=Fd(u,u.pendingProps.children),u.flags|=4096);return u}return O?(v=J0(l,u,v.children,v.fallback,m),O=u.child,S=l.child.memoizedState,O.memoizedState=S===null?oh(m):{baseLanes:S.baseLanes|m,cachePool:null},O.childLanes=l.childLanes&~m,u.memoizedState=ih,v):(m=K0(l,u,v.children,m),u.memoizedState=null,m)}return O?(v=J0(l,u,v.children,v.fallback,m),O=u.child,S=l.child.memoizedState,O.memoizedState=S===null?oh(m):{baseLanes:S.baseLanes|m,cachePool:null},O.childLanes=l.childLanes&~m,u.memoizedState=ih,v):(m=K0(l,u,v.children,m),u.memoizedState=null,m)}function Fd(l,u){return u=bh({mode:"visible",children:u},l.mode,0,null),u.return=l,l.child=u}function K0(l,u,m,v){var S=l.child;return l=S.sibling,m=Hi(S,{mode:"visible",children:m}),!(u.mode&1)&&(m.lanes=v),m.return=u,m.sibling=null,l!==null&&(v=u.deletions,v===null?(u.deletions=[l],u.flags|=16):v.push(l)),u.child=m}function J0(l,u,m,v,S){var O=u.mode;l=l.child;var N=l.sibling,G={mode:"hidden",children:m};return!(O&1)&&u.child!==l?(m=u.child,m.childLanes=0,m.pendingProps=G,u.deletions=null):(m=Hi(l,G),m.subtreeFlags=l.subtreeFlags&14680064),N!==null?v=Hi(N,v):(v=Io(v,O,S,null),v.flags|=2),v.return=u,m.return=u,m.sibling=v,u.child=m,v}function ah(l,u,m,v){return v!==null&&wd(v),Aa(u,l.child,null,m),l=Fd(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function $0(l,u,m){l.lanes|=u;var v=l.alternate;v!==null&&(v.lanes|=u),Jn(l.return,u,m)}function Nd(l,u,m,v,S){var O=l.memoizedState;O===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:v,tail:m,tailMode:S}:(O.isBackwards=u,O.rendering=null,O.renderingStartTime=0,O.last=v,O.tail=m,O.tailMode=S)}function e1(l,u,m){var v=u.pendingProps,S=v.revealOrder,O=v.tail;if($n(l,u,v.children,m),v=Lt.current,v&2)v=v&1|2,u.flags|=128;else{if(l!==null&&l.flags&128)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&$0(l,m,u);else if(l.tag===19)$0(l,m,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}v&=1}if(pt(Lt,v),!(u.mode&1))u.memoizedState=null;else switch(S){case"forwards":for(m=u.child,S=null;m!==null;)l=m.alternate,l!==null&&Xu(l)===null&&(S=m),m=m.sibling;m=S,m===null?(S=u.child,u.child=null):(S=m.sibling,m.sibling=null),Nd(u,!1,S,m,O);break;case"backwards":for(m=null,S=u.child,u.child=null;S!==null;){if(l=S.alternate,l!==null&&Xu(l)===null){u.child=S;break}l=S.sibling,S.sibling=m,m=S,S=l}Nd(u,!0,m,null,O);break;case"together":Nd(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function di(l,u,m){if(l!==null&&(u.dependencies=l.dependencies),Ia|=u.lanes,!(m&u.childLanes))return null;if(l!==null&&u.child!==l.child)throw Error(o(153));if(u.child!==null){for(l=u.child,m=Hi(l,l.pendingProps),u.child=m,m.return=u;l.sibling!==null;)l=l.sibling,m=m.sibling=Hi(l,l.pendingProps),m.return=u;m.sibling=null}return u.child}function Uw(l,u,m){switch(u.tag){case 3:Y0(u),Oa();break;case 5:g0(u);break;case 1:vn(u.type)&&Ui(u);break;case 4:Sd(u,u.stateNode.containerInfo);break;case 10:Vu(u,u.type._context,u.memoizedProps.value);break;case 13:var v=u.memoizedState;if(v!==null)return v.dehydrated!==null?(pt(Lt,Lt.current&1),u.flags|=128,null):m&u.child.childLanes?Q0(l,u,m):(pt(Lt,Lt.current&1),l=di(l,u,m),l!==null?l.sibling:null);pt(Lt,Lt.current&1);break;case 19:if(v=(m&u.childLanes)!==0,l.flags&128){if(v)return e1(l,u,m);u.flags|=128}var S=u.memoizedState;if(S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),pt(Lt,Lt.current),v)break;return null;case 22:case 23:return u.lanes=0,W0(l,u,m)}return di(l,u,m)}function Fw(l,u){switch(_d(u),u.tag){case 1:return vn(u.type)&&ds(),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return Pa(),ht(gn),ht(hn),Ed(),l=u.flags,l&65536&&!(l&128)?(u.flags=l&-65537|128,u):null;case 5:return Td(u),null;case 13:if(ht(Lt),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(o(340));Oa()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return ht(Lt),null;case 4:return Pa(),null;case 10:return yn(u.type._context),null;case 22:case 23:return tp(),null;case 24:return null;default:return null}}var lh=!1,Ao=!1,Nw=typeof WeakSet=="function"?WeakSet:Set,_e=null;function ch(l,u){var m=l.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(v){hr(l,u,v)}else m.current=null}function Ld(l,u,m){try{m()}catch(v){hr(l,u,v)}}var t1=!1;function Lw(l,u){for(V(l.containerInfo),_e=u;_e!==null;)if(l=_e,u=l.child,(l.subtreeFlags&1028)!==0&&u!==null)u.return=l,_e=u;else for(;_e!==null;){l=_e;try{var m=l.alternate;if(l.flags&1024)switch(l.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,S=m.memoizedState,O=l.stateNode,N=O.getSnapshotBeforeUpdate(l.elementType===l.type?v:Kn(l.type,v),S);O.__reactInternalSnapshotBeforeUpdate=N}break;case 3:ae&&us(l.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(G){hr(l,l.return,G)}if(u=l.sibling,u!==null){u.return=l.return,_e=u;break}_e=l.return}return m=t1,t1=!1,m}function ko(l,u,m){var v=u.updateQueue;if(v=v!==null?v.lastEffect:null,v!==null){var S=v=v.next;do{if((S.tag&l)===l){var O=S.destroy;S.destroy=void 0,O!==void 0&&Ld(u,m,O)}S=S.next}while(S!==v)}}function sc(l,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var m=u=u.next;do{if((m.tag&l)===l){var v=m.create;m.destroy=v()}m=m.next}while(m!==u)}}function zd(l){var u=l.ref;if(u!==null){var m=l.stateNode;switch(l.tag){case 5:l=Y(m);break;default:l=m}typeof u=="function"?u(l):u.current=l}}function n1(l,u,m){if(Or&&typeof Or.onCommitFiberUnmount=="function")try{Or.onCommitFiberUnmount(So,u)}catch{}switch(u.tag){case 0:case 11:case 14:case 15:if(l=u.updateQueue,l!==null&&(l=l.lastEffect,l!==null)){var v=l=l.next;do{var S=v,O=S.destroy;S=S.tag,O!==void 0&&(S&2||S&4)&&Ld(u,m,O),v=v.next}while(v!==l)}break;case 1:if(ch(u,m),l=u.stateNode,typeof l.componentWillUnmount=="function")try{l.props=u.memoizedProps,l.state=u.memoizedState,l.componentWillUnmount()}catch(N){hr(u,m,N)}break;case 5:ch(u,m);break;case 4:ae?l1(l,u,m):le&&le&&(u=u.stateNode.containerInfo,m=hs(u),kt(u,m))}}function r1(l,u,m){for(var v=u;;)if(n1(l,v,m),v.child===null||ae&&v.tag===4){if(v===u)break;for(;v.sibling===null;){if(v.return===null||v.return===u)return;v=v.return}v.sibling.return=v.return,v=v.sibling}else v.child.return=v,v=v.child}function s1(l){var u=l.alternate;u!==null&&(l.alternate=null,s1(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&xe(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function i1(l){return l.tag===5||l.tag===3||l.tag===4}function o1(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||i1(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function a1(l){if(ae){e:{for(var u=l.return;u!==null;){if(i1(u))break e;u=u.return}throw Error(o(160))}var m=u;switch(m.tag){case 5:u=m.stateNode,m.flags&32&&(dt(u),m.flags&=-33),m=o1(l),jd(l,m,u);break;case 3:case 4:u=m.stateNode.containerInfo,m=o1(l),Bd(l,m,u);break;default:throw Error(o(161))}}}function Bd(l,u,m){var v=l.tag;if(v===5||v===6)l=l.stateNode,u?Qe(m,l,u):We(m,l);else if(v!==4&&(l=l.child,l!==null))for(Bd(l,u,m),l=l.sibling;l!==null;)Bd(l,u,m),l=l.sibling}function jd(l,u,m){var v=l.tag;if(v===5||v===6)l=l.stateNode,u?xt(m,l,u):Pe(m,l);else if(v!==4&&(l=l.child,l!==null))for(jd(l,u,m),l=l.sibling;l!==null;)jd(l,u,m),l=l.sibling}function l1(l,u,m){for(var v=u,S=!1,O,N;;){if(!S){S=v.return;e:for(;;){if(S===null)throw Error(o(160));switch(O=S.stateNode,S.tag){case 5:N=!1;break e;case 3:O=O.containerInfo,N=!0;break e;case 4:O=O.containerInfo,N=!0;break e}S=S.return}S=!0}if(v.tag===5||v.tag===6)r1(l,v,m),N?ct(O,v.stateNode):Ne(O,v.stateNode);else if(v.tag===18)N?Fu(O,v.stateNode):dd(O,v.stateNode);else if(v.tag===4){if(v.child!==null){O=v.stateNode.containerInfo,N=!0,v.child.return=v,v=v.child;continue}}else if(n1(l,v,m),v.child!==null){v.child.return=v,v=v.child;continue}if(v===u)break;for(;v.sibling===null;){if(v.return===null||v.return===u)return;v=v.return,v.tag===4&&(S=!1)}v.sibling.return=v.return,v=v.sibling}}function Vd(l,u){if(ae){switch(u.tag){case 0:case 11:case 14:case 15:ko(3,u,u.return),sc(3,u),ko(5,u,u.return);return;case 1:return;case 5:var m=u.stateNode;if(m!=null){var v=u.memoizedProps;l=l!==null?l.memoizedProps:v;var S=u.type,O=u.updateQueue;u.updateQueue=null,O!==null&&Ge(m,O,S,l,v,u)}return;case 6:if(u.stateNode===null)throw Error(o(162));m=u.memoizedProps,rt(u.stateNode,l!==null?l.memoizedProps:m,m);return;case 3:be&&l!==null&&l.memoizedState.isDehydrated&&_o(u.stateNode.containerInfo);return;case 12:return;case 13:uh(u);return;case 19:uh(u);return;case 17:return}throw Error(o(163))}switch(u.tag){case 0:case 11:case 14:case 15:ko(3,u,u.return),sc(3,u),ko(5,u,u.return);return;case 12:return;case 13:uh(u);return;case 19:uh(u);return;case 3:be&&l!==null&&l.memoizedState.isDehydrated&&_o(u.stateNode.containerInfo);break;case 22:case 23:return}e:if(le){switch(u.tag){case 1:case 5:case 6:break e;case 3:case 4:u=u.stateNode,kt(u.containerInfo,u.pendingChildren);break e}throw Error(o(163))}}function uh(l){var u=l.updateQueue;if(u!==null){l.updateQueue=null;var m=l.stateNode;m===null&&(m=l.stateNode=new Nw),u.forEach(function(v){var S=Yw.bind(null,l,v);m.has(v)||(m.add(v),v.then(S,S))})}}function zw(l,u){for(_e=u;_e!==null;){u=_e;var m=u.deletions;if(m!==null)for(var v=0;v<m.length;v++){var S=m[v];try{var O=l;ae?l1(O,S,u):r1(O,S,u);var N=S.alternate;N!==null&&(N.return=null),S.return=null}catch(Ae){hr(S,u,Ae)}}if(m=u.child,u.subtreeFlags&12854&&m!==null)m.return=u,_e=m;else for(;_e!==null;){u=_e;try{var G=u.flags;if(G&32&&ae&&dt(u.stateNode),G&512){var se=u.alternate;if(se!==null){var me=se.ref;me!==null&&(typeof me=="function"?me(null):me.current=null)}}if(G&8192)switch(u.tag){case 13:if(u.memoizedState!==null){var Ee=u.alternate;(Ee===null||Ee.memoizedState===null)&&(Xd=Nt())}break;case 22:var je=u.memoizedState!==null,De=u.alternate,wt=De!==null&&De.memoizedState!==null;if(m=u,ae){e:if(v=m,S=je,O=null,ae)for(var ke=v;;){if(ke.tag===5){if(O===null){O=ke;var Fn=ke.stateNode;S?Gt(Fn):At(ke.stateNode,ke.memoizedProps)}}else if(ke.tag===6){if(O===null){var Qr=ke.stateNode;S?Ze(Qr):bn(Qr,ke.memoizedProps)}}else if((ke.tag!==22&&ke.tag!==23||ke.memoizedState===null||ke===v)&&ke.child!==null){ke.child.return=ke,ke=ke.child;continue}if(ke===v)break;for(;ke.sibling===null;){if(ke.return===null||ke.return===v)break e;O===ke&&(O=null),ke=ke.return}O===ke&&(O=null),ke.sibling.return=ke.return,ke=ke.sibling}}if(je&&!wt&&m.mode&1){_e=m;for(var K=m.child;K!==null;){for(m=_e=K;_e!==null;){v=_e;var Z=v.child;switch(v.tag){case 0:case 11:case 14:case 15:ko(4,v,v.return);break;case 1:ch(v,v.return);var ne=v.stateNode;if(typeof ne.componentWillUnmount=="function"){var we=v.return;try{ne.props=v.memoizedProps,ne.state=v.memoizedState,ne.componentWillUnmount()}catch(Ae){hr(v,we,Ae)}}break;case 5:ch(v,v.return);break;case 22:if(v.memoizedState!==null){h1(m);continue}}Z!==null?(Z.return=v,_e=Z):h1(m)}K=K.sibling}}}switch(G&4102){case 2:a1(u),u.flags&=-3;break;case 6:a1(u),u.flags&=-3,Vd(u.alternate,u);break;case 4096:u.flags&=-4097;break;case 4100:u.flags&=-4097,Vd(u.alternate,u);break;case 4:Vd(u.alternate,u)}}catch(Ae){hr(u,u.return,Ae)}if(m=u.sibling,m!==null){m.return=u.return,_e=m;break}_e=u.return}}}function Bw(l,u,m){_e=l,c1(l)}function c1(l,u,m){for(var v=(l.mode&1)!==0;_e!==null;){var S=_e,O=S.child;if(S.tag===22&&v){var N=S.memoizedState!==null||lh;if(!N){var G=S.alternate,se=G!==null&&G.memoizedState!==null||Ao;G=lh;var me=Ao;if(lh=N,(Ao=se)&&!me)for(_e=S;_e!==null;)N=_e,se=N.child,N.tag===22&&N.memoizedState!==null?f1(S):se!==null?(se.return=N,_e=se):f1(S);for(;O!==null;)_e=O,c1(O),O=O.sibling;_e=S,lh=G,Ao=me}u1(l)}else S.subtreeFlags&8772&&O!==null?(O.return=S,_e=O):u1(l)}}function u1(l){for(;_e!==null;){var u=_e;if(u.flags&8772){var m=u.alternate;try{if(u.flags&8772)switch(u.tag){case 0:case 11:case 15:Ao||sc(5,u);break;case 1:var v=u.stateNode;if(u.flags&4&&!Ao)if(m===null)v.componentDidMount();else{var S=u.elementType===u.type?m.memoizedProps:Kn(u.type,m.memoizedProps);v.componentDidUpdate(S,m.memoizedState,v.__reactInternalSnapshotBeforeUpdate)}var O=u.updateQueue;O!==null&&s0(u,O,v);break;case 3:var N=u.updateQueue;if(N!==null){if(m=null,u.child!==null)switch(u.child.tag){case 5:m=Y(u.child.stateNode);break;case 1:m=u.child.stateNode}s0(u,N,m)}break;case 5:var G=u.stateNode;m===null&&u.flags&4&&Vt(G,u.type,u.memoizedProps,u);break;case 6:break;case 4:break;case 12:break;case 13:if(be&&u.memoizedState===null){var se=u.alternate;if(se!==null){var me=se.memoizedState;if(me!==null){var Ee=me.dehydrated;Ee!==null&&Ul(Ee)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Ao||u.flags&512&&zd(u)}catch(je){hr(u,u.return,je)}}if(u===l){_e=null;break}if(m=u.sibling,m!==null){m.return=u.return,_e=m;break}_e=u.return}}function h1(l){for(;_e!==null;){var u=_e;if(u===l){_e=null;break}var m=u.sibling;if(m!==null){m.return=u.return,_e=m;break}_e=u.return}}function f1(l){for(;_e!==null;){var u=_e;try{switch(u.tag){case 0:case 11:case 15:var m=u.return;try{sc(4,u)}catch(se){hr(u,m,se)}break;case 1:var v=u.stateNode;if(typeof v.componentDidMount=="function"){var S=u.return;try{v.componentDidMount()}catch(se){hr(u,S,se)}}var O=u.return;try{zd(u)}catch(se){hr(u,O,se)}break;case 5:var N=u.return;try{zd(u)}catch(se){hr(u,N,se)}}}catch(se){hr(u,u.return,se)}if(u===l){_e=null;break}var G=u.sibling;if(G!==null){G.return=u.return,_e=G;break}_e=u.return}}var hh=0,fh=1,dh=2,ph=3,mh=4;if(typeof Symbol=="function"&&Symbol.for){var ic=Symbol.for;hh=ic("selector.component"),fh=ic("selector.has_pseudo_class"),dh=ic("selector.role"),ph=ic("selector.test_id"),mh=ic("selector.text")}function Gd(l){var u=Fe(l);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(o(364));return u}if(l=ue(l),l===null)throw Error(o(362));return l.stateNode.current}function Hd(l,u){switch(u.$$typeof){case hh:if(l.type===u.value)return!0;break;case fh:e:{u=u.value,l=[l,0];for(var m=0;m<l.length;){var v=l[m++],S=l[m++],O=u[S];if(v.tag!==5||!Ce(v)){for(;O!=null&&Hd(v,O);)S++,O=u[S];if(S===u.length){u=!0;break e}else for(v=v.child;v!==null;)l.push(v,S),v=v.sibling}}u=!1}return u;case dh:if(l.tag===5&&Te(l.stateNode,u.value))return!0;break;case mh:if((l.tag===5||l.tag===6)&&(l=Se(l),l!==null&&0<=l.indexOf(u.value)))return!0;break;case ph:if(l.tag===5&&(l=l.memoizedProps["data-testname"],typeof l=="string"&&l.toLowerCase()===u.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Wd(l){switch(l.$$typeof){case hh:return"<"+(M(l.value)||"Unknown")+">";case fh:return":has("+(Wd(l)||"")+")";case dh:return'[role="'+l.value+'"]';case mh:return'"'+l.value+'"';case ph:return'[data-testname="'+l.value+'"]';default:throw Error(o(365))}}function d1(l,u){var m=[];l=[l,0];for(var v=0;v<l.length;){var S=l[v++],O=l[v++],N=u[O];if(S.tag!==5||!Ce(S)){for(;N!=null&&Hd(S,N);)O++,N=u[O];if(O===u.length)m.push(S);else for(S=S.child;S!==null;)l.push(S,O),S=S.sibling}}return m}function qd(l,u){if(!pe)throw Error(o(363));l=Gd(l),l=d1(l,u),u=[],l=Array.from(l);for(var m=0;m<l.length;){var v=l[m++];if(v.tag===5)Ce(v)||u.push(v.stateNode);else for(v=v.child;v!==null;)l.push(v),v=v.sibling}return u}var jw=Math.ceil,gh=a.ReactCurrentDispatcher,Zd=a.ReactCurrentOwner,Jt=a.ReactCurrentBatchConfig,Ke=0,an=null,ln=null,On=0,Ir=0,Da=Cr(0),fn=0,oc=null,Ia=0,vh=0,Yd=0,ac=null,cr=null,Xd=0,Qd=1/0;function Ua(){Qd=Nt()+500}var _h=!1,Kd=null,Bi=null,yh=!1,ji=null,xh=0,lc=0,Jd=null,wh=-1,Sh=0;function er(){return Ke&6?Nt():wh!==-1?wh:wh=Nt()}function Vi(l){return l.mode&1?Ke&2&&On!==0?On&-On:To.transition!==null?(Sh===0&&(l=si,si<<=1,!(si&4194240)&&(si=64),Sh=l),Sh):(l=Je,l!==0?l:he()):1}function Yr(l,u,m){if(50<lc)throw lc=0,Jd=null,Error(o(185));var v=Th(l,u);return v===null?null:(Is(v,u,m),(!(Ke&2)||v!==an)&&(v===an&&(!(Ke&2)&&(vh|=u),fn===4&&Gi(v,On)),ur(v,m),u===1&&Ke===0&&!(l.mode&1)&&(Ua(),Fs&&lr())),v)}function Th(l,u){l.lanes|=u;var m=l.alternate;for(m!==null&&(m.lanes|=u),m=l,l=l.return;l!==null;)l.childLanes|=u,m=l.alternate,m!==null&&(m.childLanes|=u),m=l,l=l.return;return m.tag===3?m.stateNode:null}function ur(l,u){var m=l.callbackNode;zl(l,u);var v=xo(l,l===an?On:0);if(v===0)m!==null&&Ta(m),l.callbackNode=null,l.callbackPriority=0;else if(u=v&-v,l.callbackPriority!==u){if(m!=null&&Ta(m),u===1)l.tag===0?Wl(m1.bind(null,l)):Hl(m1.bind(null,l)),ce?de(function(){Ke===0&&lr()}):li(wo,lr),m=null;else{switch(Bl(v)){case 1:m=wo;break;case 4:m=Bu;break;case 16:m=Xn;break;case 536870912:m=Vl;break;default:m=Xn}m=C1(m,p1.bind(null,l))}l.callbackPriority=u,l.callbackNode=m}}function p1(l,u){if(wh=-1,Sh=0,Ke&6)throw Error(o(327));var m=l.callbackNode;if(Do()&&l.callbackNode!==m)return null;var v=xo(l,l===an?On:0);if(v===0)return null;if(v&30||v&l.expiredLanes||u)u=Ch(l,v);else{u=v;var S=Ke;Ke|=2;var O=_1();(an!==l||On!==u)&&(Ua(),Po(l,u));do try{Hw();break}catch(G){v1(l,G)}while(1);Ea(),gh.current=O,Ke=S,ln!==null?u=0:(an=null,On=0,u=fn)}if(u!==0){if(u===2&&(S=ai(l),S!==0&&(v=S,u=$d(l,S))),u===1)throw m=oc,Po(l,0),Gi(l,v),ur(l,Nt()),m;if(u===6)Gi(l,v);else{if(S=l.current.alternate,!(v&30)&&!Vw(S)&&(u=Ch(l,v),u===2&&(O=ai(l),O!==0&&(v=O,u=$d(l,O))),u===1))throw m=oc,Po(l,0),Gi(l,v),ur(l,Nt()),m;switch(l.finishedWork=S,l.finishedLanes=v,u){case 0:case 1:throw Error(o(345));case 2:Ro(l,cr);break;case 3:if(Gi(l,v),(v&130023424)===v&&(u=Xd+500-Nt(),10<u)){if(xo(l,0)!==0)break;if(S=l.suspendedLanes,(S&v)!==v){er(),l.pingedLanes|=l.suspendedLanes&S;break}l.timeoutHandle=re(Ro.bind(null,l,cr),u);break}Ro(l,cr);break;case 4:if(Gi(l,v),(v&4194240)===v)break;for(u=l.eventTimes,S=-1;0<v;){var N=31-Mr(v);O=1<<N,N=u[N],N>S&&(S=N),v&=~O}if(v=S,v=Nt()-v,v=(120>v?120:480>v?480:1080>v?1080:1920>v?1920:3e3>v?3e3:4320>v?4320:1960*jw(v/1960))-v,10<v){l.timeoutHandle=re(Ro.bind(null,l,cr),v);break}Ro(l,cr);break;case 5:Ro(l,cr);break;default:throw Error(o(329))}}}return ur(l,Nt()),l.callbackNode===m?p1.bind(null,l):null}function $d(l,u){var m=ac;return l.current.memoizedState.isDehydrated&&(Po(l,u).flags|=256),l=Ch(l,u),l!==2&&(u=cr,cr=m,u!==null&&ep(u)),l}function ep(l){cr===null?cr=l:cr.push.apply(cr,l)}function Vw(l){for(var u=l;;){if(u.flags&16384){var m=u.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var v=0;v<m.length;v++){var S=m[v],O=S.getSnapshot;S=S.value;try{if(!Ar(O(),S))return!1}catch{return!1}}}if(m=u.child,u.subtreeFlags&16384&&m!==null)m.return=u,u=m;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Gi(l,u){for(u&=~Yd,u&=~vh,l.suspendedLanes|=u,l.pingedLanes&=~u,l=l.expirationTimes;0<u;){var m=31-Mr(u),v=1<<m;l[m]=-1,u&=~v}}function m1(l){if(Ke&6)throw Error(o(327));Do();var u=xo(l,0);if(!(u&1))return ur(l,Nt()),null;var m=Ch(l,u);if(l.tag!==0&&m===2){var v=ai(l);v!==0&&(u=v,m=$d(l,v))}if(m===1)throw m=oc,Po(l,0),Gi(l,u),ur(l,Nt()),m;if(m===6)throw Error(o(345));return l.finishedWork=l.current.alternate,l.finishedLanes=u,Ro(l,cr),ur(l,Nt()),null}function g1(l){ji!==null&&ji.tag===0&&!(Ke&6)&&Do();var u=Ke;Ke|=1;var m=Jt.transition,v=Je;try{if(Jt.transition=null,Je=1,l)return l()}finally{Je=v,Jt.transition=m,Ke=u,!(Ke&6)&&lr()}}function tp(){Ir=Da.current,ht(Da)}function Po(l,u){l.finishedWork=null,l.finishedLanes=0;var m=l.timeoutHandle;if(m!==ge&&(l.timeoutHandle=ge,Q(m)),ln!==null)for(m=ln.return;m!==null;){var v=m;switch(_d(v),v.tag){case 1:v=v.type.childContextTypes,v!=null&&ds();break;case 3:Pa(),ht(gn),ht(hn),Ed();break;case 5:Td(v);break;case 4:Pa();break;case 13:ht(Lt);break;case 19:ht(Lt);break;case 10:yn(v.type._context);break;case 22:case 23:tp()}m=m.return}if(an=l,ln=l=Hi(l.current,null),On=Ir=u,fn=0,oc=null,Yd=vh=Ia=0,cr=ac=null,kr!==null){for(u=0;u<kr.length;u++)if(m=kr[u],v=m.interleaved,v!==null){m.interleaved=null;var S=v.next,O=m.pending;if(O!==null){var N=O.next;O.next=S,v.next=N}m.pending=v}kr=null}return l}function v1(l,u){do{var m=ln;try{if(Ea(),Qu.current=nh,Ku){for(var v=Wt.memoizedState;v!==null;){var S=v.queue;S!==null&&(S.pending=null),v=v.next}Ku=!1}if(Ra=0,xn=Dn=Wt=null,Kl=!1,Jl=0,Zd.current=null,m===null||m.return===null){fn=1,oc=u,ln=null;break}e:{var O=l,N=m.return,G=m,se=u;if(u=On,G.flags|=32768,se!==null&&typeof se=="object"&&typeof se.then=="function"){var me=se,Ee=G,je=Ee.tag;if(!(Ee.mode&1)&&(je===0||je===11||je===15)){var De=Ee.alternate;De?(Ee.updateQueue=De.updateQueue,Ee.memoizedState=De.memoizedState,Ee.lanes=De.lanes):(Ee.updateQueue=null,Ee.memoizedState=null)}var wt=L0(N);if(wt!==null){wt.flags&=-257,z0(wt,N,G,O,u),wt.mode&1&&N0(O,me,u),u=wt,se=me;var ke=u.updateQueue;if(ke===null){var Fn=new Set;Fn.add(se),u.updateQueue=Fn}else ke.add(se);break e}else{if(!(u&1)){N0(O,me,u),np();break e}se=Error(o(426))}}else if(Ut&&G.mode&1){var Qr=L0(N);if(Qr!==null){!(Qr.flags&65536)&&(Qr.flags|=256),z0(Qr,N,G,O,u),wd(se);break e}}O=se,fn!==4&&(fn=2),ac===null?ac=[O]:ac.push(O),se=Rd(se,G),G=N;do{switch(G.tag){case 3:G.flags|=65536,u&=-u,G.lanes|=u;var K=U0(G,se,u);r0(G,K);break e;case 1:O=se;var Z=G.type,ne=G.stateNode;if(!(G.flags&128)&&(typeof Z.getDerivedStateFromError=="function"||ne!==null&&typeof ne.componentDidCatch=="function"&&(Bi===null||!Bi.has(ne)))){G.flags|=65536,u&=-u,G.lanes|=u;var we=F0(G,O,u);r0(G,we);break e}}G=G.return}while(G!==null)}x1(m)}catch(Ae){u=Ae,ln===m&&m!==null&&(ln=m=m.return);continue}break}while(1)}function _1(){var l=gh.current;return gh.current=nh,l===null?nh:l}function np(){(fn===0||fn===3||fn===2)&&(fn=4),an===null||!(Ia&268435455)&&!(vh&268435455)||Gi(an,On)}function Ch(l,u){var m=Ke;Ke|=2;var v=_1();an===l&&On===u||Po(l,u);do try{Gw();break}catch(S){v1(l,S)}while(1);if(Ea(),Ke=m,gh.current=v,ln!==null)throw Error(o(261));return an=null,On=0,fn}function Gw(){for(;ln!==null;)y1(ln)}function Hw(){for(;ln!==null&&!jl();)y1(ln)}function y1(l){var u=T1(l.alternate,l,Ir);l.memoizedProps=l.pendingProps,u===null?x1(l):ln=u,Zd.current=null}function x1(l){var u=l;do{var m=u.alternate;if(l=u.return,u.flags&32768){if(m=Fw(m,u),m!==null){m.flags&=32767,ln=m;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{fn=6,ln=null;return}}else if(m=Dw(m,u,Ir),m!==null){ln=m;return}if(u=u.sibling,u!==null){ln=u;return}ln=u=l}while(u!==null);fn===0&&(fn=5)}function Ro(l,u){var m=Je,v=Jt.transition;try{Jt.transition=null,Je=1,Ww(l,u,m)}finally{Jt.transition=v,Je=m}return null}function Ww(l,u,m){do Do();while(ji!==null);if(Ke&6)throw Error(o(327));var v=l.finishedWork,S=l.finishedLanes;if(v===null)return null;if(l.finishedWork=null,l.finishedLanes=0,v===l.current)throw Error(o(177));l.callbackNode=null,l.callbackPriority=0;var O=v.lanes|v.childLanes;if(Fi(l,O),l===an&&(ln=an=null,On=0),!(v.subtreeFlags&2064)&&!(v.flags&2064)||yh||(yh=!0,C1(Xn,function(){return Do(),null})),O=(v.flags&15990)!==0,v.subtreeFlags&15990||O){O=Jt.transition,Jt.transition=null;var N=Je;Je=1;var G=Ke;Ke|=4,Zd.current=null,Lw(l,v),zw(l,v),H(l.containerInfo),l.current=v,Bw(v),zu(),Ke=G,Je=N,Jt.transition=O}else l.current=v;if(yh&&(yh=!1,ji=l,xh=S),O=l.pendingLanes,O===0&&(Bi=null),Gl(v.stateNode),ur(l,Nt()),u!==null)for(m=l.onRecoverableError,v=0;v<u.length;v++)m(u[v]);if(_h)throw _h=!1,l=Kd,Kd=null,l;return xh&1&&l.tag!==0&&Do(),O=l.pendingLanes,O&1?l===Jd?lc++:(lc=0,Jd=l):lc=0,lr(),null}function Do(){if(ji!==null){var l=Bl(xh),u=Jt.transition,m=Je;try{if(Jt.transition=null,Je=16>l?16:l,ji===null)var v=!1;else{if(l=ji,ji=null,xh=0,Ke&6)throw Error(o(331));var S=Ke;for(Ke|=4,_e=l.current;_e!==null;){var O=_e,N=O.child;if(_e.flags&16){var G=O.deletions;if(G!==null){for(var se=0;se<G.length;se++){var me=G[se];for(_e=me;_e!==null;){var Ee=_e;switch(Ee.tag){case 0:case 11:case 15:ko(8,Ee,O)}var je=Ee.child;if(je!==null)je.return=Ee,_e=je;else for(;_e!==null;){Ee=_e;var De=Ee.sibling,wt=Ee.return;if(s1(Ee),Ee===me){_e=null;break}if(De!==null){De.return=wt,_e=De;break}_e=wt}}}var ke=O.alternate;if(ke!==null){var Fn=ke.child;if(Fn!==null){ke.child=null;do{var Qr=Fn.sibling;Fn.sibling=null,Fn=Qr}while(Fn!==null)}}_e=O}}if(O.subtreeFlags&2064&&N!==null)N.return=O,_e=N;else e:for(;_e!==null;){if(O=_e,O.flags&2048)switch(O.tag){case 0:case 11:case 15:ko(9,O,O.return)}var K=O.sibling;if(K!==null){K.return=O.return,_e=K;break e}_e=O.return}}var Z=l.current;for(_e=Z;_e!==null;){N=_e;var ne=N.child;if(N.subtreeFlags&2064&&ne!==null)ne.return=N,_e=ne;else e:for(N=Z;_e!==null;){if(G=_e,G.flags&2048)try{switch(G.tag){case 0:case 11:case 15:sc(9,G)}}catch(Ae){hr(G,G.return,Ae)}if(G===N){_e=null;break e}var we=G.sibling;if(we!==null){we.return=G.return,_e=we;break e}_e=G.return}}if(Ke=S,lr(),Or&&typeof Or.onPostCommitFiberRoot=="function")try{Or.onPostCommitFiberRoot(So,l)}catch{}v=!0}return v}finally{Je=m,Jt.transition=u}}return!1}function w1(l,u,m){u=Rd(m,u),u=U0(l,u,1),zi(l,u),u=er(),l=Th(l,1),l!==null&&(Is(l,1,u),ur(l,u))}function hr(l,u,m){if(l.tag===3)w1(l,l,m);else for(;u!==null;){if(u.tag===3){w1(u,l,m);break}else if(u.tag===1){var v=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Bi===null||!Bi.has(v))){l=Rd(m,l),l=F0(u,l,1),zi(u,l),l=er(),u=Th(u,1),u!==null&&(Is(u,1,l),ur(u,l));break}}u=u.return}}function qw(l,u,m){var v=l.pingCache;v!==null&&v.delete(u),u=er(),l.pingedLanes|=l.suspendedLanes&m,an===l&&(On&m)===m&&(fn===4||fn===3&&(On&130023424)===On&&500>Nt()-Xd?Po(l,0):Yd|=m),ur(l,u)}function S1(l,u){u===0&&(l.mode&1?(u=ii,ii<<=1,!(ii&130023424)&&(ii=4194304)):u=1);var m=er();l=Th(l,u),l!==null&&(Is(l,u,m),ur(l,m))}function Zw(l){var u=l.memoizedState,m=0;u!==null&&(m=u.retryLane),S1(l,m)}function Yw(l,u){var m=0;switch(l.tag){case 13:var v=l.stateNode,S=l.memoizedState;S!==null&&(m=S.retryLane);break;case 19:v=l.stateNode;break;default:throw Error(o(314))}v!==null&&v.delete(u),S1(l,m)}var T1;T1=function(l,u,m){if(l!==null)if(l.memoizedProps!==u.pendingProps||gn.current)Dr=!0;else{if(!(l.lanes&m)&&!(u.flags&128))return Dr=!1,Uw(l,u,m);Dr=!!(l.flags&131072)}else Dr=!1,Ut&&u.flags&1048576&&c0(u,Zu,u.index);switch(u.lanes=0,u.tag){case 2:var v=u.type;l!==null&&(l.alternate=null,u.alternate=null,u.flags|=2),l=u.pendingProps;var S=Vr(u,hn.current);Qt(u,m),S=Md(null,u,v,l,S,m);var O=Od();return u.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,vn(v)?(O=!0,Ui(u)):O=!1,u.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,pd(u),S.updater=Wu,u.stateNode=S,S._reactInternals=u,gd(u,v,l,m),u=Ud(null,u,v,!0,O,m)):(u.tag=0,Ut&&O&&vd(u),$n(null,u,S,m),u=u.child),u;case 16:v=u.elementType;e:{switch(l!==null&&(l.alternate=null,u.alternate=null,u.flags|=2),l=u.pendingProps,S=v._init,v=S(v._payload),u.type=v,S=u.tag=Qw(v),l=Kn(v,l),S){case 0:u=Id(null,u,v,l,m);break e;case 1:u=Z0(null,u,v,l,m);break e;case 11:u=V0(null,u,v,l,m);break e;case 14:u=G0(null,u,v,Kn(v.type,l),m);break e}throw Error(o(306,v,""))}return u;case 0:return v=u.type,S=u.pendingProps,S=u.elementType===v?S:Kn(v,S),Id(l,u,v,S,m);case 1:return v=u.type,S=u.pendingProps,S=u.elementType===v?S:Kn(v,S),Z0(l,u,v,S,m);case 3:e:{if(Y0(u),l===null)throw Error(o(387));v=u.pendingProps,O=u.memoizedState,S=O.element,n0(l,u),Hu(u,v,null,m);var N=u.memoizedState;if(v=N.element,be&&O.isDehydrated)if(O={element:v,isDehydrated:!1,cache:N.cache,transitions:N.transitions},u.updateQueue.baseState=O,u.memoizedState=O,u.flags&256){S=Error(o(423)),u=X0(l,u,v,m,S);break e}else if(v!==S){S=Error(o(424)),u=X0(l,u,v,m,S);break e}else for(be&&(Rr=Mn(u.stateNode.containerInfo),Pr=u,Ut=!0,ms=null,ql=!1),m=m0(u,null,v,m),u.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Oa(),v===S){u=di(l,u,m);break e}$n(l,u,v,m)}u=u.child}return u;case 5:return g0(u),l===null&&xd(u),v=u.type,S=u.pendingProps,O=l!==null?l.memoizedProps:null,N=S.children,X(v,S)?N=null:O!==null&&X(v,O)&&(u.flags|=32),q0(l,u),$n(l,u,N,m),u.child;case 6:return l===null&&xd(u),null;case 13:return Q0(l,u,m);case 4:return Sd(u,u.stateNode.containerInfo),v=u.pendingProps,l===null?u.child=Aa(u,null,v,m):$n(l,u,v,m),u.child;case 11:return v=u.type,S=u.pendingProps,S=u.elementType===v?S:Kn(v,S),V0(l,u,v,S,m);case 7:return $n(l,u,u.pendingProps,m),u.child;case 8:return $n(l,u,u.pendingProps.children,m),u.child;case 12:return $n(l,u,u.pendingProps.children,m),u.child;case 10:e:{if(v=u.type._context,S=u.pendingProps,O=u.memoizedProps,N=S.value,Vu(u,v,N),O!==null)if(Ar(O.value,N)){if(O.children===S.children&&!gn.current){u=di(l,u,m);break e}}else for(O=u.child,O!==null&&(O.return=u);O!==null;){var G=O.dependencies;if(G!==null){N=O.child;for(var se=G.firstContext;se!==null;){if(se.context===v){if(O.tag===1){se=ci(-1,m&-m),se.tag=2;var me=O.updateQueue;if(me!==null){me=me.shared;var Ee=me.pending;Ee===null?se.next=se:(se.next=Ee.next,Ee.next=se),me.pending=se}}O.lanes|=m,se=O.alternate,se!==null&&(se.lanes|=m),Jn(O.return,m,u),G.lanes|=m;break}se=se.next}}else if(O.tag===10)N=O.type===u.type?null:O.child;else if(O.tag===18){if(N=O.return,N===null)throw Error(o(341));N.lanes|=m,G=N.alternate,G!==null&&(G.lanes|=m),Jn(N,m,u),N=O.sibling}else N=O.child;if(N!==null)N.return=O;else for(N=O;N!==null;){if(N===u){N=null;break}if(O=N.sibling,O!==null){O.return=N.return,N=O;break}N=N.return}O=N}$n(l,u,S.children,m),u=u.child}return u;case 9:return S=u.type,v=u.pendingProps.children,Qt(u,m),S=Kt(S),v=v(S),u.flags|=1,$n(l,u,v,m),u.child;case 14:return v=u.type,S=Kn(v,u.pendingProps),S=Kn(v.type,S),G0(l,u,v,S,m);case 15:return H0(l,u,u.type,u.pendingProps,m);case 17:return v=u.type,S=u.pendingProps,S=u.elementType===v?S:Kn(v,S),l!==null&&(l.alternate=null,u.alternate=null,u.flags|=2),u.tag=1,vn(v)?(l=!0,Ui(u)):l=!1,Qt(u,m),a0(u,v,S),gd(u,v,S,m),Ud(null,u,v,!0,l,m);case 19:return e1(l,u,m);case 22:return W0(l,u,m)}throw Error(o(156,u.tag))};function C1(l,u){return li(l,u)}function Xw(l,u,m,v){this.tag=l,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xr(l,u,m,v){return new Xw(l,u,m,v)}function rp(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Qw(l){if(typeof l=="function")return rp(l)?1:0;if(l!=null){if(l=l.$$typeof,l===y)return 11;if(l===T)return 14}return 2}function Hi(l,u){var m=l.alternate;return m===null?(m=Xr(l.tag,u,l.key,l.mode),m.elementType=l.elementType,m.type=l.type,m.stateNode=l.stateNode,m.alternate=l,l.alternate=m):(m.pendingProps=u,m.type=l.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=l.flags&14680064,m.childLanes=l.childLanes,m.lanes=l.lanes,m.child=l.child,m.memoizedProps=l.memoizedProps,m.memoizedState=l.memoizedState,m.updateQueue=l.updateQueue,u=l.dependencies,m.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},m.sibling=l.sibling,m.index=l.index,m.ref=l.ref,m}function Eh(l,u,m,v,S,O){var N=2;if(v=l,typeof l=="function")rp(l)&&(N=1);else if(typeof l=="string")N=5;else e:switch(l){case f:return Io(m.children,S,O,u);case d:N=8,S|=8;break;case p:return l=Xr(12,m,u,S|2),l.elementType=p,l.lanes=O,l;case x:return l=Xr(13,m,u,S),l.elementType=x,l.lanes=O,l;case w:return l=Xr(19,m,u,S),l.elementType=w,l.lanes=O,l;case E:return bh(m,S,O,u);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case g:N=10;break e;case _:N=9;break e;case y:N=11;break e;case T:N=14;break e;case b:N=16,v=null;break e}throw Error(o(130,l==null?l:typeof l,""))}return u=Xr(N,m,u,S),u.elementType=l,u.type=v,u.lanes=O,u}function Io(l,u,m,v){return l=Xr(7,l,v,u),l.lanes=m,l}function bh(l,u,m,v){return l=Xr(22,l,v,u),l.elementType=E,l.lanes=m,l.stateNode={},l}function sp(l,u,m){return l=Xr(6,l,null,u),l.lanes=m,l}function ip(l,u,m){return u=Xr(4,l.children!==null?l.children:[],l.key,u),u.lanes=m,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}function Kw(l,u,m,v,S){this.tag=u,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ge,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sa(0),this.expirationTimes=Sa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sa(0),this.identifierPrefix=v,this.onRecoverableError=S,be&&(this.mutableSourceEagerHydrationData=null)}function E1(l,u,m,v,S,O,N,G,se){return l=new Kw(l,u,m,G,se),u===1?(u=1,O===!0&&(u|=8)):u=0,O=Xr(3,null,null,u),l.current=O,O.stateNode=l,O.memoizedState={element:v,isDehydrated:m,cache:null,transitions:null},pd(O),l}function b1(l){if(!l)return Er;l=l._reactInternals;e:{if(R(l)!==l||l.tag!==1)throw Error(o(170));var u=l;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(vn(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(o(171))}if(l.tag===1){var m=l.type;if(vn(m))return xa(l,m,u)}return u}function M1(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(o(188)):(l=Object.keys(l).join(","),Error(o(268,l)));return l=I(u),l===null?null:l.stateNode}function O1(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var m=l.retryLane;l.retryLane=m!==0&&m<u?m:u}}function op(l,u){O1(l,u),(l=l.alternate)&&O1(l,u)}function Jw(l){return l=I(l),l===null?null:l.stateNode}function $w(){return null}return t.attemptContinuousHydration=function(l){if(l.tag===13){var u=er();Yr(l,134217728,u),op(l,134217728)}},t.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13){var u=er(),m=Vi(l);Yr(l,m,u),op(l,m)}},t.attemptSynchronousHydration=function(l){switch(l.tag){case 3:var u=l.stateNode;if(u.current.memoizedState.isDehydrated){var m=oi(u.pendingLanes);m!==0&&(Us(u,m|1),ur(u,Nt()),!(Ke&6)&&(Ua(),lr()))}break;case 13:var v=er();g1(function(){return Yr(l,1,v)}),op(l,1)}},t.batchedUpdates=function(l,u){var m=Ke;Ke|=1;try{return l(u)}finally{Ke=m,Ke===0&&(Ua(),Fs&&lr())}},t.createComponentSelector=function(l){return{$$typeof:hh,value:l}},t.createContainer=function(l,u,m,v,S,O,N){return E1(l,u,!1,null,m,v,S,O,N)},t.createHasPseudoClassSelector=function(l){return{$$typeof:fh,value:l}},t.createHydrationContainer=function(l,u,m,v,S,O,N,G,se){return l=E1(m,v,!0,l,S,O,N,G,se),l.context=b1(null),m=l.current,v=er(),S=Vi(m),O=ci(v,S),O.callback=u??null,zi(m,O),l.current.lanes=S,Is(l,S,v),ur(l,v),l},t.createPortal=function(l,u,m){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:v==null?null:""+v,children:l,containerInfo:u,implementation:m}},t.createRoleSelector=function(l){return{$$typeof:dh,value:l}},t.createTestNameSelector=function(l){return{$$typeof:ph,value:l}},t.createTextSelector=function(l){return{$$typeof:mh,value:l}},t.deferredUpdates=function(l){var u=Je,m=Jt.transition;try{return Jt.transition=null,Je=16,l()}finally{Je=u,Jt.transition=m}},t.discreteUpdates=function(l,u,m,v,S){var O=Je,N=Jt.transition;try{return Jt.transition=null,Je=1,l(u,m,v,S)}finally{Je=O,Jt.transition=N,Ke===0&&Ua()}},t.findAllNodes=qd,t.findBoundingRects=function(l,u){if(!pe)throw Error(o(363));u=qd(l,u),l=[];for(var m=0;m<u.length;m++)l.push(Me(u[m]));for(u=l.length-1;0<u;u--){m=l[u];for(var v=m.x,S=v+m.width,O=m.y,N=O+m.height,G=u-1;0<=G;G--)if(u!==G){var se=l[G],me=se.x,Ee=me+se.width,je=se.y,De=je+se.height;if(v>=me&&O>=je&&S<=Ee&&N<=De){l.splice(u,1);break}else if(v!==me||m.width!==se.width||De<O||je>N){if(!(O!==je||m.height!==se.height||Ee<v||me>S)){me>v&&(se.width+=me-v,se.x=v),Ee<S&&(se.width=S-me),l.splice(u,1);break}}else{je>O&&(se.height+=je-O,se.y=O),De<N&&(se.height=N-je),l.splice(u,1);break}}}return l},t.findHostInstance=M1,t.findHostInstanceWithNoPortals=function(l){return l=U(l),l=l!==null?j(l):null,l===null?null:l.stateNode},t.findHostInstanceWithWarning=function(l){return M1(l)},t.flushControlled=function(l){var u=Ke;Ke|=1;var m=Jt.transition,v=Je;try{Jt.transition=null,Je=1,l()}finally{Je=v,Jt.transition=m,Ke=u,Ke===0&&(Ua(),lr())}},t.flushPassiveEffects=Do,t.flushSync=g1,t.focusWithin=function(l,u){if(!pe)throw Error(o(363));for(l=Gd(l),u=d1(l,u),u=Array.from(u),l=0;l<u.length;){var m=u[l++];if(!Ce(m)){if(m.tag===5&&et(m.stateNode))return!0;for(m=m.child;m!==null;)u.push(m),m=m.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Je},t.getFindAllNodesFailureDescription=function(l,u){if(!pe)throw Error(o(363));var m=0,v=[];l=[Gd(l),0];for(var S=0;S<l.length;){var O=l[S++],N=l[S++],G=u[N];if((O.tag!==5||!Ce(O))&&(Hd(O,G)&&(v.push(Wd(G)),N++,N>m&&(m=N)),N<u.length))for(O=O.child;O!==null;)l.push(O,N),O=O.sibling}if(m<u.length){for(l=[];m<u.length;m++)l.push(Wd(u[m]));return`findAllNodes was able to match part of the selector:
  `+(v.join(" > ")+`

No matching component was found for:
  `)+l.join(" > ")}return null},t.getPublicRootInstance=function(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return Y(l.child.stateNode);default:return l.child.stateNode}},t.injectIntoDevTools=function(l){if(l={bundleType:l.bundleType,version:l.version,rendererPackageName:l.rendererPackageName,rendererConfig:l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:Jw,findFiberByHostInstance:l.findFiberByHostInstance||$w,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)l=!0;else{try{So=u.inject(l),Or=u}catch{}l=!!u.checkDCE}}return l},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(l,u,m,v){if(!pe)throw Error(o(363));l=qd(l,u);var S=He(l,m,v).disconnect;return{disconnect:function(){S()}}},t.registerMutableSourceForHydration=function(l,u){var m=u._getVersion;m=m(u._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[u,m]:l.mutableSourceEagerHydrationData.push(u,m)},t.runWithPriority=function(l,u){var m=Je;try{return Je=l,u()}finally{Je=m}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(l,u,m,v){var S=u.current,O=er(),N=Vi(S);return m=b1(m),u.context===null?u.context=m:u.pendingContext=m,u=ci(O,N),u.payload={element:l},v=v===void 0?null:v,v!==null&&(u.callback=v),zi(S,u),l=Yr(S,N,O),l!==null&&Gu(l,S,N),N},t};K_.exports=tT;var nT=K_.exports;const rT=Bm(nT),sT=r=>typeof r=="object"&&typeof r.then=="function",Ho=[];function ey(r,e,t=(n,s)=>n===s){if(r===e)return!0;if(!r||!e)return!1;const n=r.length;if(e.length!==n)return!1;for(let s=0;s<n;s++)if(!t(r[s],e[s]))return!1;return!0}function ty(r,e=null,t=!1,n={}){e===null&&(e=[r]);for(const i of Ho)if(ey(e,i.keys,i.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(i,"error"))throw i.error;if(Object.prototype.hasOwnProperty.call(i,"response"))return n.lifespan&&n.lifespan>0&&(i.timeout&&clearTimeout(i.timeout),i.timeout=setTimeout(i.remove,n.lifespan)),i.response;if(!t)throw i.promise}const s={keys:e,equal:n.equal,remove:()=>{const i=Ho.indexOf(s);i!==-1&&Ho.splice(i,1)},promise:(sT(r)?r:r(...e)).then(i=>{s.response=i,n.lifespan&&n.lifespan>0&&(s.timeout=setTimeout(s.remove,n.lifespan))}).catch(i=>s.error=i)};if(Ho.push(s),!t)throw s.promise}const iT=(r,e,t)=>ty(r,e,!1,t),oT=(r,e,t)=>void ty(r,e,!0,t),aT=r=>{if(r===void 0||r.length===0)Ho.splice(0,Ho.length);else{const e=Ho.find(t=>ey(r,t.keys,t.equal));e&&e.remove()}},Xm={},yu=r=>void Object.assign(Xm,r);function lT(r,e){function t(f,{args:d=[],attach:p,...g},_){let y=`${f[0].toUpperCase()}${f.slice(1)}`,x;if(f==="primitive"){if(g.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const w=g.object;x=Ya(w,{type:f,root:_,attach:p,primitive:!0})}else{const w=Xm[y];if(!w)throw new Error(`R3F: ${y} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");x=Ya(new w(...d),{type:f,root:_,attach:p,memoizedProps:{args:d}})}return x.__r3f.attach===void 0&&(x instanceof jm?x.__r3f.attach="geometry":x instanceof zf&&(x.__r3f.attach="material")),y!=="inject"&&hp(x,g),x}function n(f,d){let p=!1;if(d){var g,_;(g=d.__r3f)!=null&&g.attach?up(f,d,d.__r3f.attach):d.isObject3D&&f.isObject3D&&(f.add(d),p=!0),p||(_=f.__r3f)==null||_.objects.push(d),d.__r3f||Ya(d,{}),d.__r3f.parent=f,$p(d),Xa(d)}}function s(f,d,p){let g=!1;if(d){var _,y;if((_=d.__r3f)!=null&&_.attach)up(f,d,d.__r3f.attach);else if(d.isObject3D&&f.isObject3D){d.parent=f,d.dispatchEvent({type:"added"});const x=f.children.filter(T=>T!==d),w=x.indexOf(p);f.children=[...x.slice(0,w),d,...x.slice(w)],g=!0}g||(y=f.__r3f)==null||y.objects.push(d),d.__r3f||Ya(d,{}),d.__r3f.parent=f,$p(d),Xa(d)}}function i(f,d,p=!1){f&&[...f].forEach(g=>o(d,g,p))}function o(f,d,p){if(d){var g,_,y;if(d.__r3f&&(d.__r3f.parent=null),(g=f.__r3f)!=null&&g.objects&&(f.__r3f.objects=f.__r3f.objects.filter(E=>E!==d)),(_=d.__r3f)!=null&&_.attach)N1(f,d,d.__r3f.attach);else if(d.isObject3D&&f.isObject3D){var x;f.remove(d),(x=d.__r3f)!=null&&x.root&&vT(d.__r3f.root,d)}const T=(y=d.__r3f)==null?void 0:y.primitive,b=!T&&(p===void 0?d.dispose!==null:p);if(!T){var w;i((w=d.__r3f)==null?void 0:w.objects,d,b),i(d.children,d,b)}if(delete d.__r3f,b&&d.dispose&&d.type!=="Scene"){const E=()=>{try{d.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?Kp.unstable_scheduleCallback(Kp.unstable_IdlePriority,E):E()}Xa(f)}}function a(f,d,p,g){var _;const y=(_=f.__r3f)==null?void 0:_.parent;if(!y)return;const x=t(d,p,f.__r3f.root);if(f.children){for(const w of f.children)w.__r3f&&n(x,w);f.children=f.children.filter(w=>!w.__r3f)}f.__r3f.objects.forEach(w=>n(x,w)),f.__r3f.objects=[],f.__r3f.autoRemovedBeforeAppend||o(y,f),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),n(y,x),x.raycast&&x.__r3f.eventCount&&x.__r3f.root.getState().internal.interaction.push(x),[g,g.alternate].forEach(w=>{w!==null&&(w.stateNode=x,w.ref&&(typeof w.ref=="function"?w.ref(x):w.ref.current=x))})}const c=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:rT({createInstance:t,removeChild:o,appendChild:n,appendInitialChild:n,insertBefore:s,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(f,d)=>{if(!d)return;const p=f.getState().scene;p.__r3f&&(p.__r3f.root=f,n(p,d))},removeChildFromContainer:(f,d)=>{d&&o(f.getState().scene,d)},insertInContainerBefore:(f,d,p)=>{if(!d||!p)return;const g=f.getState().scene;g.__r3f&&s(g,d,p)},getRootHostContext:()=>null,getChildHostContext:f=>f,finalizeInitialChildren(f){var d;return!!((d=f==null?void 0:f.__r3f)!=null?d:{}).handlers},prepareUpdate(f,d,p,g){var _;if(((_=f==null?void 0:f.__r3f)!=null?_:{}).primitive&&g.object&&g.object!==f)return[!0];{const{args:x=[],children:w,...T}=g,{args:b=[],children:E,...C}=p;if(!Array.isArray(x))throw new Error("R3F: the args prop must be an array!");if(x.some((M,k)=>M!==b[k]))return[!0];const A=ly(f,T,C,!0);return A.changes.length?[!1,A]:null}},commitUpdate(f,[d,p],g,_,y,x){d?a(f,g,y,x):hp(f,p)},commitMount(f,d,p,g){var _;const y=(_=f.__r3f)!=null?_:{};f.raycast&&y.handlers&&y.eventCount&&f.__r3f.root.getState().internal.interaction.push(f)},getPublicInstance:f=>f,prepareForCommit:()=>null,preparePortalMount:f=>Ya(f.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(f){var d;const{attach:p,parent:g}=(d=f.__r3f)!=null?d:{};p&&g&&N1(g,f,p),f.isObject3D&&(f.visible=!1),Xa(f)},unhideInstance(f,d){var p;const{attach:g,parent:_}=(p=f.__r3f)!=null?p:{};g&&_&&up(_,f,g),(f.isObject3D&&d.visible==null||d.visible)&&(f.visible=!0),Xa(f)},createTextInstance:c,hideTextInstance:c,unhideTextInstance:c,getCurrentEventPriority:()=>e?e():Ja.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Pt.fun(performance.now)?performance.now:Pt.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Pt.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Pt.fun(clearTimeout)?clearTimeout:void 0}),applyProps:hp}}var D1,I1;const cp=r=>"colorSpace"in r||"outputColorSpace"in r,ny=()=>{var r;return(r=Xm.ColorManagement)!=null?r:null},ry=r=>r&&r.isOrthographicCamera,cT=r=>r&&r.hasOwnProperty("current"),Al=typeof window<"u"&&((D1=window.document)!=null&&D1.createElement||((I1=window.navigator)==null?void 0:I1.product)==="ReactNative")?P.useLayoutEffect:P.useEffect;function sy(r){const e=P.useRef(r);return Al(()=>void(e.current=r),[r]),e}function uT({set:r}){return Al(()=>(r(new Promise(()=>null)),()=>r(!1)),[r]),null}class iy extends P.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}iy.getDerivedStateFromError=()=>({error:!0});const oy="__default",U1=new Map,hT=r=>r&&!!r.memoized&&!!r.changes;function ay(r){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(r)?Math.min(Math.max(r[0],t),r[1]):r}const uc=r=>{var e;return(e=r.__r3f)==null?void 0:e.root.getState()},Pt={obj:r=>r===Object(r)&&!Pt.arr(r)&&typeof r!="function",fun:r=>typeof r=="function",str:r=>typeof r=="string",num:r=>typeof r=="number",boo:r=>typeof r=="boolean",und:r=>r===void 0,arr:r=>Array.isArray(r),equ(r,e,{arrays:t="shallow",objects:n="reference",strict:s=!0}={}){if(typeof r!=typeof e||!!r!=!!e)return!1;if(Pt.str(r)||Pt.num(r))return r===e;const i=Pt.obj(r);if(i&&n==="reference")return r===e;const o=Pt.arr(r);if(o&&t==="reference")return r===e;if((o||i)&&r===e)return!0;let a;for(a in r)if(!(a in e))return!1;if(i&&t==="shallow"&&n==="shallow"){for(a in s?e:r)if(!Pt.equ(r[a],e[a],{strict:s,objects:"reference"}))return!1}else for(a in s?e:r)if(r[a]!==e[a])return!1;if(Pt.und(a)){if(o&&r.length===0&&e.length===0||i&&Object.keys(r).length===0&&Object.keys(e).length===0)return!0;if(r!==e)return!1}return!0}};function fT(r){const e={nodes:{},materials:{}};return r&&r.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function dT(r){r.dispose&&r.type!=="Scene"&&r.dispose();for(const e in r)e.dispose==null||e.dispose(),delete r[e]}function Ya(r,e){const t=r;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},r}function Jp(r,e){let t=r;if(e.includes("-")){const n=e.split("-"),s=n.pop();return t=n.reduce((i,o)=>i[o],r),{target:t,key:s}}else return{target:t,key:e}}const F1=/-\d+$/;function up(r,e,t){if(Pt.str(t)){if(F1.test(t)){const i=t.replace(F1,""),{target:o,key:a}=Jp(r,i);Array.isArray(o[a])||(o[a]=[])}const{target:n,key:s}=Jp(r,t);e.__r3f.previousAttach=n[s],n[s]=e}else e.__r3f.previousAttach=t(r,e)}function N1(r,e,t){var n,s;if(Pt.str(t)){const{target:i,key:o}=Jp(r,t),a=e.__r3f.previousAttach;a===void 0?delete i[o]:i[o]=a}else(n=e.__r3f)==null||n.previousAttach==null||n.previousAttach(r,e);(s=e.__r3f)==null||delete s.previousAttach}function ly(r,{children:e,key:t,ref:n,...s},{children:i,key:o,ref:a,...c}={},h=!1){var f;const d=(f=r==null?void 0:r.__r3f)!=null?f:{},p=Object.entries(s),g=[];if(h){const y=Object.keys(c);for(let x=0;x<y.length;x++)s.hasOwnProperty(y[x])||p.unshift([y[x],oy+"remove"])}p.forEach(([y,x])=>{var w;if((w=r.__r3f)!=null&&w.primitive&&y==="object"||Pt.equ(x,c[y]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(y))return g.push([y,x,!0,[]]);let T=[];y.includes("-")&&(T=y.split("-")),g.push([y,x,!1,T]);for(const b in s){const E=s[b];b.startsWith(`${y}-`)&&g.push([b,E,!1,b.split("-")])}});const _={...s};return d.memoizedProps&&d.memoizedProps.args&&(_.args=d.memoizedProps.args),d.memoizedProps&&d.memoizedProps.attach&&(_.attach=d.memoizedProps.attach),{memoized:_,changes:g}}const pT=typeof process<"u"&&!1;function hp(r,e){var t,n,s;const i=(t=r.__r3f)!=null?t:{},o=i.root,a=(n=o==null||o.getState==null?void 0:o.getState())!=null?n:{},{memoized:c,changes:h}=hT(e)?e:ly(r,e),f=i.eventCount;r.__r3f&&(r.__r3f.memoizedProps=c);for(let p=0;p<h.length;p++){let[g,_,y,x]=h[p];if(cp(r)){const E="srgb",C="srgb-linear";g==="encoding"?(g="colorSpace",_=_===3001?E:C):g==="outputEncoding"&&(g="outputColorSpace",_=_===3001?E:C)}let w=r,T=w[g];if(x.length&&(T=x.reduce((b,E)=>b[E],r),!(T&&T.set))){const[b,...E]=x.reverse();w=E.reverse().reduce((C,A)=>C[A],r),g=b}if(_===oy+"remove")if(w.constructor){let b=U1.get(w.constructor);b||(b=new w.constructor,U1.set(w.constructor,b)),_=b[g]}else _=0;if(y)_?i.handlers[g]=_:delete i.handlers[g],i.eventCount=Object.keys(i.handlers).length;else if(T&&T.set&&(T.copy||T instanceof ap)){if(Array.isArray(_))T.fromArray?T.fromArray(_):T.set(..._);else if(T.copy&&_&&_.constructor&&(pT?T.constructor.name===_.constructor.name:T.constructor===_.constructor))T.copy(_);else if(_!==void 0){const b=T instanceof rr;!b&&T.setScalar?T.setScalar(_):T instanceof ap&&_ instanceof ap?T.mask=_.mask:T.set(_),!ny()&&!a.linear&&b&&T.convertSRGBToLinear()}}else if(w[g]=_,w[g]instanceof gu&&w[g].format===lS&&w[g].type===Qs){const b=w[g];cp(b)&&cp(a.gl)?b.colorSpace=a.gl.outputColorSpace:b.encoding=a.gl.outputEncoding}Xa(r)}if(i.parent&&a.internal&&r.raycast&&f!==i.eventCount){const p=a.internal.interaction.indexOf(r);p>-1&&a.internal.interaction.splice(p,1),i.eventCount&&a.internal.interaction.push(r)}return!(h.length===1&&h[0][0]==="onUpdate")&&h.length&&(s=r.__r3f)!=null&&s.parent&&$p(r),r}function Xa(r){var e,t;const n=(e=r.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();n&&n.internal.frames===0&&n.invalidate()}function $p(r){r.onUpdate==null||r.onUpdate(r)}function mT(r,e){r.manual||(ry(r)?(r.left=e.width/-2,r.right=e.width/2,r.top=e.height/2,r.bottom=e.height/-2):r.aspect=e.width/e.height,r.updateProjectionMatrix(),r.updateMatrixWorld())}function Oh(r){return(r.eventObject||r.object).uuid+"/"+r.index+r.instanceId}function gT(){var r;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Ja.DefaultEventPriority;switch((r=e.event)==null?void 0:r.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Ja.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Ja.ContinuousEventPriority;default:return Ja.DefaultEventPriority}}function cy(r,e,t,n){const s=t.get(e);s&&(t.delete(e),t.size===0&&(r.delete(n),s.target.releasePointerCapture(n)))}function vT(r,e){const{internal:t}=r.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,s)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((n,s)=>{cy(t.capturedMap,e,n,s)})}function _T(r){function e(c){const{internal:h}=r.getState(),f=c.offsetX-h.initialClick[0],d=c.offsetY-h.initialClick[1];return Math.round(Math.sqrt(f*f+d*d))}function t(c){return c.filter(h=>["Move","Over","Enter","Out","Leave"].some(f=>{var d;return(d=h.__r3f)==null?void 0:d.handlers["onPointer"+f]}))}function n(c,h){const f=r.getState(),d=new Set,p=[],g=h?h(f.internal.interaction):f.internal.interaction;for(let w=0;w<g.length;w++){const T=uc(g[w]);T&&(T.raycaster.camera=void 0)}f.previousRoot||f.events.compute==null||f.events.compute(c,f);function _(w){const T=uc(w);if(!T||!T.events.enabled||T.raycaster.camera===null)return[];if(T.raycaster.camera===void 0){var b;T.events.compute==null||T.events.compute(c,T,(b=T.previousRoot)==null?void 0:b.getState()),T.raycaster.camera===void 0&&(T.raycaster.camera=null)}return T.raycaster.camera?T.raycaster.intersectObject(w,!0):[]}let y=g.flatMap(_).sort((w,T)=>{const b=uc(w.object),E=uc(T.object);return!b||!E?w.distance-T.distance:E.events.priority-b.events.priority||w.distance-T.distance}).filter(w=>{const T=Oh(w);return d.has(T)?!1:(d.add(T),!0)});f.events.filter&&(y=f.events.filter(y,f));for(const w of y){let T=w.object;for(;T;){var x;(x=T.__r3f)!=null&&x.eventCount&&p.push({...w,eventObject:T}),T=T.parent}}if("pointerId"in c&&f.internal.capturedMap.has(c.pointerId))for(let w of f.internal.capturedMap.get(c.pointerId).values())d.has(Oh(w.intersection))||p.push(w.intersection);return p}function s(c,h,f,d){const p=r.getState();if(c.length){const g={stopped:!1};for(const _ of c){const y=uc(_.object)||p,{raycaster:x,pointer:w,camera:T,internal:b}=y,E=new ye(w.x,w.y,0).unproject(T),C=F=>{var U,I;return(U=(I=b.capturedMap.get(F))==null?void 0:I.has(_.eventObject))!=null?U:!1},A=F=>{const U={intersection:_,target:h.target};b.capturedMap.has(F)?b.capturedMap.get(F).set(_.eventObject,U):b.capturedMap.set(F,new Map([[_.eventObject,U]])),h.target.setPointerCapture(F)},M=F=>{const U=b.capturedMap.get(F);U&&cy(b.capturedMap,_.eventObject,U,F)};let k={};for(let F in h){let U=h[F];typeof U!="function"&&(k[F]=U)}let R={..._,...k,pointer:w,intersections:c,stopped:g.stopped,delta:f,unprojectedPoint:E,ray:x.ray,camera:T,stopPropagation(){const F="pointerId"in h&&b.capturedMap.get(h.pointerId);if((!F||F.has(_.eventObject))&&(R.stopped=g.stopped=!0,b.hovered.size&&Array.from(b.hovered.values()).find(U=>U.eventObject===_.eventObject))){const U=c.slice(0,c.indexOf(_));i([...U,_])}},target:{hasPointerCapture:C,setPointerCapture:A,releasePointerCapture:M},currentTarget:{hasPointerCapture:C,setPointerCapture:A,releasePointerCapture:M},nativeEvent:h};if(d(R),g.stopped===!0)break}}return c}function i(c){const{internal:h}=r.getState();for(const f of h.hovered.values())if(!c.length||!c.find(d=>d.object===f.object&&d.index===f.index&&d.instanceId===f.instanceId)){const p=f.eventObject.__r3f,g=p==null?void 0:p.handlers;if(h.hovered.delete(Oh(f)),p!=null&&p.eventCount){const _={...f,intersections:c};g.onPointerOut==null||g.onPointerOut(_),g.onPointerLeave==null||g.onPointerLeave(_)}}}function o(c,h){for(let f=0;f<h.length;f++){const d=h[f].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(c)}}function a(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>i([]);case"onLostPointerCapture":return h=>{const{internal:f}=r.getState();"pointerId"in h&&f.capturedMap.has(h.pointerId)&&requestAnimationFrame(()=>{f.capturedMap.has(h.pointerId)&&(f.capturedMap.delete(h.pointerId),i([]))})}}return function(f){const{onPointerMissed:d,internal:p}=r.getState();p.lastEvent.current=f;const g=c==="onPointerMove",_=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",x=n(f,g?t:void 0),w=_?e(f):0;c==="onPointerDown"&&(p.initialClick=[f.offsetX,f.offsetY],p.initialHits=x.map(b=>b.eventObject)),_&&!x.length&&w<=2&&(o(f,p.interaction),d&&d(f)),g&&i(x);function T(b){const E=b.eventObject,C=E.__r3f,A=C==null?void 0:C.handlers;if(C!=null&&C.eventCount)if(g){if(A.onPointerOver||A.onPointerEnter||A.onPointerOut||A.onPointerLeave){const M=Oh(b),k=p.hovered.get(M);k?k.stopped&&b.stopPropagation():(p.hovered.set(M,b),A.onPointerOver==null||A.onPointerOver(b),A.onPointerEnter==null||A.onPointerEnter(b))}A.onPointerMove==null||A.onPointerMove(b)}else{const M=A[c];M?(!_||p.initialHits.includes(E))&&(o(f,p.interaction.filter(k=>!p.initialHits.includes(k))),M(b)):_&&p.initialHits.includes(E)&&o(f,p.interaction.filter(k=>!p.initialHits.includes(k)))}}s(x,f,w,T)}}return{handlePointer:a}}const uy=r=>!!(r!=null&&r.render),hy=P.createContext(null),yT=(r,e)=>{const t=eT((a,c)=>{const h=new ye,f=new ye,d=new ye;function p(w=c().camera,T=f,b=c().size){const{width:E,height:C,top:A,left:M}=b,k=E/C;T instanceof ye?d.copy(T):d.set(...T);const R=w.getWorldPosition(h).distanceTo(d);if(ry(w))return{width:E/w.zoom,height:C/w.zoom,top:A,left:M,factor:1,distance:R,aspect:k};{const F=w.fov*Math.PI/180,U=2*Math.tan(F/2)*R,I=U*(E/C);return{width:I,height:U,top:A,left:M,factor:E/I,distance:R,aspect:k}}}let g;const _=w=>a(T=>({performance:{...T.performance,current:w}})),y=new _t;return{set:a,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(w=1)=>r(c(),w),advance:(w,T)=>e(w,T,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new gS,pointer:y,mouse:y,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const w=c();g&&clearTimeout(g),w.performance.current!==w.performance.min&&_(w.performance.min),g=setTimeout(()=>_(c().performance.max),w.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:w=>a(T=>({...T,events:{...T.events,...w}})),setSize:(w,T,b,E,C)=>{const A=c().camera,M={width:w,height:T,top:E||0,left:C||0,updateStyle:b};a(k=>({size:M,viewport:{...k.viewport,...p(A,f,M)}}))},setDpr:w=>a(T=>{const b=ay(w);return{viewport:{...T.viewport,dpr:b,initialDpr:T.viewport.initialDpr||b}}}),setFrameloop:(w="always")=>{const T=c().clock;T.stop(),T.elapsedTime=0,w!=="never"&&(T.start(),T.elapsedTime=0),a(()=>({frameloop:w}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:P.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(w,T,b)=>{const E=c().internal;return E.priority=E.priority+(T>0?1:0),E.subscribers.push({ref:w,priority:T,store:b}),E.subscribers=E.subscribers.sort((C,A)=>C.priority-A.priority),()=>{const C=c().internal;C!=null&&C.subscribers&&(C.priority=C.priority-(T>0?1:0),C.subscribers=C.subscribers.filter(A=>A.ref!==w))}}}}}),n=t.getState();let s=n.size,i=n.viewport.dpr,o=n.camera;return t.subscribe(()=>{const{camera:a,size:c,viewport:h,gl:f,set:d}=t.getState();if(c.width!==s.width||c.height!==s.height||h.dpr!==i){var p;s=c,i=h.dpr,mT(a,c),f.setPixelRatio(h.dpr);const g=(p=c.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&f.domElement instanceof HTMLCanvasElement;f.setSize(c.width,c.height,g)}a!==o&&(o=a,d(g=>({viewport:{...g.viewport,...g.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>r(a)),t};function Qm(r,e){const t={callback:r};return e.add(t),()=>void e.delete(t)}let Ah,fy=new Set,dy=new Set,py=new Set;const xT=r=>Qm(r,fy),wT=r=>Qm(r,dy),ST=r=>Qm(r,py);function fp(r,e){if(r.size)for(const{callback:t}of r.values())t(e)}function hc(r,e){switch(r){case"before":return fp(fy,e);case"after":return fp(dy,e);case"tail":return fp(py,e)}}let dp,pp;function mp(r,e,t){let n=e.clock.getDelta();for(e.frameloop==="never"&&typeof r=="number"&&(n=r-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=r),dp=e.internal.subscribers,Ah=0;Ah<dp.length;Ah++)pp=dp[Ah],pp.ref.current(pp.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function TT(r){let e=!1,t,n,s;function i(c){n=requestAnimationFrame(i),e=!0,t=0,hc("before",c);for(const f of r.values()){var h;s=f.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((h=s.gl.xr)!=null&&h.isPresenting)&&(t+=mp(c,s))}if(hc("after",c),t===0)return hc("tail",c),e=!1,cancelAnimationFrame(n)}function o(c,h=1){var f;if(!c)return r.forEach(d=>o(d.store.getState()),h);(f=c.gl.xr)!=null&&f.isPresenting||!c.internal.active||c.frameloop==="never"||(c.internal.frames=Math.min(60,c.internal.frames+h),e||(e=!0,requestAnimationFrame(i)))}function a(c,h=!0,f,d){if(h&&hc("before",c),f)mp(c,f,d);else for(const p of r.values())mp(c,p.store.getState());h&&hc("after",c)}return{loop:i,invalidate:o,advance:a}}function CT(r){const e=P.useRef(null);return Al(()=>void(e.current=r.current.__r3f),[r]),e}function my(){const r=P.useContext(hy);if(!r)throw new Error("R3F: Hooks can only be used within the Canvas component!");return r}function lt(r=t=>t,e){return my()(r,e)}function mn(r,e=0){const t=my(),n=t.getState().internal.subscribe,s=sy(r);return Al(()=>n(s,e,t),[e,n,t]),null}const L1=new WeakMap;function gy(r,e){return function(t,...n){let s=L1.get(t);return s||(s=new t,L1.set(t,s)),r&&r(s),Promise.all(n.map(i=>new Promise((o,a)=>s.load(i,c=>{c.scene&&Object.assign(c,fT(c.scene)),o(c)},e,c=>a(new Error(`Could not load ${i}: ${c==null?void 0:c.message}`)))))).finally(()=>s.dispose==null?void 0:s.dispose())}}function xu(r,e,t,n){const s=Array.isArray(e)?e:[e],i=iT(gy(t,n),[r,...s],{equal:Pt.equ});return Array.isArray(e)?i:i[0]}xu.preload=function(r,e,t){const n=Array.isArray(e)?e:[e];return oT(gy(t),[r,...n])};xu.clear=function(r,e){const t=Array.isArray(e)?e:[e];return aT([r,...t])};const pl=new Map,{invalidate:z1,advance:B1}=TT(pl),{reconciler:cf,applyProps:Fa}=lT(pl,gT),Na={objects:"shallow",strict:!1},ET=(r,e)=>{const t=typeof r=="function"?r(e):r;return uy(t)?t:new fS({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...r})};function bT(r,e){const t=typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement;if(e){const{width:n,height:s,top:i,left:o,updateStyle:a=t}=e;return{width:n,height:s,top:i,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&r.parentElement){const{width:n,height:s,top:i,left:o}=r.parentElement.getBoundingClientRect();return{width:n,height:s,top:i,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas)return{width:r.width,height:r.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function MT(r){const e=pl.get(r),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,i=n||yT(z1,B1),o=t||cf.createContainer(i,Ja.ConcurrentRoot,null,!1,null,"",s,null);e||pl.set(r,{fiber:o,store:i});let a,c=!1,h;return{configure(f={}){let{gl:d,size:p,scene:g,events:_,onCreated:y,shadows:x=!1,linear:w=!1,flat:T=!1,legacy:b=!1,orthographic:E=!1,frameloop:C="always",dpr:A=[1,2],performance:M,raycaster:k,camera:R,onPointerMissed:F}=f,U=i.getState(),I=U.gl;U.gl||U.set({gl:I=ET(d,r)});let z=U.raycaster;z||U.set({raycaster:z=new cS});const{params:j,...q}=k||{};if(Pt.equ(q,z,Na)||Fa(z,{...q}),Pt.equ(j,z.params,Na)||Fa(z,{params:{...z.params,...j}}),!U.camera||U.camera===h&&!Pt.equ(h,R,Na)){h=R;const B=R instanceof L_,J=B?R:E?new Vm(0,0,0,0,.1,1e3):new vu(75,0,.1,1e3);B||(J.position.z=5,R&&Fa(J,R),!U.camera&&!(R!=null&&R.rotation)&&J.lookAt(0,0,0)),U.set({camera:J}),z.camera=J}if(!U.scene){let B;g instanceof hl?B=g:(B=new hl,g&&Fa(B,g)),U.set({scene:Ya(B)})}if(!U.xr){var Y;const B=(X,oe)=>{const re=i.getState();re.frameloop!=="never"&&B1(X,!0,re,oe)},J=()=>{const X=i.getState();X.gl.xr.enabled=X.gl.xr.isPresenting,X.gl.xr.setAnimationLoop(X.gl.xr.isPresenting?B:null),X.gl.xr.isPresenting||z1(X)},te={connect(){const X=i.getState().gl;X.xr.addEventListener("sessionstart",J),X.xr.addEventListener("sessionend",J)},disconnect(){const X=i.getState().gl;X.xr.removeEventListener("sessionstart",J),X.xr.removeEventListener("sessionend",J)}};typeof((Y=I.xr)==null?void 0:Y.addEventListener)=="function"&&te.connect(),U.set({xr:te})}if(I.shadowMap){const B=I.shadowMap.enabled,J=I.shadowMap.type;if(I.shadowMap.enabled=!!x,Pt.boo(x))I.shadowMap.type=lp;else if(Pt.str(x)){var $;const te={basic:dS,percentage:pS,soft:lp,variance:mS};I.shadowMap.type=($=te[x])!=null?$:lp}else Pt.obj(x)&&Object.assign(I.shadowMap,x);(B!==I.shadowMap.enabled||J!==I.shadowMap.type)&&(I.shadowMap.needsUpdate=!0)}const W=ny();W&&("enabled"in W?W.enabled=!b:"legacyMode"in W&&(W.legacyMode=b)),Fa(I,{outputEncoding:w?3e3:3001,toneMapping:T?uS:hS}),U.legacy!==b&&U.set(()=>({legacy:b})),U.linear!==w&&U.set(()=>({linear:w})),U.flat!==T&&U.set(()=>({flat:T})),d&&!Pt.fun(d)&&!uy(d)&&!Pt.equ(d,I,Na)&&Fa(I,d),_&&!U.events.handlers&&U.set({events:_(i)});const L=bT(r,p);return Pt.equ(L,U.size,Na)||U.setSize(L.width,L.height,L.updateStyle,L.top,L.left),A&&U.viewport.dpr!==ay(A)&&U.setDpr(A),U.frameloop!==C&&U.setFrameloop(C),U.onPointerMissed||U.set({onPointerMissed:F}),M&&!Pt.equ(M,U.performance,Na)&&U.set(B=>({performance:{...B.performance,...M}})),a=y,c=!0,this},render(f){return c||this.configure(),cf.updateContainer(P.createElement(OT,{store:i,children:f,onCreated:a,rootElement:r}),o,null,()=>{}),i},unmount(){vy(r)}}}function OT({store:r,children:e,onCreated:t,rootElement:n}){return Al(()=>{const s=r.getState();s.set(i=>({internal:{...i.internal,active:!0}})),t&&t(s),r.getState().events.connected||s.events.connect==null||s.events.connect(n)},[]),P.createElement(hy.Provider,{value:r},e)}function vy(r,e){const t=pl.get(r),n=t==null?void 0:t.fiber;if(n){const s=t==null?void 0:t.store.getState();s&&(s.internal.active=!1),cf.updateContainer(null,n,null,()=>{s&&setTimeout(()=>{try{var i,o,a,c;s.events.disconnect==null||s.events.disconnect(),(i=s.gl)==null||(o=i.renderLists)==null||o.dispose==null||o.dispose(),(a=s.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(c=s.gl)!=null&&c.xr&&s.xr.disconnect(),dT(s),pl.delete(r),e&&e(r)}catch{}},500)})}}cf.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:P.version});function em(r,e,t){var n,s,i,o,a;e==null&&(e=100);function c(){var f=Date.now()-o;f<e&&f>=0?n=setTimeout(c,e-f):(n=null,t||(a=r.apply(i,s),i=s=null))}var h=function(){i=this,s=arguments,o=Date.now();var f=t&&!n;return n||(n=setTimeout(c,e)),f&&(a=r.apply(i,s),i=s=null),a};return h.clear=function(){n&&(clearTimeout(n),n=null)},h.flush=function(){n&&(a=r.apply(i,s),i=s=null,clearTimeout(n),n=null)},h}em.debounce=em;var AT=em;const j1=Bm(AT);function kT(r){let{debounce:e,scroll:t,polyfill:n,offsetSize:s}=r===void 0?{debounce:0,scroll:!1,offsetSize:!1}:r;const i=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=P.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=P.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),h=e?typeof e=="number"?e:e.scroll:null,f=e?typeof e=="number"?e:e.resize:null,d=P.useRef(!1);P.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[p,g,_]=P.useMemo(()=>{const T=()=>{if(!c.current.element)return;const{left:b,top:E,width:C,height:A,bottom:M,right:k,x:R,y:F}=c.current.element.getBoundingClientRect(),U={left:b,top:E,width:C,height:A,bottom:M,right:k,x:R,y:F};c.current.element instanceof HTMLElement&&s&&(U.height=c.current.element.offsetHeight,U.width=c.current.element.offsetWidth),Object.freeze(U),d.current&&!IT(c.current.lastBounds,U)&&a(c.current.lastBounds=U)};return[T,f?j1(T,f):T,h?j1(T,h):T]},[a,s,h,f]);function y(){c.current.scrollContainers&&(c.current.scrollContainers.forEach(T=>T.removeEventListener("scroll",_,!0)),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null)}function x(){c.current.element&&(c.current.resizeObserver=new i(_),c.current.resizeObserver.observe(c.current.element),t&&c.current.scrollContainers&&c.current.scrollContainers.forEach(T=>T.addEventListener("scroll",_,{capture:!0,passive:!0})))}const w=T=>{!T||T===c.current.element||(y(),c.current.element=T,c.current.scrollContainers=_y(T),x())};return RT(_,!!t),PT(g),P.useEffect(()=>{y(),x()},[t,_,g]),P.useEffect(()=>y,[]),[w,o,p]}function PT(r){P.useEffect(()=>{const e=r;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[r])}function RT(r,e){P.useEffect(()=>{if(e){const t=r;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[r,e])}function _y(r){const e=[];if(!r||r===document.body)return e;const{overflow:t,overflowX:n,overflowY:s}=window.getComputedStyle(r);return[t,n,s].some(i=>i==="auto"||i==="scroll")&&e.push(r),[...e,..._y(r.parentElement)]}const DT=["x","y","top","bottom","left","right","width","height"],IT=(r,e)=>DT.every(t=>r[t]===e[t]);var UT=Object.defineProperty,FT=Object.defineProperties,NT=Object.getOwnPropertyDescriptors,V1=Object.getOwnPropertySymbols,LT=Object.prototype.hasOwnProperty,zT=Object.prototype.propertyIsEnumerable,G1=(r,e,t)=>e in r?UT(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,H1=(r,e)=>{for(var t in e||(e={}))LT.call(e,t)&&G1(r,t,e[t]);if(V1)for(var t of V1(e))zT.call(e,t)&&G1(r,t,e[t]);return r},BT=(r,e)=>FT(r,NT(e));function yy(r,e,t){if(!r)return;if(t(r)===!0)return r;let n=e?r.return:r.child;for(;n;){const s=yy(n,e,t);if(s)return s;n=e?null:n.sibling}}function xy(r){try{return Object.defineProperties(r,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return r}}const Km=xy(P.createContext(null));class wy extends P.Component{render(){return P.createElement(Km.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:W1,ReactCurrentDispatcher:q1}=P.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function jT(){const r=P.useContext(Km);if(r===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=P.useId();return P.useMemo(()=>{for(const n of[W1==null?void 0:W1.current,r,r==null?void 0:r.alternate]){if(!n)continue;const s=yy(n,!1,i=>{let o=i.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(s)return s}},[r,e])}function VT(){var r,e;const t=jT(),[n]=P.useState(()=>new Map);n.clear();let s=t;for(;s;){const i=(r=s.type)==null?void 0:r._context;i&&i!==Km&&!n.has(i)&&n.set(i,(e=q1==null?void 0:q1.current)==null?void 0:e.readContext(xy(i))),s=s.return}return n}function GT(){const r=VT();return P.useMemo(()=>Array.from(r.keys()).reduce((e,t)=>n=>P.createElement(e,null,P.createElement(t.Provider,BT(H1({},n),{value:r.get(t)}))),e=>P.createElement(wy,H1({},e))),[r])}const gp={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function HT(r){const{handlePointer:e}=_T(r);return{priority:1,enabled:!0,compute(t,n,s){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(gp).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:s}=r.getState();(t=s.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(s.lastEvent.current)},connect:t=>{var n;const{set:s,events:i}=r.getState();i.disconnect==null||i.disconnect(),s(o=>({events:{...o.events,connected:t}})),Object.entries((n=i.handlers)!=null?n:[]).forEach(([o,a])=>{const[c,h]=gp[o];t.addEventListener(c,a,{passive:h})})},disconnect:()=>{const{set:t,events:n}=r.getState();if(n.connected){var s;Object.entries((s=n.handlers)!=null?s:[]).forEach(([i,o])=>{if(n&&n.connected instanceof HTMLElement){const[a]=gp[i];n.connected.removeEventListener(a,o)}}),t(i=>({events:{...i.events,connected:void 0}}))}}}}const WT=P.forwardRef(function({children:e,fallback:t,resize:n,style:s,gl:i,events:o=HT,eventSource:a,eventPrefix:c,shadows:h,linear:f,flat:d,legacy:p,orthographic:g,frameloop:_,dpr:y,performance:x,raycaster:w,camera:T,scene:b,onPointerMissed:E,onCreated:C,...A},M){P.useMemo(()=>yu(z_),[]);const k=GT(),[R,F]=kT({scroll:!0,debounce:{scroll:50,resize:0},...n}),U=P.useRef(null),I=P.useRef(null);P.useImperativeHandle(M,()=>U.current);const z=sy(E),[j,q]=P.useState(!1),[Y,$]=P.useState(!1);if(j)throw j;if(Y)throw Y;const W=P.useRef(null);Al(()=>{const H=U.current;F.width>0&&F.height>0&&H&&(W.current||(W.current=MT(H)),W.current.configure({gl:i,events:o,shadows:h,linear:f,flat:d,legacy:p,orthographic:g,frameloop:_,dpr:y,performance:x,raycaster:w,camera:T,scene:b,size:F,onPointerMissed:(...L)=>z.current==null?void 0:z.current(...L),onCreated:L=>{L.events.connect==null||L.events.connect(a?cT(a)?a.current:a:I.current),c&&L.setEvents({compute:(B,J)=>{const te=B[c+"X"],X=B[c+"Y"];J.pointer.set(te/J.size.width*2-1,-(X/J.size.height)*2+1),J.raycaster.setFromCamera(J.pointer,J.camera)}}),C==null||C(L)}}),W.current.render(P.createElement(k,null,P.createElement(iy,{set:$},P.createElement(P.Suspense,{fallback:P.createElement(uT,{set:q})},e)))))}),P.useEffect(()=>{const H=U.current;if(H)return()=>vy(H)},[]);const V=a?"none":"auto";return P.createElement("div",as({ref:I,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:V,...s}},A),P.createElement("div",{ref:R,style:{width:"100%",height:"100%"}},P.createElement("canvas",{ref:U,style:{display:"block"}},t)))}),Sy=P.forwardRef(function(e,t){return P.createElement(wy,null,P.createElement(WT,as({},e,{ref:t})))}),wu=new ye,Jm=new ye,qT=new ye;function ZT(r,e,t){const n=wu.setFromMatrixPosition(r.matrixWorld);n.project(e);const s=t.width/2,i=t.height/2;return[n.x*s+s,-(n.y*i)+i]}function YT(r,e){const t=wu.setFromMatrixPosition(r.matrixWorld),n=Jm.setFromMatrixPosition(e.matrixWorld),s=t.sub(n),i=e.getWorldDirection(qT);return s.angleTo(i)>Math.PI/2}function XT(r,e,t,n){const s=wu.setFromMatrixPosition(r.matrixWorld),i=s.clone();i.project(e),t.setFromCamera(i,e);const o=t.intersectObjects(n,!0);if(o.length){const a=o[0].distance;return s.distanceTo(t.ray.origin)<a}return!0}function QT(r,e){if(e instanceof Vm)return e.zoom;if(e instanceof vu){const t=wu.setFromMatrixPosition(r.matrixWorld),n=Jm.setFromMatrixPosition(e.matrixWorld),s=e.fov*Math.PI/180,i=t.distanceTo(n);return 1/(2*Math.tan(s/2)*i)}else return 1}function KT(r,e,t){if(e instanceof vu||e instanceof Vm){const n=wu.setFromMatrixPosition(r.matrixWorld),s=Jm.setFromMatrixPosition(e.matrixWorld),i=n.distanceTo(s),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*i+a)}}const tm=r=>Math.abs(r)<1e-10?0:r;function Ty(r,e,t=""){let n="matrix3d(";for(let s=0;s!==16;s++)n+=tm(e[s]*r.elements[s])+(s!==15?",":")");return t+n}const JT=(r=>e=>Ty(e,r))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),$T=(r=>(e,t)=>Ty(e,r(t),"translate(-50%,-50%)"))(r=>[1/r,1/r,1/r,1,-1/r,-1/r,-1/r,-1,1/r,1/r,1/r,1,1,1,1,1]);function eC(r){return r&&typeof r=="object"&&"current"in r}const $m=P.forwardRef(({children:r,eps:e=.001,style:t,className:n,prepend:s,center:i,fullscreen:o,portal:a,distanceFactor:c,sprite:h=!1,transform:f=!1,occlude:d,onOcclude:p,castShadow:g,receiveShadow:_,material:y,geometry:x,zIndexRange:w=[16777271,0],calculatePosition:T=ZT,as:b="div",wrapperClass:E,pointerEvents:C="auto",...A},M)=>{const{gl:k,camera:R,scene:F,size:U,raycaster:I,events:z,viewport:j}=lt(),[q]=P.useState(()=>document.createElement(b)),Y=P.useRef(),$=P.useRef(null),W=P.useRef(0),V=P.useRef([0,0]),H=P.useRef(null),L=P.useRef(null),B=(a==null?void 0:a.current)||z.connected||k.domElement.parentNode,J=P.useRef(null),te=P.useRef(!1),X=P.useMemo(()=>d&&d!=="blending"||Array.isArray(d)&&d.length&&eC(d[0]),[d]);P.useLayoutEffect(()=>{const ve=k.domElement;d&&d==="blending"?(ve.style.zIndex=`${Math.floor(w[0]/2)}`,ve.style.position="absolute",ve.style.pointerEvents="none"):(ve.style.zIndex=null,ve.style.position=null,ve.style.pointerEvents=null)},[d]),P.useLayoutEffect(()=>{if($.current){const ve=Y.current=U_(q);if(F.updateMatrixWorld(),f)q.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const ae=T($.current,R,U);q.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${ae[0]}px,${ae[1]}px,0);transform-origin:0 0;`}return B&&(s?B.prepend(q):B.appendChild(q)),()=>{B&&B.removeChild(q),ve.unmount()}}},[B,f]),P.useLayoutEffect(()=>{E&&(q.className=E)},[E]);const oe=P.useMemo(()=>f?{position:"absolute",top:0,left:0,width:U.width,height:U.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:i?"translate3d(-50%,-50%,0)":"none",...o&&{top:-U.height/2,left:-U.width/2,width:U.width,height:U.height},...t},[t,i,o,U,f]),re=P.useMemo(()=>({position:"absolute",pointerEvents:C}),[C]);P.useLayoutEffect(()=>{if(te.current=!1,f){var ve;(ve=Y.current)==null||ve.render(P.createElement("div",{ref:H,style:oe},P.createElement("div",{ref:L,style:re},P.createElement("div",{ref:M,className:n,style:t,children:r}))))}else{var ae;(ae=Y.current)==null||ae.render(P.createElement("div",{ref:M,style:oe,className:n,children:r}))}});const Q=P.useRef(!0);mn(ve=>{if($.current){R.updateMatrixWorld(),$.current.updateWorldMatrix(!0,!1);const ae=f?V.current:T($.current,R,U);if(f||Math.abs(W.current-R.zoom)>e||Math.abs(V.current[0]-ae[0])>e||Math.abs(V.current[1]-ae[1])>e){const le=YT($.current,R);let be=!1;X&&(d!=="blending"?be=[F]:Array.isArray(d)&&(be=d.map(xe=>xe.current)));const Fe=Q.current;if(be){const xe=XT($.current,R,I,be);Q.current=xe&&!le}else Q.current=!le;Fe!==Q.current&&(p?p(!Q.current):q.style.display=Q.current?"block":"none");const ee=Math.floor(w[0]/2),he=d?X?[w[0],ee]:[ee-1,0]:w;if(q.style.zIndex=`${KT($.current,R,he)}`,f){const[xe,ce]=[U.width/2,U.height/2],de=R.projectionMatrix.elements[5]*ce,{isOrthographicCamera:pe,top:ue,left:Me,bottom:Se,right:Ce}=R,Te=JT(R.matrixWorldInverse),et=pe?`scale(${de})translate(${tm(-(Ce+Me)/2)}px,${tm((ue+Se)/2)}px)`:`translateZ(${de}px)`;let He=$.current.matrixWorld;h&&(He=R.matrixWorldInverse.clone().transpose().copyPosition(He).scale($.current.scale),He.elements[3]=He.elements[7]=He.elements[11]=0,He.elements[15]=1),q.style.width=U.width+"px",q.style.height=U.height+"px",q.style.perspective=pe?"":`${de}px`,H.current&&L.current&&(H.current.style.transform=`${et}${Te}translate(${xe}px,${ce}px)`,L.current.style.transform=$T(He,1/((c||10)/400)))}else{const xe=c===void 0?1:QT($.current,R)*c;q.style.transform=`translate3d(${ae[0]}px,${ae[1]}px,0) scale(${xe})`}V.current=ae,W.current=R.zoom}}if(!X&&J.current&&!te.current)if(f){if(H.current){const ae=H.current.children[0];if(ae!=null&&ae.clientWidth&&ae!=null&&ae.clientHeight){const{isOrthographicCamera:le}=R;if(le||x)A.scale&&(Array.isArray(A.scale)?A.scale instanceof ye?J.current.scale.copy(A.scale.clone().divideScalar(1)):J.current.scale.set(1/A.scale[0],1/A.scale[1],1/A.scale[2]):J.current.scale.setScalar(1/A.scale));else{const be=(c||10)/400,Fe=ae.clientWidth*be,ee=ae.clientHeight*be;J.current.scale.set(Fe,ee,1)}te.current=!0}}}else{const ae=q.children[0];if(ae!=null&&ae.clientWidth&&ae!=null&&ae.clientHeight){const le=1/j.factor,be=ae.clientWidth*le,Fe=ae.clientHeight*le;J.current.scale.set(be,Fe,1),te.current=!0}J.current.lookAt(ve.camera.position)}});const ge=P.useMemo(()=>({vertexShader:f?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[f]);return P.createElement("group",as({},A,{ref:$}),d&&!X&&P.createElement("mesh",{castShadow:g,receiveShadow:_,ref:J},x||P.createElement("planeGeometry",null),y||P.createElement("shaderMaterial",{side:Ki,vertexShader:ge.vertexShader,fragmentShader:ge.fragmentShader})))});function tC(r){let e;const t=new Set,n=(h,f)=>{const d=typeof h=="function"?h(e):h;if(d!==e){const p=e;e=f?d:Object.assign({},e,d),t.forEach(g=>g(e,p))}},s=()=>e,i=(h,f=s,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=f(e);function g(){const _=f(e);if(!d(p,_)){const y=p;h(p=_,y)}}return t.add(g),()=>t.delete(g)},c={setState:n,getState:s,subscribe:(h,f,d)=>f||d?i(h,f,d):(t.add(h),()=>t.delete(h)),destroy:()=>t.clear()};return e=r(n,s,c),c}const nC=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Z1=nC?P.useEffect:P.useLayoutEffect;function rC(r){const e=typeof r=="function"?tC(r):r,t=(n=e.getState,s=Object.is)=>{const[,i]=P.useReducer(x=>x+1,0),o=e.getState(),a=P.useRef(o),c=P.useRef(n),h=P.useRef(s),f=P.useRef(!1),d=P.useRef();d.current===void 0&&(d.current=n(o));let p,g=!1;(a.current!==o||c.current!==n||h.current!==s||f.current)&&(p=n(o),g=!s(d.current,p)),Z1(()=>{g&&(d.current=p),a.current=o,c.current=n,h.current=s,f.current=!1});const _=P.useRef(o);Z1(()=>{const x=()=>{try{const T=e.getState(),b=c.current(T);h.current(d.current,b)||(a.current=T,d.current=b,i())}catch{f.current=!0,i()}},w=e.subscribe(x);return e.getState()!==_.current&&x(),w},[]);const y=g?p:d.current;return P.useDebugValue(y),y};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const s=n.length<=0;return{value:n.shift(),done:s}}}},t}let fc=0;const sC=rC(r=>(Mh.onStart=(e,t,n)=>{r({active:!0,item:e,loaded:t,total:n,progress:(t-fc)/(n-fc)*100})},Mh.onLoad=()=>{r({active:!1})},Mh.onError=e=>r(t=>({errors:[...t.errors,e]})),Mh.onProgress=(e,t,n)=>{t===n&&(fc=n),r({active:!0,item:e,loaded:t,total:n,progress:(t-fc)/(n-fc)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),iC=r=>`Loading ${r.toFixed(2)}%`;function oC({containerStyles:r,innerStyles:e,barStyles:t,dataStyles:n,dataInterpolation:s=iC,initialState:i=o=>o}){const{active:o,progress:a}=sC(),c=P.useRef(0),h=P.useRef(0),f=P.useRef(null),[d,p]=P.useState(i(o));P.useEffect(()=>{let _;return o!==d&&(_=setTimeout(()=>p(o),300)),()=>clearTimeout(_)},[d,o]);const g=P.useCallback(()=>{f.current&&(c.current+=(a-c.current)/2,(c.current>.95*a||a===100)&&(c.current=a),f.current.innerText=s(c.current),c.current<a&&(h.current=requestAnimationFrame(g)))},[s,a]);return P.useEffect(()=>(g(),()=>cancelAnimationFrame(h.current)),[g]),d?P.createElement("div",{style:{...kh.container,opacity:o?1:0,...r}},P.createElement("div",null,P.createElement("div",{style:{...kh.inner,...e}},P.createElement("div",{style:{...kh.bar,transform:`scaleX(${a/100})`,...t}}),P.createElement("span",{ref:f,style:{...kh.data,...n}})))):null}const kh={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}};function eg(r){return function(e){r.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}let dc;function aC(){var r;if(dc!==void 0)return dc;try{let e;const t=document.createElement("canvas");return dc=!!(window.WebGL2RenderingContext&&(e=t.getContext("webgl2"))),e&&((r=e.getExtension("WEBGL_lose_context"))==null||r.loseContext()),dc}catch{return dc=!1}}function lC(r){let e=0;for(let n in r.attributes){const s=r.getAttribute(n);e+=s.count*s.itemSize*s.array.BYTES_PER_ELEMENT}const t=r.getIndex();return e+=t?t.count*t.itemSize*t.array.BYTES_PER_ELEMENT:0,e}const vp=new vS,_p=new ye,La=new ye,gs=new ye,pi=new ye,Bs=new ye,mi=new ye,gi=new ye,pc=new ye,mc=new ye,gc=new ye,Ph=new ye,vc=new ye,_c=new ye,yc=new ye;class cC{constructor(e,t,n){this.camera=e,this.scene=t,this.startPoint=new ye,this.endPoint=new ye,this.collection=[],this.deep=n||Number.MAX_VALUE}select(e,t){return this.startPoint=e||this.startPoint,this.endPoint=t||this.endPoint,this.collection=[],this.updateFrustum(this.startPoint,this.endPoint),this.searchChildInFrustum(vp,this.scene),this.collection}updateFrustum(e,t){if(e=e||this.startPoint,t=t||this.endPoint,e.x===t.x&&(t.x+=Number.EPSILON),e.y===t.y&&(t.y+=Number.EPSILON),this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(),this.camera.isPerspectiveCamera){La.copy(e),La.x=Math.min(e.x,t.x),La.y=Math.max(e.y,t.y),t.x=Math.max(e.x,t.x),t.y=Math.min(e.y,t.y),gs.setFromMatrixPosition(this.camera.matrixWorld),pi.copy(La),Bs.set(t.x,La.y,0),mi.copy(t),gi.set(La.x,t.y,0),pi.unproject(this.camera),Bs.unproject(this.camera),mi.unproject(this.camera),gi.unproject(this.camera),vc.copy(pi).sub(gs),_c.copy(Bs).sub(gs),yc.copy(mi).sub(gs),vc.normalize(),_c.normalize(),yc.normalize(),vc.multiplyScalar(this.deep),_c.multiplyScalar(this.deep),yc.multiplyScalar(this.deep),vc.add(gs),_c.add(gs),yc.add(gs);var n=vp.planes;n[0].setFromCoplanarPoints(gs,pi,Bs),n[1].setFromCoplanarPoints(gs,Bs,mi),n[2].setFromCoplanarPoints(mi,gi,gs),n[3].setFromCoplanarPoints(gi,pi,gs),n[4].setFromCoplanarPoints(Bs,mi,gi),n[5].setFromCoplanarPoints(yc,_c,vc),n[5].normal.multiplyScalar(-1)}else if(this.camera.isOrthographicCamera){const s=Math.min(e.x,t.x),i=Math.max(e.y,t.y),o=Math.max(e.x,t.x),a=Math.min(e.y,t.y);pi.set(s,i,-1),Bs.set(o,i,-1),mi.set(o,a,-1),gi.set(s,a,-1),pc.set(s,i,1),mc.set(o,i,1),gc.set(o,a,1),Ph.set(s,a,1),pi.unproject(this.camera),Bs.unproject(this.camera),mi.unproject(this.camera),gi.unproject(this.camera),pc.unproject(this.camera),mc.unproject(this.camera),gc.unproject(this.camera),Ph.unproject(this.camera);var n=vp.planes;n[0].setFromCoplanarPoints(pi,pc,mc),n[1].setFromCoplanarPoints(Bs,mc,gc),n[2].setFromCoplanarPoints(gc,Ph,gi),n[3].setFromCoplanarPoints(Ph,pc,pi),n[4].setFromCoplanarPoints(Bs,mi,gi),n[5].setFromCoplanarPoints(gc,mc,pc),n[5].normal.multiplyScalar(-1)}else console.error("THREE.SelectionBox: Unsupported camera type.")}searchChildInFrustum(e,t){if((t.isMesh||t.isLine||t.isPoints)&&t.material!==void 0&&(t.geometry.boundingSphere===null&&t.geometry.computeBoundingSphere(),_p.copy(t.geometry.boundingSphere.center),_p.applyMatrix4(t.matrixWorld),e.containsPoint(_p)&&this.collection.push(t)),t.children.length>0)for(let n=0;n<t.children.length;n++)this.searchChildInFrustum(e,t.children[n])}}const Y1=new Bf,Rh=new ye;class Gf extends B_{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],n=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(n),this.setAttribute("position",new af(e,3)),this.setAttribute("uv",new af(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,n=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),n.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new Xp(t,6,1);return this.setAttribute("instanceStart",new Ka(n,3,0)),this.setAttribute("instanceEnd",new Ka(n,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new Xp(t,6,1);return this.setAttribute("instanceColorStart",new Ka(n,3,0)),this.setAttribute("instanceColorEnd",new Ka(n,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new _S(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Bf);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),Y1.setFromBufferAttribute(t),this.boundingBox.union(Y1))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Gm),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const n=this.boundingSphere.center;this.boundingBox.getCenter(n);let s=0;for(let i=0,o=e.count;i<o;i++)Rh.fromBufferAttribute(e,i),s=Math.max(s,n.distanceToSquared(Rh)),Rh.fromBufferAttribute(t,i),s=Math.max(s,n.distanceToSquared(Rh));this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class Cy extends Gf{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,n=new Float32Array(2*t);for(let s=0;s<t;s+=3)n[2*s]=e[s],n[2*s+1]=e[s+1],n[2*s+2]=e[s+2],n[2*s+3]=e[s+3],n[2*s+4]=e[s+4],n[2*s+5]=e[s+5];return super.setPositions(n),this}setColors(e){const t=e.length-3,n=new Float32Array(2*t);for(let s=0;s<t;s+=3)n[2*s]=e[s],n[2*s+1]=e[s+1],n[2*s+2]=e[s+2],n[2*s+3]=e[s+3],n[2*s+4]=e[s+4],n[2*s+5]=e[s+5];return super.setColors(n),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class Hf extends Es{constructor(e){super({type:"LineMaterial",uniforms:Qp.clone(Qp.merge([A1.common,A1.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new _t(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <color_pars_vertex>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				attribute vec3 instanceColorStart;
				attribute vec3 instanceColorEnd;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <color_pars_fragment>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );

					#include <logdepthbuf_fragment>
					#include <color_fragment>

					gl_FragColor = vec4( diffuseColor.rgb, alpha );

					#include <tonemapping_fragment>
					#include <${parseInt(jf.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){t===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(t){!!t!="USE_DASH"in this.defines&&(this.needsUpdate=!0),t===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(t){!!t!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),t===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const X1=new ye,Q1=new ye,An=new oo,kn=new oo,js=new oo,yp=new ye,xp=new ca,Nn=new yS,K1=new ye,Dh=new Bf,Ih=new Gm,Vs=new oo;let Ws,nm,Ey,Zo;function J1(r,e,t){return Vs.set(0,0,-e,1).applyMatrix4(r.projectionMatrix),Vs.multiplyScalar(1/Vs.w),Vs.x=Zo/t.width,Vs.y=Zo/t.height,Vs.applyMatrix4(r.projectionMatrixInverse),Vs.multiplyScalar(1/Vs.w),Math.abs(Math.max(Vs.x,Vs.y))}function uC(r,e){for(let t=0,n=nm.count;t<n;t++){Nn.start.fromBufferAttribute(nm,t),Nn.end.fromBufferAttribute(Ey,t);const s=new ye,i=new ye;Ws.distanceSqToSegment(Nn.start,Nn.end,i,s),i.distanceTo(s)<Zo*.5&&e.push({point:i,pointOnLine:s,distance:Ws.origin.distanceTo(i),object:r,face:null,faceIndex:t,uv:null,uv2:null})}}function hC(r,e,t){const n=e.projectionMatrix,i=r.material.resolution,o=r.matrixWorld,a=r.geometry,c=a.attributes.instanceStart,h=a.attributes.instanceEnd,f=-e.near;Ws.at(1,js),js.w=1,js.applyMatrix4(e.matrixWorldInverse),js.applyMatrix4(n),js.multiplyScalar(1/js.w),js.x*=i.x/2,js.y*=i.y/2,js.z=0,yp.copy(js),xp.multiplyMatrices(e.matrixWorldInverse,o);for(let d=0,p=c.count;d<p;d++){if(An.fromBufferAttribute(c,d),kn.fromBufferAttribute(h,d),An.w=1,kn.w=1,An.applyMatrix4(xp),kn.applyMatrix4(xp),An.z>f&&kn.z>f)continue;if(An.z>f){const T=An.z-kn.z,b=(An.z-f)/T;An.lerp(kn,b)}else if(kn.z>f){const T=kn.z-An.z,b=(kn.z-f)/T;kn.lerp(An,b)}An.applyMatrix4(n),kn.applyMatrix4(n),An.multiplyScalar(1/An.w),kn.multiplyScalar(1/kn.w),An.x*=i.x/2,An.y*=i.y/2,kn.x*=i.x/2,kn.y*=i.y/2,Nn.start.copy(An),Nn.start.z=0,Nn.end.copy(kn),Nn.end.z=0;const _=Nn.closestPointToPointParameter(yp,!0);Nn.at(_,K1);const y=Hm.lerp(An.z,kn.z,_),x=y>=-1&&y<=1,w=yp.distanceTo(K1)<Zo*.5;if(x&&w){Nn.start.fromBufferAttribute(c,d),Nn.end.fromBufferAttribute(h,d),Nn.start.applyMatrix4(o),Nn.end.applyMatrix4(o);const T=new ye,b=new ye;Ws.distanceSqToSegment(Nn.start,Nn.end,b,T),t.push({point:b,pointOnLine:T,distance:Ws.origin.distanceTo(b),object:r,face:null,faceIndex:d,uv:null,uv2:null})}}}class by extends ua{constructor(e=new Gf,t=new Hf({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,n=e.attributes.instanceEnd,s=new Float32Array(2*t.count);for(let o=0,a=0,c=t.count;o<c;o++,a+=2)X1.fromBufferAttribute(t,o),Q1.fromBufferAttribute(n,o),s[a]=a===0?0:s[a-1],s[a+1]=s[a]+X1.distanceTo(Q1);const i=new Xp(s,2,1);return e.setAttribute("instanceDistanceStart",new Ka(i,1,0)),e.setAttribute("instanceDistanceEnd",new Ka(i,1,1)),this}raycast(e,t){const n=this.material.worldUnits,s=e.camera;s===null&&!n&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const i=e.params.Line2!==void 0&&e.params.Line2.threshold||0;Ws=e.ray;const o=this.matrixWorld,a=this.geometry,c=this.material;Zo=c.linewidth+i,nm=a.attributes.instanceStart,Ey=a.attributes.instanceEnd,a.boundingSphere===null&&a.computeBoundingSphere(),Ih.copy(a.boundingSphere).applyMatrix4(o);let h;if(n)h=Zo*.5;else{const d=Math.max(s.near,Ih.distanceToPoint(Ws.origin));h=J1(s,d,c.resolution)}if(Ih.radius+=h,Ws.intersectsSphere(Ih)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),Dh.copy(a.boundingBox).applyMatrix4(o);let f;if(n)f=Zo*.5;else{const d=Math.max(s.near,Dh.distanceToPoint(Ws.origin));f=J1(s,d,c.resolution)}Dh.expandByScalar(f),Ws.intersectsBox(Dh)!==!1&&(n?uC(this,t):hC(this,s,t))}}class My extends by{constructor(e=new Cy,t=new Hf({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}function fC(r,e){if(Object.is(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;const t=Object.keys(r);if(t.length!==Object.keys(e).length)return!1;for(let n=0;n<t.length;n++)if(!Object.prototype.hasOwnProperty.call(e,t[n])||!Object.is(r[t[n]],e[t[n]]))return!1;return!0}const dC=P.createContext([]);function pC({box:r,multiple:e,children:t,onChange:n,border:s="1px solid #55aaff",backgroundColor:i="rgba(75, 160, 255, 0.1)",filter:o=c=>c,...a}){const{setEvents:c,camera:h,raycaster:f,gl:d,controls:p,size:g,get:_}=lt(),[y,x]=P.useState(!1),[w,T]=P.useReducer((A,{object:M,shift:k})=>M===void 0?[]:Array.isArray(M)?M:k?A.includes(M)?A.filter(R=>R!==M):[M,...A]:A[0]===M?[]:[M],[]);P.useEffect(()=>void(n==null?void 0:n(w)),[w]);const b=P.useCallback(A=>{A.stopPropagation(),T({object:o([A.object])[0],shift:e&&A.shiftKey})},[]),E=P.useCallback(A=>!y&&T({}),[y]),C=P.useRef(null);return P.useEffect(()=>{if(!r||!e)return;const A=new cC(h,C.current),M=document.createElement("div");M.style.pointerEvents="none",M.style.border=s,M.style.backgroundColor=i,M.style.position="fixed";const k=new _t,R=new _t,F=new _t,U=_().events.enabled,I=p==null?void 0:p.enabled;let z=!1;function j(B,J){const{offsetX:te,offsetY:X}=B,{width:oe,height:re}=g;J.set(te/oe*2-1,-(X/re)*2+1)}function q(B){var J;p&&(p.enabled=!1),c({enabled:!1}),z=!0,(J=d.domElement.parentElement)==null||J.appendChild(M),M.style.left=`${B.clientX}px`,M.style.top=`${B.clientY}px`,M.style.width="0px",M.style.height="0px",k.x=B.clientX,k.y=B.clientY}function Y(B){F.x=Math.max(k.x,B.clientX),F.y=Math.max(k.y,B.clientY),R.x=Math.min(k.x,B.clientX),R.y=Math.min(k.y,B.clientY),M.style.left=`${R.x}px`,M.style.top=`${R.y}px`,M.style.width=`${F.x-R.x}px`,M.style.height=`${F.y-R.y}px`}function $(){if(z){var B;p&&(p.enabled=I),c({enabled:U}),z=!1,(B=M.parentElement)==null||B.removeChild(M)}}function W(B){B.shiftKey&&(q(B),j(B,A.startPoint))}let V=[];function H(B){if(z){Y(B),j(B,A.endPoint);const J=A.select().sort(te=>te.uuid).filter(te=>te.isMesh);fC(J,V)||(V=J,T({object:o(J)}))}}function L(B){z&&$()}return document.addEventListener("pointerdown",W,{passive:!0}),document.addEventListener("pointermove",H,{passive:!0,capture:!0}),document.addEventListener("pointerup",L,{passive:!0}),()=>{document.removeEventListener("pointerdown",W),document.removeEventListener("pointermove",H),document.removeEventListener("pointerup",L)}},[g.width,g.height,f,h,p,d]),P.createElement("group",as({ref:C,onClick:b,onPointerOver:()=>x(!0),onPointerOut:()=>x(!1),onPointerMissed:E},a),P.createElement(dC.Provider,{value:w},t))}const mC=P.forwardRef(function({points:e,color:t="black",vertexColors:n,linewidth:s,lineWidth:i,segments:o,dashed:a,...c},h){const f=lt(_=>_.size),d=P.useMemo(()=>o?new by:new My,[o]),[p]=P.useState(()=>new Hf),g=P.useMemo(()=>{const _=o?new Gf:new Cy,y=e.map(x=>{const w=Array.isArray(x);return x instanceof ye?[x.x,x.y,x.z]:x instanceof _t?[x.x,x.y,0]:w&&x.length===3?[x[0],x[1],x[2]]:w&&x.length===2?[x[0],x[1],0]:x});if(_.setPositions(y.flat()),n){const x=n.map(w=>w instanceof rr?w.toArray():w);_.setColors(x.flat())}return _},[e,o,n]);return P.useLayoutEffect(()=>{d.computeLineDistances()},[e,d]),P.useLayoutEffect(()=>{a?p.defines.USE_DASH="":delete p.defines.USE_DASH,p.needsUpdate=!0},[a,p]),P.useEffect(()=>()=>g.dispose(),[g]),P.createElement("primitive",as({object:d,ref:h},c),P.createElement("primitive",{object:g,attach:"geometry"}),P.createElement("primitive",as({object:p,attach:"material",color:t,vertexColors:!!n,resolution:[f.width,f.height],linewidth:s??i,dashed:a},c)))});function gC(){var r=Object.create(null);function e(s,i){var o=s.id,a=s.name,c=s.dependencies;c===void 0&&(c=[]);var h=s.init;h===void 0&&(h=function(){});var f=s.getTransferables;if(f===void 0&&(f=null),!r[o])try{c=c.map(function(p){return p&&p.isWorkerModule&&(e(p,function(g){if(g instanceof Error)throw g}),p=r[p.id].value),p}),h=n("<"+a+">.init",h),f&&(f=n("<"+a+">.getTransferables",f));var d=null;typeof h=="function"?d=h.apply(void 0,c):console.error("worker module init function failed to rehydrate"),r[o]={id:o,value:d,getTransferables:f},i(d)}catch(p){p&&p.noLog||console.error(p),i(p)}}function t(s,i){var o,a=s.id,c=s.args;(!r[a]||typeof r[a].value!="function")&&i(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var h=(o=r[a]).value.apply(o,c);h&&typeof h.then=="function"?h.then(f,function(d){return i(d instanceof Error?d:new Error(""+d))}):f(h)}catch(d){i(d)}function f(d){try{var p=r[a].getTransferables&&r[a].getTransferables(d);(!p||!Array.isArray(p)||!p.length)&&(p=void 0),i(d,p)}catch(g){console.error(g),i(g)}}}function n(s,i){var o=void 0;self.troikaDefine=function(c){return o=c};var a=URL.createObjectURL(new Blob(["/** "+s.replace(/\*/g,"")+` **/

troikaDefine(
`+i+`
)`],{type:"application/javascript"}));try{importScripts(a)}catch(c){console.error(c)}return URL.revokeObjectURL(a),delete self.troikaDefine,o}self.addEventListener("message",function(s){var i=s.data,o=i.messageId,a=i.action,c=i.data;try{a==="registerModule"&&e(c,function(h){h instanceof Error?postMessage({messageId:o,success:!1,error:h.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof h=="function"}})}),a==="callModule"&&t(c,function(h,f){h instanceof Error?postMessage({messageId:o,success:!1,error:h.message}):postMessage({messageId:o,success:!0,result:h},f||void 0)})}catch(h){postMessage({messageId:o,success:!1,error:h.stack})}})}function vC(r){var e=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return e._getInitResult().then(function(s){if(typeof s=="function")return s.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=r.dependencies,n=r.init;t=Array.isArray(t)?t.map(function(i){return i&&i._getInitResult?i._getInitResult():i}):[];var s=Promise.all(t).then(function(i){return n.apply(null,i)});return e._getInitResult=function(){return s},s},e}var Oy=function(){var r=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),r=!0}catch(t){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return Oy=function(){return r},r},_C=0,yC=0,wp=!1,Fc=Object.create(null),Nc=Object.create(null),rm=Object.create(null);function Su(r){if((!r||typeof r.init!="function")&&!wp)throw new Error("requires `options.init` function");var e=r.dependencies,t=r.init,n=r.getTransferables,s=r.workerId;if(!Oy())return vC(r);s==null&&(s="#default");var i="workerModule"+ ++_C,o=r.name||i,a=null;e=e&&e.map(function(h){return typeof h=="function"&&!h.workerModuleData&&(wp=!0,h=Su({workerId:s,name:"<"+o+"> function dependency: "+h.name,init:`function(){return (
`+Jh(h)+`
)}`}),wp=!1),h&&h.workerModuleData&&(h=h.workerModuleData),h});function c(){for(var h=[],f=arguments.length;f--;)h[f]=arguments[f];if(!a){a=$1(s,"registerModule",c.workerModuleData);var d=function(){a=null,Nc[s].delete(d)};(Nc[s]||(Nc[s]=new Set)).add(d)}return a.then(function(p){var g=p.isCallable;if(g)return $1(s,"callModule",{id:i,args:h});throw new Error("Worker module function was called but `init` did not return a callable function")})}return c.workerModuleData={isWorkerModule:!0,id:i,name:o,dependencies:e,init:Jh(t),getTransferables:n&&Jh(n)},c}function xC(r){Nc[r]&&Nc[r].forEach(function(e){e()}),Fc[r]&&(Fc[r].terminate(),delete Fc[r])}function Jh(r){var e=r.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function wC(r){var e=Fc[r];if(!e){var t=Jh(gC);e=Fc[r]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+r.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(n){var s=n.data,i=s.messageId,o=rm[i];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete rm[i],o(s)}}return e}function $1(r,e,t){return new Promise(function(n,s){var i=++yC;rm[i]=function(o){o.success?n(o.result):s(new Error("Error in worker "+e+" call: "+o.error))},wC(r).postMessage({messageId:i,action:e,data:t})})}function Ay(){var r=function(e){function t(V,H,L,B,J,te,X,oe){var re=1-X;oe.x=re*re*V+2*re*X*L+X*X*J,oe.y=re*re*H+2*re*X*B+X*X*te}function n(V,H,L,B,J,te,X,oe,re,Q){var ge=1-re;Q.x=ge*ge*ge*V+3*ge*ge*re*L+3*ge*re*re*J+re*re*re*X,Q.y=ge*ge*ge*H+3*ge*ge*re*B+3*ge*re*re*te+re*re*re*oe}function s(V,H){for(var L=/([MLQCZ])([^MLQCZ]*)/g,B,J,te,X,oe;B=L.exec(V);){var re=B[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(Q){return parseFloat(Q)});switch(B[1]){case"M":X=J=re[0],oe=te=re[1];break;case"L":(re[0]!==X||re[1]!==oe)&&H("L",X,oe,X=re[0],oe=re[1]);break;case"Q":{H("Q",X,oe,X=re[2],oe=re[3],re[0],re[1]);break}case"C":{H("C",X,oe,X=re[4],oe=re[5],re[0],re[1],re[2],re[3]);break}case"Z":(X!==J||oe!==te)&&H("L",X,oe,J,te);break}}}function i(V,H,L){L===void 0&&(L=16);var B={x:0,y:0};s(V,function(J,te,X,oe,re,Q,ge,ve,ae){switch(J){case"L":H(te,X,oe,re);break;case"Q":{for(var le=te,be=X,Fe=1;Fe<L;Fe++)t(te,X,Q,ge,oe,re,Fe/(L-1),B),H(le,be,B.x,B.y),le=B.x,be=B.y;break}case"C":{for(var ee=te,he=X,xe=1;xe<L;xe++)n(te,X,Q,ge,ve,ae,oe,re,xe/(L-1),B),H(ee,he,B.x,B.y),ee=B.x,he=B.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",c=new WeakMap,h={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function f(V,H){var L=V.getContext?V.getContext("webgl",h):V,B=c.get(L);if(!B){let ge=function(ee){var he=te[ee];if(!he&&(he=te[ee]=L.getExtension(ee),!he))throw new Error(ee+" not supported");return he},ve=function(ee,he){var xe=L.createShader(he);return L.shaderSource(xe,ee),L.compileShader(xe),xe},ae=function(ee,he,xe,ce){if(!X[ee]){var de={},pe={},ue=L.createProgram();L.attachShader(ue,ve(he,L.VERTEX_SHADER)),L.attachShader(ue,ve(xe,L.FRAGMENT_SHADER)),L.linkProgram(ue),X[ee]={program:ue,transaction:function(Se){L.useProgram(ue),Se({setUniform:function(Te,et){for(var He=[],Pe=arguments.length-2;Pe-- >0;)He[Pe]=arguments[Pe+2];var We=pe[et]||(pe[et]=L.getUniformLocation(ue,et));L["uniform"+Te].apply(L,[We].concat(He))},setAttribute:function(Te,et,He,Pe,We){var rt=de[Te];rt||(rt=de[Te]={buf:L.createBuffer(),loc:L.getAttribLocation(ue,Te),data:null}),L.bindBuffer(L.ARRAY_BUFFER,rt.buf),L.vertexAttribPointer(rt.loc,et,L.FLOAT,!1,0,0),L.enableVertexAttribArray(rt.loc),J?L.vertexAttribDivisor(rt.loc,Pe):ge("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(rt.loc,Pe),We!==rt.data&&(L.bufferData(L.ARRAY_BUFFER,We,He),rt.data=We)}})}}}X[ee].transaction(ce)},le=function(ee,he){re++;try{L.activeTexture(L.TEXTURE0+re);var xe=oe[ee];xe||(xe=oe[ee]=L.createTexture(),L.bindTexture(L.TEXTURE_2D,xe),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MIN_FILTER,L.NEAREST),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MAG_FILTER,L.NEAREST)),L.bindTexture(L.TEXTURE_2D,xe),he(xe,re)}finally{re--}},be=function(ee,he,xe){var ce=L.createFramebuffer();Q.push(ce),L.bindFramebuffer(L.FRAMEBUFFER,ce),L.activeTexture(L.TEXTURE0+he),L.bindTexture(L.TEXTURE_2D,ee),L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_2D,ee,0);try{xe(ce)}finally{L.deleteFramebuffer(ce),L.bindFramebuffer(L.FRAMEBUFFER,Q[--Q.length-1]||null)}},Fe=function(){te={},X={},oe={},re=-1,Q.length=0};var J=typeof WebGL2RenderingContext<"u"&&L instanceof WebGL2RenderingContext,te={},X={},oe={},re=-1,Q=[];L.canvas.addEventListener("webglcontextlost",function(ee){Fe(),ee.preventDefault()},!1),c.set(L,B={gl:L,isWebGL2:J,getExtension:ge,withProgram:ae,withTexture:le,withTextureFramebuffer:be,handleContextLoss:Fe})}H(B)}function d(V,H,L,B,J,te,X,oe){X===void 0&&(X=15),oe===void 0&&(oe=null),f(V,function(re){var Q=re.gl,ge=re.withProgram,ve=re.withTexture;ve("copy",function(ae,le){Q.texImage2D(Q.TEXTURE_2D,0,Q.RGBA,J,te,0,Q.RGBA,Q.UNSIGNED_BYTE,H),ge("copy",o,a,function(be){var Fe=be.setUniform,ee=be.setAttribute;ee("aUV",2,Q.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),Fe("1i","image",le),Q.bindFramebuffer(Q.FRAMEBUFFER,oe||null),Q.disable(Q.BLEND),Q.colorMask(X&8,X&4,X&2,X&1),Q.viewport(L,B,J,te),Q.scissor(L,B,J,te),Q.drawArrays(Q.TRIANGLES,0,3)})})})}function p(V,H,L){var B=V.width,J=V.height;f(V,function(te){var X=te.gl,oe=new Uint8Array(B*J*4);X.readPixels(0,0,B,J,X.RGBA,X.UNSIGNED_BYTE,oe),V.width=H,V.height=L,d(X,oe,0,0,B,J)})}var g=Object.freeze({__proto__:null,withWebGLContext:f,renderImageData:d,resizeWebGLCanvasWithoutClearing:p});function _(V,H,L,B,J,te){te===void 0&&(te=1);var X=new Uint8Array(V*H),oe=B[2]-B[0],re=B[3]-B[1],Q=[];i(L,function(ee,he,xe,ce){Q.push({x1:ee,y1:he,x2:xe,y2:ce,minX:Math.min(ee,xe),minY:Math.min(he,ce),maxX:Math.max(ee,xe),maxY:Math.max(he,ce)})}),Q.sort(function(ee,he){return ee.maxX-he.maxX});for(var ge=0;ge<V;ge++)for(var ve=0;ve<H;ve++){var ae=be(B[0]+oe*(ge+.5)/V,B[1]+re*(ve+.5)/H),le=Math.pow(1-Math.abs(ae)/J,te)/2;ae<0&&(le=1-le),le=Math.max(0,Math.min(255,Math.round(le*255))),X[ve*V+ge]=le}return X;function be(ee,he){for(var xe=1/0,ce=1/0,de=Q.length;de--;){var pe=Q[de];if(pe.maxX+ce<=ee)break;if(ee+ce>pe.minX&&he-ce<pe.maxY&&he+ce>pe.minY){var ue=w(ee,he,pe.x1,pe.y1,pe.x2,pe.y2);ue<xe&&(xe=ue,ce=Math.sqrt(xe))}}return Fe(ee,he)&&(ce=-ce),ce}function Fe(ee,he){for(var xe=0,ce=Q.length;ce--;){var de=Q[ce];if(de.maxX<=ee)break;var pe=de.y1>he!=de.y2>he&&ee<(de.x2-de.x1)*(he-de.y1)/(de.y2-de.y1)+de.x1;pe&&(xe+=de.y1<de.y2?1:-1)}return xe!==0}}function y(V,H,L,B,J,te,X,oe,re,Q){te===void 0&&(te=1),oe===void 0&&(oe=0),re===void 0&&(re=0),Q===void 0&&(Q=0),x(V,H,L,B,J,te,X,null,oe,re,Q)}function x(V,H,L,B,J,te,X,oe,re,Q,ge){te===void 0&&(te=1),re===void 0&&(re=0),Q===void 0&&(Q=0),ge===void 0&&(ge=0);for(var ve=_(V,H,L,B,J,te),ae=new Uint8Array(ve.length*4),le=0;le<ve.length;le++)ae[le*4+ge]=ve[le];d(X,ae,re,Q,V,H,1<<3-ge,oe)}function w(V,H,L,B,J,te){var X=J-L,oe=te-B,re=X*X+oe*oe,Q=re?Math.max(0,Math.min(1,((V-L)*X+(H-B)*oe)/re)):0,ge=V-(L+Q*X),ve=H-(B+Q*oe);return ge*ge+ve*ve}var T=Object.freeze({__proto__:null,generate:_,generateIntoCanvas:y,generateIntoFramebuffer:x}),b="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",E="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",C="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",A=new Float32Array([0,0,2,0,0,2]),M=null,k=!1,R={},F=new WeakMap;function U(V){if(!k&&!q(V))throw new Error("WebGL generation not supported")}function I(V,H,L,B,J,te,X){if(te===void 0&&(te=1),X===void 0&&(X=null),!X&&(X=M,!X)){var oe=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!oe)throw new Error("OffscreenCanvas or DOM canvas not supported");X=M=oe.getContext("webgl",{depth:!1})}U(X);var re=new Uint8Array(V*H*4);f(X,function(ae){var le=ae.gl,be=ae.withTexture,Fe=ae.withTextureFramebuffer;be("readable",function(ee,he){le.texImage2D(le.TEXTURE_2D,0,le.RGBA,V,H,0,le.RGBA,le.UNSIGNED_BYTE,null),Fe(ee,he,function(xe){j(V,H,L,B,J,te,le,xe,0,0,0),le.readPixels(0,0,V,H,le.RGBA,le.UNSIGNED_BYTE,re)})})});for(var Q=new Uint8Array(V*H),ge=0,ve=0;ge<re.length;ge+=4)Q[ve++]=re[ge];return Q}function z(V,H,L,B,J,te,X,oe,re,Q){te===void 0&&(te=1),oe===void 0&&(oe=0),re===void 0&&(re=0),Q===void 0&&(Q=0),j(V,H,L,B,J,te,X,null,oe,re,Q)}function j(V,H,L,B,J,te,X,oe,re,Q,ge){te===void 0&&(te=1),re===void 0&&(re=0),Q===void 0&&(Q=0),ge===void 0&&(ge=0),U(X);var ve=[];i(L,function(ae,le,be,Fe){ve.push(ae,le,be,Fe)}),ve=new Float32Array(ve),f(X,function(ae){var le=ae.gl,be=ae.isWebGL2,Fe=ae.getExtension,ee=ae.withProgram,he=ae.withTexture,xe=ae.withTextureFramebuffer,ce=ae.handleContextLoss;if(he("rawDistances",function(de,pe){(V!==de._lastWidth||H!==de._lastHeight)&&le.texImage2D(le.TEXTURE_2D,0,le.RGBA,de._lastWidth=V,de._lastHeight=H,0,le.RGBA,le.UNSIGNED_BYTE,null),ee("main",b,E,function(ue){var Me=ue.setAttribute,Se=ue.setUniform,Ce=!be&&Fe("ANGLE_instanced_arrays"),Te=!be&&Fe("EXT_blend_minmax");Me("aUV",2,le.STATIC_DRAW,0,A),Me("aLineSegment",4,le.DYNAMIC_DRAW,1,ve),Se.apply(void 0,["4f","uGlyphBounds"].concat(B)),Se("1f","uMaxDistance",J),Se("1f","uExponent",te),xe(de,pe,function(et){le.enable(le.BLEND),le.colorMask(!0,!0,!0,!0),le.viewport(0,0,V,H),le.scissor(0,0,V,H),le.blendFunc(le.ONE,le.ONE),le.blendEquationSeparate(le.FUNC_ADD,be?le.MAX:Te.MAX_EXT),le.clear(le.COLOR_BUFFER_BIT),be?le.drawArraysInstanced(le.TRIANGLES,0,3,ve.length/4):Ce.drawArraysInstancedANGLE(le.TRIANGLES,0,3,ve.length/4)})}),ee("post",o,C,function(ue){ue.setAttribute("aUV",2,le.STATIC_DRAW,0,A),ue.setUniform("1i","tex",pe),le.bindFramebuffer(le.FRAMEBUFFER,oe),le.disable(le.BLEND),le.colorMask(ge===0,ge===1,ge===2,ge===3),le.viewport(re,Q,V,H),le.scissor(re,Q,V,H),le.drawArrays(le.TRIANGLES,0,3)})}),le.isContextLost())throw ce(),new Error("webgl context lost")})}function q(V){var H=!V||V===M?R:V.canvas||V,L=F.get(H);if(L===void 0){k=!0;var B=null;try{var J=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],te=I(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,V);L=te&&J.length===te.length&&te.every(function(X,oe){return X===J[oe]}),L||(B="bad trial run results",console.info(J,te))}catch(X){L=!1,B=X.message}B&&console.warn("WebGL SDF generation not supported:",B),k=!1,F.set(H,L)}return L}var Y=Object.freeze({__proto__:null,generate:I,generateIntoCanvas:z,generateIntoFramebuffer:j,isSupported:q});function $(V,H,L,B,J,te){J===void 0&&(J=Math.max(B[2]-B[0],B[3]-B[1])/2),te===void 0&&(te=1);try{return I.apply(Y,arguments)}catch(X){return console.info("WebGL SDF generation failed, falling back to JS",X),_.apply(T,arguments)}}function W(V,H,L,B,J,te,X,oe,re,Q){J===void 0&&(J=Math.max(B[2]-B[0],B[3]-B[1])/2),te===void 0&&(te=1),oe===void 0&&(oe=0),re===void 0&&(re=0),Q===void 0&&(Q=0);try{return z.apply(Y,arguments)}catch(ge){return console.info("WebGL SDF generation failed, falling back to JS",ge),y.apply(T,arguments)}}return e.forEachPathCommand=s,e.generate=$,e.generateIntoCanvas=W,e.javascript=T,e.pathToLineSegments=i,e.webgl=Y,e.webglUtils=g,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return r}function SC(){var r=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},s={};n.L=1,s[1]="L",Object.keys(t).forEach(function(ce,de){n[ce]=1<<de+1,s[n[ce]]=ce}),Object.freeze(n);var i=n.LRI|n.RLI|n.FSI,o=n.L|n.R|n.AL,a=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,c=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,h=n.S|n.WS|n.B|i|n.PDI|c,f=null;function d(){if(!f){f=new Map;var ce=function(pe){if(t.hasOwnProperty(pe)){var ue=0;t[pe].split(",").forEach(function(Me){var Se=Me.split("+"),Ce=Se[0],Te=Se[1];Ce=parseInt(Ce,36),Te=Te?parseInt(Te,36):0,f.set(ue+=Ce,n[pe]);for(var et=0;et<Te;et++)f.set(++ue,n[pe])})}};for(var de in t)ce(de)}}function p(ce){return d(),f.get(ce.codePointAt(0))||n.L}function g(ce){return s[p(ce)]}var _={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function y(ce,de){var pe=36,ue=0,Me=new Map,Se=de&&new Map,Ce;return ce.split(",").forEach(function Te(et){if(et.indexOf("+")!==-1)for(var He=+et;He--;)Te(Ce);else{Ce=et;var Pe=et.split(">"),We=Pe[0],rt=Pe[1];We=String.fromCodePoint(ue+=parseInt(We,pe)),rt=String.fromCodePoint(ue+=parseInt(rt,pe)),Me.set(We,rt),de&&Se.set(rt,We)}}),{map:Me,reverseMap:Se}}var x,w,T;function b(){if(!x){var ce=y(_.pairs,!0),de=ce.map,pe=ce.reverseMap;x=de,w=pe,T=y(_.canonical,!1).map}}function E(ce){return b(),x.get(ce)||null}function C(ce){return b(),w.get(ce)||null}function A(ce){return b(),T.get(ce)||null}var M=n.L,k=n.R,R=n.EN,F=n.ES,U=n.ET,I=n.AN,z=n.CS,j=n.B,q=n.S,Y=n.ON,$=n.BN,W=n.NSM,V=n.AL,H=n.LRO,L=n.RLO,B=n.LRE,J=n.RLE,te=n.PDF,X=n.LRI,oe=n.RLI,re=n.FSI,Q=n.PDI;function ge(ce,de){for(var pe=125,ue=new Uint32Array(ce.length),Me=0;Me<ce.length;Me++)ue[Me]=p(ce[Me]);var Se=new Map;function Ce(yn,Jn){var Qt=ue[yn];ue[yn]=Jn,Se.set(Qt,Se.get(Qt)-1),Qt&a&&Se.set(a,Se.get(a)-1),Se.set(Jn,(Se.get(Jn)||0)+1),Jn&a&&Se.set(a,(Se.get(a)||0)+1)}for(var Te=new Uint8Array(ce.length),et=new Map,He=[],Pe=null,We=0;We<ce.length;We++)Pe||He.push(Pe={start:We,end:ce.length-1,level:de==="rtl"?1:de==="ltr"?0:Ea(We,!1)}),ue[We]&j&&(Pe.end=We,Pe=null);for(var rt=J|B|L|H|i|Q|te|j,Vt=function(yn){return yn+(yn&1?1:2)},Ge=function(yn){return yn+(yn&1?2:1)},xt=0;xt<He.length;xt++){Pe=He[xt];var Qe=[{_level:Pe.level,_override:0,_isolate:0}],Ne=void 0,ct=0,dt=0,Gt=0;Se.clear();for(var Ze=Pe.start;Ze<=Pe.end;Ze++){var At=ue[Ze];if(Ne=Qe[Qe.length-1],Se.set(At,(Se.get(At)||0)+1),At&a&&Se.set(a,(Se.get(a)||0)+1),At&rt)if(At&(J|B)){Te[Ze]=Ne._level;var bn=(At===J?Ge:Vt)(Ne._level);bn<=pe&&!ct&&!dt?Qe.push({_level:bn,_override:0,_isolate:0}):ct||dt++}else if(At&(L|H)){Te[Ze]=Ne._level;var us=(At===L?Ge:Vt)(Ne._level);us<=pe&&!ct&&!dt?Qe.push({_level:us,_override:At&L?k:M,_isolate:0}):ct||dt++}else if(At&i){At&re&&(At=Ea(Ze+1,!0)===1?oe:X),Te[Ze]=Ne._level,Ne._override&&Ce(Ze,Ne._override);var ni=(At===oe?Ge:Vt)(Ne._level);ni<=pe&&ct===0&&dt===0?(Gt++,Qe.push({_level:ni,_override:0,_isolate:1,_isolInitIndex:Ze})):ct++}else if(At&Q){if(ct>0)ct--;else if(Gt>0){for(dt=0;!Qe[Qe.length-1]._isolate;)Qe.pop();var hs=Qe[Qe.length-1]._isolInitIndex;hs!=null&&(et.set(hs,Ze),et.set(Ze,hs)),Qe.pop(),Gt--}Ne=Qe[Qe.length-1],Te[Ze]=Ne._level,Ne._override&&Ce(Ze,Ne._override)}else At&te?(ct===0&&(dt>0?dt--:!Ne._isolate&&Qe.length>1&&(Qe.pop(),Ne=Qe[Qe.length-1])),Te[Ze]=Ne._level):At&j&&(Te[Ze]=Pe.level);else Te[Ze]=Ne._level,Ne._override&&At!==$&&Ce(Ze,Ne._override)}for(var qn=[],Zn=null,kt=Pe.start;kt<=Pe.end;kt++){var Ii=ue[kt];if(!(Ii&c)){var Dt=Te[kt],It=Ii&i,Sr=Ii===Q;Zn&&Dt===Zn._level?(Zn._end=kt,Zn._endsWithIsolInit=It):qn.push(Zn={_start:kt,_end:kt,_level:Dt,_startsWithPDI:Sr,_endsWithIsolInit:It})}}for(var Yn=[],ut=0;ut<qn.length;ut++){var Xt=qn[ut];if(!Xt._startsWithPDI||Xt._startsWithPDI&&!et.has(Xt._start)){for(var ar=[Zn=Xt],Ht=void 0;Zn&&Zn._endsWithIsolInit&&(Ht=et.get(Zn._end))!=null;)for(var on=ut+1;on<qn.length;on++)if(qn[on]._start===Ht){ar.push(Zn=qn[on]);break}for(var Mn=[],ks=0;ks<ar.length;ks++)for(var Tr=ar[ks],ri=Tr._start;ri<=Tr._end;ri++)Mn.push(ri);for(var fd=Te[Mn[0]],Uu=Pe.level,_o=Mn[0]-1;_o>=0;_o--)if(!(ue[_o]&c)){Uu=Te[_o];break}var Ul=Mn[Mn.length-1],dd=Te[Ul],Fu=Pe.level;if(!(ue[Ul]&i)){for(var ga=Ul+1;ga<=Pe.end;ga++)if(!(ue[ga]&c)){Fu=Te[ga];break}}Yn.push({_seqIndices:Mn,_sosType:Math.max(Uu,fd)%2?k:M,_eosType:Math.max(Fu,dd)%2?k:M})}}for(var Fl=0;Fl<Yn.length;Fl++){var Nl=Yn[Fl],Oe=Nl._seqIndices,fs=Nl._sosType,Ll=Nl._eosType,Ps=Te[Oe[0]]&1?k:M;if(Se.get(W))for(var va=0;va<Oe.length;va++){var _a=Oe[va];if(ue[_a]&W){for(var Rs=fs,Cr=va-1;Cr>=0;Cr--)if(!(ue[Oe[Cr]]&c)){Rs=ue[Oe[Cr]];break}Ce(_a,Rs&(i|Q)?Y:Rs)}}if(Se.get(R))for(var ht=0;ht<Oe.length;ht++){var pt=Oe[ht];if(ue[pt]&R)for(var Er=ht-1;Er>=-1;Er--){var hn=Er===-1?fs:ue[Oe[Er]];if(hn&o){hn===V&&Ce(pt,I);break}}}if(Se.get(V))for(var gn=0;gn<Oe.length;gn++){var Ds=Oe[gn];ue[Ds]&V&&Ce(Ds,k)}if(Se.get(F)||Se.get(z))for(var Vr=1;Vr<Oe.length-1;Vr++){var vn=Oe[Vr];if(ue[vn]&(F|z)){for(var ds=0,ya=0,xa=Vr-1;xa>=0&&(ds=ue[Oe[xa]],!!(ds&c));xa--);for(var Ui=Vr+1;Ui<Oe.length&&(ya=ue[Oe[Ui]],!!(ya&c));Ui++);ds===ya&&(ue[vn]===F?ds===R:ds&(R|I))&&Ce(vn,ds)}}if(Se.get(R))for(var br=0;br<Oe.length;br++){var Mr=Oe[br];if(ue[Mr]&R){for(var wa=br-1;wa>=0&&ue[Oe[wa]]&(U|c);wa--)Ce(Oe[wa],R);for(br++;br<Oe.length&&ue[Oe[br]]&(U|c|R);br++)ue[Oe[br]]!==R&&Ce(Oe[br],R)}}if(Se.get(U)||Se.get(F)||Se.get(z))for(var yo=0;yo<Oe.length;yo++){var Nu=Oe[yo];if(ue[Nu]&(U|F|z)){Ce(Nu,Y);for(var si=yo-1;si>=0&&ue[Oe[si]]&c;si--)Ce(Oe[si],Y);for(var ii=yo+1;ii<Oe.length&&ue[Oe[ii]]&c;ii++)Ce(Oe[ii],Y)}}if(Se.get(R))for(var oi=0,xo=fs;oi<Oe.length;oi++){var Lu=Oe[oi],zl=ue[Lu];zl&R?xo===M&&Ce(Lu,M):zl&o&&(xo=zl)}if(Se.get(a)){var ai=k|R|I,Sa=ai|M,Is=[];{for(var Fi=[],Us=0;Us<Oe.length;Us++)if(ue[Oe[Us]]&a){var Je=ce[Oe[Us]],Bl=void 0;if(E(Je)!==null)if(Fi.length<63)Fi.push({char:Je,seqIndex:Us});else break;else if((Bl=C(Je))!==null)for(var li=Fi.length-1;li>=0;li--){var Ta=Fi[li].char;if(Ta===Bl||Ta===C(A(Je))||E(A(Ta))===Je){Is.push([Fi[li].seqIndex,Us]),Fi.length=li;break}}}Is.sort(function(yn,Jn){return yn[0]-Jn[0]})}for(var jl=0;jl<Is.length;jl++){for(var zu=Is[jl],Nt=zu[0],wo=zu[1],Bu=!1,Xn=0,Vl=Nt+1;Vl<wo;Vl++){var So=Oe[Vl];if(ue[So]&Sa){Bu=!0;var Or=ue[So]&ai?k:M;if(Or===Ps){Xn=Or;break}}}if(Bu&&!Xn){Xn=fs;for(var Gl=Nt-1;Gl>=0;Gl--){var ju=Oe[Gl];if(ue[ju]&Sa){var Ar=ue[ju]&ai?k:M;Ar!==Ps?Xn=Ar:Xn=Ps;break}}}if(Xn){if(ue[Oe[Nt]]=ue[Oe[wo]]=Xn,Xn!==Ps){for(var Qn=Nt+1;Qn<Oe.length;Qn++)if(!(ue[Oe[Qn]]&c)){p(ce[Oe[Qn]])&W&&(ue[Oe[Qn]]=Xn);break}}if(Xn!==Ps){for(var Fs=wo+1;Fs<Oe.length;Fs++)if(!(ue[Oe[Fs]]&c)){p(ce[Oe[Fs]])&W&&(ue[Oe[Fs]]=Xn);break}}}}for(var Gr=0;Gr<Oe.length;Gr++)if(ue[Oe[Gr]]&a){for(var Hl=Gr,Wl=Gr,lr=fs,To=Gr-1;To>=0;To--)if(ue[Oe[To]]&c)Hl=To;else{lr=ue[Oe[To]]&ai?k:M;break}for(var Co=Ll,Eo=Gr+1;Eo<Oe.length;Eo++)if(ue[Oe[Eo]]&(a|c))Wl=Eo;else{Co=ue[Oe[Eo]]&ai?k:M;break}for(var Kn=Hl;Kn<=Wl;Kn++)ue[Oe[Kn]]=lr===Co?lr:Ps;Gr=Wl}}}for(var _n=Pe.start;_n<=Pe.end;_n++){var Ca=Te[_n],ps=ue[_n];if(Ca&1?ps&(M|R|I)&&Te[_n]++:ps&k?Te[_n]++:ps&(I|R)&&(Te[_n]+=2),ps&c&&(Te[_n]=_n===0?Pe.level:Te[_n-1]),_n===Pe.end||p(ce[_n])&(q|j))for(var Ni=_n;Ni>=0&&p(ce[Ni])&h;Ni--)Te[Ni]=Pe.level}}return{levels:Te,paragraphs:He};function Ea(yn,Jn){for(var Qt=yn;Qt<ce.length;Qt++){var Kt=ue[Qt];if(Kt&(k|V))return 1;if(Kt&(j|M)||Jn&&Kt===Q)return 0;if(Kt&i){var kr=Vu(Qt);Qt=kr===-1?ce.length:kr}}return 0}function Vu(yn){for(var Jn=1,Qt=yn+1;Qt<ce.length;Qt++){var Kt=ue[Qt];if(Kt&j)break;if(Kt&Q){if(--Jn===0)return Qt}else Kt&i&&Jn++}return-1}}var ve="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",ae;function le(){if(!ae){var ce=y(ve,!0),de=ce.map,pe=ce.reverseMap;pe.forEach(function(ue,Me){de.set(Me,ue)}),ae=de}}function be(ce){return le(),ae.get(ce)||null}function Fe(ce,de,pe,ue){var Me=ce.length;pe=Math.max(0,pe==null?0:+pe),ue=Math.min(Me-1,ue==null?Me-1:+ue);for(var Se=new Map,Ce=pe;Ce<=ue;Ce++)if(de[Ce]&1){var Te=be(ce[Ce]);Te!==null&&Se.set(Ce,Te)}return Se}function ee(ce,de,pe,ue){var Me=ce.length;pe=Math.max(0,pe==null?0:+pe),ue=Math.min(Me-1,ue==null?Me-1:+ue);var Se=[];return de.paragraphs.forEach(function(Ce){var Te=Math.max(pe,Ce.start),et=Math.min(ue,Ce.end);if(Te<et){for(var He=de.levels.slice(Te,et+1),Pe=et;Pe>=Te&&p(ce[Pe])&h;Pe--)He[Pe]=Ce.level;for(var We=Ce.level,rt=1/0,Vt=0;Vt<He.length;Vt++){var Ge=He[Vt];Ge>We&&(We=Ge),Ge<rt&&(rt=Ge|1)}for(var xt=We;xt>=rt;xt--)for(var Qe=0;Qe<He.length;Qe++)if(He[Qe]>=xt){for(var Ne=Qe;Qe+1<He.length&&He[Qe+1]>=xt;)Qe++;Qe>Ne&&Se.push([Ne+Te,Qe+Te])}}}),Se}function he(ce,de,pe,ue){var Me=xe(ce,de,pe,ue),Se=[].concat(ce);return Me.forEach(function(Ce,Te){Se[Te]=(de.levels[Ce]&1?be(ce[Ce]):null)||ce[Ce]}),Se.join("")}function xe(ce,de,pe,ue){for(var Me=ee(ce,de,pe,ue),Se=[],Ce=0;Ce<ce.length;Ce++)Se[Ce]=Ce;return Me.forEach(function(Te){for(var et=Te[0],He=Te[1],Pe=Se.slice(et,He+1),We=Pe.length;We--;)Se[He-We]=Pe[We]}),Se}return e.closingToOpeningBracket=C,e.getBidiCharType=p,e.getBidiCharTypeName=g,e.getCanonicalBracket=A,e.getEmbeddingLevels=ge,e.getMirroredCharacter=be,e.getMirroredCharactersMap=Fe,e.getReorderSegments=ee,e.getReorderedIndices=xe,e.getReorderedString=he,e.openingToClosingBracket=E,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return r}const ky=/\bvoid\s+main\s*\(\s*\)\s*{/g;function sm(r){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(n,s){let i=wS[s];return i?sm(i):n}return r.replace(e,t)}const Pn=[];for(let r=0;r<256;r++)Pn[r]=(r<16?"0":"")+r.toString(16);function TC(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Pn[r&255]+Pn[r>>8&255]+Pn[r>>16&255]+Pn[r>>24&255]+"-"+Pn[e&255]+Pn[e>>8&255]+"-"+Pn[e>>16&15|64]+Pn[e>>24&255]+"-"+Pn[t&63|128]+Pn[t>>8&255]+"-"+Pn[t>>16&255]+Pn[t>>24&255]+Pn[n&255]+Pn[n>>8&255]+Pn[n>>16&255]+Pn[n>>24&255]).toUpperCase()}const Uo=Object.assign||function(){let r=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let n=arguments[e];if(n)for(let s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},CC=Date.now(),ev=new WeakMap,tv=new Map;let EC=1e10;function im(r,e){const t=AC(e);let n=ev.get(r);if(n||ev.set(r,n=Object.create(null)),n[t])return new n[t];const s=`_onBeforeCompile${t}`,i=function(h,f){r.onBeforeCompile.call(this,h,f);const d=this.customProgramCacheKey()+"|"+h.vertexShader+"|"+h.fragmentShader;let p=tv[d];if(!p){const g=bC(this,h,e,t);p=tv[d]=g}h.vertexShader=p.vertexShader,h.fragmentShader=p.fragmentShader,Uo(h.uniforms,this.uniforms),e.timeUniform&&(h.uniforms[e.timeUniform]={get value(){return Date.now()-CC}}),this[s]&&this[s](h)},o=function(){return a(e.chained?r:r.clone())},a=function(h){const f=Object.create(h,c);return Object.defineProperty(f,"baseMaterial",{value:r}),Object.defineProperty(f,"id",{value:EC++}),f.uuid=TC(),f.uniforms=Uo({},h.uniforms,e.uniforms),f.defines=Uo({},h.defines,e.defines),f.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",f.extensions=Uo({},h.extensions,e.extensions),f._listeners=void 0,f},c={constructor:{value:o},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return r.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return i},set(h){this[s]=h}},copy:{writable:!0,configurable:!0,value:function(h){return r.copy.call(this,h),!r.isShaderMaterial&&!r.isDerivedMaterial&&(Uo(this.extensions,h.extensions),Uo(this.defines,h.defines),Uo(this.uniforms,Qp.clone(h.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const h=new r.constructor;return a(h).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let h=this._depthMaterial;return h||(h=this._depthMaterial=im(r.isDerivedMaterial?r.getDepthMaterial():new j_({depthPacking:lf}),e),h.defines.IS_DEPTH_MATERIAL="",h.uniforms=this.uniforms),h}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let h=this._distanceMaterial;return h||(h=this._distanceMaterial=im(r.isDerivedMaterial?r.getDistanceMaterial():new xS,e),h.defines.IS_DISTANCE_MATERIAL="",h.uniforms=this.uniforms),h}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:h,_distanceMaterial:f}=this;h&&h.dispose(),f&&f.dispose(),r.dispose.call(this)}}};return n[t]=o,new o}function bC(r,{vertexShader:e,fragmentShader:t},n,s){let{vertexDefs:i,vertexMainIntro:o,vertexMainOutro:a,vertexTransform:c,fragmentDefs:h,fragmentMainIntro:f,fragmentMainOutro:d,fragmentColorTransform:p,customRewriter:g,timeUniform:_}=n;if(i=i||"",o=o||"",a=a||"",h=h||"",f=f||"",d=d||"",(c||g)&&(e=sm(e)),(p||g)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=sm(t)),g){let y=g({vertexShader:e,fragmentShader:t});e=y.vertexShader,t=y.fragmentShader}if(p){let y=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,x=>(y.push(x),"")),d=`${p}
${y.join(`
`)}
${d}`}if(_){const y=`
uniform float ${_};
`;i=y+i,h=y+h}return c&&(e=`vec3 troika_position_${s};
vec3 troika_normal_${s};
vec2 troika_uv_${s};
${e}
`,i=`${i}
void troikaVertexTransform${s}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${c}
}
`,o=`
troika_position_${s} = vec3(position);
troika_normal_${s} = vec3(normal);
troika_uv_${s} = vec2(uv);
troikaVertexTransform${s}(troika_position_${s}, troika_normal_${s}, troika_uv_${s});
${o}
`,e=e.replace(/\b(position|normal|uv)\b/g,(y,x,w,T)=>/\battribute\s+vec[23]\s+$/.test(T.substr(0,w))?x:`troika_${x}_${s}`),r.map&&r.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${s}`))),e=nv(e,s,i,o,a),t=nv(t,s,h,f,d),{vertexShader:e,fragmentShader:t}}function nv(r,e,t,n,s){return(n||s||t)&&(r=r.replace(ky,`
${t}
void troikaOrigMain${e}() {`),r+=`
void main() {
  ${n}
  troikaOrigMain${e}();
  ${s}
}`),r}function MC(r,e){return r==="uniforms"?void 0:typeof e=="function"?e.toString():e}let OC=0;const rv=new Map;function AC(r){const e=JSON.stringify(r,MC);let t=rv.get(e);return t==null&&rv.set(e,t=++OC),t}function kC(r,e,t){const{defaultFontURL:n}=t,s=Object.create(null),i=1/0,o=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,a="[^\\S\\u00A0]",c=new RegExp(`${a}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function h(T,b){function E(){const C=A=>{console.error(`Failure loading font ${T}${T===n?"":"; trying fallback"}`,A),T!==n&&(T=n,E())};try{const A=new XMLHttpRequest;A.open("get",T,!0),A.responseType="arraybuffer",A.onload=function(){if(A.status>=400)C(new Error(A.statusText));else if(A.status>0)try{const M=r(A.response);b(M)}catch(M){C(M)}},A.onerror=C,A.send()}catch(A){C(A)}}E()}function f(T,b){T||(T=n);let E=s[T];E?E.pending?E.pending.push(b):b(E):(s[T]={pending:[b]},h(T,C=>{let A=s[T].pending;s[T]=C,A.forEach(M=>M(C))}))}function d({text:T="",font:b=n,sdfGlyphSize:E=64,fontSize:C=1,letterSpacing:A=0,lineHeight:M="normal",maxWidth:k=i,direction:R,textAlign:F="left",textIndent:U=0,whiteSpace:I="normal",overflowWrap:z="normal",anchorX:j=0,anchorY:q=0,includeCaretPositions:Y=!1,chunkedBoundsSize:$=8192,colorRanges:W=null},V,H=!1){const L=y(),B={fontLoad:0,typesetting:0};T.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),T=T.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),C=+C,A=+A,k=+k,M=M||"normal",U=+U,f(b,J=>{const te=isFinite(k);let X=null,oe=null,re=null,Q=null,ge=null,ve=null,ae=null,le=0,be=0,Fe=I!=="nowrap";const{ascender:ee,descender:he,unitsPerEm:xe,lineGap:ce,capHeight:de,xHeight:pe}=J;B.fontLoad=y()-L;const ue=y(),Me=C/xe;M==="normal"&&(M=(ee-he+ce)/xe),M=M*C;const Se=(M-(ee-he)*Me)/2,Ce=-(ee*Me+Se),Te=Math.min(M,(ee-he)*Me),et=(ee+he)/2*Me-Te/2;let He=U,Pe=new x;const We=[Pe];J.forEachGlyph(T,C,A,(Ge,xt,Qe)=>{const Ne=T.charAt(Qe),ct=Ge.advanceWidth*Me,dt=Pe.count;let Gt;if("isEmpty"in Ge||(Ge.isWhitespace=!!Ne&&new RegExp(a).test(Ne),Ge.canBreakAfter=!!Ne&&c.test(Ne),Ge.isEmpty=Ge.xMin===Ge.xMax||Ge.yMin===Ge.yMax||o.test(Ne)),!Ge.isWhitespace&&!Ge.isEmpty&&be++,Fe&&te&&!Ge.isWhitespace&&xt+ct+He>k&&dt){if(Pe.glyphAt(dt-1).glyphObj.canBreakAfter)Gt=new x,He=-xt;else for(let At=dt;At--;)if(At===0&&z==="break-word"){Gt=new x,He=-xt;break}else if(Pe.glyphAt(At).glyphObj.canBreakAfter){Gt=Pe.splitAt(At+1);const bn=Gt.glyphAt(0).x;He-=bn;for(let us=Gt.count;us--;)Gt.glyphAt(us).x-=bn;break}Gt&&(Pe.isSoftWrapped=!0,Pe=Gt,We.push(Pe),le=k)}let Ze=Pe.glyphAt(Pe.count);Ze.glyphObj=Ge,Ze.x=xt+He,Ze.width=ct,Ze.charIndex=Qe,Ne===`
`&&(Pe=new x,We.push(Pe),He=-(xt+ct+A*C)+U)}),We.forEach(Ge=>{for(let xt=Ge.count;xt--;){let{glyphObj:Qe,x:Ne,width:ct}=Ge.glyphAt(xt);if(!Qe.isWhitespace){Ge.width=Ne+ct,Ge.width>le&&(le=Ge.width);return}}});let rt=0,Vt=0;if(j&&(typeof j=="number"?rt=-j:typeof j=="string"&&(rt=-le*(j==="left"?0:j==="center"?.5:j==="right"?1:g(j)))),q){if(typeof q=="number")Vt=-q;else if(typeof q=="string"){let Ge=We.length*M;Vt=q==="top"?0:q==="top-baseline"?-Ce:q==="top-cap"?-Ce-de*Me:q==="top-ex"?-Ce-pe*Me:q==="middle"?Ge/2:q==="bottom"?Ge:q==="bottom-baseline"?Ge-Se+he*Me:g(q)*Ge}}if(!H){const Ge=e.getEmbeddingLevels(T,R);X=new Uint16Array(be),oe=new Float32Array(be*2),re={},ve=[i,i,-i,-i],ae=[];let xt=Ce;Y&&(ge=new Float32Array(T.length*3)),W&&(Q=new Uint8Array(be*3));let Qe=0,Ne=-1,ct=-1,dt,Gt;if(We.forEach((Ze,At)=>{let{count:bn,width:us}=Ze;if(bn>0){let ni=0;for(let Dt=bn;Dt--&&Ze.glyphAt(Dt).glyphObj.isWhitespace;)ni++;let hs=0,qn=0;if(F==="center")hs=(le-us)/2;else if(F==="right")hs=le-us;else if(F==="justify"&&Ze.isSoftWrapped){let Dt=0;for(let It=bn-ni;It--;)Ze.glyphAt(It).glyphObj.isWhitespace&&Dt++;qn=(le-us)/Dt}if(qn||hs){let Dt=0;for(let It=0;It<bn;It++){let Sr=Ze.glyphAt(It);const Yn=Sr.glyphObj;Sr.x+=hs+Dt,qn!==0&&Yn.isWhitespace&&It<bn-ni&&(Dt+=qn,Sr.width+=qn)}}const Zn=e.getReorderSegments(T,Ge,Ze.glyphAt(0).charIndex,Ze.glyphAt(Ze.count-1).charIndex);for(let Dt=0;Dt<Zn.length;Dt++){const[It,Sr]=Zn[Dt];let Yn=1/0,ut=-1/0;for(let Xt=0;Xt<bn;Xt++)if(Ze.glyphAt(Xt).charIndex>=It){let ar=Xt,Ht=Xt;for(;Ht<bn;Ht++){let on=Ze.glyphAt(Ht);if(on.charIndex>Sr)break;Ht<bn-ni&&(Yn=Math.min(Yn,on.x),ut=Math.max(ut,on.x+on.width))}for(let on=ar;on<Ht;on++){const Mn=Ze.glyphAt(on);Mn.x=ut-(Mn.x+Mn.width-Yn)}break}}let kt;const Ii=Dt=>kt=Dt;for(let Dt=0;Dt<bn;Dt++){let It=Ze.glyphAt(Dt);kt=It.glyphObj;const Sr=kt.index,Yn=Ge.levels[It.charIndex]&1;if(Yn){const ut=e.getMirroredCharacter(T[It.charIndex]);ut&&J.forEachGlyph(ut,0,0,Ii)}if(Y){const{charIndex:ut}=It,Xt=It.x+rt,ar=It.x+It.width+rt;ge[ut*3]=Yn?ar:Xt,ge[ut*3+1]=Yn?Xt:ar,ge[ut*3+2]=xt+et+Vt;const Ht=ut-Ne;Ht>1&&_(ge,Ne,Ht),Ne=ut}if(W){const{charIndex:ut}=It;for(;ut>ct;)ct++,W.hasOwnProperty(ct)&&(Gt=W[ct])}if(!kt.isWhitespace&&!kt.isEmpty){const ut=Qe++;re[Sr]||(re[Sr]={path:kt.path,pathBounds:[kt.xMin,kt.yMin,kt.xMax,kt.yMax]});const Xt=It.x+rt,ar=xt+Vt;oe[ut*2]=Xt,oe[ut*2+1]=ar;const Ht=Xt+kt.xMin*Me,on=ar+kt.yMin*Me,Mn=Xt+kt.xMax*Me,ks=ar+kt.yMax*Me;Ht<ve[0]&&(ve[0]=Ht),on<ve[1]&&(ve[1]=on),Mn>ve[2]&&(ve[2]=Mn),ks>ve[3]&&(ve[3]=ks),ut%$===0&&(dt={start:ut,end:ut,rect:[i,i,-i,-i]},ae.push(dt)),dt.end++;const Tr=dt.rect;if(Ht<Tr[0]&&(Tr[0]=Ht),on<Tr[1]&&(Tr[1]=on),Mn>Tr[2]&&(Tr[2]=Mn),ks>Tr[3]&&(Tr[3]=ks),X[ut]=Sr,W){const ri=ut*3;Q[ri]=Gt>>16&255,Q[ri+1]=Gt>>8&255,Q[ri+2]=Gt&255}}}}xt-=M}),ge){const Ze=T.length-Ne;Ze>1&&_(ge,Ne,Ze)}}B.typesetting=y()-ue,V({glyphIds:X,glyphPositions:oe,glyphData:re,caretPositions:ge,caretHeight:Te,glyphColors:Q,chunkedBounds:ae,fontSize:C,unitsPerEm:xe,ascender:ee*Me,descender:he*Me,capHeight:de*Me,xHeight:pe*Me,lineHeight:M,topBaseline:Ce,blockBounds:[rt,Vt-We.length*M,rt+le,Vt],visibleBounds:ve,timings:B})})}function p(T,b){d(T,E=>{const[C,A,M,k]=E.blockBounds;b({width:M-C,height:k-A})},{metricsOnly:!0})}function g(T){let b=T.match(/^([\d.]+)%$/),E=b?parseFloat(b[1]):NaN;return isNaN(E)?0:E/100}function _(T,b,E){const C=T[b*3],A=T[b*3+1],M=T[b*3+2],k=(A-C)/E;for(let R=0;R<E;R++){const F=(b+R)*3;T[F]=C+k*R,T[F+1]=C+k*(R+1),T[F+2]=M}}function y(){return(self.performance||Date).now()}function x(){this.data=[]}const w=["glyphObj","x","width","charIndex"];return x.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/w.length)},glyphAt(T){let b=x.flyweight;return b.data=this.data,b.index=T,b},splitAt(T){let b=new x;return b.data=this.data.splice(T*w.length),b}},x.flyweight=w.reduce((T,b,E,C)=>(Object.defineProperty(T,b,{get(){return this.data[this.index*w.length+E]},set(A){this.data[this.index*w.length+E]=A}}),T),{data:null,index:0}),{typeset:d,measure:p,loadFont:f}}const Yo=()=>(self.performance||Date).now(),Wf=Ay();let sv;function PC(r,e,t,n,s,i,o,a,c,h,f=!0){return f?DC(r,e,t,n,s,i,o,a,c,h).then(null,d=>(sv||(console.warn("WebGL SDF generation failed, falling back to JS",d),sv=!0),ov(r,e,t,n,s,i,o,a,c,h))):ov(r,e,t,n,s,i,o,a,c,h)}const $h=[],RC=5;let om=0;function Py(){const r=Yo();for(;$h.length&&Yo()-r<RC;)$h.shift()();om=$h.length?setTimeout(Py,0):0}const DC=(...r)=>new Promise((e,t)=>{$h.push(()=>{const n=Yo();try{Wf.webgl.generateIntoCanvas(...r),e({timing:Yo()-n})}catch(s){t(s)}}),om||(om=setTimeout(Py,0))}),IC=4,UC=2e3,iv={};let FC=0;function ov(r,e,t,n,s,i,o,a,c,h){const f="TroikaTextSDFGenerator_JS_"+FC++%IC;let d=iv[f];return d||(d=iv[f]={workerModule:Su({name:f,workerId:f,dependencies:[Ay,Yo],init(p,g){const _=p().javascript.generate;return function(...y){const x=g();return{textureData:_(...y),timing:g()-x}}},getTransferables(p){return[p.textureData.buffer]}}),requests:0,idleTimer:null}),d.requests++,clearTimeout(d.idleTimer),d.workerModule(r,e,t,n,s,i).then(({textureData:p,timing:g})=>{const _=Yo(),y=new Uint8Array(p.length*4);for(let x=0;x<p.length;x++)y[x*4+h]=p[x];return Wf.webglUtils.renderImageData(o,y,a,c,r,e,1<<3-h),g+=Yo()-_,--d.requests===0&&(d.idleTimer=setTimeout(()=>{xC(f)},UC)),{timing:g}})}function NC(r){r._warm||(Wf.webgl.isSupported(r),r._warm=!0)}const LC=Wf.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function zC(){return typeof window>"u"&&(self.window=self),function(r){var e={parse:function(s){var i=e._bin,o=new Uint8Array(s);if(i.readASCII(o,0,4)=="ttcf"){var a=4;i.readUshort(o,a),a+=2,i.readUshort(o,a),a+=2;var c=i.readUint(o,a);a+=4;for(var h=[],f=0;f<c;f++){var d=i.readUint(o,a);a+=4,h.push(e._readFont(o,d))}return h}return[e._readFont(o,0)]},_readFont:function(s,i){var o=e._bin,a=i;o.readFixed(s,i),i+=4;var c=o.readUshort(s,i);i+=2,o.readUshort(s,i),i+=2,o.readUshort(s,i),i+=2,o.readUshort(s,i),i+=2;for(var h=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],f={_data:s,_offset:a},d={},p=0;p<c;p++){var g=o.readASCII(s,i,4);i+=4,o.readUint(s,i),i+=4;var _=o.readUint(s,i);i+=4;var y=o.readUint(s,i);i+=4,d[g]={offset:_,length:y}}for(p=0;p<h.length;p++){var x=h[p];d[x]&&(f[x.trim()]=e[x.trim()].parse(s,d[x].offset,d[x].length,f))}return f},_tabOffset:function(s,i,o){for(var a=e._bin,c=a.readUshort(s,o+4),h=o+12,f=0;f<c;f++){var d=a.readASCII(s,h,4);h+=4,a.readUint(s,h),h+=4;var p=a.readUint(s,h);if(h+=4,a.readUint(s,h),h+=4,d==i)return p}return 0}};e._bin={readFixed:function(s,i){return(s[i]<<8|s[i+1])+(s[i+2]<<8|s[i+3])/65540},readF2dot14:function(s,i){return e._bin.readShort(s,i)/16384},readInt:function(s,i){return e._bin._view(s).getInt32(i)},readInt8:function(s,i){return e._bin._view(s).getInt8(i)},readShort:function(s,i){return e._bin._view(s).getInt16(i)},readUshort:function(s,i){return e._bin._view(s).getUint16(i)},readUshorts:function(s,i,o){for(var a=[],c=0;c<o;c++)a.push(e._bin.readUshort(s,i+2*c));return a},readUint:function(s,i){return e._bin._view(s).getUint32(i)},readUint64:function(s,i){return 4294967296*e._bin.readUint(s,i)+e._bin.readUint(s,i+4)},readASCII:function(s,i,o){for(var a="",c=0;c<o;c++)a+=String.fromCharCode(s[i+c]);return a},readUnicode:function(s,i,o){for(var a="",c=0;c<o;c++){var h=s[i++]<<8|s[i++];a+=String.fromCharCode(h)}return a},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(s,i,o){var a=e._bin._tdec;return a&&i==0&&o==s.length?a.decode(s):e._bin.readASCII(s,i,o)},readBytes:function(s,i,o){for(var a=[],c=0;c<o;c++)a.push(s[i+c]);return a},readASCIIArray:function(s,i,o){for(var a=[],c=0;c<o;c++)a.push(String.fromCharCode(s[i+c]));return a},_view:function(s){return s._dataView||(s._dataView=s.buffer?new DataView(s.buffer,s.byteOffset,s.byteLength):new DataView(new Uint8Array(s).buffer))}},e._lctf={},e._lctf.parse=function(s,i,o,a,c){var h=e._bin,f={},d=i;h.readFixed(s,i),i+=4;var p=h.readUshort(s,i);i+=2;var g=h.readUshort(s,i);i+=2;var _=h.readUshort(s,i);return i+=2,f.scriptList=e._lctf.readScriptList(s,d+p),f.featureList=e._lctf.readFeatureList(s,d+g),f.lookupList=e._lctf.readLookupList(s,d+_,c),f},e._lctf.readLookupList=function(s,i,o){var a=e._bin,c=i,h=[],f=a.readUshort(s,i);i+=2;for(var d=0;d<f;d++){var p=a.readUshort(s,i);i+=2;var g=e._lctf.readLookupTable(s,c+p,o);h.push(g)}return h},e._lctf.readLookupTable=function(s,i,o){var a=e._bin,c=i,h={tabs:[]};h.ltype=a.readUshort(s,i),i+=2,h.flag=a.readUshort(s,i),i+=2;var f=a.readUshort(s,i);i+=2;for(var d=h.ltype,p=0;p<f;p++){var g=a.readUshort(s,i);i+=2;var _=o(s,d,c+g,h);h.tabs.push(_)}return h},e._lctf.numOfOnes=function(s){for(var i=0,o=0;o<32;o++)s>>>o&1&&i++;return i},e._lctf.readClassDef=function(s,i){var o=e._bin,a=[],c=o.readUshort(s,i);if(i+=2,c==1){var h=o.readUshort(s,i);i+=2;var f=o.readUshort(s,i);i+=2;for(var d=0;d<f;d++)a.push(h+d),a.push(h+d),a.push(o.readUshort(s,i)),i+=2}if(c==2){var p=o.readUshort(s,i);for(i+=2,d=0;d<p;d++)a.push(o.readUshort(s,i)),i+=2,a.push(o.readUshort(s,i)),i+=2,a.push(o.readUshort(s,i)),i+=2}return a},e._lctf.getInterval=function(s,i){for(var o=0;o<s.length;o+=3){var a=s[o],c=s[o+1];if(s[o+2],a<=i&&i<=c)return o}return-1},e._lctf.readCoverage=function(s,i){var o=e._bin,a={};a.fmt=o.readUshort(s,i),i+=2;var c=o.readUshort(s,i);return i+=2,a.fmt==1&&(a.tab=o.readUshorts(s,i,c)),a.fmt==2&&(a.tab=o.readUshorts(s,i,3*c)),a},e._lctf.coverageIndex=function(s,i){var o=s.tab;if(s.fmt==1)return o.indexOf(i);if(s.fmt==2){var a=e._lctf.getInterval(o,i);if(a!=-1)return o[a+2]+(i-o[a])}return-1},e._lctf.readFeatureList=function(s,i){var o=e._bin,a=i,c=[],h=o.readUshort(s,i);i+=2;for(var f=0;f<h;f++){var d=o.readASCII(s,i,4);i+=4;var p=o.readUshort(s,i);i+=2;var g=e._lctf.readFeatureTable(s,a+p);g.tag=d.trim(),c.push(g)}return c},e._lctf.readFeatureTable=function(s,i){var o=e._bin,a=i,c={},h=o.readUshort(s,i);i+=2,h>0&&(c.featureParams=a+h);var f=o.readUshort(s,i);i+=2,c.tab=[];for(var d=0;d<f;d++)c.tab.push(o.readUshort(s,i+2*d));return c},e._lctf.readScriptList=function(s,i){var o=e._bin,a=i,c={},h=o.readUshort(s,i);i+=2;for(var f=0;f<h;f++){var d=o.readASCII(s,i,4);i+=4;var p=o.readUshort(s,i);i+=2,c[d.trim()]=e._lctf.readScriptTable(s,a+p)}return c},e._lctf.readScriptTable=function(s,i){var o=e._bin,a=i,c={},h=o.readUshort(s,i);i+=2,c.default=e._lctf.readLangSysTable(s,a+h);var f=o.readUshort(s,i);i+=2;for(var d=0;d<f;d++){var p=o.readASCII(s,i,4);i+=4;var g=o.readUshort(s,i);i+=2,c[p.trim()]=e._lctf.readLangSysTable(s,a+g)}return c},e._lctf.readLangSysTable=function(s,i){var o=e._bin,a={};o.readUshort(s,i),i+=2,a.reqFeature=o.readUshort(s,i),i+=2;var c=o.readUshort(s,i);return i+=2,a.features=o.readUshorts(s,i,c),a},e.CFF={},e.CFF.parse=function(s,i,o){var a=e._bin;(s=new Uint8Array(s.buffer,i,o))[i=0],s[++i],s[++i],s[++i],i++;var c=[];i=e.CFF.readIndex(s,i,c);for(var h=[],f=0;f<c.length-1;f++)h.push(a.readASCII(s,i+c[f],c[f+1]-c[f]));i+=c[c.length-1];var d=[];i=e.CFF.readIndex(s,i,d);var p=[];for(f=0;f<d.length-1;f++)p.push(e.CFF.readDict(s,i+d[f],i+d[f+1]));i+=d[d.length-1];var g=p[0],_=[];i=e.CFF.readIndex(s,i,_);var y=[];for(f=0;f<_.length-1;f++)y.push(a.readASCII(s,i+_[f],_[f+1]-_[f]));if(i+=_[_.length-1],e.CFF.readSubrs(s,i,g),g.CharStrings){i=g.CharStrings,_=[],i=e.CFF.readIndex(s,i,_);var x=[];for(f=0;f<_.length-1;f++)x.push(a.readBytes(s,i+_[f],_[f+1]-_[f]));g.CharStrings=x}if(g.ROS){i=g.FDArray;var w=[];for(i=e.CFF.readIndex(s,i,w),g.FDArray=[],f=0;f<w.length-1;f++){var T=e.CFF.readDict(s,i+w[f],i+w[f+1]);e.CFF._readFDict(s,T,y),g.FDArray.push(T)}i+=w[w.length-1],i=g.FDSelect,g.FDSelect=[];var b=s[i];if(i++,b!=3)throw b;var E=a.readUshort(s,i);for(i+=2,f=0;f<E+1;f++)g.FDSelect.push(a.readUshort(s,i),s[i+2]),i+=3}return g.Encoding&&(g.Encoding=e.CFF.readEncoding(s,g.Encoding,g.CharStrings.length)),g.charset&&(g.charset=e.CFF.readCharset(s,g.charset,g.CharStrings.length)),e.CFF._readFDict(s,g,y),g},e.CFF._readFDict=function(s,i,o){var a;for(var c in i.Private&&(a=i.Private[1],i.Private=e.CFF.readDict(s,a,a+i.Private[0]),i.Private.Subrs&&e.CFF.readSubrs(s,a+i.Private.Subrs,i.Private)),i)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(c)!=-1&&(i[c]=o[i[c]-426+35])},e.CFF.readSubrs=function(s,i,o){var a=e._bin,c=[];i=e.CFF.readIndex(s,i,c);var h,f=c.length;h=f<1240?107:f<33900?1131:32768,o.Bias=h,o.Subrs=[];for(var d=0;d<c.length-1;d++)o.Subrs.push(a.readBytes(s,i+c[d],c[d+1]-c[d]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(s,i){for(var o=0;o<s.charset.length;o++)if(s.charset[o]==i)return o;return-1},e.CFF.glyphBySE=function(s,i){return i<0||i>255?-1:e.CFF.glyphByUnicode(s,e.CFF.tableSE[i])},e.CFF.readEncoding=function(s,i,o){e._bin;var a=[".notdef"],c=s[i];if(i++,c!=0)throw"error: unknown encoding format: "+c;var h=s[i];i++;for(var f=0;f<h;f++)a.push(s[i+f]);return a},e.CFF.readCharset=function(s,i,o){var a=e._bin,c=[".notdef"],h=s[i];if(i++,h==0)for(var f=0;f<o;f++){var d=a.readUshort(s,i);i+=2,c.push(d)}else{if(h!=1&&h!=2)throw"error: format: "+h;for(;c.length<o;){d=a.readUshort(s,i),i+=2;var p=0;for(h==1?(p=s[i],i++):(p=a.readUshort(s,i),i+=2),f=0;f<=p;f++)c.push(d),d++}}return c},e.CFF.readIndex=function(s,i,o){var a=e._bin,c=a.readUshort(s,i)+1,h=s[i+=2];if(i++,h==1)for(var f=0;f<c;f++)o.push(s[i+f]);else if(h==2)for(f=0;f<c;f++)o.push(a.readUshort(s,i+2*f));else if(h==3)for(f=0;f<c;f++)o.push(16777215&a.readUint(s,i+3*f-1));else if(c!=1)throw"unsupported offset size: "+h+", count: "+c;return(i+=c*h)-1},e.CFF.getCharString=function(s,i,o){var a=e._bin,c=s[i],h=s[i+1];s[i+2],s[i+3],s[i+4];var f=1,d=null,p=null;c<=20&&(d=c,f=1),c==12&&(d=100*c+h,f=2),21<=c&&c<=27&&(d=c,f=1),c==28&&(p=a.readShort(s,i+1),f=3),29<=c&&c<=31&&(d=c,f=1),32<=c&&c<=246&&(p=c-139,f=1),247<=c&&c<=250&&(p=256*(c-247)+h+108,f=2),251<=c&&c<=254&&(p=256*-(c-251)-h-108,f=2),c==255&&(p=a.readInt(s,i+1)/65535,f=5),o.val=p??"o"+d,o.size=f},e.CFF.readCharString=function(s,i,o){for(var a=i+o,c=e._bin,h=[];i<a;){var f=s[i],d=s[i+1];s[i+2],s[i+3],s[i+4];var p=1,g=null,_=null;f<=20&&(g=f,p=1),f==12&&(g=100*f+d,p=2),f!=19&&f!=20||(g=f,p=2),21<=f&&f<=27&&(g=f,p=1),f==28&&(_=c.readShort(s,i+1),p=3),29<=f&&f<=31&&(g=f,p=1),32<=f&&f<=246&&(_=f-139,p=1),247<=f&&f<=250&&(_=256*(f-247)+d+108,p=2),251<=f&&f<=254&&(_=256*-(f-251)-d-108,p=2),f==255&&(_=c.readInt(s,i+1)/65535,p=5),h.push(_??"o"+g),i+=p}return h},e.CFF.readDict=function(s,i,o){for(var a=e._bin,c={},h=[];i<o;){var f=s[i],d=s[i+1];s[i+2],s[i+3],s[i+4];var p=1,g=null,_=null;if(f==28&&(_=a.readShort(s,i+1),p=3),f==29&&(_=a.readInt(s,i+1),p=5),32<=f&&f<=246&&(_=f-139,p=1),247<=f&&f<=250&&(_=256*(f-247)+d+108,p=2),251<=f&&f<=254&&(_=256*-(f-251)-d-108,p=2),f==255)throw _=a.readInt(s,i+1)/65535,p=5,"unknown number";if(f==30){var y=[];for(p=1;;){var x=s[i+p];p++;var w=x>>4,T=15&x;if(w!=15&&y.push(w),T!=15&&y.push(T),T==15)break}for(var b="",E=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],C=0;C<y.length;C++)b+=E[y[C]];_=parseFloat(b)}f<=21&&(g=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][f],p=1,f==12&&(g=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][d],p=2)),g!=null?(c[g]=h.length==1?h[0]:h,h=[]):h.push(_),i+=p}return c},e.cmap={},e.cmap.parse=function(s,i,o){s=new Uint8Array(s.buffer,i,o),i=0;var a=e._bin,c={};a.readUshort(s,i),i+=2;var h=a.readUshort(s,i);i+=2;var f=[];c.tables=[];for(var d=0;d<h;d++){var p=a.readUshort(s,i);i+=2;var g=a.readUshort(s,i);i+=2;var _=a.readUint(s,i);i+=4;var y="p"+p+"e"+g,x=f.indexOf(_);if(x==-1){var w;x=c.tables.length,f.push(_);var T=a.readUshort(s,_);T==0?w=e.cmap.parse0(s,_):T==4?w=e.cmap.parse4(s,_):T==6?w=e.cmap.parse6(s,_):T==12?w=e.cmap.parse12(s,_):console.debug("unknown format: "+T,p,g,_),c.tables.push(w)}if(c[y]!=null)throw"multiple tables for one platform+encoding";c[y]=x}return c},e.cmap.parse0=function(s,i){var o=e._bin,a={};a.format=o.readUshort(s,i),i+=2;var c=o.readUshort(s,i);i+=2,o.readUshort(s,i),i+=2,a.map=[];for(var h=0;h<c-6;h++)a.map.push(s[i+h]);return a},e.cmap.parse4=function(s,i){var o=e._bin,a=i,c={};c.format=o.readUshort(s,i),i+=2;var h=o.readUshort(s,i);i+=2,o.readUshort(s,i),i+=2;var f=o.readUshort(s,i);i+=2;var d=f/2;c.searchRange=o.readUshort(s,i),i+=2,c.entrySelector=o.readUshort(s,i),i+=2,c.rangeShift=o.readUshort(s,i),i+=2,c.endCount=o.readUshorts(s,i,d),i+=2*d,i+=2,c.startCount=o.readUshorts(s,i,d),i+=2*d,c.idDelta=[];for(var p=0;p<d;p++)c.idDelta.push(o.readShort(s,i)),i+=2;for(c.idRangeOffset=o.readUshorts(s,i,d),i+=2*d,c.glyphIdArray=[];i<a+h;)c.glyphIdArray.push(o.readUshort(s,i)),i+=2;return c},e.cmap.parse6=function(s,i){var o=e._bin,a={};a.format=o.readUshort(s,i),i+=2,o.readUshort(s,i),i+=2,o.readUshort(s,i),i+=2,a.firstCode=o.readUshort(s,i),i+=2;var c=o.readUshort(s,i);i+=2,a.glyphIdArray=[];for(var h=0;h<c;h++)a.glyphIdArray.push(o.readUshort(s,i)),i+=2;return a},e.cmap.parse12=function(s,i){var o=e._bin,a={};a.format=o.readUshort(s,i),i+=2,i+=2,o.readUint(s,i),i+=4,o.readUint(s,i),i+=4;var c=o.readUint(s,i);i+=4,a.groups=[];for(var h=0;h<c;h++){var f=i+12*h,d=o.readUint(s,f+0),p=o.readUint(s,f+4),g=o.readUint(s,f+8);a.groups.push([d,p,g])}return a},e.glyf={},e.glyf.parse=function(s,i,o,a){for(var c=[],h=0;h<a.maxp.numGlyphs;h++)c.push(null);return c},e.glyf._parseGlyf=function(s,i){var o=e._bin,a=s._data,c=e._tabOffset(a,"glyf",s._offset)+s.loca[i];if(s.loca[i]==s.loca[i+1])return null;var h={};if(h.noc=o.readShort(a,c),c+=2,h.xMin=o.readShort(a,c),c+=2,h.yMin=o.readShort(a,c),c+=2,h.xMax=o.readShort(a,c),c+=2,h.yMax=o.readShort(a,c),c+=2,h.xMin>=h.xMax||h.yMin>=h.yMax)return null;if(h.noc>0){h.endPts=[];for(var f=0;f<h.noc;f++)h.endPts.push(o.readUshort(a,c)),c+=2;var d=o.readUshort(a,c);if(c+=2,a.length-c<d)return null;h.instructions=o.readBytes(a,c,d),c+=d;var p=h.endPts[h.noc-1]+1;for(h.flags=[],f=0;f<p;f++){var g=a[c];if(c++,h.flags.push(g),(8&g)!=0){var _=a[c];c++;for(var y=0;y<_;y++)h.flags.push(g),f++}}for(h.xs=[],f=0;f<p;f++){var x=(2&h.flags[f])!=0,w=(16&h.flags[f])!=0;x?(h.xs.push(w?a[c]:-a[c]),c++):w?h.xs.push(0):(h.xs.push(o.readShort(a,c)),c+=2)}for(h.ys=[],f=0;f<p;f++)x=(4&h.flags[f])!=0,w=(32&h.flags[f])!=0,x?(h.ys.push(w?a[c]:-a[c]),c++):w?h.ys.push(0):(h.ys.push(o.readShort(a,c)),c+=2);var T=0,b=0;for(f=0;f<p;f++)T+=h.xs[f],b+=h.ys[f],h.xs[f]=T,h.ys[f]=b}else{var E;h.parts=[];do{E=o.readUshort(a,c),c+=2;var C={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(h.parts.push(C),C.glyphIndex=o.readUshort(a,c),c+=2,1&E){var A=o.readShort(a,c);c+=2;var M=o.readShort(a,c);c+=2}else A=o.readInt8(a,c),c++,M=o.readInt8(a,c),c++;2&E?(C.m.tx=A,C.m.ty=M):(C.p1=A,C.p2=M),8&E?(C.m.a=C.m.d=o.readF2dot14(a,c),c+=2):64&E?(C.m.a=o.readF2dot14(a,c),c+=2,C.m.d=o.readF2dot14(a,c),c+=2):128&E&&(C.m.a=o.readF2dot14(a,c),c+=2,C.m.b=o.readF2dot14(a,c),c+=2,C.m.c=o.readF2dot14(a,c),c+=2,C.m.d=o.readF2dot14(a,c),c+=2)}while(32&E);if(256&E){var k=o.readUshort(a,c);for(c+=2,h.instr=[],f=0;f<k;f++)h.instr.push(a[c]),c++}}return h},e.GPOS={},e.GPOS.parse=function(s,i,o,a){return e._lctf.parse(s,i,o,a,e.GPOS.subt)},e.GPOS.subt=function(s,i,o,a){var c=e._bin,h=o,f={};if(f.fmt=c.readUshort(s,o),o+=2,i==1||i==2||i==3||i==7||i==8&&f.fmt<=2){var d=c.readUshort(s,o);o+=2,f.coverage=e._lctf.readCoverage(s,d+h)}if(i==1&&f.fmt==1){var p=c.readUshort(s,o);o+=2;var g=e._lctf.numOfOnes(p);p!=0&&(f.pos=e.GPOS.readValueRecord(s,o,p))}else if(i==2&&f.fmt>=1&&f.fmt<=2){p=c.readUshort(s,o),o+=2;var _=c.readUshort(s,o);o+=2,g=e._lctf.numOfOnes(p);var y=e._lctf.numOfOnes(_);if(f.fmt==1){f.pairsets=[];var x=c.readUshort(s,o);o+=2;for(var w=0;w<x;w++){var T=h+c.readUshort(s,o);o+=2;var b=c.readUshort(s,T);T+=2;for(var E=[],C=0;C<b;C++){var A=c.readUshort(s,T);T+=2,p!=0&&(I=e.GPOS.readValueRecord(s,T,p),T+=2*g),_!=0&&(z=e.GPOS.readValueRecord(s,T,_),T+=2*y),E.push({gid2:A,val1:I,val2:z})}f.pairsets.push(E)}}if(f.fmt==2){var M=c.readUshort(s,o);o+=2;var k=c.readUshort(s,o);o+=2;var R=c.readUshort(s,o);o+=2;var F=c.readUshort(s,o);for(o+=2,f.classDef1=e._lctf.readClassDef(s,h+M),f.classDef2=e._lctf.readClassDef(s,h+k),f.matrix=[],w=0;w<R;w++){var U=[];for(C=0;C<F;C++){var I=null,z=null;p!=0&&(I=e.GPOS.readValueRecord(s,o,p),o+=2*g),_!=0&&(z=e.GPOS.readValueRecord(s,o,_),o+=2*y),U.push({val1:I,val2:z})}f.matrix.push(U)}}}else{if(i==9&&f.fmt==1){var j=c.readUshort(s,o);o+=2;var q=c.readUint(s,o);if(o+=4,a.ltype==9)a.ltype=j;else if(a.ltype!=j)throw"invalid extension substitution";return e.GPOS.subt(s,a.ltype,h+q)}console.debug("unsupported GPOS table LookupType",i,"format",f.fmt)}return f},e.GPOS.readValueRecord=function(s,i,o){var a=e._bin,c=[];return c.push(1&o?a.readShort(s,i):0),i+=1&o?2:0,c.push(2&o?a.readShort(s,i):0),i+=2&o?2:0,c.push(4&o?a.readShort(s,i):0),i+=4&o?2:0,c.push(8&o?a.readShort(s,i):0),i+=8&o?2:0,c},e.GSUB={},e.GSUB.parse=function(s,i,o,a){return e._lctf.parse(s,i,o,a,e.GSUB.subt)},e.GSUB.subt=function(s,i,o,a){var c=e._bin,h=o,f={};if(f.fmt=c.readUshort(s,o),o+=2,i!=1&&i!=4&&i!=5&&i!=6)return null;if(i==1||i==4||i==5&&f.fmt<=2||i==6&&f.fmt<=2){var d=c.readUshort(s,o);o+=2,f.coverage=e._lctf.readCoverage(s,h+d)}if(i==1&&f.fmt>=1&&f.fmt<=2){if(f.fmt==1)f.delta=c.readShort(s,o),o+=2;else if(f.fmt==2){var p=c.readUshort(s,o);o+=2,f.newg=c.readUshorts(s,o,p),o+=2*f.newg.length}}else if(i==4){f.vals=[],p=c.readUshort(s,o),o+=2;for(var g=0;g<p;g++){var _=c.readUshort(s,o);o+=2,f.vals.push(e.GSUB.readLigatureSet(s,h+_))}}else if(i==5&&f.fmt==2){if(f.fmt==2){var y=c.readUshort(s,o);o+=2,f.cDef=e._lctf.readClassDef(s,h+y),f.scset=[];var x=c.readUshort(s,o);for(o+=2,g=0;g<x;g++){var w=c.readUshort(s,o);o+=2,f.scset.push(w==0?null:e.GSUB.readSubClassSet(s,h+w))}}}else if(i==6&&f.fmt==3){if(f.fmt==3){for(g=0;g<3;g++){p=c.readUshort(s,o),o+=2;for(var T=[],b=0;b<p;b++)T.push(e._lctf.readCoverage(s,h+c.readUshort(s,o+2*b)));o+=2*p,g==0&&(f.backCvg=T),g==1&&(f.inptCvg=T),g==2&&(f.ahedCvg=T)}p=c.readUshort(s,o),o+=2,f.lookupRec=e.GSUB.readSubstLookupRecords(s,o,p)}}else{if(i==7&&f.fmt==1){var E=c.readUshort(s,o);o+=2;var C=c.readUint(s,o);if(o+=4,a.ltype==9)a.ltype=E;else if(a.ltype!=E)throw"invalid extension substitution";return e.GSUB.subt(s,a.ltype,h+C)}console.debug("unsupported GSUB table LookupType",i,"format",f.fmt)}return f},e.GSUB.readSubClassSet=function(s,i){var o=e._bin.readUshort,a=i,c=[],h=o(s,i);i+=2;for(var f=0;f<h;f++){var d=o(s,i);i+=2,c.push(e.GSUB.readSubClassRule(s,a+d))}return c},e.GSUB.readSubClassRule=function(s,i){var o=e._bin.readUshort,a={},c=o(s,i),h=o(s,i+=2);i+=2,a.input=[];for(var f=0;f<c-1;f++)a.input.push(o(s,i)),i+=2;return a.substLookupRecords=e.GSUB.readSubstLookupRecords(s,i,h),a},e.GSUB.readSubstLookupRecords=function(s,i,o){for(var a=e._bin.readUshort,c=[],h=0;h<o;h++)c.push(a(s,i),a(s,i+2)),i+=4;return c},e.GSUB.readChainSubClassSet=function(s,i){var o=e._bin,a=i,c=[],h=o.readUshort(s,i);i+=2;for(var f=0;f<h;f++){var d=o.readUshort(s,i);i+=2,c.push(e.GSUB.readChainSubClassRule(s,a+d))}return c},e.GSUB.readChainSubClassRule=function(s,i){for(var o=e._bin,a={},c=["backtrack","input","lookahead"],h=0;h<c.length;h++){var f=o.readUshort(s,i);i+=2,h==1&&f--,a[c[h]]=o.readUshorts(s,i,f),i+=2*a[c[h]].length}return f=o.readUshort(s,i),i+=2,a.subst=o.readUshorts(s,i,2*f),i+=2*a.subst.length,a},e.GSUB.readLigatureSet=function(s,i){var o=e._bin,a=i,c=[],h=o.readUshort(s,i);i+=2;for(var f=0;f<h;f++){var d=o.readUshort(s,i);i+=2,c.push(e.GSUB.readLigature(s,a+d))}return c},e.GSUB.readLigature=function(s,i){var o=e._bin,a={chain:[]};a.nglyph=o.readUshort(s,i),i+=2;var c=o.readUshort(s,i);i+=2;for(var h=0;h<c-1;h++)a.chain.push(o.readUshort(s,i)),i+=2;return a},e.head={},e.head.parse=function(s,i,o){var a=e._bin,c={};return a.readFixed(s,i),i+=4,c.fontRevision=a.readFixed(s,i),i+=4,a.readUint(s,i),i+=4,a.readUint(s,i),i+=4,c.flags=a.readUshort(s,i),i+=2,c.unitsPerEm=a.readUshort(s,i),i+=2,c.created=a.readUint64(s,i),i+=8,c.modified=a.readUint64(s,i),i+=8,c.xMin=a.readShort(s,i),i+=2,c.yMin=a.readShort(s,i),i+=2,c.xMax=a.readShort(s,i),i+=2,c.yMax=a.readShort(s,i),i+=2,c.macStyle=a.readUshort(s,i),i+=2,c.lowestRecPPEM=a.readUshort(s,i),i+=2,c.fontDirectionHint=a.readShort(s,i),i+=2,c.indexToLocFormat=a.readShort(s,i),i+=2,c.glyphDataFormat=a.readShort(s,i),i+=2,c},e.hhea={},e.hhea.parse=function(s,i,o){var a=e._bin,c={};return a.readFixed(s,i),i+=4,c.ascender=a.readShort(s,i),i+=2,c.descender=a.readShort(s,i),i+=2,c.lineGap=a.readShort(s,i),i+=2,c.advanceWidthMax=a.readUshort(s,i),i+=2,c.minLeftSideBearing=a.readShort(s,i),i+=2,c.minRightSideBearing=a.readShort(s,i),i+=2,c.xMaxExtent=a.readShort(s,i),i+=2,c.caretSlopeRise=a.readShort(s,i),i+=2,c.caretSlopeRun=a.readShort(s,i),i+=2,c.caretOffset=a.readShort(s,i),i+=2,i+=8,c.metricDataFormat=a.readShort(s,i),i+=2,c.numberOfHMetrics=a.readUshort(s,i),i+=2,c},e.hmtx={},e.hmtx.parse=function(s,i,o,a){for(var c=e._bin,h={aWidth:[],lsBearing:[]},f=0,d=0,p=0;p<a.maxp.numGlyphs;p++)p<a.hhea.numberOfHMetrics&&(f=c.readUshort(s,i),i+=2,d=c.readShort(s,i),i+=2),h.aWidth.push(f),h.lsBearing.push(d);return h},e.kern={},e.kern.parse=function(s,i,o,a){var c=e._bin,h=c.readUshort(s,i);if(i+=2,h==1)return e.kern.parseV1(s,i-2,o,a);var f=c.readUshort(s,i);i+=2;for(var d={glyph1:[],rval:[]},p=0;p<f;p++){i+=2,o=c.readUshort(s,i),i+=2;var g=c.readUshort(s,i);i+=2;var _=g>>>8;if((_&=15)!=0)throw"unknown kern table format: "+_;i=e.kern.readFormat0(s,i,d)}return d},e.kern.parseV1=function(s,i,o,a){var c=e._bin;c.readFixed(s,i),i+=4;var h=c.readUint(s,i);i+=4;for(var f={glyph1:[],rval:[]},d=0;d<h;d++){c.readUint(s,i),i+=4;var p=c.readUshort(s,i);i+=2,c.readUshort(s,i),i+=2;var g=p>>>8;if((g&=15)!=0)throw"unknown kern table format: "+g;i=e.kern.readFormat0(s,i,f)}return f},e.kern.readFormat0=function(s,i,o){var a=e._bin,c=-1,h=a.readUshort(s,i);i+=2,a.readUshort(s,i),i+=2,a.readUshort(s,i),i+=2,a.readUshort(s,i),i+=2;for(var f=0;f<h;f++){var d=a.readUshort(s,i);i+=2;var p=a.readUshort(s,i);i+=2;var g=a.readShort(s,i);i+=2,d!=c&&(o.glyph1.push(d),o.rval.push({glyph2:[],vals:[]}));var _=o.rval[o.rval.length-1];_.glyph2.push(p),_.vals.push(g),c=d}return i},e.loca={},e.loca.parse=function(s,i,o,a){var c=e._bin,h=[],f=a.head.indexToLocFormat,d=a.maxp.numGlyphs+1;if(f==0)for(var p=0;p<d;p++)h.push(c.readUshort(s,i+(p<<1))<<1);if(f==1)for(p=0;p<d;p++)h.push(c.readUint(s,i+(p<<2)));return h},e.maxp={},e.maxp.parse=function(s,i,o){var a=e._bin,c={},h=a.readUint(s,i);return i+=4,c.numGlyphs=a.readUshort(s,i),i+=2,h==65536&&(c.maxPoints=a.readUshort(s,i),i+=2,c.maxContours=a.readUshort(s,i),i+=2,c.maxCompositePoints=a.readUshort(s,i),i+=2,c.maxCompositeContours=a.readUshort(s,i),i+=2,c.maxZones=a.readUshort(s,i),i+=2,c.maxTwilightPoints=a.readUshort(s,i),i+=2,c.maxStorage=a.readUshort(s,i),i+=2,c.maxFunctionDefs=a.readUshort(s,i),i+=2,c.maxInstructionDefs=a.readUshort(s,i),i+=2,c.maxStackElements=a.readUshort(s,i),i+=2,c.maxSizeOfInstructions=a.readUshort(s,i),i+=2,c.maxComponentElements=a.readUshort(s,i),i+=2,c.maxComponentDepth=a.readUshort(s,i),i+=2),c},e.name={},e.name.parse=function(s,i,o){var a=e._bin,c={};a.readUshort(s,i),i+=2;var h=a.readUshort(s,i);i+=2,a.readUshort(s,i);for(var f,d=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],p=i+=2,g=0;g<h;g++){var _=a.readUshort(s,i);i+=2;var y=a.readUshort(s,i);i+=2;var x=a.readUshort(s,i);i+=2;var w=a.readUshort(s,i);i+=2;var T=a.readUshort(s,i);i+=2;var b=a.readUshort(s,i);i+=2;var E,C=d[w],A=p+12*h+b;if(_==0)E=a.readUnicode(s,A,T/2);else if(_==3&&y==0)E=a.readUnicode(s,A,T/2);else if(y==0)E=a.readASCII(s,A,T);else if(y==1)E=a.readUnicode(s,A,T/2);else if(y==3)E=a.readUnicode(s,A,T/2);else{if(_!=1)throw"unknown encoding "+y+", platformID: "+_;E=a.readASCII(s,A,T),console.debug("reading unknown MAC encoding "+y+" as ASCII")}var M="p"+_+","+x.toString(16);c[M]==null&&(c[M]={}),c[M][C!==void 0?C:w]=E,c[M]._lang=x}for(var k in c)if(c[k].postScriptName!=null&&c[k]._lang==1033)return c[k];for(var k in c)if(c[k].postScriptName!=null&&c[k]._lang==0)return c[k];for(var k in c)if(c[k].postScriptName!=null&&c[k]._lang==3084)return c[k];for(var k in c)if(c[k].postScriptName!=null)return c[k];for(var k in c){f=k;break}return console.debug("returning name table with languageID "+c[f]._lang),c[f]},e["OS/2"]={},e["OS/2"].parse=function(s,i,o){var a=e._bin.readUshort(s,i);i+=2;var c={};if(a==0)e["OS/2"].version0(s,i,c);else if(a==1)e["OS/2"].version1(s,i,c);else if(a==2||a==3||a==4)e["OS/2"].version2(s,i,c);else{if(a!=5)throw"unknown OS/2 table version: "+a;e["OS/2"].version5(s,i,c)}return c},e["OS/2"].version0=function(s,i,o){var a=e._bin;return o.xAvgCharWidth=a.readShort(s,i),i+=2,o.usWeightClass=a.readUshort(s,i),i+=2,o.usWidthClass=a.readUshort(s,i),i+=2,o.fsType=a.readUshort(s,i),i+=2,o.ySubscriptXSize=a.readShort(s,i),i+=2,o.ySubscriptYSize=a.readShort(s,i),i+=2,o.ySubscriptXOffset=a.readShort(s,i),i+=2,o.ySubscriptYOffset=a.readShort(s,i),i+=2,o.ySuperscriptXSize=a.readShort(s,i),i+=2,o.ySuperscriptYSize=a.readShort(s,i),i+=2,o.ySuperscriptXOffset=a.readShort(s,i),i+=2,o.ySuperscriptYOffset=a.readShort(s,i),i+=2,o.yStrikeoutSize=a.readShort(s,i),i+=2,o.yStrikeoutPosition=a.readShort(s,i),i+=2,o.sFamilyClass=a.readShort(s,i),i+=2,o.panose=a.readBytes(s,i,10),i+=10,o.ulUnicodeRange1=a.readUint(s,i),i+=4,o.ulUnicodeRange2=a.readUint(s,i),i+=4,o.ulUnicodeRange3=a.readUint(s,i),i+=4,o.ulUnicodeRange4=a.readUint(s,i),i+=4,o.achVendID=[a.readInt8(s,i),a.readInt8(s,i+1),a.readInt8(s,i+2),a.readInt8(s,i+3)],i+=4,o.fsSelection=a.readUshort(s,i),i+=2,o.usFirstCharIndex=a.readUshort(s,i),i+=2,o.usLastCharIndex=a.readUshort(s,i),i+=2,o.sTypoAscender=a.readShort(s,i),i+=2,o.sTypoDescender=a.readShort(s,i),i+=2,o.sTypoLineGap=a.readShort(s,i),i+=2,o.usWinAscent=a.readUshort(s,i),i+=2,o.usWinDescent=a.readUshort(s,i),i+=2},e["OS/2"].version1=function(s,i,o){var a=e._bin;return i=e["OS/2"].version0(s,i,o),o.ulCodePageRange1=a.readUint(s,i),i+=4,o.ulCodePageRange2=a.readUint(s,i),i+=4},e["OS/2"].version2=function(s,i,o){var a=e._bin;return i=e["OS/2"].version1(s,i,o),o.sxHeight=a.readShort(s,i),i+=2,o.sCapHeight=a.readShort(s,i),i+=2,o.usDefault=a.readUshort(s,i),i+=2,o.usBreak=a.readUshort(s,i),i+=2,o.usMaxContext=a.readUshort(s,i),i+=2},e["OS/2"].version5=function(s,i,o){var a=e._bin;return i=e["OS/2"].version2(s,i,o),o.usLowerOpticalPointSize=a.readUshort(s,i),i+=2,o.usUpperOpticalPointSize=a.readUshort(s,i),i+=2},e.post={},e.post.parse=function(s,i,o){var a=e._bin,c={};return c.version=a.readFixed(s,i),i+=4,c.italicAngle=a.readFixed(s,i),i+=4,c.underlinePosition=a.readShort(s,i),i+=2,c.underlineThickness=a.readShort(s,i),i+=2,c},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(s,i){var o=s.cmap,a=-1;if(o.p0e4!=null?a=o.p0e4:o.p3e1!=null?a=o.p3e1:o.p1e0!=null?a=o.p1e0:o.p0e3!=null&&(a=o.p0e3),a==-1)throw"no familiar platform and encoding!";var c=o.tables[a];if(c.format==0)return i>=c.map.length?0:c.map[i];if(c.format==4){for(var h=-1,f=0;f<c.endCount.length;f++)if(i<=c.endCount[f]){h=f;break}return h==-1||c.startCount[h]>i?0:65535&(c.idRangeOffset[h]!=0?c.glyphIdArray[i-c.startCount[h]+(c.idRangeOffset[h]>>1)-(c.idRangeOffset.length-h)]:i+c.idDelta[h])}if(c.format==12){if(i>c.groups[c.groups.length-1][1])return 0;for(f=0;f<c.groups.length;f++){var d=c.groups[f];if(d[0]<=i&&i<=d[1])return d[2]+(i-d[0])}return 0}throw"unknown cmap table format "+c.format},e.U.glyphToPath=function(s,i){var o={cmds:[],crds:[]};if(s.SVG&&s.SVG.entries[i]){var a=s.SVG.entries[i];return a==null?o:(typeof a=="string"&&(a=e.SVG.toPath(a),s.SVG.entries[i]=a),a)}if(s.CFF){var c={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:s.CFF.Private?s.CFF.Private.defaultWidthX:0,open:!1},h=s.CFF,f=s.CFF.Private;if(h.ROS){for(var d=0;h.FDSelect[d+2]<=i;)d+=2;f=h.FDArray[h.FDSelect[d+1]].Private}e.U._drawCFF(s.CFF.CharStrings[i],c,h,f,o)}else s.glyf&&e.U._drawGlyf(i,s,o);return o},e.U._drawGlyf=function(s,i,o){var a=i.glyf[s];a==null&&(a=i.glyf[s]=e.glyf._parseGlyf(i,s)),a!=null&&(a.noc>-1?e.U._simpleGlyph(a,o):e.U._compoGlyph(a,i,o))},e.U._simpleGlyph=function(s,i){for(var o=0;o<s.noc;o++){for(var a=o==0?0:s.endPts[o-1]+1,c=s.endPts[o],h=a;h<=c;h++){var f=h==a?c:h-1,d=h==c?a:h+1,p=1&s.flags[h],g=1&s.flags[f],_=1&s.flags[d],y=s.xs[h],x=s.ys[h];if(h==a)if(p){if(!g){e.U.P.moveTo(i,y,x);continue}e.U.P.moveTo(i,s.xs[f],s.ys[f])}else g?e.U.P.moveTo(i,s.xs[f],s.ys[f]):e.U.P.moveTo(i,(s.xs[f]+y)/2,(s.ys[f]+x)/2);p?g&&e.U.P.lineTo(i,y,x):_?e.U.P.qcurveTo(i,y,x,s.xs[d],s.ys[d]):e.U.P.qcurveTo(i,y,x,(y+s.xs[d])/2,(x+s.ys[d])/2)}e.U.P.closePath(i)}},e.U._compoGlyph=function(s,i,o){for(var a=0;a<s.parts.length;a++){var c={cmds:[],crds:[]},h=s.parts[a];e.U._drawGlyf(h.glyphIndex,i,c);for(var f=h.m,d=0;d<c.crds.length;d+=2){var p=c.crds[d],g=c.crds[d+1];o.crds.push(p*f.a+g*f.b+f.tx),o.crds.push(p*f.c+g*f.d+f.ty)}for(d=0;d<c.cmds.length;d++)o.cmds.push(c.cmds[d])}},e.U._getGlyphClass=function(s,i){var o=e._lctf.getInterval(i,s);return o==-1?0:i[o+2]},e.U.getPairAdjustment=function(s,i,o){var a=!1;if(s.GPOS)for(var c=s.GPOS,h=c.lookupList,f=c.featureList,d=[],p=0;p<f.length;p++){var g=f[p];if(g.tag=="kern"){a=!0;for(var _=0;_<g.tab.length;_++)if(!d[g.tab[_]]){d[g.tab[_]]=!0;for(var y=h[g.tab[_]],x=0;x<y.tabs.length;x++)if(y.tabs[x]!=null){var w,T=y.tabs[x];if((!T.coverage||(w=e._lctf.coverageIndex(T.coverage,i))!=-1)&&y.ltype!=1){if(y.ltype==2){var b=null;if(T.fmt==1){var E=T.pairsets[w];for(p=0;p<E.length;p++)E[p].gid2==o&&(b=E[p])}else if(T.fmt==2){var C=e.U._getGlyphClass(i,T.classDef1),A=e.U._getGlyphClass(o,T.classDef2);b=T.matrix[C][A]}if(b){var M=0;return b.val1&&b.val1[2]&&(M+=b.val1[2]),b.val2&&b.val2[0]&&(M+=b.val2[0]),M}}}}}}}if(s.kern&&!a){var k=s.kern.glyph1.indexOf(i);if(k!=-1){var R=s.kern.rval[k].glyph2.indexOf(o);if(R!=-1)return s.kern.rval[k].vals[R]}}return 0},e.U._applySubs=function(s,i,o,a){for(var c=s.length-i-1,h=0;h<o.tabs.length;h++)if(o.tabs[h]!=null){var f,d=o.tabs[h];if(!d.coverage||(f=e._lctf.coverageIndex(d.coverage,s[i]))!=-1){if(o.ltype==1)s[i],d.fmt==1?s[i]=s[i]+d.delta:s[i]=d.newg[f];else if(o.ltype==4)for(var p=d.vals[f],g=0;g<p.length;g++){var _=p[g],y=_.chain.length;if(!(y>c)){for(var x=!0,w=0,T=0;T<y;T++){for(;s[i+w+(1+T)]==-1;)w++;_.chain[T]!=s[i+w+(1+T)]&&(x=!1)}if(x){for(s[i]=_.nglyph,T=0;T<y+w;T++)s[i+T+1]=-1;break}}}else if(o.ltype==5&&d.fmt==2)for(var b=e._lctf.getInterval(d.cDef,s[i]),E=d.cDef[b+2],C=d.scset[E],A=0;A<C.length;A++){var M=C[A],k=M.input;if(!(k.length>c)){for(x=!0,T=0;T<k.length;T++){var R=e._lctf.getInterval(d.cDef,s[i+1+T]);if(b==-1&&d.cDef[R+2]!=k[T]){x=!1;break}}if(x){var F=M.substLookupRecords;for(g=0;g<F.length;g+=2)F[g],F[g+1]}}}else if(o.ltype==6&&d.fmt==3){if(!e.U._glsCovered(s,d.backCvg,i-d.backCvg.length)||!e.U._glsCovered(s,d.inptCvg,i)||!e.U._glsCovered(s,d.ahedCvg,i+d.inptCvg.length))continue;var U=d.lookupRec;for(A=0;A<U.length;A+=2){b=U[A];var I=a[U[A+1]];e.U._applySubs(s,i+b,I,a)}}}}},e.U._glsCovered=function(s,i,o){for(var a=0;a<i.length;a++)if(e._lctf.coverageIndex(i[a],s[o+a])==-1)return!1;return!0},e.U.glyphsToPath=function(s,i,o){for(var a={cmds:[],crds:[]},c=0,h=0;h<i.length;h++){var f=i[h];if(f!=-1){for(var d=h<i.length-1&&i[h+1]!=-1?i[h+1]:0,p=e.U.glyphToPath(s,f),g=0;g<p.crds.length;g+=2)a.crds.push(p.crds[g]+c),a.crds.push(p.crds[g+1]);for(o&&a.cmds.push(o),g=0;g<p.cmds.length;g++)a.cmds.push(p.cmds[g]);o&&a.cmds.push("X"),c+=s.hmtx.aWidth[f],h<i.length-1&&(c+=e.U.getPairAdjustment(s,f,d))}}return a},e.U.P={},e.U.P.moveTo=function(s,i,o){s.cmds.push("M"),s.crds.push(i,o)},e.U.P.lineTo=function(s,i,o){s.cmds.push("L"),s.crds.push(i,o)},e.U.P.curveTo=function(s,i,o,a,c,h,f){s.cmds.push("C"),s.crds.push(i,o,a,c,h,f)},e.U.P.qcurveTo=function(s,i,o,a,c){s.cmds.push("Q"),s.crds.push(i,o,a,c)},e.U.P.closePath=function(s){s.cmds.push("Z")},e.U._drawCFF=function(s,i,o,a,c){for(var h=i.stack,f=i.nStems,d=i.haveWidth,p=i.width,g=i.open,_=0,y=i.x,x=i.y,w=0,T=0,b=0,E=0,C=0,A=0,M=0,k=0,R=0,F=0,U={val:0,size:0};_<s.length;){e.CFF.getCharString(s,_,U);var I=U.val;if(_+=U.size,I=="o1"||I=="o18")h.length%2!=0&&!d&&(p=h.shift()+a.nominalWidthX),f+=h.length>>1,h.length=0,d=!0;else if(I=="o3"||I=="o23")h.length%2!=0&&!d&&(p=h.shift()+a.nominalWidthX),f+=h.length>>1,h.length=0,d=!0;else if(I=="o4")h.length>1&&!d&&(p=h.shift()+a.nominalWidthX,d=!0),g&&e.U.P.closePath(c),x+=h.pop(),e.U.P.moveTo(c,y,x),g=!0;else if(I=="o5")for(;h.length>0;)y+=h.shift(),x+=h.shift(),e.U.P.lineTo(c,y,x);else if(I=="o6"||I=="o7")for(var z=h.length,j=I=="o6",q=0;q<z;q++){var Y=h.shift();j?y+=Y:x+=Y,j=!j,e.U.P.lineTo(c,y,x)}else if(I=="o8"||I=="o24"){z=h.length;for(var $=0;$+6<=z;)w=y+h.shift(),T=x+h.shift(),b=w+h.shift(),E=T+h.shift(),y=b+h.shift(),x=E+h.shift(),e.U.P.curveTo(c,w,T,b,E,y,x),$+=6;I=="o24"&&(y+=h.shift(),x+=h.shift(),e.U.P.lineTo(c,y,x))}else{if(I=="o11")break;if(I=="o1234"||I=="o1235"||I=="o1236"||I=="o1237")I=="o1234"&&(T=x,b=(w=y+h.shift())+h.shift(),F=E=T+h.shift(),A=E,k=x,y=(M=(C=(R=b+h.shift())+h.shift())+h.shift())+h.shift(),e.U.P.curveTo(c,w,T,b,E,R,F),e.U.P.curveTo(c,C,A,M,k,y,x)),I=="o1235"&&(w=y+h.shift(),T=x+h.shift(),b=w+h.shift(),E=T+h.shift(),R=b+h.shift(),F=E+h.shift(),C=R+h.shift(),A=F+h.shift(),M=C+h.shift(),k=A+h.shift(),y=M+h.shift(),x=k+h.shift(),h.shift(),e.U.P.curveTo(c,w,T,b,E,R,F),e.U.P.curveTo(c,C,A,M,k,y,x)),I=="o1236"&&(w=y+h.shift(),T=x+h.shift(),b=w+h.shift(),F=E=T+h.shift(),A=E,M=(C=(R=b+h.shift())+h.shift())+h.shift(),k=A+h.shift(),y=M+h.shift(),e.U.P.curveTo(c,w,T,b,E,R,F),e.U.P.curveTo(c,C,A,M,k,y,x)),I=="o1237"&&(w=y+h.shift(),T=x+h.shift(),b=w+h.shift(),E=T+h.shift(),R=b+h.shift(),F=E+h.shift(),C=R+h.shift(),A=F+h.shift(),M=C+h.shift(),k=A+h.shift(),Math.abs(M-y)>Math.abs(k-x)?y=M+h.shift():x=k+h.shift(),e.U.P.curveTo(c,w,T,b,E,R,F),e.U.P.curveTo(c,C,A,M,k,y,x));else if(I=="o14"){if(h.length>0&&!d&&(p=h.shift()+o.nominalWidthX,d=!0),h.length==4){var W=h.shift(),V=h.shift(),H=h.shift(),L=h.shift(),B=e.CFF.glyphBySE(o,H),J=e.CFF.glyphBySE(o,L);e.U._drawCFF(o.CharStrings[B],i,o,a,c),i.x=W,i.y=V,e.U._drawCFF(o.CharStrings[J],i,o,a,c)}g&&(e.U.P.closePath(c),g=!1)}else if(I=="o19"||I=="o20")h.length%2!=0&&!d&&(p=h.shift()+a.nominalWidthX),f+=h.length>>1,h.length=0,d=!0,_+=f+7>>3;else if(I=="o21")h.length>2&&!d&&(p=h.shift()+a.nominalWidthX,d=!0),x+=h.pop(),y+=h.pop(),g&&e.U.P.closePath(c),e.U.P.moveTo(c,y,x),g=!0;else if(I=="o22")h.length>1&&!d&&(p=h.shift()+a.nominalWidthX,d=!0),y+=h.pop(),g&&e.U.P.closePath(c),e.U.P.moveTo(c,y,x),g=!0;else if(I=="o25"){for(;h.length>6;)y+=h.shift(),x+=h.shift(),e.U.P.lineTo(c,y,x);w=y+h.shift(),T=x+h.shift(),b=w+h.shift(),E=T+h.shift(),y=b+h.shift(),x=E+h.shift(),e.U.P.curveTo(c,w,T,b,E,y,x)}else if(I=="o26")for(h.length%2&&(y+=h.shift());h.length>0;)w=y,T=x+h.shift(),y=b=w+h.shift(),x=(E=T+h.shift())+h.shift(),e.U.P.curveTo(c,w,T,b,E,y,x);else if(I=="o27")for(h.length%2&&(x+=h.shift());h.length>0;)T=x,b=(w=y+h.shift())+h.shift(),E=T+h.shift(),y=b+h.shift(),x=E,e.U.P.curveTo(c,w,T,b,E,y,x);else if(I=="o10"||I=="o29"){var te=I=="o10"?a:o;if(h.length==0)console.debug("error: empty stack");else{var X=h.pop(),oe=te.Subrs[X+te.Bias];i.x=y,i.y=x,i.nStems=f,i.haveWidth=d,i.width=p,i.open=g,e.U._drawCFF(oe,i,o,a,c),y=i.x,x=i.y,f=i.nStems,d=i.haveWidth,p=i.width,g=i.open}}else if(I=="o30"||I=="o31"){var re=h.length,Q=($=0,I=="o31");for($+=re-(z=-3&re);$<z;)Q?(T=x,b=(w=y+h.shift())+h.shift(),x=(E=T+h.shift())+h.shift(),z-$==5?(y=b+h.shift(),$++):y=b,Q=!1):(w=y,T=x+h.shift(),b=w+h.shift(),E=T+h.shift(),y=b+h.shift(),z-$==5?(x=E+h.shift(),$++):x=E,Q=!0),e.U.P.curveTo(c,w,T,b,E,y,x),$+=4}else{if((I+"").charAt(0)=="o")throw console.debug("Unknown operation: "+I,s),I;h.push(I)}}}i.x=y,i.y=x,i.nStems=f,i.haveWidth=d,i.width=p,i.open=g};var t=e,n={Typr:t};return r.Typr=t,r.default=n,Object.defineProperty(r,"__esModule",{value:!0}),r}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function BC(){return function(r){var e=Uint8Array,t=Uint16Array,n=Uint32Array,s=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(I,z){for(var j=new t(31),q=0;q<31;++q)j[q]=z+=1<<I[q-1];var Y=new n(j[30]);for(q=1;q<30;++q)for(var $=j[q];$<j[q+1];++$)Y[$]=$-j[q]<<5|q;return[j,Y]},c=a(s,2),h=c[0],f=c[1];h[28]=258,f[258]=28;for(var d=a(i,0)[0],p=new t(32768),g=0;g<32768;++g){var _=(43690&g)>>>1|(21845&g)<<1;_=(61680&(_=(52428&_)>>>2|(13107&_)<<2))>>>4|(3855&_)<<4,p[g]=((65280&_)>>>8|(255&_)<<8)>>>1}var y=function(I,z,j){for(var q=I.length,Y=0,$=new t(z);Y<q;++Y)++$[I[Y]-1];var W,V=new t(z);for(Y=0;Y<z;++Y)V[Y]=V[Y-1]+$[Y-1]<<1;if(j){W=new t(1<<z);var H=15-z;for(Y=0;Y<q;++Y)if(I[Y])for(var L=Y<<4|I[Y],B=z-I[Y],J=V[I[Y]-1]++<<B,te=J|(1<<B)-1;J<=te;++J)W[p[J]>>>H]=L}else for(W=new t(q),Y=0;Y<q;++Y)I[Y]&&(W[Y]=p[V[I[Y]-1]++]>>>15-I[Y]);return W},x=new e(288);for(g=0;g<144;++g)x[g]=8;for(g=144;g<256;++g)x[g]=9;for(g=256;g<280;++g)x[g]=7;for(g=280;g<288;++g)x[g]=8;var w=new e(32);for(g=0;g<32;++g)w[g]=5;var T=y(x,9,1),b=y(w,5,1),E=function(I){for(var z=I[0],j=1;j<I.length;++j)I[j]>z&&(z=I[j]);return z},C=function(I,z,j){var q=z/8|0;return(I[q]|I[q+1]<<8)>>(7&z)&j},A=function(I,z){var j=z/8|0;return(I[j]|I[j+1]<<8|I[j+2]<<16)>>(7&z)},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],k=function(I,z,j){var q=new Error(z||M[I]);if(q.code=I,Error.captureStackTrace&&Error.captureStackTrace(q,k),!j)throw q;return q},R=function(I,z,j){var q=I.length;if(!q||j&&!j.l&&q<5)return z||new e(0);var Y=!z||j,$=!j||j.i;j||(j={}),z||(z=new e(3*q));var W,V=function(Ne){var ct=z.length;if(Ne>ct){var dt=new e(Math.max(2*ct,Ne));dt.set(z),z=dt}},H=j.f||0,L=j.p||0,B=j.b||0,J=j.l,te=j.d,X=j.m,oe=j.n,re=8*q;do{if(!J){j.f=H=C(I,L,1);var Q=C(I,L+1,3);if(L+=3,!Q){var ge=I[(pe=((W=L)/8|0)+(7&W&&1)+4)-4]|I[pe-3]<<8,ve=pe+ge;if(ve>q){$&&k(0);break}Y&&V(B+ge),z.set(I.subarray(pe,ve),B),j.b=B+=ge,j.p=L=8*ve;continue}if(Q==1)J=T,te=b,X=9,oe=5;else if(Q==2){var ae=C(I,L,31)+257,le=C(I,L+10,15)+4,be=ae+C(I,L+5,31)+1;L+=14;for(var Fe=new e(be),ee=new e(19),he=0;he<le;++he)ee[o[he]]=C(I,L+3*he,7);L+=3*le;var xe=E(ee),ce=(1<<xe)-1,de=y(ee,xe,1);for(he=0;he<be;){var pe,ue=de[C(I,L,ce)];if(L+=15&ue,(pe=ue>>>4)<16)Fe[he++]=pe;else{var Me=0,Se=0;for(pe==16?(Se=3+C(I,L,3),L+=2,Me=Fe[he-1]):pe==17?(Se=3+C(I,L,7),L+=3):pe==18&&(Se=11+C(I,L,127),L+=7);Se--;)Fe[he++]=Me}}var Ce=Fe.subarray(0,ae),Te=Fe.subarray(ae);X=E(Ce),oe=E(Te),J=y(Ce,X,1),te=y(Te,oe,1)}else k(1);if(L>re){$&&k(0);break}}Y&&V(B+131072);for(var et=(1<<X)-1,He=(1<<oe)-1,Pe=L;;Pe=L){var We=(Me=J[A(I,L)&et])>>>4;if((L+=15&Me)>re){$&&k(0);break}if(Me||k(2),We<256)z[B++]=We;else{if(We==256){Pe=L,J=null;break}var rt=We-254;if(We>264){var Vt=s[he=We-257];rt=C(I,L,(1<<Vt)-1)+h[he],L+=Vt}var Ge=te[A(I,L)&He],xt=Ge>>>4;if(Ge||k(3),L+=15&Ge,Te=d[xt],xt>3&&(Vt=i[xt],Te+=A(I,L)&(1<<Vt)-1,L+=Vt),L>re){$&&k(0);break}Y&&V(B+131072);for(var Qe=B+rt;B<Qe;B+=4)z[B]=z[B-Te],z[B+1]=z[B+1-Te],z[B+2]=z[B+2-Te],z[B+3]=z[B+3-Te];B=Qe}}j.l=J,j.p=Pe,j.b=B,J&&(H=1,j.m=X,j.d=te,j.n=oe)}while(!H);return B==z.length?z:function(Ne,ct,dt){(ct==null||ct<0)&&(ct=0),(dt==null||dt>Ne.length)&&(dt=Ne.length);var Gt=new(Ne instanceof t?t:Ne instanceof n?n:e)(dt-ct);return Gt.set(Ne.subarray(ct,dt)),Gt}(z,0,B)},F=new e(0),U=typeof TextDecoder<"u"&&new TextDecoder;try{U.decode(F,{stream:!0})}catch{}return r.convert_streams=function(I){var z=new DataView(I),j=0;function q(){var ae=z.getUint16(j);return j+=2,ae}function Y(){var ae=z.getUint32(j);return j+=4,ae}function $(ae){ge.setUint16(ve,ae),ve+=2}function W(ae){ge.setUint32(ve,ae),ve+=4}for(var V={signature:Y(),flavor:Y(),length:Y(),numTables:q(),reserved:q(),totalSfntSize:Y(),majorVersion:q(),minorVersion:q(),metaOffset:Y(),metaLength:Y(),metaOrigLength:Y(),privOffset:Y(),privLength:Y()},H=0;Math.pow(2,H)<=V.numTables;)H++;H--;for(var L=16*Math.pow(2,H),B=16*V.numTables-L,J=12,te=[],X=0;X<V.numTables;X++)te.push({tag:Y(),offset:Y(),compLength:Y(),origLength:Y(),origChecksum:Y()}),J+=16;var oe,re=new Uint8Array(12+16*te.length+te.reduce(function(ae,le){return ae+le.origLength+4},0)),Q=re.buffer,ge=new DataView(Q),ve=0;return W(V.flavor),$(V.numTables),$(L),$(H),$(B),te.forEach(function(ae){W(ae.tag),W(ae.origChecksum),W(J),W(ae.origLength),ae.outOffset=J,(J+=ae.origLength)%4!=0&&(J+=4-J%4)}),te.forEach(function(ae){var le,be=I.slice(ae.offset,ae.offset+ae.compLength);if(ae.compLength!=ae.origLength){var Fe=new Uint8Array(ae.origLength);le=new Uint8Array(be,2),R(le,Fe)}else Fe=new Uint8Array(be);re.set(Fe,ae.outOffset);var ee=0;(J=ae.outOffset+ae.origLength)%4!=0&&(ee=4-J%4),re.set(new Uint8Array(ee).buffer,ae.outOffset+ae.origLength),oe=J+ee}),Q.slice(0,oe)},Object.defineProperty(r,"__esModule",{value:!0}),r}({}).convert_streams}function jC(r,e){const t={M:2,L:2,Q:4,C:6,Z:0},n={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},s=1,i=2,o=4,a=8,c=16,h=32;let f;function d(C){if(!f){const A={R:i,L:s,D:o,C:c,U:h,T:a};f=new Map;for(let M in n){let k=0;n[M].split(",").forEach(R=>{let[F,U]=R.split("+");F=parseInt(F,36),U=U?parseInt(U,36):0,f.set(k+=F,A[M]);for(let I=U;I--;)f.set(++k,A[M])})}}return f.get(C)||h}const p=1,g=2,_=3,y=4,x=[null,"isol","init","fina","medi"];function w(C){const A=new Uint8Array(C.length);let M=h,k=p,R=-1;for(let F=0;F<C.length;F++){const U=C.codePointAt(F);let I=d(U)|0,z=p;I&a||(M&(s|o|c)?I&(i|o|c)?(z=_,(k===p||k===_)&&A[R]++):I&(s|h)&&(k===g||k===y)&&A[R]--:M&(i|h)&&(k===g||k===y)&&A[R]--,k=A[F]=z,M=I,R=F,U>65535&&F++)}return A}function T(C,A){const M=[];for(let R=0;R<A.length;R++){const F=A.codePointAt(R);F>65535&&R++,M.push(r.U.codeToGlyph(C,F))}const k=C.GSUB;if(k){const{lookupList:R,featureList:F}=k;let U;const I=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,z=[];F.forEach(j=>{if(I.test(j.tag))for(let q=0;q<j.tab.length;q++){if(z[j.tab[q]])continue;z[j.tab[q]]=!0;const Y=R[j.tab[q]],$=/^(isol|init|fina|medi)$/.test(j.tag);$&&!U&&(U=w(A));for(let W=0;W<M.length;W++)(!U||!$||x[U[W]]===j.tag)&&r.U._applySubs(M,W,Y,R)}})}return M}function b(...C){for(let A=0;A<C.length;A++)if(typeof C[A]=="number")return C[A]}function E(C){const A=Object.create(null),M=C["OS/2"],k=C.hhea,R=C.head.unitsPerEm,F=b(M&&M.sTypoAscender,k&&k.ascender,R),U={unitsPerEm:R,ascender:F,descender:b(M&&M.sTypoDescender,k&&k.descender,0),capHeight:b(M&&M.sCapHeight,F),xHeight:b(M&&M.sxHeight,F),lineGap:b(M&&M.sTypoLineGap,k&&k.lineGap),forEachGlyph(I,z,j,q){let Y=0;const $=1/U.unitsPerEm*z,W=T(C,I);let V=0,H=-1;return W.forEach((L,B)=>{if(L!==-1){let J=A[L];if(!J){const{cmds:te,crds:X}=r.U.glyphToPath(C,L);let oe="",re=0;for(let le=0,be=te.length;le<be;le++){const Fe=t[te[le]];oe+=te[le];for(let ee=1;ee<=Fe;ee++)oe+=(ee>1?",":"")+X[re++]}let Q,ge,ve,ae;if(X.length){Q=ge=1/0,ve=ae=-1/0;for(let le=0,be=X.length;le<be;le+=2){let Fe=X[le],ee=X[le+1];Fe<Q&&(Q=Fe),ee<ge&&(ge=ee),Fe>ve&&(ve=Fe),ee>ae&&(ae=ee)}}else Q=ve=ge=ae=0;J=A[L]={index:L,advanceWidth:C.hmtx.aWidth[L],xMin:Q,yMin:ge,xMax:ve,yMax:ae,path:oe,pathCommandCount:te.length}}H!==-1&&(Y+=r.U.getPairAdjustment(C,H,L)*$),q.call(null,J,Y,V),J.advanceWidth&&(Y+=J.advanceWidth*$),j&&(Y+=j*z),H=L}V+=I.codePointAt(V)>65535?2:1}),Y}};return U}return function(A){const M=new Uint8Array(A,0,4),k=r._bin.readASCII(M,0,4);if(k==="wOFF")A=e(A);else if(k==="wOF2")throw new Error("woff2 fonts not supported");return E(r.parse(A)[0])}}const VC=Su({name:"Typr Font Parser",dependencies:[zC,BC,jC],init(r,e,t){const n=r(),s=e();return t(n,s)}}),$a={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},GC=new rr;function za(){return(self.performance||Date).now()}const av=Object.create(null);function Ry(r,e){r=qC({},r);const t=za();if(r.font=ZC(r.font||$a.defaultFontURL),r.text=""+r.text,r.sdfGlyphSize=r.sdfGlyphSize||$a.sdfGlyphSize,r.colorRanges!=null){let d={};for(let p in r.colorRanges)if(r.colorRanges.hasOwnProperty(p)){let g=r.colorRanges[p];typeof g!="number"&&(g=GC.set(g).getHex()),d[p]=g}r.colorRanges=d}Object.freeze(r);const{textureWidth:n,sdfExponent:s}=$a,{sdfGlyphSize:i}=r,o=n/i*4;let a=av[i];if(!a){const d=document.createElement("canvas");d.width=n,d.height=i*256/o,a=av[i]={glyphCount:0,sdfGlyphSize:i,sdfCanvas:d,sdfTexture:new gu(d,void 0,void 0,void 0,fl,fl),contextLost:!1,glyphsByFont:new Map},a.sdfTexture.generateMipmaps=!1,HC(a)}const{sdfTexture:c,sdfCanvas:h}=a;let f=a.glyphsByFont.get(r.font);f||a.glyphsByFont.set(r.font,f=new Map),XC(r).then(d=>{const{glyphIds:p,glyphPositions:g,fontSize:_,unitsPerEm:y,timings:x}=d,w=[],T=new Float32Array(p.length*4),b=_/y;let E=0,C=0;const A=za();p.forEach((U,I)=>{let z=f.get(U);if(!z){const{path:$,pathBounds:W}=d.glyphData[U],V=Math.max(W[2]-W[0],W[3]-W[1])/i*($a.sdfMargin*i+.5),H=a.glyphCount++,L=[W[0]-V,W[1]-V,W[2]+V,W[3]+V];f.set(U,z={path:$,atlasIndex:H,sdfViewBox:L}),w.push(z)}const{sdfViewBox:j}=z,q=g[C++],Y=g[C++];T[E++]=q+j[0]*b,T[E++]=Y+j[1]*b,T[E++]=q+j[2]*b,T[E++]=Y+j[3]*b,p[I]=z.atlasIndex}),x.quads=(x.quads||0)+(za()-A);const M=za();x.sdf={};const k=h.height,R=Math.ceil(a.glyphCount/o),F=Math.pow(2,Math.ceil(Math.log2(R*i)));F>k&&(console.info(`Increasing SDF texture size ${k}->${F}`),LC(h,n,F),c.dispose()),Promise.all(w.map(U=>Dy(U,a,r.gpuAccelerateSDF).then(({timing:I})=>{x.sdf[U.atlasIndex]=I}))).then(()=>{w.length&&!a.contextLost&&(Iy(a),c.needsUpdate=!0),x.sdfTotal=za()-M,x.total=za()-t,e(Object.freeze({parameters:r,sdfTexture:c,sdfGlyphSize:i,sdfExponent:s,glyphBounds:T,glyphAtlasIndices:p,glyphColors:d.glyphColors,caretPositions:d.caretPositions,caretHeight:d.caretHeight,chunkedBounds:d.chunkedBounds,ascender:d.ascender,descender:d.descender,lineHeight:d.lineHeight,capHeight:d.capHeight,xHeight:d.xHeight,topBaseline:d.topBaseline,blockBounds:d.blockBounds,visibleBounds:d.visibleBounds,timings:d.timings}))})}),Promise.resolve().then(()=>{a.contextLost||NC(h)})}function Dy({path:r,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:n,sdfCanvas:s,contextLost:i},o){if(i)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:c}=$a,h=Math.max(t[2]-t[0],t[3]-t[1]),f=Math.floor(e/4),d=f%(a/n)*n,p=Math.floor(f/(a/n))*n,g=e%4;return PC(n,n,r,t,h,c,s,d,p,g,o)}function HC(r){const e=r.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),r.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),r.contextLost=!1;const n=[];r.glyphsByFont.forEach(s=>{s.forEach(i=>{n.push(Dy(i,r,!0))})}),Promise.all(n).then(()=>{Iy(r),r.sdfTexture.needsUpdate=!0})})}function WC({font:r,characters:e,sdfGlyphSize:t},n){let s=Array.isArray(e)?e.join(`
`):""+e;Ry({font:r,sdfGlyphSize:t,text:s},n)}function qC(r,e){for(let t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}let Uh;function ZC(r){return Uh||(Uh=typeof document>"u"?{}:document.createElement("a")),Uh.href=r,Uh.href}function Iy(r){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=r,{width:n,height:s}=e,i=r.sdfCanvas.getContext("webgl");let o=t.image.data;(!o||o.length!==n*s*4)&&(o=new Uint8Array(n*s*4),t.image={width:n,height:s,data:o},t.flipY=!1,t.isDataTexture=!0),i.readPixels(0,0,n,s,i.RGBA,i.UNSIGNED_BYTE,o)}}const YC=Su({name:"Typesetter",dependencies:[$a,VC,kC,SC],init(r,e,t,n){const{defaultFontURL:s}=r;return t(e,n(),{defaultFontURL:s})}}),XC=Su({name:"Typesetter",dependencies:[YC],init(r){return function(e){return new Promise(t=>{r.typeset(e,t)})}},getTransferables(r){const e=[r.glyphPositions.buffer,r.glyphIds.buffer];return r.caretPositions&&e.push(r.caretPositions.buffer),r.glyphColors&&e.push(r.glyphColors.buffer),e}}),lv={};function QC(r){let e=lv[r];if(!e){const t=new Wm(1,1,r,r),n=t.clone(),s=t.attributes,i=n.attributes,o=new jm,a=s.uv.count;for(let c=0;c<a;c++)i.position.array[c*3]*=-1,i.normal.array[c*3+2]*=-1;["position","normal","uv"].forEach(c=>{o.setAttribute(c,new af([...s[c].array,...i[c].array],s[c].itemSize))}),o.setIndex([...t.index.array,...n.index.array.map(c=>c+a)]),o.translate(.5,.5,0),e=lv[r]=o}return e}const KC="aTroikaGlyphBounds",cv="aTroikaGlyphIndex",JC="aTroikaGlyphColor";class $C extends B_{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Gm,this.boundingBox=new Bf}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===Pc?t/2:0,e===Ki?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=QC(e);["position","normal","uv"].forEach(n=>{this.attributes[n]=t.attributes[n].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,n,s,i){Sp(this,KC,e,4),Sp(this,cv,t,1),Sp(this,JC,i,3),this._blockBounds=n,this._chunkedBounds=s,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:n}=this;if(t){const{PI:s,floor:i,min:o,max:a,sin:c,cos:h}=Math,f=s/2,d=s*2,p=Math.abs(t),g=e[0]/p,_=e[2]/p,y=i((g+f)/d)!==i((_+f)/d)?-p:o(c(g)*p,c(_)*p),x=i((g-f)/d)!==i((_-f)/d)?p:a(c(g)*p,c(_)*p),w=i((g+s)/d)!==i((_+s)/d)?p*2:a(p-h(g)*p,p-h(_)*p);n.min.set(y,e[1],t<0?-w:0),n.max.set(x,e[3],t<0?0:w)}else n.min.set(e[0],e[1],0),n.max.set(e[2],e[3],0);n.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(cv).count,n=this._chunkedBounds;if(n)for(let s=n.length;s--;){t=n[s].end;let i=n[s].rect;if(i[1]<e.w&&i[3]>e.y&&i[0]<e.z&&i[2]>e.x)break}this.instanceCount=t}}function Sp(r,e,t,n){const s=r.getAttribute(e);t?s&&s.array.length===t.length?(s.array.set(t),s.needsUpdate=!0):(r.setAttribute(e,new SS(t,n)),delete r._maxInstanceCount,r.dispose()):s&&r.deleteAttribute(e)}const eE=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,tE=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,nE=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,rE=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function sE(r){const e=im(r,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new _t},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new oo(0,0,0,0)},uTroikaClipRect:{value:new oo(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new _t},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new rr},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new TS},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:eE,vertexTransform:tE,fragmentDefs:nE,fragmentColorTransform:rE,customRewriter({vertexShader:t,fragmentShader:n}){let s=/\buniform\s+vec3\s+diffuse\b/;return s.test(n)&&(n=n.replace(s,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),s.test(t)||(t=t.replace(ky,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:n}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const tg=new CS({color:16777215,side:Ki,transparent:!0}),uv=8421504,hv=new ca,Fh=new ye,Tp=new ye,xc=[],iE=new ye,Cp="+x+y";function fv(r){return Array.isArray(r)?r[0]:r}let Uy=()=>{const r=new ua(new Wm(1,1),tg);return Uy=()=>r,r},Fy=()=>{const r=new ua(new Wm(1,1,32,1),tg);return Fy=()=>r,r};const oE={type:"syncstart"},aE={type:"synccomplete"},Ny=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],lE=Ny.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let Ly=class extends ua{constructor(){const e=new $C;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=uv,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=Cp,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(oE),Ry({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const n=this._queuedSyncs;n&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{n.forEach(s=>s&&s())})),this.dispatchEvent(aE),e&&e()})))}onBeforeRender(e,t,n,s,i,o){this.sync(),i.isTroikaTextMaterial&&this._prepareForRender(i),i._hadOwnSide=i.hasOwnProperty("side"),this.geometry.setSide(i._actualSide=i.side),i.side=V_}onAfterRender(e,t,n,s,i,o){i._hadOwnSide?i.side=i._actualSide:delete i.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=tg.clone());if((!e||e.baseMaterial!==t)&&(e=this._derivedMaterial=sE(t),t.addEventListener("dispose",function n(){t.removeEventListener("dispose",n),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let n=e._outlineMtl;return n||(n=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),n.isTextOutlineMaterial=!0,n.depthWrite=!1,n.map=null,e.addEventListener("dispose",function s(){e.removeEventListener("dispose",s),n.dispose()})),[n,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return fv(this.material).getDepthMaterial()}get customDistanceMaterial(){return fv(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,n=e.uniforms,s=this.textRenderInfo;if(s){const{sdfTexture:a,blockBounds:c}=s;n.uTroikaSDFTexture.value=a,n.uTroikaSDFTextureSize.value.set(a.image.width,a.image.height),n.uTroikaSDFGlyphSize.value=s.sdfGlyphSize,n.uTroikaSDFExponent.value=s.sdfExponent,n.uTroikaTotalBounds.value.fromArray(c),n.uTroikaUseGlyphColors.value=!t&&!!s.glyphColors;let h=0,f=0,d=0,p,g,_,y=0,x=0;if(t){let{outlineWidth:T,outlineOffsetX:b,outlineOffsetY:E,outlineBlur:C,outlineOpacity:A}=this;h=this._parsePercent(T)||0,f=Math.max(0,this._parsePercent(C)||0),p=A,y=this._parsePercent(b)||0,x=this._parsePercent(E)||0}else d=Math.max(0,this._parsePercent(this.strokeWidth)||0),d&&(_=this.strokeColor,n.uTroikaStrokeColor.value.set(_??uv),g=this.strokeOpacity,g==null&&(g=1)),p=this.fillOpacity;n.uTroikaDistanceOffset.value=h,n.uTroikaPositionOffset.value.set(y,x),n.uTroikaBlurRadius.value=f,n.uTroikaStrokeWidth.value=d,n.uTroikaStrokeOpacity.value=g,n.uTroikaFillOpacity.value=p??1,n.uTroikaCurveRadius.value=this.curveRadius||0;let w=this.clipRect;if(w&&Array.isArray(w)&&w.length===4)n.uTroikaClipRect.value.fromArray(w);else{const T=(this.fontSize||.1)*100;n.uTroikaClipRect.value.set(c[0]-T,c[1]-T,c[2]+T,c[3]+T)}this.geometry.applyClipRect(n.uTroikaClipRect.value)}n.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const i=t?this.outlineColor||0:this.color;if(i==null)delete e.color;else{const a=e.hasOwnProperty("color")?e.color:e.color=new rr;(i!==a._input||typeof i=="object")&&a.set(a._input=i)}let o=this.orientation||Cp;if(o!==e._orientation){let a=n.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let c=o!==Cp&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(c){let[,h,f,d,p]=c;Fh.set(0,0,0)[f]=h==="-"?1:-1,Tp.set(0,0,0)[p]=d==="-"?-1:1,hv.lookAt(iE,Fh.cross(Tp),Tp),a.setFromMatrix4(hv)}else a.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),n=t?parseFloat(t[1]):NaN;e=(isNaN(n)?0:n/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new _t){t.copy(e);const n=this.curveRadius;return n&&(t.x=Math.atan2(e.x,Math.abs(n)-Math.abs(e.z))*Math.abs(n)),t}worldPositionToTextCoords(e,t=new _t){return Fh.copy(e),this.localPositionToTextCoords(this.worldToLocal(Fh),t)}raycast(e,t){const{textRenderInfo:n,curveRadius:s}=this;if(n){const i=n.blockBounds,o=s?Fy():Uy(),a=o.geometry,{position:c,uv:h}=a.attributes;for(let f=0;f<h.count;f++){let d=i[0]+h.getX(f)*(i[2]-i[0]);const p=i[1]+h.getY(f)*(i[3]-i[1]);let g=0;s&&(g=s-Math.cos(d/s)*s,d=Math.sin(d/s)*s),c.setXYZ(f,d,p,g)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,xc.length=0,o.raycast(e,xc);for(let f=0;f<xc.length;f++)xc[f].object=this,t.push(xc[f])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,lE.forEach(n=>{this[n]=e[n]}),this}clone(){return new this.constructor().copy(this)}};Ny.forEach(r=>{const e="_private_"+r;Object.defineProperty(Ly.prototype,r,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});function cE(r,e,t=(n,s)=>n===s){if(r===e)return!0;if(!r||!e)return!1;const n=r.length;if(e.length!==n)return!1;for(let s=0;s<n;s++)if(!t(r[s],e[s]))return!1;return!0}const Nh=[];function uE(r,e,t=!1,n={}){for(const i of Nh)if(cE(e,i.keys,i.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(i,"error"))throw i.error;if(Object.prototype.hasOwnProperty.call(i,"response"))return i.response;if(!t)throw i.promise}const s={keys:e,equal:n.equal,promise:r(...e).then(i=>s.response=i).then(()=>{n.lifespan&&n.lifespan>0&&setTimeout(()=>{const i=Nh.indexOf(s);i!==-1&&Nh.splice(i,1)},n.lifespan)}).catch(i=>s.error=i)};if(Nh.push(s),!t)throw s.promise}const hE=(r,e,t)=>uE(r,e,!1,t),am=P.forwardRef(({anchorX:r="center",anchorY:e="middle",font:t,fontSize:n=1,children:s,characters:i,onSync:o,...a},c)=>{const h=lt(({invalidate:g})=>g),[f]=P.useState(()=>new Ly),[d,p]=P.useMemo(()=>{const g=[];let _="";return P.Children.forEach(s,y=>{typeof y=="string"||typeof y=="number"?_+=y:g.push(y)}),[g,_]},[s]);return hE(()=>new Promise(g=>WC({font:t,characters:i},g)),["troika-text",t,i]),P.useLayoutEffect(()=>void f.sync(()=>{h(),o&&o(f)})),P.useEffect(()=>()=>f.dispose(),[f]),P.createElement("primitive",as({object:f,ref:c,font:t,text:p,anchorX:r,anchorY:e,fontSize:n},a),d)}),dv=r=>r===Object(r)&&!Array.isArray(r)&&typeof r!="function";function Xo(r,e){const t=lt(s=>s.gl),n=xu(Vf,dv(r)?Object.values(r):r);if(P.useLayoutEffect(()=>{e==null||e(n)},[e]),P.useEffect(()=>{(Array.isArray(n)?n:[n]).forEach(t.initTexture)},[t,n]),dv(r)){const s=Object.keys(r),i={};return s.forEach(o=>Object.assign(i,{[o]:n[s.indexOf(o)]})),i}else return n}Xo.preload=r=>xu.preload(Vf,r);Xo.clear=r=>xu.clear(Vf,r);/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const Le={LEFT:1,RIGHT:2,MIDDLE:4},ie=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),Ba={NONE:0,IN:1,OUT:-1};function Fo(r){return r.isPerspectiveCamera}function Xi(r){return r.isOrthographicCamera}const ja=Math.PI*2,pv=Math.PI/2,zy=1e-5,wc=Math.PI/180;function vs(r,e,t){return Math.max(e,Math.min(t,r))}function Et(r,e=zy){return Math.abs(r)<e}function ft(r,e,t=zy){return Et(r-e,t)}function mv(r,e){return Math.round(r/e)*e}function Sc(r){return isFinite(r)?r:r<0?-Number.MAX_VALUE:Number.MAX_VALUE}function Tc(r){return Math.abs(r)<Number.MAX_VALUE?r:r*(1/0)}function Lh(r,e,t,n,s=1/0,i){n=Math.max(1e-4,n);const o=2/n,a=o*i,c=1/(1+a+.48*a*a+.235*a*a*a);let h=r-e;const f=e,d=s*n;h=vs(h,-d,d),e=r-h;const p=(t.value+o*h)*i;t.value=(t.value-o*p)*c;let g=e+(h+p)*c;return f-r>0==g>f&&(g=f,t.value=(g-f)/i),g}function gv(r,e,t,n,s=1/0,i,o){n=Math.max(1e-4,n);const a=2/n,c=a*i,h=1/(1+c+.48*c*c+.235*c*c*c);let f=e.x,d=e.y,p=e.z,g=r.x-f,_=r.y-d,y=r.z-p;const x=f,w=d,T=p,b=s*n,E=b*b,C=g*g+_*_+y*y;if(C>E){const q=Math.sqrt(C);g=g/q*b,_=_/q*b,y=y/q*b}f=r.x-g,d=r.y-_,p=r.z-y;const A=(t.x+a*g)*i,M=(t.y+a*_)*i,k=(t.z+a*y)*i;t.x=(t.x-a*A)*h,t.y=(t.y-a*M)*h,t.z=(t.z-a*k)*h,o.x=f+(g+A)*h,o.y=d+(_+M)*h,o.z=p+(y+k)*h;const R=x-r.x,F=w-r.y,U=T-r.z,I=o.x-x,z=o.y-w,j=o.z-T;return R*I+F*z+U*j>0&&(o.x=x,o.y=w,o.z=T,t.x=(o.x-x)/i,t.y=(o.y-w)/i,t.z=(o.z-T)/i),o}function Ep(r,e){e.set(0,0),r.forEach(t=>{e.x+=t.clientX,e.y+=t.clientY}),e.x/=r.length,e.y/=r.length}function bp(r,e){return Xi(r)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}class fE{constructor(){this._listeners={}}addEventListener(e,t){const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const s=this._listeners[e];if(s!==void 0){const i=s.indexOf(t);i!==-1&&s.splice(i,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const n=this._listeners[e.type];if(n!==void 0){e.target=this;const s=n.slice(0);for(let i=0,o=s.length;i<o;i++)s[i].call(this,e)}}}const dE="2.7.3",zh=1/8,By=typeof window<"u",pE=By&&/Mac/.test(navigator.platform),mE=!(By&&"PointerEvent"in window);let Ue,vv,Bh,Mp,fr,qe,ot,Va,Cc,Gs,Hs,No,_v,yv,Kr,Ec,Ga,xv,Op,wv,Ap,kp,jh,Pp=class lm extends fE{static install(e){Ue=e.THREE,vv=Object.freeze(new Ue.Vector3(0,0,0)),Bh=Object.freeze(new Ue.Vector3(0,1,0)),Mp=Object.freeze(new Ue.Vector3(0,0,1)),fr=new Ue.Vector2,qe=new Ue.Vector3,ot=new Ue.Vector3,Va=new Ue.Vector3,Cc=new Ue.Vector3,Gs=new Ue.Vector3,Hs=new Ue.Vector3,No=new Ue.Vector3,_v=new Ue.Vector3,yv=new Ue.Vector3,Kr=new Ue.Spherical,Ec=new Ue.Spherical,Ga=new Ue.Box3,xv=new Ue.Box3,Op=new Ue.Sphere,wv=new Ue.Quaternion,Ap=new Ue.Quaternion,kp=new Ue.Matrix4,jh=new Ue.Raycaster}static get ACTION(){return ie}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=ie.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=Ba.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new Ue.Vector3,this._focalOffsetVelocity=new Ue.Vector3,this._zoomVelocity={value:0},this._truckInternal=(E,C,A)=>{let M,k;if(Fo(this._camera)){const R=qe.copy(this._camera.position).sub(this._target),F=this._camera.getEffectiveFOV()*wc,U=R.length()*Math.tan(F*.5);M=this.truckSpeed*E*U/this._elementRect.height,k=this.truckSpeed*C*U/this._elementRect.height}else if(Xi(this._camera)){const R=this._camera;M=E*(R.right-R.left)/R.zoom/this._elementRect.width,k=C*(R.top-R.bottom)/R.zoom/this._elementRect.height}else return;this.verticalDragToForward?(A?this.setFocalOffset(this._focalOffsetEnd.x+M,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(M,0,!0),this.forward(-k,!0)):A?this.setFocalOffset(this._focalOffsetEnd.x+M,this._focalOffsetEnd.y+k,this._focalOffsetEnd.z,!0):this.truck(M,k,!0)},this._rotateInternal=(E,C)=>{const A=ja*this.azimuthRotateSpeed*E/this._elementRect.height,M=ja*this.polarRotateSpeed*C/this._elementRect.height;this.rotate(A,M,!0)},this._dollyInternal=(E,C,A)=>{const M=Math.pow(.95,-E*this.dollySpeed),k=this._sphericalEnd.radius,R=this._sphericalEnd.radius*M,F=vs(R,this.minDistance,this.maxDistance),U=F-R;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(R,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(U,!0),this._dollyToNoClamp(F,!0)):this._dollyToNoClamp(F,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?R:F)-k,this._dollyControlCoord.set(C,A)),this._lastDollyDirection=Math.sign(-E)},this._zoomInternal=(E,C,A)=>{const M=Math.pow(.95,E*this.dollySpeed),k=this._zoom,R=this._zoom*M;this.zoomTo(R,!0),this.dollyToCursor&&(this._changedZoom+=R-k,this._dollyControlCoord.set(C,A))},typeof Ue>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new Ue.Quaternion().setFromUnitVectors(this._camera.up,Bh),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=ie.NONE,this._target=new Ue.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new Ue.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new Ue.Spherical().setFromVector3(qe.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new Ue.Vector3,new Ue.Vector3,new Ue.Vector3,new Ue.Vector3],this._updateNearPlaneCorners(),this._boundary=new Ue.Box3(new Ue.Vector3(-1/0,-1/0,-1/0),new Ue.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new Ue.Vector2,this.mouseButtons={left:ie.ROTATE,middle:ie.DOLLY,right:ie.TRUCK,wheel:Fo(this._camera)?ie.DOLLY:Xi(this._camera)?ie.ZOOM:ie.NONE},this.touches={one:ie.TOUCH_ROTATE,two:Fo(this._camera)?ie.TOUCH_DOLLY_TRUCK:Xi(this._camera)?ie.TOUCH_ZOOM_TRUCK:ie.NONE,three:ie.TOUCH_TRUCK};const n=new Ue.Vector2,s=new Ue.Vector2,i=new Ue.Vector2,o=E=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const M=this._domElement.getBoundingClientRect(),k=E.clientX/M.width,R=E.clientY/M.height;if(k<this._interactiveArea.left||k>this._interactiveArea.right||R<this._interactiveArea.top||R>this._interactiveArea.bottom)return}const C=E.pointerType!=="mouse"?null:(E.buttons&Le.LEFT)===Le.LEFT?Le.LEFT:(E.buttons&Le.MIDDLE)===Le.MIDDLE?Le.MIDDLE:(E.buttons&Le.RIGHT)===Le.RIGHT?Le.RIGHT:null;if(C!==null){const M=this._findPointerByMouseButton(C);M&&this._disposePointer(M)}if((E.buttons&Le.LEFT)===Le.LEFT&&this._lockedPointer)return;const A={pointerId:E.pointerId,clientX:E.clientX,clientY:E.clientY,deltaX:0,deltaY:0,mouseButton:C};this._activePointers.push(A),this._domElement.ownerDocument.removeEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",f),this._domElement.ownerDocument.addEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",f),this._isDragging=!0,y(E)},a=E=>{if(!this._enabled||!this._domElement||this._lockedPointer)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const M=this._domElement.getBoundingClientRect(),k=E.clientX/M.width,R=E.clientY/M.height;if(k<this._interactiveArea.left||k>this._interactiveArea.right||R<this._interactiveArea.top||R>this._interactiveArea.bottom)return}const C=(E.buttons&Le.LEFT)===Le.LEFT?Le.LEFT:(E.buttons&Le.MIDDLE)===Le.MIDDLE?Le.MIDDLE:(E.buttons&Le.RIGHT)===Le.RIGHT?Le.RIGHT:null;if(C!==null){const M=this._findPointerByMouseButton(C);M&&this._disposePointer(M)}const A={pointerId:1,clientX:E.clientX,clientY:E.clientY,deltaX:0,deltaY:0,mouseButton:(E.buttons&Le.LEFT)===Le.LEFT?Le.LEFT:(E.buttons&Le.MIDDLE)===Le.LEFT?Le.MIDDLE:(E.buttons&Le.RIGHT)===Le.LEFT?Le.RIGHT:null};this._activePointers.push(A),this._domElement.ownerDocument.removeEventListener("mousemove",h),this._domElement.ownerDocument.removeEventListener("mouseup",d),this._domElement.ownerDocument.addEventListener("mousemove",h),this._domElement.ownerDocument.addEventListener("mouseup",d),this._isDragging=!0,y(E)},c=E=>{E.cancelable&&E.preventDefault();const C=E.pointerId,A=this._lockedPointer||this._findPointerById(C);if(A){if(A.clientX=E.clientX,A.clientY=E.clientY,A.deltaX=E.movementX,A.deltaY=E.movementY,this._state=0,E.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(E.buttons&Le.LEFT)===Le.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(E.buttons&Le.MIDDLE)===Le.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(E.buttons&Le.RIGHT)===Le.RIGHT&&(this._state=this._state|this.mouseButtons.right);x()}},h=E=>{const C=this._lockedPointer||this._findPointerById(1);C&&(C.clientX=E.clientX,C.clientY=E.clientY,C.deltaX=E.movementX,C.deltaY=E.movementY,this._state=0,(this._lockedPointer||(E.buttons&Le.LEFT)===Le.LEFT)&&(this._state=this._state|this.mouseButtons.left),(E.buttons&Le.MIDDLE)===Le.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(E.buttons&Le.RIGHT)===Le.RIGHT&&(this._state=this._state|this.mouseButtons.right),x())},f=E=>{const C=this._findPointerById(E.pointerId);if(!(C&&C===this._lockedPointer)){if(C&&this._disposePointer(C),E.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=ie.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=ie.NONE;w()}},d=()=>{const E=this._findPointerById(1);E&&E===this._lockedPointer||(E&&this._disposePointer(E),this._state=ie.NONE,w())};let p=-1;const g=E=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===ie.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const R=this._domElement.getBoundingClientRect(),F=E.clientX/R.width,U=E.clientY/R.height;if(F<this._interactiveArea.left||F>this._interactiveArea.right||U<this._interactiveArea.top||U>this._interactiveArea.bottom)return}if(E.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===ie.ROTATE||this.mouseButtons.wheel===ie.TRUCK){const R=performance.now();p-R<1e3&&this._getClientRect(this._elementRect),p=R}const C=pE?-1:-3,A=E.deltaMode===1?E.deltaY/C:E.deltaY/(C*10),M=this.dollyToCursor?(E.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,k=this.dollyToCursor?(E.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case ie.ROTATE:{this._rotateInternal(E.deltaX,E.deltaY),this._isUserControllingRotate=!0;break}case ie.TRUCK:{this._truckInternal(E.deltaX,E.deltaY,!1),this._isUserControllingTruck=!0;break}case ie.OFFSET:{this._truckInternal(E.deltaX,E.deltaY,!0),this._isUserControllingOffset=!0;break}case ie.DOLLY:{this._dollyInternal(-A,M,k),this._isUserControllingDolly=!0;break}case ie.ZOOM:{this._zoomInternal(-A,M,k),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},_=E=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===lm.ACTION.NONE){const C=E instanceof PointerEvent?E.pointerId:(E instanceof MouseEvent,0),A=this._findPointerById(C);A&&this._disposePointer(A),this._domElement.ownerDocument.removeEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",f),this._domElement.ownerDocument.removeEventListener("mousemove",h),this._domElement.ownerDocument.removeEventListener("mouseup",d);return}E.preventDefault()}},y=E=>{if(!this._enabled)return;if(Ep(this._activePointers,fr),this._getClientRect(this._elementRect),n.copy(fr),s.copy(fr),this._activePointers.length>=2){const A=fr.x-this._activePointers[1].clientX,M=fr.y-this._activePointers[1].clientY,k=Math.sqrt(A*A+M*M);i.set(0,k);const R=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,F=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;s.set(R,F)}if(this._state=0,!E)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in E&&E.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(E.buttons&Le.LEFT)===Le.LEFT&&(this._state=this._state|this.mouseButtons.left),(E.buttons&Le.MIDDLE)===Le.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(E.buttons&Le.RIGHT)===Le.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&ie.ROTATE)===ie.ROTATE||(this._state&ie.TOUCH_ROTATE)===ie.TOUCH_ROTATE||(this._state&ie.TOUCH_DOLLY_ROTATE)===ie.TOUCH_DOLLY_ROTATE||(this._state&ie.TOUCH_ZOOM_ROTATE)===ie.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&ie.TRUCK)===ie.TRUCK||(this._state&ie.TOUCH_TRUCK)===ie.TOUCH_TRUCK||(this._state&ie.TOUCH_DOLLY_TRUCK)===ie.TOUCH_DOLLY_TRUCK||(this._state&ie.TOUCH_ZOOM_TRUCK)===ie.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&ie.DOLLY)===ie.DOLLY||(this._state&ie.TOUCH_DOLLY)===ie.TOUCH_DOLLY||(this._state&ie.TOUCH_DOLLY_TRUCK)===ie.TOUCH_DOLLY_TRUCK||(this._state&ie.TOUCH_DOLLY_OFFSET)===ie.TOUCH_DOLLY_OFFSET||(this._state&ie.TOUCH_DOLLY_ROTATE)===ie.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&ie.ZOOM)===ie.ZOOM||(this._state&ie.TOUCH_ZOOM)===ie.TOUCH_ZOOM||(this._state&ie.TOUCH_ZOOM_TRUCK)===ie.TOUCH_ZOOM_TRUCK||(this._state&ie.TOUCH_ZOOM_OFFSET)===ie.TOUCH_ZOOM_OFFSET||(this._state&ie.TOUCH_ZOOM_ROTATE)===ie.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&ie.OFFSET)===ie.OFFSET||(this._state&ie.TOUCH_OFFSET)===ie.TOUCH_OFFSET||(this._state&ie.TOUCH_DOLLY_OFFSET)===ie.TOUCH_DOLLY_OFFSET||(this._state&ie.TOUCH_ZOOM_OFFSET)===ie.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},x=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,Ep(this._activePointers,fr);const C=this._domElement&&document.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,A=C?-C.deltaX:s.x-fr.x,M=C?-C.deltaY:s.y-fr.y;if(s.copy(fr),((this._state&ie.ROTATE)===ie.ROTATE||(this._state&ie.TOUCH_ROTATE)===ie.TOUCH_ROTATE||(this._state&ie.TOUCH_DOLLY_ROTATE)===ie.TOUCH_DOLLY_ROTATE||(this._state&ie.TOUCH_ZOOM_ROTATE)===ie.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(A,M),this._isUserControllingRotate=!0),(this._state&ie.DOLLY)===ie.DOLLY||(this._state&ie.ZOOM)===ie.ZOOM){const k=this.dollyToCursor?(n.x-this._elementRect.x)/this._elementRect.width*2-1:0,R=this.dollyToCursor?(n.y-this._elementRect.y)/this._elementRect.height*-2+1:0,F=this.dollyDragInverted?-1:1;(this._state&ie.DOLLY)===ie.DOLLY?(this._dollyInternal(F*M*zh,k,R),this._isUserControllingDolly=!0):(this._zoomInternal(F*M*zh,k,R),this._isUserControllingZoom=!0)}if((this._state&ie.TOUCH_DOLLY)===ie.TOUCH_DOLLY||(this._state&ie.TOUCH_ZOOM)===ie.TOUCH_ZOOM||(this._state&ie.TOUCH_DOLLY_TRUCK)===ie.TOUCH_DOLLY_TRUCK||(this._state&ie.TOUCH_ZOOM_TRUCK)===ie.TOUCH_ZOOM_TRUCK||(this._state&ie.TOUCH_DOLLY_OFFSET)===ie.TOUCH_DOLLY_OFFSET||(this._state&ie.TOUCH_ZOOM_OFFSET)===ie.TOUCH_ZOOM_OFFSET||(this._state&ie.TOUCH_DOLLY_ROTATE)===ie.TOUCH_DOLLY_ROTATE||(this._state&ie.TOUCH_ZOOM_ROTATE)===ie.TOUCH_ZOOM_ROTATE){const k=fr.x-this._activePointers[1].clientX,R=fr.y-this._activePointers[1].clientY,F=Math.sqrt(k*k+R*R),U=i.y-F;i.set(0,F);const I=this.dollyToCursor?(s.x-this._elementRect.x)/this._elementRect.width*2-1:0,z=this.dollyToCursor?(s.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&ie.TOUCH_DOLLY)===ie.TOUCH_DOLLY||(this._state&ie.TOUCH_DOLLY_ROTATE)===ie.TOUCH_DOLLY_ROTATE||(this._state&ie.TOUCH_DOLLY_TRUCK)===ie.TOUCH_DOLLY_TRUCK||(this._state&ie.TOUCH_DOLLY_OFFSET)===ie.TOUCH_DOLLY_OFFSET?(this._dollyInternal(U*zh,I,z),this._isUserControllingDolly=!0):(this._zoomInternal(U*zh,I,z),this._isUserControllingZoom=!0)}((this._state&ie.TRUCK)===ie.TRUCK||(this._state&ie.TOUCH_TRUCK)===ie.TOUCH_TRUCK||(this._state&ie.TOUCH_DOLLY_TRUCK)===ie.TOUCH_DOLLY_TRUCK||(this._state&ie.TOUCH_ZOOM_TRUCK)===ie.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(A,M,!1),this._isUserControllingTruck=!0),((this._state&ie.OFFSET)===ie.OFFSET||(this._state&ie.TOUCH_OFFSET)===ie.TOUCH_OFFSET||(this._state&ie.TOUCH_DOLLY_OFFSET)===ie.TOUCH_DOLLY_OFFSET||(this._state&ie.TOUCH_ZOOM_OFFSET)===ie.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(A,M,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},w=()=>{Ep(this._activePointers,fr),s.copy(fr),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",h),this._domElement.ownerDocument.removeEventListener("pointerup",f),this._domElement.ownerDocument.removeEventListener("mouseup",d),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",f),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",T),this._domElement.ownerDocument.addEventListener("pointerlockerror",b),this._domElement.ownerDocument.addEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",f),y())},this.unlockPointer=()=>{this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),document.exitPointerLock(),this.cancel(),this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointerlockchange",T),this._domElement.ownerDocument.removeEventListener("pointerlockerror",b))};const T=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},b=()=>{this.unlockPointer()};this._addAllEventListeners=E=>{this._domElement=E,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",o),mE&&this._domElement.addEventListener("mousedown",a),this._domElement.addEventListener("pointercancel",f),this._domElement.addEventListener("wheel",g,{passive:!1}),this._domElement.addEventListener("contextmenu",_)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",o),this._domElement.removeEventListener("mousedown",a),this._domElement.removeEventListener("pointercancel",f),this._domElement.removeEventListener("wheel",g,{passive:!1}),this._domElement.removeEventListener("contextmenu",_),this._domElement.ownerDocument.removeEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",h),this._domElement.ownerDocument.removeEventListener("pointerup",f),this._domElement.ownerDocument.removeEventListener("mouseup",d),this._domElement.ownerDocument.removeEventListener("pointerlockchange",T),this._domElement.ownerDocument.removeEventListener("pointerlockerror",b))},this.cancel=()=>{this._state!==ie.NONE&&(this._state=ie.NONE,this._activePointers.length=0,w())},t&&this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=vs(e.width,0,1),this._interactiveArea.height=vs(e.height,0,1),this._interactiveArea.x=vs(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=vs(e.y,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,n=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,n)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,n=!1){this._isUserControllingRotate=!1;const s=vs(e,this.minAzimuthAngle,this.maxAzimuthAngle),i=vs(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=s,this._sphericalEnd.phi=i,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,n||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const o=!n||ft(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&ft(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(o)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=Ba.NONE,this._changedDolly=0,this._dollyToNoClamp(vs(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){const n=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const o=this._collisionTest(),a=ft(o,this._spherical.radius);if(!(n>e)&&a)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,o)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const i=!t||ft(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(i)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(Cc).multiplyScalar(e)),t||this._target.copy(this._targetEnd);const n=!t||ft(this._target.x,this._targetEnd.x,this.restThreshold)&&ft(this._target.y,this._targetEnd.y,this.restThreshold)&&ft(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(n)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=vs(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const n=!t||ft(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(n)}pan(e,t,n=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,n)}truck(e,t,n=!1){this._camera.updateMatrix(),Gs.setFromMatrixColumn(this._camera.matrix,0),Hs.setFromMatrixColumn(this._camera.matrix,1),Gs.multiplyScalar(e),Hs.multiplyScalar(-t);const s=qe.copy(Gs).add(Hs),i=ot.copy(this._targetEnd).add(s);return this.moveTo(i.x,i.y,i.z,n)}forward(e,t=!1){qe.setFromMatrixColumn(this._camera.matrix,0),qe.crossVectors(this._camera.up,qe),qe.multiplyScalar(e);const n=ot.copy(this._targetEnd).add(qe);return this.moveTo(n.x,n.y,n.z,t)}elevate(e,t=!1){return qe.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+qe.x,this._targetEnd.y+qe.y,this._targetEnd.z+qe.z,t)}moveTo(e,t,n,s=!1){this._isUserControllingTruck=!1;const i=qe.set(e,t,n).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,i,this.boundaryFriction),this._needsUpdate=!0,s||this._target.copy(this._targetEnd);const o=!s||ft(this._target.x,this._targetEnd.x,this.restThreshold)&&ft(this._target.y,this._targetEnd.y,this.restThreshold)&&ft(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}lookInDirectionOf(e,t,n,s=!1){const a=qe.set(e,t,n).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius);return this.setPosition(a.x,a.y,a.z,s)}fitToBox(e,t,{cover:n=!1,paddingLeft:s=0,paddingRight:i=0,paddingBottom:o=0,paddingTop:a=0}={}){const c=[],h=e.isBox3?Ga.copy(e):Ga.setFromObject(e);h.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const f=mv(this._sphericalEnd.theta,pv),d=mv(this._sphericalEnd.phi,pv);c.push(this.rotateTo(f,d,t));const p=qe.setFromSpherical(this._sphericalEnd).normalize(),g=wv.setFromUnitVectors(p,Mp),_=ft(Math.abs(p.y),1);_&&g.multiply(Ap.setFromAxisAngle(Bh,f)),g.multiply(this._yAxisUpSpaceInverse);const y=xv.makeEmpty();ot.copy(h.min).applyQuaternion(g),y.expandByPoint(ot),ot.copy(h.min).setX(h.max.x).applyQuaternion(g),y.expandByPoint(ot),ot.copy(h.min).setY(h.max.y).applyQuaternion(g),y.expandByPoint(ot),ot.copy(h.max).setZ(h.min.z).applyQuaternion(g),y.expandByPoint(ot),ot.copy(h.min).setZ(h.max.z).applyQuaternion(g),y.expandByPoint(ot),ot.copy(h.max).setY(h.min.y).applyQuaternion(g),y.expandByPoint(ot),ot.copy(h.max).setX(h.min.x).applyQuaternion(g),y.expandByPoint(ot),ot.copy(h.max).applyQuaternion(g),y.expandByPoint(ot),y.min.x-=s,y.min.y-=o,y.max.x+=i,y.max.y+=a,g.setFromUnitVectors(Mp,p),_&&g.premultiply(Ap.invert()),g.premultiply(this._yAxisUpSpace);const x=y.getSize(qe),w=y.getCenter(ot).applyQuaternion(g);if(Fo(this._camera)){const T=this.getDistanceToFitBox(x.x,x.y,x.z,n);c.push(this.moveTo(w.x,w.y,w.z,t)),c.push(this.dollyTo(T,t)),c.push(this.setFocalOffset(0,0,0,t))}else if(Xi(this._camera)){const T=this._camera,b=T.right-T.left,E=T.top-T.bottom,C=n?Math.max(b/x.x,E/x.y):Math.min(b/x.x,E/x.y);c.push(this.moveTo(w.x,w.y,w.z,t)),c.push(this.zoomTo(C,t)),c.push(this.setFocalOffset(0,0,0,t))}return Promise.all(c)}fitToSphere(e,t){const n=[],i=e instanceof Ue.Sphere?Op.copy(e):lm.createBoundingSphere(e,Op);if(n.push(this.moveTo(i.center.x,i.center.y,i.center.z,t)),Fo(this._camera)){const o=this.getDistanceToFitSphere(i.radius);n.push(this.dollyTo(o,t))}else if(Xi(this._camera)){const o=this._camera.right-this._camera.left,a=this._camera.top-this._camera.bottom,c=2*i.radius,h=Math.min(o/c,a/c);n.push(this.zoomTo(h,t))}return n.push(this.setFocalOffset(0,0,0,t)),Promise.all(n)}setLookAt(e,t,n,s,i,o,a=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Ba.NONE,this._changedDolly=0;const c=ot.set(s,i,o),h=qe.set(e,t,n);this._targetEnd.copy(c),this._sphericalEnd.setFromVector3(h.sub(c).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,a||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const f=!a||ft(this._target.x,this._targetEnd.x,this.restThreshold)&&ft(this._target.y,this._targetEnd.y,this.restThreshold)&&ft(this._target.z,this._targetEnd.z,this.restThreshold)&&ft(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&ft(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&ft(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(f)}lerpLookAt(e,t,n,s,i,o,a,c,h,f,d,p,g,_=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Ba.NONE,this._changedDolly=0;const y=qe.set(s,i,o),x=ot.set(e,t,n);Kr.setFromVector3(x.sub(y).applyQuaternion(this._yAxisUpSpace));const w=Va.set(f,d,p),T=ot.set(a,c,h);Ec.setFromVector3(T.sub(w).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(y.lerp(w,g));const b=Ec.theta-Kr.theta,E=Ec.phi-Kr.phi,C=Ec.radius-Kr.radius;this._sphericalEnd.set(Kr.radius+C*g,Kr.phi+E*g,Kr.theta+b*g),this.normalizeRotations(),this._needsUpdate=!0,_||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const A=!_||ft(this._target.x,this._targetEnd.x,this.restThreshold)&&ft(this._target.y,this._targetEnd.y,this.restThreshold)&&ft(this._target.z,this._targetEnd.z,this.restThreshold)&&ft(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&ft(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&ft(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(A)}setPosition(e,t,n,s=!1){return this.setLookAt(e,t,n,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,s)}setTarget(e,t,n,s=!1){const i=this.getPosition(qe),o=this.setLookAt(i.x,i.y,i.z,e,t,n,s);return this._sphericalEnd.phi=vs(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),o}setFocalOffset(e,t,n,s=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,n),this._needsUpdate=!0,s||this._focalOffset.copy(this._focalOffsetEnd);const i=!s||ft(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&ft(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&ft(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}setOrbitPoint(e,t,n){this._camera.updateMatrixWorld(),Gs.setFromMatrixColumn(this._camera.matrixWorldInverse,0),Hs.setFromMatrixColumn(this._camera.matrixWorldInverse,1),No.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const s=qe.set(e,t,n),i=s.distanceTo(this._camera.position),o=s.sub(this._camera.position);Gs.multiplyScalar(o.x),Hs.multiplyScalar(o.y),No.multiplyScalar(o.z),qe.copy(Gs).add(Hs).add(No),qe.z=qe.z+i,this.dollyTo(i,!1),this.setFocalOffset(-qe.x,qe.y,-qe.z,!1),this.moveTo(e,t,n,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,n,s){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new Ue.Vector4,typeof e=="number"?this._viewport.set(e,t,n,s):this._viewport.copy(e)}getDistanceToFitBox(e,t,n,s=!1){if(bp(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const i=e/t,o=this._camera.getEffectiveFOV()*wc,a=this._camera.aspect;return((s?i>a:i<a)?t:e/a)*.5/Math.tan(o*.5)+n*.5}getDistanceToFitSphere(e){if(bp(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*wc,n=Math.atan(Math.tan(t*.5)*this._camera.aspect)*2,s=1<this._camera.aspect?t:n;return e/Math.sin(s*.5)}getTarget(e,t=!0){return(e&&e.isVector3?e:new Ue.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&&e.isVector3?e:new Ue.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e&&e instanceof Ue.Spherical?e:new Ue.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&&e.isVector3?e:new Ue.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%ja,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=ja),this._spherical.theta+=ja*Math.round((this._sphericalEnd.theta-this._spherical.theta)/ja)}reset(e=!1){if(!ft(this._camera.up.x,this._cameraUp0.x)||!ft(this._camera.up.y,this._cameraUp0.y)||!ft(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const n=this.getPosition(qe);this.updateCameraUp(),this.setPosition(n.x,n.y,n.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,Bh),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=qe.subVectors(this._target,this._camera.position).normalize(),t=ot.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e).normalize(),this._camera.updateMatrixWorld();const n=this.getPosition(qe);this.updateCameraUp(),this.setPosition(n.x,n.y,n.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,n=this._sphericalEnd.phi-this._spherical.phi,s=this._sphericalEnd.radius-this._spherical.radius,i=_v.subVectors(this._targetEnd,this._target),o=yv.subVectors(this._focalOffsetEnd,this._focalOffset),a=this._zoomEnd-this._zoom;if(Et(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const d=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=Lh(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,d,1/0,e),this._needsUpdate=!0}if(Et(n))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const d=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=Lh(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,d,1/0,e),this._needsUpdate=!0}if(Et(s))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const d=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=Lh(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,d,this.maxSpeed,e),this._needsUpdate=!0}if(Et(i.x)&&Et(i.y)&&Et(i.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const d=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;gv(this._target,this._targetEnd,this._targetVelocity,d,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(Et(o.x)&&Et(o.y)&&Et(o.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const d=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;gv(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,d,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(Et(a))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const d=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=Lh(this._zoom,this._zoomEnd,this._zoomVelocity,d,1/0,e)}if(this.dollyToCursor){if(Fo(this._camera)&&this._changedDolly!==0){const d=this._spherical.radius-this._lastDistance,p=this._camera,g=this._getCameraDirection(Cc),_=qe.copy(g).cross(p.up).normalize();_.lengthSq()===0&&(_.x=1);const y=ot.crossVectors(_,g),x=this._sphericalEnd.radius*Math.tan(p.getEffectiveFOV()*wc*.5),T=(this._sphericalEnd.radius-d-this._sphericalEnd.radius)/this._sphericalEnd.radius,b=Va.copy(this._targetEnd).add(_.multiplyScalar(this._dollyControlCoord.x*x*p.aspect)).add(y.multiplyScalar(this._dollyControlCoord.y*x)),E=qe.copy(this._targetEnd).lerp(b,T),C=this._lastDollyDirection===Ba.IN&&this._spherical.radius<=this.minDistance,A=this._lastDollyDirection===Ba.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(C||A)){this._sphericalEnd.radius-=d,this._spherical.radius-=d;const k=ot.copy(g).multiplyScalar(-d);E.add(k)}this._boundary.clampPoint(E,E);const M=ot.subVectors(E,this._targetEnd);this._targetEnd.copy(E),this._target.add(M),this._changedDolly-=d,Et(this._changedDolly)&&(this._changedDolly=0)}else if(Xi(this._camera)&&this._changedZoom!==0){const d=this._zoom-this._lastZoom,p=this._camera,g=qe.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(p.near+p.far)/(p.near-p.far)).unproject(p),_=ot.set(0,0,-1).applyQuaternion(p.quaternion),y=Va.copy(g).add(_.multiplyScalar(-g.dot(p.up))),w=-(this._zoom-d-this._zoom)/this._zoom,T=this._getCameraDirection(Cc),b=this._targetEnd.dot(T),E=qe.copy(this._targetEnd).lerp(y,w),C=E.dot(T),A=T.multiplyScalar(C-b);E.sub(A),this._boundary.clampPoint(E,E);const M=ot.subVectors(E,this._targetEnd);this._targetEnd.copy(E),this._target.add(M),this._changedZoom-=d,Et(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const c=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,c),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!Et(this._focalOffset.x)||!Et(this._focalOffset.y)||!Et(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),Gs.setFromMatrixColumn(this._camera.matrix,0),Hs.setFromMatrixColumn(this._camera.matrix,1),No.setFromMatrixColumn(this._camera.matrix,2),Gs.multiplyScalar(this._focalOffset.x),Hs.multiplyScalar(-this._focalOffset.y),No.multiplyScalar(this._focalOffset.z),qe.copy(Gs).add(Hs).add(No),this._camera.position.add(qe)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),qe.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const f=this._needsUpdate;return f&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):f?(this.dispatchEvent({type:"update"}),Et(t,this.restThreshold)&&Et(n,this.restThreshold)&&Et(s,this.restThreshold)&&Et(i.x,this.restThreshold)&&Et(i.y,this.restThreshold)&&Et(i.z,this.restThreshold)&&Et(o.x,this.restThreshold)&&Et(o.y,this.restThreshold)&&Et(o.z,this.restThreshold)&&Et(a,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!f&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=f,this._needsUpdate=!1,f}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:Sc(this.maxDistance),minZoom:this.minZoom,maxZoom:Sc(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:Sc(this.maxPolarAngle),minAzimuthAngle:Sc(this.minAzimuthAngle),maxAzimuthAngle:Sc(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:qe.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const n=JSON.parse(e);this.enabled=n.enabled,this.minDistance=n.minDistance,this.maxDistance=Tc(n.maxDistance),this.minZoom=n.minZoom,this.maxZoom=Tc(n.maxZoom),this.minPolarAngle=n.minPolarAngle,this.maxPolarAngle=Tc(n.maxPolarAngle),this.minAzimuthAngle=Tc(n.minAzimuthAngle),this.maxAzimuthAngle=Tc(n.maxAzimuthAngle),this.smoothTime=n.smoothTime,this.draggingSmoothTime=n.draggingSmoothTime,this.dollySpeed=n.dollySpeed,this.truckSpeed=n.truckSpeed,this.dollyToCursor=n.dollyToCursor,this.verticalDragToForward=n.verticalDragToForward,this._target0.fromArray(n.target0),this._position0.fromArray(n.position0),this._zoom0=n.zoom0,this._focalOffset0.fromArray(n.focalOffset0),this.moveTo(n.target[0],n.target[1],n.target[2],t),Kr.setFromVector3(qe.fromArray(n.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(Kr.theta,Kr.phi,t),this.dollyTo(Kr.radius,t),this.zoomTo(n.zoom,t),this.setFocalOffset(n.focalOffset[0],n.focalOffset[1],n.focalOffset[2],t),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version",dE),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(t=>t.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(t=>t.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,n){const s=t.lengthSq();if(s===0)return e;const i=ot.copy(t).add(e),a=this._boundary.clampPoint(i,Va).sub(i),c=a.lengthSq();if(c===0)return e.add(t);if(c===s)return e;if(n===0)return e.add(t).add(a);{const h=1+n*c/t.dot(a);return e.add(ot.copy(t).multiplyScalar(h)).add(a.multiplyScalar(1-n))}}_updateNearPlaneCorners(){if(Fo(this._camera)){const e=this._camera,t=e.near,n=e.getEffectiveFOV()*wc,s=Math.tan(n*.5)*t,i=s*e.aspect;this._nearPlaneCorners[0].set(-i,-s,0),this._nearPlaneCorners[1].set(i,-s,0),this._nearPlaneCorners[2].set(i,s,0),this._nearPlaneCorners[3].set(-i,s,0)}else if(Xi(this._camera)){const e=this._camera,t=1/e.zoom,n=e.left*t,s=e.right*t,i=e.top*t,o=e.bottom*t;this._nearPlaneCorners[0].set(n,i,0),this._nearPlaneCorners[1].set(s,i,0),this._nearPlaneCorners[2].set(s,o,0),this._nearPlaneCorners[3].set(n,o,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||bp(this._camera,"_collisionTest"))return e;const n=this._getTargetDirection(Cc);kp.lookAt(vv,n,this._camera.up);for(let s=0;s<4;s++){const i=ot.copy(this._nearPlaneCorners[s]);i.applyMatrix4(kp);const o=Va.addVectors(this._target,i);jh.set(o,n),jh.far=this._spherical.radius+1;const a=jh.intersectObjects(this.colliderMeshes);a.length!==0&&a[0].distance<e&&(e=a[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(t=>{const n=()=>{this.removeEventListener("rest",n),t()};this.addEventListener("rest",n)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,t=new Ue.Sphere){const n=t,s=n.center;Ga.makeEmpty(),e.traverseVisible(o=>{o.isMesh&&Ga.expandByObject(o)}),Ga.getCenter(s);let i=0;return e.traverseVisible(o=>{if(!o.isMesh)return;const a=o,c=a.geometry.clone();c.applyMatrix4(a.matrixWorld);const f=c.attributes.position;for(let d=0,p=f.count;d<p;d++)qe.fromBufferAttribute(f,d),i=Math.max(i,s.distanceToSquared(qe))}),n.radius=Math.sqrt(i),n}};const gE=P.forwardRef((r,e)=>{P.useMemo(()=>{Pp.install({THREE:z_}),yu({CameraControlsImpl:Pp})},[]);const{camera:t,domElement:n,makeDefault:s,onStart:i,onEnd:o,onChange:a,regress:c,...h}=r,f=lt(C=>C.camera),d=lt(C=>C.gl),p=lt(C=>C.invalidate),g=lt(C=>C.events),_=lt(C=>C.setEvents),y=lt(C=>C.set),x=lt(C=>C.get),w=lt(C=>C.performance),T=t||f,b=n||g.connected||d.domElement,E=P.useMemo(()=>new Pp(T),[T]);return mn((C,A)=>{E.enabled&&E.update(A)},-1),P.useEffect(()=>(E.connect(b),()=>void E.disconnect()),[b,E]),P.useEffect(()=>{const C=k=>{p(),c&&w.regress(),a&&a(k)},A=k=>{i&&i(k)},M=k=>{o&&o(k)};return E.addEventListener("update",C),E.addEventListener("controlstart",A),E.addEventListener("controlend",M),()=>{E.removeEventListener("update",C),E.removeEventListener("controlstart",A),E.removeEventListener("controlend",M)}},[E,i,o,p,_,c,a]),P.useEffect(()=>{if(s){const C=x().controls;return y({controls:E}),()=>y({controls:C})}},[s,E]),P.createElement("primitive",as({ref:e,object:E},h))});cc.func.isRequired,cc.arrayOf(cc.oneOfType([cc.element,cc.func])).isRequired;const Sv=new ca,Tv=new ca,Vh=[],bc=new ua;class vE extends ES{constructor(){super(),this.color=new rr("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var e;return(e=this.instance.current)==null?void 0:e.geometry}raycast(e,t){const n=this.instance.current;if(!n||!n.geometry||!n.material)return;bc.geometry=n.geometry;const s=n.matrixWorld,i=n.userData.instances.indexOf(this.instanceKey);if(!(i===-1||i>n.count)){n.getMatrixAt(i,Sv),Tv.multiplyMatrices(s,Sv),bc.matrixWorld=Tv,n.material instanceof zf?bc.material.side=n.material.side:bc.material.side=n.material[0].side,bc.raycast(e,Vh);for(let o=0,a=Vh.length;o<a;o++){const c=Vh[o];c.instanceId=i,c.object=this,t.push(c)}Vh.length=0}}}const jy=P.createContext(null),Cv=new ca,Ev=new ca,_E=new ca,bv=new ye,Mv=new Kh,Ov=new ye,Vy=P.forwardRef(({context:r,children:e,...t},n)=>{P.useMemo(()=>yu({PositionMesh:vE}),[]);const s=P.useRef(),{subscribe:i,getParent:o}=P.useContext(r||jy);return P.useLayoutEffect(()=>i(s),[]),P.createElement("positionMesh",as({instance:o(),instanceKey:s,ref:eg([n,s])},t),e)}),yE=P.forwardRef(({children:r,range:e,limit:t=1e3,frames:n=1/0,...s},i)=>{const[{context:o,instance:a}]=P.useState(()=>{const x=P.createContext(null);return{context:x,instance:P.forwardRef((w,T)=>P.createElement(Vy,as({context:x},w,{ref:T})))}}),c=P.useRef(null),[h,f]=P.useState([]),[[d,p]]=P.useState(()=>{const x=new Float32Array(t*16);for(let w=0;w<t;w++)_E.identity().toArray(x,w*16);return[x,new Float32Array([...new Array(t*3)].map(()=>1))]});P.useEffect(()=>{c.current.instanceMatrix.needsUpdate=!0});let g=0,_=0;mn(()=>{if(n===1/0||g<n){c.current.updateMatrix(),c.current.updateMatrixWorld(),Cv.copy(c.current.matrixWorld).invert(),_=Math.min(t,e!==void 0?e:t,h.length),c.current.count=_,c.current.instanceMatrix.updateRange.count=_*16,c.current.instanceColor.updateRange.count=_*3;for(let x=0;x<h.length;x++){const w=h[x].current;w.matrixWorld.decompose(bv,Mv,Ov),Ev.compose(bv,Mv,Ov).premultiply(Cv),Ev.toArray(d,x*16),c.current.instanceMatrix.needsUpdate=!0,w.color.toArray(p,x*3),c.current.instanceColor.needsUpdate=!0}g++}});const y=P.useMemo(()=>({getParent:()=>c,subscribe:x=>(f(w=>[...w,x]),()=>f(w=>w.filter(T=>T.current!==x.current)))}),[]);return P.createElement("instancedMesh",as({userData:{instances:h},matrixAutoUpdate:!1,ref:eg([i,c]),args:[null,null,0],raycast:()=>null},s),P.createElement("instancedBufferAttribute",{attach:"instanceMatrix",count:d.length/16,array:d,itemSize:16,usage:Uc}),P.createElement("instancedBufferAttribute",{attach:"instanceColor",count:p.length/3,array:p,itemSize:3,usage:Uc}),typeof r=="function"?P.createElement(o.Provider,{value:y},r(a)):P.createElement(jy.Provider,{value:y},r))}),Gy=P.createContext(null),Hy=P.forwardRef((r,e)=>{P.useMemo(()=>yu({SegmentObject:xE}),[]);const{limit:t=1e3,lineWidth:n=1,children:s,...i}=r,[o,a]=P.useState([]),[c]=P.useState(()=>new My),[h]=P.useState(()=>new Hf),[f]=P.useState(()=>new Gf),[d]=P.useState(()=>new _t(512,512)),[p]=P.useState(()=>Array(t*6).fill(0)),[g]=P.useState(()=>Array(t*6).fill(0)),_=P.useMemo(()=>({subscribe:y=>(a(x=>[...x,y]),()=>a(x=>x.filter(w=>w.current!==y.current)))}),[]);return mn(()=>{for(let x=0;x<t;x++){var y;const w=(y=o[x])==null?void 0:y.current;w&&(p[x*6+0]=w.start.x,p[x*6+1]=w.start.y,p[x*6+2]=w.start.z,p[x*6+3]=w.end.x,p[x*6+4]=w.end.y,p[x*6+5]=w.end.z,g[x*6+0]=w.color.r,g[x*6+1]=w.color.g,g[x*6+2]=w.color.b,g[x*6+3]=w.color.r,g[x*6+4]=w.color.g,g[x*6+5]=w.color.b)}f.setColors(g),f.setPositions(p),c.computeLineDistances()}),P.createElement("primitive",{object:c,ref:e},P.createElement("primitive",{object:f,attach:"geometry"}),P.createElement("primitive",as({object:h,attach:"material",vertexColors:!0,resolution:d,linewidth:n},i)),P.createElement(Gy.Provider,{value:_},s))});class xE{constructor(){this.color=new rr("white"),this.start=new ye(0,0,0),this.end=new ye(0,0,0)}}const Av=r=>r instanceof ye?r:new ye(...typeof r=="number"?[r,r,r]:r),wE=P.forwardRef(({color:r,start:e,end:t},n)=>{const s=P.useContext(Gy);if(!s)throw"Segment must used inside Segments component.";const i=P.useRef(null);return P.useLayoutEffect(()=>s.subscribe(i),[]),P.createElement("segmentObject",{ref:eg([i,n]),color:r,start:Av(e),end:Av(t)})});function SE({all:r,scene:e,camera:t}){const n=lt(({gl:o})=>o),s=lt(({camera:o})=>o),i=lt(({scene:o})=>o);return P.useLayoutEffect(()=>{const o=[];r&&(e||i).traverse(h=>{h.visible===!1&&(o.push(h),h.visible=!0)}),n.compile(e||i,t||s);const a=new bS(128);new MS(.01,1e5,a).update(n,e||i),a.dispose(),o.forEach(h=>h.visible=!1)},[]),null}function TE({pixelated:r}){const e=lt(o=>o.gl),t=lt(o=>o.internal.active),n=lt(o=>o.performance.current),s=lt(o=>o.viewport.initialDpr),i=lt(o=>o.setDpr);return P.useEffect(()=>{const o=e.domElement;return()=>{t&&i(s),r&&o&&(o.style.imageRendering="auto")}},[]),P.useEffect(()=>{i(n*s),r&&e.domElement&&(e.domElement.style.imageRendering=n===1?"auto":"pixelated")},[n]),null}function CE(){const r=lt(n=>n.get),e=lt(n=>n.setEvents),t=lt(n=>n.performance.current);return P.useEffect(()=>{const n=r().events.enabled;return()=>e({enabled:n})},[]),P.useEffect(()=>e({enabled:t===1}),[t]),null}const ng=P.createContext(null);function EE({children:r,enabled:e=!0}){const[t,n]=P.useState([]),s=P.useMemo(()=>({selected:t,select:n,enabled:e}),[t,n,e]);return D.jsx(ng.Provider,{value:s,children:r})}function bE({enabled:r=!1,children:e,...t}){const n=P.useRef(null),s=P.useContext(ng);return P.useEffect(()=>{if(s&&r){let i=!1;const o=[];if(n.current.traverse(a=>{a.type==="Mesh"&&o.push(a),s.selected.indexOf(a)===-1&&(i=!0)}),i)return s.select(a=>[...a,...o]),()=>{s.select(a=>a.filter(c=>!o.includes(c)))}}},[r,e,s]),D.jsx("group",{ref:n,...t,children:e})}/**
 * postprocessing v6.33.4 build Sat Dec 02 2023
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2023 Raoul van Rüschen
 * @license Zlib
 */var Wy="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",Xe={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},qy="",Tn="srgb",qf="srgb-linear",Si={NONE:0,DEPTH:1,CONVOLUTION:2},at={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},Zf={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},Gh={DEFAULT:0,ESKIL:1},Zy=Number(jf.replace(/\D+/g,"")),Yy=Zy>=152,ME=new Map([[G_,qf],[H_,Tn]]),OE=new Map([[qf,G_],[Tn,H_]]);function ml(r){return r===null?null:Yy?r.outputColorSpace:ME.get(r.outputEncoding)}function to(r,e){r!==null&&(Yy?r.colorSpace=e:r.encoding=OE.get(e))}function Tu(r){return Zy<154?r.replace("colorspace_fragment","encodings_fragment"):r}var AE=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,kE="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",PE=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],RE=class extends Es{constructor(r=new oo){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new ze(null),texelSize:new ze(new oo),scale:new ze(1),kernel:new ze(0)},blending:ki,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:AE,vertexShader:kE}),this.fragmentShader=Tu(this.fragmentShader),this.setTexelSize(r.x,r.y),this.kernelSize=Zf.MEDIUM}set inputBuffer(r){this.uniforms.inputBuffer.value=r}setInputBuffer(r){this.inputBuffer=r}get kernelSequence(){return PE[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(r){this.uniforms.scale.value=r}getScale(){return this.uniforms.scale.value}setScale(r){this.uniforms.scale.value=r}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(r){this.uniforms.kernel.value=r}setKernel(r){this.kernel=r}setTexelSize(r,e){this.uniforms.texelSize.value.set(r,e,r*.5,e*.5)}setSize(r,e){const t=1/r,n=1/e;this.uniforms.texelSize.value.set(t,n,t*.5,n*.5)}},DE=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,Xy=class extends Es{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new ze(null),opacity:new ze(1)},blending:ki,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:DE,vertexShader:Wy}),this.fragmentShader=Tu(this.fragmentShader)}set inputBuffer(r){this.uniforms.inputBuffer.value=r}setInputBuffer(r){this.uniforms.inputBuffer.value=r}getOpacity(r){return this.uniforms.opacity.value}setOpacity(r){this.uniforms.opacity.value=r}},IE=`#include <packing>
#include <clipping_planes_pars_fragment>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float cameraNear;uniform float cameraFar;centroid varying float vViewZ;centroid varying vec4 vProjTexCoord;void main(){
#include <clipping_planes_fragment>
vec2 projTexCoord=(vProjTexCoord.xy/vProjTexCoord.w)*0.5+0.5;projTexCoord=clamp(projTexCoord,0.002,0.998);
#if DEPTH_PACKING == 3201
float fragCoordZ=unpackRGBAToDepth(texture2D(depthBuffer,projTexCoord));
#else
float fragCoordZ=texture2D(depthBuffer,projTexCoord).r;
#endif
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#else
float viewZ=orthographicDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#endif
float depthTest=(-vViewZ>-viewZ)?1.0:0.0;gl_FragColor.rg=vec2(0.0,depthTest);}`,UE=`#include <common>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
varying float vViewZ;varying vec4 vProjTexCoord;void main(){
#include <skinbase_vertex>
#include <begin_vertex>
#include <morphtarget_vertex>
#include <skinning_vertex>
#include <project_vertex>
vViewZ=mvPosition.z;vProjTexCoord=gl_Position;
#include <clipping_planes_vertex>
}`,FE=class extends Es{constructor(r=null,e){super({name:"DepthComparisonMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new ze(null),cameraNear:new ze(.3),cameraFar:new ze(1e3)},blending:ki,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:IE,vertexShader:UE}),this.depthBuffer=r,this.depthPacking=lf,this.copyCameraSettings(e)}set depthBuffer(r){this.uniforms.depthBuffer.value=r}set depthPacking(r){this.defines.DEPTH_PACKING=r.toFixed(0),this.needsUpdate=!0}setDepthBuffer(r,e=lf){this.depthBuffer=r,this.depthPacking=e}adoptCameraSettings(r){this.copyCameraSettings(r)}copyCameraSettings(r){r&&(this.uniforms.cameraNear.value=r.near,this.uniforms.cameraFar.value=r.far,r instanceof vu?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},NE=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,LE="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",zE=class extends Es{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new ze(null),normalBuffer:new ze(null),texelSize:new ze(new _t)},blending:ki,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:NE,vertexShader:LE})}set depthBuffer(r){this.uniforms.depthBuffer.value=r}set depthPacking(r){this.defines.DEPTH_PACKING=r.toFixed(0),this.needsUpdate=!0}setDepthBuffer(r,e=Ol){this.depthBuffer=r,this.depthPacking=e}set normalBuffer(r){this.uniforms.normalBuffer.value=r,r!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(r){this.normalBuffer=r}setTexelSize(r,e){this.uniforms.texelSize.value.set(r,e)}setSize(r,e){this.uniforms.texelSize.value.set(1/r,1/e)}},BE=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,jE="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",VE=class extends Es{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new ze(null),texelSize:new ze(new _t)},blending:ki,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:BE,vertexShader:jE}),this.fragmentShader=Tu(this.fragmentShader)}set inputBuffer(r){this.uniforms.inputBuffer.value=r}setSize(r,e){this.uniforms.texelSize.value.set(1/r,1/e)}},GE=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,HE="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",WE=class extends Es{constructor(r,e,t,n,s=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:jf.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new ze(null),depthBuffer:new ze(null),resolution:new ze(new _t),texelSize:new ze(new _t),cameraNear:new ze(.3),cameraFar:new ze(1e3),aspect:new ze(1),time:new ze(0)},blending:ki,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:s}),r&&this.setShaderParts(r),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(n)}set inputBuffer(r){this.uniforms.inputBuffer.value=r}setInputBuffer(r){this.uniforms.inputBuffer.value=r}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(r){this.uniforms.depthBuffer.value=r}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(r){this.defines.DEPTH_PACKING=r.toFixed(0),this.needsUpdate=!0}setDepthBuffer(r,e=Ol){this.depthBuffer=r,this.depthPacking=e}setShaderData(r){this.setShaderParts(r.shaderParts),this.setDefines(r.defines),this.setUniforms(r.uniforms),this.setExtensions(r.extensions)}setShaderParts(r){return this.fragmentShader=GE.replace(at.FRAGMENT_HEAD,r.get(at.FRAGMENT_HEAD)||"").replace(at.FRAGMENT_MAIN_UV,r.get(at.FRAGMENT_MAIN_UV)||"").replace(at.FRAGMENT_MAIN_IMAGE,r.get(at.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=HE.replace(at.VERTEX_HEAD,r.get(at.VERTEX_HEAD)||"").replace(at.VERTEX_MAIN_SUPPORT,r.get(at.VERTEX_MAIN_SUPPORT)||""),this.fragmentShader=Tu(this.fragmentShader),this.needsUpdate=!0,this}setDefines(r){for(const e of r.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(r){for(const e of r.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(r){this.extensions={};for(const e of r)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(r){this.encodeOutput!==r&&(r?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(r){return this.encodeOutput}setOutputEncodingEnabled(r){this.encodeOutput=r}get time(){return this.uniforms.time.value}set time(r){this.uniforms.time.value=r}setDeltaTime(r){this.uniforms.time.value+=r}adoptCameraSettings(r){this.copyCameraSettings(r)}copyCameraSettings(r){r&&(this.uniforms.cameraNear.value=r.near,this.uniforms.cameraFar.value=r.far,r instanceof vu?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(r,e){const t=this.uniforms;t.resolution.value.set(r,e),t.texelSize.value.set(1/r,1/e),t.aspect.value=r/e}static get Section(){return at}},qE=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,ZE=class extends Es{constructor(r=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:jf.replace(/\D+/g,"")},uniforms:{inputBuffer:new ze(null),threshold:new ze(0),smoothing:new ze(1),range:new ze(null)},blending:ki,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:qE,vertexShader:Wy}),this.colorOutput=r,this.luminanceRange=e}set inputBuffer(r){this.uniforms.inputBuffer.value=r}setInputBuffer(r){this.uniforms.inputBuffer.value=r}get threshold(){return this.uniforms.threshold.value}set threshold(r){this.smoothing>0||r>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=r}getThreshold(){return this.threshold}setThreshold(r){this.threshold=r}get smoothing(){return this.uniforms.smoothing.value}set smoothing(r){this.threshold>0||r>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=r}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(r){this.smoothing=r}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(r){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(r){r?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(r){return this.colorOutput}setColorOutputEnabled(r){this.colorOutput=r}get useRange(){return this.luminanceRange!==null}set useRange(r){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(r){r!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=r,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(r){this.luminanceRange=r}},YE="uniform lowp sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 c0=texture2D(inputBuffer,vUv0).rg;vec2 c1=texture2D(inputBuffer,vUv1).rg;vec2 c2=texture2D(inputBuffer,vUv2).rg;vec2 c3=texture2D(inputBuffer,vUv3).rg;float d0=(c0.x-c1.x)*0.5;float d1=(c2.x-c3.x)*0.5;float d=length(vec2(d0,d1));float a0=min(c0.y,c1.y);float a1=min(c2.y,c3.y);float visibilityFactor=min(a0,a1);gl_FragColor.rg=(1.0-visibilityFactor>0.001)?vec2(d,0.0):vec2(0.0,d);}",XE="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=vec2(uv.x+texelSize.x,uv.y);vUv1=vec2(uv.x-texelSize.x,uv.y);vUv2=vec2(uv.x,uv.y+texelSize.y);vUv3=vec2(uv.x,uv.y-texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}",QE=class extends Es{constructor(r=new _t){super({name:"OutlineMaterial",uniforms:{inputBuffer:new ze(null),texelSize:new ze(new _t)},blending:ki,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:YE,vertexShader:XE}),this.uniforms.texelSize.value.set(r.x,r.y),this.uniforms.maskTexture=this.uniforms.inputBuffer}set inputBuffer(r){this.uniforms.inputBuffer.value=r}setInputBuffer(r){this.uniforms.inputBuffer.value=r}setTexelSize(r,e){this.uniforms.texelSize.value.set(r,e)}setSize(r,e){this.uniforms.texelSize.value.set(1/r,1/e)}},KE=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,JE="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",$E=class extends Es{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new ze(null),supportBuffer:new ze(null),texelSize:new ze(new _t),radius:new ze(.85)},blending:ki,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:KE,vertexShader:JE}),this.fragmentShader=Tu(this.fragmentShader)}set inputBuffer(r){this.uniforms.inputBuffer.value=r}set supportBuffer(r){this.uniforms.supportBuffer.value=r}get radius(){return this.uniforms.radius.value}set radius(r){this.uniforms.radius.value=r}setSize(r,e){this.uniforms.texelSize.value.set(1/r,1/e)}},e3=new L_,qi=null;function t3(){if(qi===null){const r=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);qi=new jm,qi.setAttribute!==void 0?(qi.setAttribute("position",new Vo(r,3)),qi.setAttribute("uv",new Vo(e,2))):(qi.addAttribute("position",new Vo(r,3)),qi.addAttribute("uv",new Vo(e,2)))}return qi}var ir=class Qy{constructor(e="Pass",t=new hl,n=e3){this.name=e,this.renderer=null,this.scene=t,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.fullscreenMaterial;t!==null&&(t.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new ua(t3(),e),t.frustumCulled=!1,this.scene===null&&(this.scene=new hl),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=Ol){}render(e,t,n,s,i){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,n){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof Br||t instanceof zf||t instanceof gu||t instanceof Qy)&&this[e].dispose()}}},n3=class extends ir{constructor(r,e=!0){super("CopyPass"),this.fullscreenMaterial=new Xy,this.needsSwap=!1,this.renderTarget=r,r===void 0&&(this.renderTarget=new Br(1,1,{minFilter:fl,magFilter:fl,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(r){this.autoResize=r}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(r){this.autoResize=r}render(r,e,t,n,s){this.fullscreenMaterial.inputBuffer=e.texture,r.setRenderTarget(this.renderToScreen?null:this.renderTarget),r.render(this.scene,this.camera)}setSize(r,e){this.autoResize&&this.renderTarget.setSize(r,e)}initialize(r,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==Qs?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":ml(r)===Tn&&to(this.renderTarget.texture,Tn))}},r3=class extends ir{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(r,e,t,n,s){const i=r.state.buffers.stencil;i.setLocked(!1),i.setTest(!1)}},kv=new rr,rg=class extends ir{constructor(r=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=r,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(r,e,t){this.color=r,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(r){this.overrideClearColor=r}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(r){this.overrideClearAlpha=r}render(r,e,t,n,s){const i=this.overrideClearColor,o=this.overrideClearAlpha,a=r.getClearAlpha(),c=i!==null,h=o>=0;c?(r.getClearColor(kv),r.setClearColor(i,h?o:a)):h&&r.setClearAlpha(o),r.setRenderTarget(this.renderToScreen?null:e),r.clear(this.color,this.depth,this.stencil),c?r.setClearColor(kv,a):h&&r.setClearAlpha(a)}},Yf=class extends ir{constructor(r,e,t=null){super("RenderPass",r,e),this.needsSwap=!1,this.clearPass=new rg,this.overrideMaterialManager=t===null?null:new Rv(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(r){this.scene=r}set mainCamera(r){this.camera=r}get renderToScreen(){return super.renderToScreen}set renderToScreen(r){super.renderToScreen=r,this.clearPass.renderToScreen=r}get overrideMaterial(){const r=this.overrideMaterialManager;return r!==null?r.material:null}set overrideMaterial(r){const e=this.overrideMaterialManager;r!==null?e!==null?e.setMaterial(r):this.overrideMaterialManager=new Rv(r):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(r){this.overrideMaterial=r}get clear(){return this.clearPass.enabled}set clear(r){this.clearPass.enabled=r}getSelection(){return this.selection}setSelection(r){this.selection=r}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(r){this.ignoreBackground=r}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(r){this.skipShadowMapUpdate=r}getClearPass(){return this.clearPass}render(r,e,t,n,s){const i=this.scene,o=this.camera,a=this.selection,c=o.layers.mask,h=i.background,f=r.shadowMap.autoUpdate,d=this.renderToScreen?null:e;a!==null&&o.layers.set(a.getLayer()),this.skipShadowMapUpdate&&(r.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(i.background=null),this.clearPass.enabled&&this.clearPass.render(r,e),r.setRenderTarget(d),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(r,i,o):r.render(i,o),o.layers.mask=c,i.background=h,r.shadowMap.autoUpdate=f}},s3=class extends ir{constructor(r,e,{renderTarget:t,resolutionScale:n=1,width:s=jt.AUTO_SIZE,height:i=jt.AUTO_SIZE,resolutionX:o=s,resolutionY:a=i}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new Yf(r,e,new j_({depthPacking:lf}));const c=this.renderPass;c.skipShadowMapUpdate=!0,c.ignoreBackground=!0;const h=c.clearPass;h.overrideClearColor=new rr(16777215),h.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new Br(1,1,{minFilter:dl,magFilter:dl}),this.renderTarget.texture.name="DepthPass.Target");const f=this.resolution=new jt(this,o,a,n);f.addEventListener("change",d=>this.setSize(f.baseWidth,f.baseHeight))}set mainScene(r){this.renderPass.mainScene=r}set mainCamera(r){this.renderPass.mainCamera=r}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(r){this.resolution.scale=r}render(r,e,t,n,s){const i=this.renderToScreen?null:this.renderTarget;this.renderPass.render(r,i)}setSize(r,e){const t=this.resolution;t.setBaseSize(r,e),this.renderTarget.setSize(t.width,t.height)}},i3=class extends ir{constructor({normalBuffer:r=null,resolutionScale:e=.5,width:t=jt.AUTO_SIZE,height:n=jt.AUTO_SIZE,resolutionX:s=t,resolutionY:i=n}={}){super("DepthDownsamplingPass");const o=new zE;o.normalBuffer=r,this.fullscreenMaterial=o,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Br(1,1,{minFilter:dl,magFilter:dl,depthBuffer:!1,type:OS}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const a=this.resolution=new jt(this,s,i,e);a.addEventListener("change",c=>this.setSize(a.baseWidth,a.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(r,e=Ol){this.fullscreenMaterial.depthBuffer=r,this.fullscreenMaterial.depthPacking=e}render(r,e,t,n,s){r.setRenderTarget(this.renderToScreen?null:this.renderTarget),r.render(this.scene,this.camera)}setSize(r,e){const t=this.resolution;t.setBaseSize(r,e),this.renderTarget.setSize(t.width,t.height),this.fullscreenMaterial.setSize(r,e)}initialize(r,e,t){const n=r.getContext();if(!(n.getExtension("EXT_color_buffer_float")||n.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}};function Pv(r,e,t){for(const n of e){const s="$1"+r+n.charAt(0).toUpperCase()+n.slice(1),i=new RegExp("([^\\.])(\\b"+n+"\\b)","g");for(const o of t.entries())o[1]!==null&&t.set(o[0],o[1].replace(i,s))}}function o3(r,e,t){let n=e.getFragmentShader(),s=e.getVertexShader();const i=n!==void 0&&/mainImage/.test(n),o=n!==void 0&&/mainUv/.test(n);if(t.attributes|=e.getAttributes(),n===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(o&&t.attributes&Si.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!i&&!o)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const a=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,c=t.shaderParts;let h=c.get(at.FRAGMENT_HEAD)||"",f=c.get(at.FRAGMENT_MAIN_UV)||"",d=c.get(at.FRAGMENT_MAIN_IMAGE)||"",p=c.get(at.VERTEX_HEAD)||"",g=c.get(at.VERTEX_MAIN_SUPPORT)||"";const _=new Set,y=new Set;if(o&&(f+=`	${r}MainUv(UV);
`,t.uvTransformation=!0),s!==null&&/mainSupport/.test(s)){const T=/mainSupport *\([\w\s]*?uv\s*?\)/.test(s);g+=`	${r}MainSupport(`,g+=T?`vUv);
`:`);
`;for(const b of s.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const E of b[1].split(/\s*,\s*/))t.varyings.add(E),_.add(E),y.add(E);for(const b of s.matchAll(a))y.add(b[1])}for(const T of n.matchAll(a))y.add(T[1]);for(const T of e.defines.keys())y.add(T.replace(/\([\w\s,]*\)/g,""));for(const T of e.uniforms.keys())y.add(T);y.delete("while"),y.delete("for"),y.delete("if"),e.uniforms.forEach((T,b)=>t.uniforms.set(r+b.charAt(0).toUpperCase()+b.slice(1),T)),e.defines.forEach((T,b)=>t.defines.set(r+b.charAt(0).toUpperCase()+b.slice(1),T));const x=new Map([["fragment",n],["vertex",s]]);Pv(r,y,t.defines),Pv(r,y,x),n=x.get("fragment"),s=x.get("vertex");const w=e.blendMode;if(t.blendModes.set(w.blendFunction,w),i){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(d+=e.inputColorSpace===Tn?`color0 = LinearTosRGB(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==qy?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const T=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;d+=`${r}MainImage(color0, UV, `,t.attributes&Si.DEPTH&&T.test(n)&&(d+="depth, ",t.readDepth=!0),d+=`color1);
	`;const b=r+"BlendOpacity";t.uniforms.set(b,w.opacity),d+=`color0 = blend${w.blendFunction}(color0, color1, ${b});

	`,h+=`uniform float ${b};

`}if(h+=n+`
`,s!==null&&(p+=s+`
`),c.set(at.FRAGMENT_HEAD,h),c.set(at.FRAGMENT_MAIN_UV,f),c.set(at.FRAGMENT_MAIN_IMAGE,d),c.set(at.VERTEX_HEAD,p),c.set(at.VERTEX_MAIN_SUPPORT,g),e.extensions!==null)for(const T of e.extensions)t.extensions.add(T)}}var a3=class extends ir{constructor(r,...e){super("EffectPass"),this.fullscreenMaterial=new WE(null,null,null,r),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(r){for(const e of this.effects)e.mainScene=r}set mainCamera(r){this.fullscreenMaterial.copyCameraSettings(r);for(const e of this.effects)e.mainCamera=r}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(r){this.fullscreenMaterial.encodeOutput=r}get dithering(){return this.fullscreenMaterial.dithering}set dithering(r){const e=this.fullscreenMaterial;e.dithering=r,e.needsUpdate=!0}setEffects(r){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=r.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const r=new g3;let e=0;for(const o of this.effects)if(o.blendMode.blendFunction===Xe.DST)r.attributes|=o.getAttributes()&Si.DEPTH;else{if(r.attributes&o.getAttributes()&Si.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${o.name})`);o3("e"+e++,o,r)}let t=r.shaderParts.get(at.FRAGMENT_HEAD),n=r.shaderParts.get(at.FRAGMENT_MAIN_IMAGE),s=r.shaderParts.get(at.FRAGMENT_MAIN_UV);const i=/\bblend\b/g;for(const o of r.blendModes.values())t+=o.getShaderCode().replace(i,`blend${o.blendFunction}`)+`
`;r.attributes&Si.DEPTH?(r.readDepth&&(n=`float depth = readDepth(UV);

	`+n),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,r.colorSpace===Tn&&(n+=`color0 = sRGBToLinear(color0);
	`),r.uvTransformation?(s=`vec2 transformedUv = vUv;
`+s,r.defines.set("UV","transformedUv")):r.defines.set("UV","vUv"),r.shaderParts.set(at.FRAGMENT_HEAD,t),r.shaderParts.set(at.FRAGMENT_MAIN_IMAGE,n),r.shaderParts.set(at.FRAGMENT_MAIN_UV,s);for(const[o,a]of r.shaderParts)a!==null&&r.shaderParts.set(o,a.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(r)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(r,e=Ol){this.fullscreenMaterial.depthBuffer=r,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(r,e)}render(r,e,t,n,s){for(const i of this.effects)i.update(r,e,n);if(!this.skipRendering||this.renderToScreen){const i=this.fullscreenMaterial;i.inputBuffer=e.texture,i.time+=n*this.timeScale,r.setRenderTarget(this.renderToScreen?null:t),r.render(this.scene,this.camera)}}setSize(r,e){this.fullscreenMaterial.setSize(r,e);for(const t of this.effects)t.setSize(r,e)}initialize(r,e,t){this.renderer=r;for(const n of this.effects)n.initialize(r,e,t);this.updateMaterial(),t!==void 0&&t!==Qs&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const r of this.effects)r.removeEventListener("change",this.listener),r.dispose()}handleEvent(r){switch(r.type){case"change":this.recompile();break}}},Ky=class extends ir{constructor({kernelSize:r=Zf.MEDIUM,resolutionScale:e=.5,width:t=jt.AUTO_SIZE,height:n=jt.AUTO_SIZE,resolutionX:s=t,resolutionY:i=n}={}){super("KawaseBlurPass"),this.renderTargetA=new Br(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const o=this.resolution=new jt(this,s,i,e);o.addEventListener("change",a=>this.setSize(o.baseWidth,o.baseHeight)),this._blurMaterial=new RE,this._blurMaterial.kernelSize=r,this.copyMaterial=new Xy}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(r){this._blurMaterial=r}get dithering(){return this.copyMaterial.dithering}set dithering(r){this.copyMaterial.dithering=r}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(r){this.blurMaterial.kernelSize=r}get width(){return this.resolution.width}set width(r){this.resolution.preferredWidth=r}get height(){return this.resolution.height}set height(r){this.resolution.preferredHeight=r}get scale(){return this.blurMaterial.scale}set scale(r){this.blurMaterial.scale=r}getScale(){return this.blurMaterial.scale}setScale(r){this.blurMaterial.scale=r}getKernelSize(){return this.kernelSize}setKernelSize(r){this.kernelSize=r}getResolutionScale(){return this.resolution.scale}setResolutionScale(r){this.resolution.scale=r}render(r,e,t,n,s){const i=this.scene,o=this.camera,a=this.renderTargetA,c=this.renderTargetB,h=this.blurMaterial,f=h.kernelSequence;let d=e;this.fullscreenMaterial=h;for(let p=0,g=f.length;p<g;++p){const _=p&1?c:a;h.kernel=f[p],h.inputBuffer=d.texture,r.setRenderTarget(_),r.render(i,o),d=_}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=d.texture,r.setRenderTarget(this.renderToScreen?null:t),r.render(i,o)}setSize(r,e){const t=this.resolution;t.setBaseSize(r,e);const n=t.width,s=t.height;this.renderTargetA.setSize(n,s),this.renderTargetB.setSize(n,s),this.blurMaterial.setSize(r,e)}initialize(r,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==Qs?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):ml(r)===Tn&&(to(this.renderTargetA.texture,Tn),to(this.renderTargetB.texture,Tn)))}static get AUTO_SIZE(){return jt.AUTO_SIZE}},l3=class extends ir{constructor({renderTarget:r,luminanceRange:e,colorOutput:t,resolutionScale:n=1,width:s=jt.AUTO_SIZE,height:i=jt.AUTO_SIZE,resolutionX:o=s,resolutionY:a=i}={}){super("LuminancePass"),this.fullscreenMaterial=new ZE(t,e),this.needsSwap=!1,this.renderTarget=r,this.renderTarget===void 0&&(this.renderTarget=new Br(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const c=this.resolution=new jt(this,o,a,n);c.addEventListener("change",h=>this.setSize(c.baseWidth,c.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(r,e,t,n,s){const i=this.fullscreenMaterial;i.inputBuffer=e.texture,r.setRenderTarget(this.renderToScreen?null:this.renderTarget),r.render(this.scene,this.camera)}setSize(r,e){const t=this.resolution;t.setBaseSize(r,e),this.renderTarget.setSize(t.width,t.height)}initialize(r,e,t){t!==void 0&&t!==Qs&&(this.renderTarget.texture.type=t,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},c3=class extends ir{constructor(r,e){super("MaskPass",r,e),this.needsSwap=!1,this.clearPass=new rg(!1,!1,!0),this.inverse=!1}set mainScene(r){this.scene=r}set mainCamera(r){this.camera=r}get inverted(){return this.inverse}set inverted(r){this.inverse=r}get clear(){return this.clearPass.enabled}set clear(r){this.clearPass.enabled=r}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(r){this.inverted=r}render(r,e,t,n,s){const i=r.getContext(),o=r.state.buffers,a=this.scene,c=this.camera,h=this.clearPass,f=this.inverted?0:1,d=1-f;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),o.stencil.setFunc(i.ALWAYS,f,4294967295),o.stencil.setClear(d),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?h.render(r,null):(h.render(r,e),h.render(r,t))),this.renderToScreen?(r.setRenderTarget(null),r.render(a,c)):(r.setRenderTarget(e),r.render(a,c),r.setRenderTarget(t),r.render(a,c)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(i.EQUAL,1,4294967295),o.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),o.stencil.setLocked(!0)}},u3=class extends ir{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new Br(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new VE,this.upsamplingMaterial=new $E,this.resolution=new _t}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(r){if(this.levels!==r){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let t=0;t<r;++t){const n=e.clone();n.texture.name="Downsampling.Mipmap"+t,this.downsamplingMipmaps.push(n)}this.upsamplingMipmaps.push(e);for(let t=1,n=r-1;t<n;++t){const s=e.clone();s.texture.name="Upsampling.Mipmap"+t,this.upsamplingMipmaps.push(s)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(r){this.upsamplingMaterial.radius=r}render(r,e,t,n,s){const{scene:i,camera:o}=this,{downsamplingMaterial:a,upsamplingMaterial:c}=this,{downsamplingMipmaps:h,upsamplingMipmaps:f}=this;let d=e;this.fullscreenMaterial=a;for(let p=0,g=h.length;p<g;++p){const _=h[p];a.setSize(d.width,d.height),a.inputBuffer=d.texture,r.setRenderTarget(_),r.render(i,o),d=_}this.fullscreenMaterial=c;for(let p=f.length-1;p>=0;--p){const g=f[p];c.setSize(d.width,d.height),c.inputBuffer=d.texture,c.supportBuffer=h[p].texture,r.setRenderTarget(g),r.render(i,o),d=g}}setSize(r,e){const t=this.resolution;t.set(r,e);let n=t.width,s=t.height;for(let i=0,o=this.downsamplingMipmaps.length;i<o;++i)n=Math.round(n*.5),s=Math.round(s*.5),this.downsamplingMipmaps[i].setSize(n,s),i<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[i].setSize(n,s)}initialize(r,e,t){if(t!==void 0){const n=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const s of n)s.texture.type=t;if(t!==Qs)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(ml(r)===Tn)for(const s of n)to(s.texture,Tn)}}dispose(){super.dispose();for(const r of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))r.dispose()}},h3=class extends ir{constructor(r,e,{renderTarget:t,resolutionScale:n=1,width:s=jt.AUTO_SIZE,height:i=jt.AUTO_SIZE,resolutionX:o=s,resolutionY:a=i}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new Yf(r,e,new AS);const c=this.renderPass;c.ignoreBackground=!0,c.skipShadowMapUpdate=!0;const h=c.getClearPass();h.overrideClearColor=new rr(7829503),h.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new Br(1,1,{minFilter:dl,magFilter:dl}),this.renderTarget.texture.name="NormalPass.Target");const f=this.resolution=new jt(this,o,a,n);f.addEventListener("change",d=>this.setSize(f.baseWidth,f.baseHeight))}set mainScene(r){this.renderPass.mainScene=r}set mainCamera(r){this.renderPass.mainCamera=r}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(r){this.resolution.scale=r}render(r,e,t,n,s){const i=this.renderToScreen?null:this.renderTarget;this.renderPass.render(r,i,i)}setSize(r,e){const t=this.resolution;t.setBaseSize(r,e),this.renderTarget.setSize(t.width,t.height)}},f3=class extends ir{constructor(r,e="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=r,this.input=e}setInput(r){this.input=r}render(r,e,t,n,s){const i=this.fullscreenMaterial.uniforms;e!==null&&i!==void 0&&i[this.input]!==void 0&&(i[this.input].value=e.texture),r.setRenderTarget(this.renderToScreen?null:t),r.render(this.scene,this.camera)}initialize(r,e,t){t!==void 0&&t!==Qs&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Rp=1/1e3,d3=1e3,p3=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(r){typeof document<"u"&&document.hidden!==void 0&&(r?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=r)}get delta(){return this._delta*Rp}get fixedDelta(){return this._fixedDelta*Rp}set fixedDelta(r){this._fixedDelta=r*d3}get elapsed(){return this._elapsed*Rp}update(r){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(r!==void 0?r:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}handleEvent(r){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},m3=class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:n=!1,multisampling:s=0,frameBufferType:i}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,n,i,s),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new n3,this.depthTexture=null,this.passes=[],this.timer=new p3,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){const t=this.inputBuffer,n=this.multisampling;n>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):n!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,e!==null){const t=e.getSize(new _t),n=e.getContext().getContextAttributes().alpha,s=this.inputBuffer.texture.type;s===Qs&&ml(e)===Tn&&(to(this.inputBuffer.texture,Tn),to(this.outputBuffer.texture,Tn),this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height);for(const i of this.passes)i.initialize(e,n,s)}}replaceRenderer(e,t=!0){const n=this.renderer,s=n.domElement.parentNode;return this.setRenderer(e),t&&s!==null&&(s.removeChild(n.domElement),s.appendChild(e.domElement)),n}createDepthTexture(){const e=this.depthTexture=new kS;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=PS,e.type=RS):e.type=DS,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,n,s){const i=this.renderer,o=i===null?new _t:i.getDrawingBufferSize(new _t),a={minFilter:fl,magFilter:fl,stencilBuffer:t,depthBuffer:e,type:n},c=new Br(o.width,o.height,a);return s>0&&(c.ignoreDepthForMultisampleCopy=!1,c.samples=s),n===Qs&&ml(i)===Tn&&to(c.texture,Tn),c.texture.name="EffectComposer.Buffer",c.texture.generateMipmaps=!1,c}setMainScene(e){for(const t of this.passes)t.mainScene=e}setMainCamera(e){for(const t of this.passes)t.mainCamera=e}addPass(e,t){const n=this.passes,s=this.renderer,i=s.getDrawingBufferSize(new _t),o=s.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(e.setRenderer(s),e.setSize(i.width,i.height),e.initialize(s,o,a),this.autoRenderToScreen&&(n.length>0&&(n[n.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?n.splice(t,0,e):n.push(e),this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const c=this.createDepthTexture();for(e of n)e.setDepthTexture(c)}else e.setDepthTexture(this.depthTexture)}removePass(e){const t=this.passes,n=t.indexOf(e);if(n!==-1&&t.splice(n,1).length>0){if(this.depthTexture!==null){const o=(c,h)=>c||h.needsDepthTexture;t.reduce(o,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&n===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const t=this.renderer,n=this.copyPass;let s=this.inputBuffer,i=this.outputBuffer,o=!1,a,c,h;e===void 0&&(this.timer.update(),e=this.timer.delta);for(const f of this.passes)f.enabled&&(f.render(t,s,i,e,o),f.needsSwap&&(o&&(n.renderToScreen=f.renderToScreen,a=t.getContext(),c=t.state.buffers.stencil,c.setFunc(a.NOTEQUAL,1,4294967295),n.render(t,s,i,e,o),c.setFunc(a.EQUAL,1,4294967295)),h=s,s=i,i=h),f instanceof c3?o=!0:f instanceof r3&&(o=!1))}setSize(e,t,n){const s=this.renderer,i=s.getSize(new _t);(e===void 0||t===void 0)&&(e=i.width,t=i.height),(i.width!==e||i.height!==t)&&s.setSize(e,t,n);const o=s.getDrawingBufferSize(new _t);this.inputBuffer.setSize(o.width,o.height),this.outputBuffer.setSize(o.width,o.height);for(const a of this.passes)a.setSize(o.width,o.height)}reset(){const e=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=e}dispose(){for(const e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},g3=class{constructor(){this.shaderParts=new Map([[at.FRAGMENT_HEAD,null],[at.FRAGMENT_MAIN_UV,null],[at.FRAGMENT_MAIN_IMAGE,null],[at.VERTEX_HEAD,null],[at.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=Si.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=qf}},Dp=!1,Rv=class{constructor(r=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(r),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case Ki:t=this.materialsFlatShadedDoubleSide;break;case Pc:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case Ki:t=this.materialsDoubleSide;break;case Pc:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(r){if(!(r instanceof Es))return r.clone();const e=r.uniforms,t=new Map;for(const s in e){const i=e[s].value;i.isRenderTargetTexture&&(e[s].value=null,t.set(s,i))}const n=r.clone();for(const s of t)e[s[0]].value=s[1],n.uniforms[s[0]].value=s[1];return n}setMaterial(r){if(this.disposeMaterials(),this.material=r,r!==null){const e=this.materials=[this.cloneMaterial(r),this.cloneMaterial(r),this.cloneMaterial(r)];for(const t of e)t.uniforms=Object.assign({},r.uniforms),t.side=V_;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},r.uniforms),n.side=Pc,n}),this.materialsDoubleSide=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},r.uniforms),n.side=Ki,n}),this.materialsFlatShaded=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},r.uniforms),n.flatShading=!0,n}),this.materialsFlatShadedBackSide=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},r.uniforms),n.flatShading=!0,n.side=Pc,n}),this.materialsFlatShadedDoubleSide=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},r.uniforms),n.flatShading=!0,n.side=Ki,n})}}render(r,e,t){const n=r.shadowMap.enabled;if(r.shadowMap.enabled=!1,Dp){const s=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),r.render(e,t);for(const i of s)i[0].material=i[1];this.meshCount!==s.size&&s.clear()}else{const s=e.overrideMaterial;e.overrideMaterial=this.material,r.render(e,t),e.overrideMaterial=s}r.shadowMap.enabled=n}disposeMaterials(){if(this.material!==null){const r=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of r)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return Dp}static set workaroundEnabled(r){Dp=r}},Zi=-1,jt=class extends qm{constructor(r,e=Zi,t=Zi,n=1){super(),this.resizable=r,this.baseSize=new _t(1,1),this.preferredSize=new _t(e,t),this.target=this.preferredSize,this.s=n,this.effectiveSize=new _t,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const r=this.baseSize,e=this.preferredSize,t=this.effectiveSize,n=this.scale;e.width!==Zi?t.width=e.width:e.height!==Zi?t.width=Math.round(e.height*(r.width/Math.max(r.height,1))):t.width=Math.round(r.width*n),e.height!==Zi?t.height=e.height:e.width!==Zi?t.height=Math.round(e.width/Math.max(r.width/Math.max(r.height,1),1)):t.height=Math.round(r.height*n)}get width(){return this.effectiveSize.width}set width(r){this.preferredWidth=r}get height(){return this.effectiveSize.height}set height(r){this.preferredHeight=r}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(r){this.s!==r&&(this.s=r,this.preferredSize.setScalar(Zi),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(r){this.scale=r}get baseWidth(){return this.baseSize.width}set baseWidth(r){this.baseSize.width!==r&&(this.baseSize.width=r,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(r){this.baseWidth=r}get baseHeight(){return this.baseSize.height}set baseHeight(r){this.baseSize.height!==r&&(this.baseSize.height=r,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(r){this.baseHeight=r}setBaseSize(r,e){(this.baseSize.width!==r||this.baseSize.height!==e)&&(this.baseSize.set(r,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(r){this.preferredSize.width!==r&&(this.preferredSize.width=r,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(r){this.preferredWidth=r}get preferredHeight(){return this.preferredSize.height}set preferredHeight(r){this.preferredSize.height!==r&&(this.preferredSize.height=r,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(r){this.preferredHeight=r}setPreferredSize(r,e){(this.preferredSize.width!==r||this.preferredSize.height!==e)&&(this.preferredSize.set(r,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(r){this.s=r.scale,this.baseSize.set(r.baseWidth,r.baseHeight),this.preferredSize.set(r.preferredWidth,r.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return Zi}},v3=class extends Set{constructor(r,e=10){super(),this.l=e,this.exclusive=!1,r!==void 0&&this.set(r)}get layer(){return this.l}set layer(r){const e=this.l;for(const t of this)t.layers.disable(e),t.layers.enable(r);this.l=r}getLayer(){return this.layer}setLayer(r){this.layer=r}isExclusive(){return this.exclusive}setExclusive(r){this.exclusive=r}clear(){const r=this.layer;for(const e of this)e.layers.disable(r);return super.clear()}set(r){this.clear();for(const e of r)this.add(e);return this}indexOf(r){return this.has(r)?0:-1}add(r){return this.exclusive?r.layers.set(this.layer):r.layers.enable(this.layer),super.add(r)}delete(r){return this.has(r)&&r.layers.disable(this.layer),super.delete(r)}toggle(r){let e;return this.has(r)?(this.delete(r),e=!1):(this.add(r),e=!0),e}setVisible(r){for(const e of this)r?e.layers.enable(0):e.layers.disable(0);return this}},_3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",y3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",x3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",w3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",S3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",T3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",C3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",E3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",b3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",M3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",O3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",A3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",k3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",P3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",R3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",D3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",I3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",U3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",F3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",N3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",L3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",z3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",B3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",j3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",V3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",G3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",H3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",W3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",q3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",Z3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",Y3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",X3="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",Q3=new Map([[Xe.ADD,_3],[Xe.ALPHA,y3],[Xe.AVERAGE,x3],[Xe.COLOR,w3],[Xe.COLOR_BURN,S3],[Xe.COLOR_DODGE,T3],[Xe.DARKEN,C3],[Xe.DIFFERENCE,E3],[Xe.DIVIDE,b3],[Xe.DST,null],[Xe.EXCLUSION,M3],[Xe.HARD_LIGHT,O3],[Xe.HARD_MIX,A3],[Xe.HUE,k3],[Xe.INVERT,P3],[Xe.INVERT_RGB,R3],[Xe.LIGHTEN,D3],[Xe.LINEAR_BURN,I3],[Xe.LINEAR_DODGE,U3],[Xe.LINEAR_LIGHT,F3],[Xe.LUMINOSITY,N3],[Xe.MULTIPLY,L3],[Xe.NEGATION,z3],[Xe.NORMAL,B3],[Xe.OVERLAY,j3],[Xe.PIN_LIGHT,V3],[Xe.REFLECT,G3],[Xe.SATURATION,H3],[Xe.SCREEN,W3],[Xe.SOFT_LIGHT,q3],[Xe.SRC,Z3],[Xe.SUBTRACT,Y3],[Xe.VIVID_LIGHT,X3]]),K3=class extends qm{constructor(r,e=1){super(),this._blendFunction=r,this.opacity=new ze(e)}getOpacity(){return this.opacity.value}setOpacity(r){this.opacity.value=r}get blendFunction(){return this._blendFunction}set blendFunction(r){this._blendFunction=r,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(r){this.blendFunction=r}getShaderCode(){return Q3.get(this.blendFunction)}},Gc=class extends qm{constructor(e,t,{attributes:n=Si.NONE,blendFunction:s=Xe.NORMAL,defines:i=new Map,uniforms:o=new Map,extensions:a=null,vertexShader:c=null}={}){super(),this.name=e,this.renderer=null,this.attributes=n,this.fragmentShader=t,this.vertexShader=c,this.defines=i,this.uniforms=o,this.extensions=a,this.blendMode=new K3(s),this.blendMode.addEventListener("change",h=>this.setChanged()),this._inputColorSpace=qf,this._outputColorSpace=qy}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(e){this._inputColorSpace=e,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e,this.setChanged()}set mainScene(e){}set mainCamera(e){}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=Ol){}update(e,t,n){}setSize(e,t){}initialize(e,t,n){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof Br||t instanceof zf||t instanceof gu||t instanceof ir)&&this[e].dispose()}}},J3=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}`,$3=class extends Gc{constructor({blendFunction:r=Xe.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:t=.025,mipmapBlur:n=!1,intensity:s=1,radius:i=.85,levels:o=8,kernelSize:a=Zf.LARGE,resolutionScale:c=.5,width:h=jt.AUTO_SIZE,height:f=jt.AUTO_SIZE,resolutionX:d=h,resolutionY:p=f}={}){super("BloomEffect",J3,{blendFunction:r,uniforms:new Map([["map",new ze(null)],["intensity",new ze(s)]])}),this.renderTarget=new Br(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new Ky({kernelSize:a}),this.luminancePass=new l3({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=t,this.mipmapBlurPass=new u3,this.mipmapBlurPass.enabled=n,this.mipmapBlurPass.radius=i,this.mipmapBlurPass.levels=o,this.uniforms.get("map").value=n?this.mipmapBlurPass.texture:this.renderTarget.texture;const g=this.resolution=new jt(this,d,p,c);g.addEventListener("change",_=>this.setSize(g.baseWidth,g.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(r){this.resolution.preferredWidth=r}get height(){return this.resolution.height}set height(r){this.resolution.preferredHeight=r}get dithering(){return this.blurPass.dithering}set dithering(r){this.blurPass.dithering=r}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(r){this.blurPass.kernelSize=r}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(r){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(r){this.uniforms.get("intensity").value=r}getIntensity(){return this.intensity}setIntensity(r){this.intensity=r}getResolutionScale(){return this.resolution.scale}setResolutionScale(r){this.resolution.scale=r}update(r,e,t){const n=this.renderTarget,s=this.luminancePass;s.enabled?(s.render(r,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(r,s.renderTarget):this.blurPass.render(r,s.renderTarget,n)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(r,e):this.blurPass.render(r,e,n)}setSize(r,e){const t=this.resolution;t.setBaseSize(r,e),this.renderTarget.setSize(t.width,t.height),this.blurPass.resolution.copy(t),this.luminancePass.setSize(r,e),this.mipmapBlurPass.setSize(r,e)}initialize(r,e,t){this.blurPass.initialize(r,e,t),this.luminancePass.initialize(r,e,t),this.mipmapBlurPass.initialize(r,e,t),t!==void 0&&(this.renderTarget.texture.type=t,ml(r)===Tn&&to(this.renderTarget.texture,Tn))}},e4=`uniform lowp sampler2D edgeTexture;uniform lowp sampler2D maskTexture;uniform vec3 visibleEdgeColor;uniform vec3 hiddenEdgeColor;uniform float pulse;uniform float edgeStrength;
#ifdef USE_PATTERN
uniform lowp sampler2D patternTexture;varying vec2 vUvPattern;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 edge=texture2D(edgeTexture,uv).rg;vec2 mask=texture2D(maskTexture,uv).rg;
#ifndef X_RAY
edge.y=0.0;
#endif
edge*=(edgeStrength*mask.x*pulse);vec3 color=edge.x*visibleEdgeColor+edge.y*hiddenEdgeColor;float visibilityFactor=0.0;
#ifdef USE_PATTERN
vec4 patternColor=texture2D(patternTexture,vUvPattern);
#ifdef X_RAY
float hiddenFactor=0.5;
#else
float hiddenFactor=0.0;
#endif
visibilityFactor=(1.0-mask.y>0.0)?1.0:hiddenFactor;visibilityFactor*=(1.0-mask.x)*patternColor.a;color+=visibilityFactor*patternColor.rgb;
#endif
float alpha=max(max(edge.x,edge.y),visibilityFactor);
#ifdef ALPHA
outputColor=vec4(color,alpha);
#else
outputColor=vec4(color,max(alpha,inputColor.a));
#endif
}`,t4="uniform float patternScale;varying vec2 vUvPattern;void mainSupport(const in vec2 uv){vUvPattern=uv*vec2(aspect,1.0)*patternScale;}",n4=class extends Gc{constructor(r,e,{blendFunction:t=Xe.SCREEN,patternTexture:n=null,patternScale:s=1,edgeStrength:i=1,pulseSpeed:o=0,visibleEdgeColor:a=16777215,hiddenEdgeColor:c=2230538,kernelSize:h=Zf.VERY_SMALL,blur:f=!1,xRay:d=!0,multisampling:p=0,resolutionScale:g=.5,width:_=jt.AUTO_SIZE,height:y=jt.AUTO_SIZE,resolutionX:x=_,resolutionY:w=y}={}){super("OutlineEffect",e4,{uniforms:new Map([["maskTexture",new ze(null)],["edgeTexture",new ze(null)],["edgeStrength",new ze(i)],["visibleEdgeColor",new ze(new rr(a))],["hiddenEdgeColor",new ze(new rr(c))],["pulse",new ze(1)],["patternScale",new ze(s)],["patternTexture",new ze(null)]])}),this.blendMode.addEventListener("change",C=>{this.blendMode.blendFunction===Xe.ALPHA?this.defines.set("ALPHA","1"):this.defines.delete("ALPHA"),this.setChanged()}),this.blendMode.blendFunction=t,this.patternTexture=n,this.xRay=d,this.scene=r,this.camera=e,this.renderTargetMask=new Br(1,1),this.renderTargetMask.samples=p,this.renderTargetMask.texture.name="Outline.Mask",this.uniforms.get("maskTexture").value=this.renderTargetMask.texture,this.renderTargetOutline=new Br(1,1,{depthBuffer:!1}),this.renderTargetOutline.texture.name="Outline.Edges",this.uniforms.get("edgeTexture").value=this.renderTargetOutline.texture,this.clearPass=new rg,this.clearPass.overrideClearColor=new rr(0),this.clearPass.overrideClearAlpha=1,this.depthPass=new s3(r,e),this.maskPass=new Yf(r,e,new FE(this.depthPass.texture,e));const T=this.maskPass.clearPass;T.overrideClearColor=new rr(16777215),T.overrideClearAlpha=1,this.blurPass=new Ky({resolutionScale:g,resolutionX:x,resolutionY:w,kernelSize:h}),this.blurPass.enabled=f;const b=this.blurPass.resolution;b.addEventListener("change",C=>this.setSize(b.baseWidth,b.baseHeight)),this.outlinePass=new f3(new QE);const E=this.outlinePass.fullscreenMaterial;E.inputBuffer=this.renderTargetMask.texture,this.time=0,this.forceUpdate=!0,this.selection=new v3,this.selection.layer=10,this.pulseSpeed=o}set mainScene(r){this.scene=r,this.depthPass.mainScene=r,this.maskPass.mainScene=r}set mainCamera(r){this.camera=r,this.depthPass.mainCamera=r,this.maskPass.mainCamera=r,this.maskPass.overrideMaterial.copyCameraSettings(r)}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.getResolution()}get multisampling(){return this.renderTargetMask.samples}set multisampling(r){this.renderTargetMask.samples=r,this.renderTargetMask.dispose()}get patternScale(){return this.uniforms.get("patternScale").value}set patternScale(r){this.uniforms.get("patternScale").value=r}get edgeStrength(){return this.uniforms.get("edgeStrength").value}set edgeStrength(r){this.uniforms.get("edgeStrength").value=r}get visibleEdgeColor(){return this.uniforms.get("visibleEdgeColor").value}set visibleEdgeColor(r){this.uniforms.get("visibleEdgeColor").value=r}get hiddenEdgeColor(){return this.uniforms.get("hiddenEdgeColor").value}set hiddenEdgeColor(r){this.uniforms.get("hiddenEdgeColor").value=r}getBlurPass(){return this.blurPass}getSelection(){return this.selection}getPulseSpeed(){return this.pulseSpeed}setPulseSpeed(r){this.pulseSpeed=r}get width(){return this.resolution.width}set width(r){this.resolution.preferredWidth=r}get height(){return this.resolution.height}set height(r){this.resolution.preferredHeight=r}get selectionLayer(){return this.selection.layer}set selectionLayer(r){this.selection.layer=r}get dithering(){return this.blurPass.dithering}set dithering(r){this.blurPass.dithering=r}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(r){this.blurPass.kernelSize=r}get blur(){return this.blurPass.enabled}set blur(r){this.blurPass.enabled=r}get xRay(){return this.defines.has("X_RAY")}set xRay(r){this.xRay!==r&&(r?this.defines.set("X_RAY","1"):this.defines.delete("X_RAY"),this.setChanged())}isXRayEnabled(){return this.xRay}setXRayEnabled(r){this.xRay=r}get patternTexture(){return this.uniforms.get("patternTexture").value}set patternTexture(r){r!==null?(r.wrapS=r.wrapT=IS,this.defines.set("USE_PATTERN","1"),this.setVertexShader(t4)):(this.defines.delete("USE_PATTERN"),this.setVertexShader(null)),this.uniforms.get("patternTexture").value=r,this.setChanged()}setPatternTexture(r){this.patternTexture=r}getResolutionScale(){return this.resolution.scale}setResolutionScale(r){this.resolution.scale=r}setSelection(r){return this.selection.set(r),this}clearSelection(){return this.selection.clear(),this}selectObject(r){return this.selection.add(r),this}deselectObject(r){return this.selection.delete(r),this}update(r,e,t){const n=this.scene,s=this.camera,i=this.selection,a=this.uniforms.get("pulse"),c=n.background,h=s.layers.mask;(this.forceUpdate||i.size>0)&&(n.background=null,a.value=1,this.pulseSpeed>0&&(a.value=Math.cos(this.time*this.pulseSpeed*10)*.375+.625),this.time+=t,i.setVisible(!1),this.depthPass.render(r),i.setVisible(!0),s.layers.set(i.layer),this.maskPass.render(r,this.renderTargetMask),s.layers.mask=h,n.background=c,this.outlinePass.render(r,null,this.renderTargetOutline),this.blurPass.enabled&&this.blurPass.render(r,this.renderTargetOutline,this.renderTargetOutline)),this.forceUpdate=i.size>0}setSize(r,e){this.blurPass.setSize(r,e),this.renderTargetMask.setSize(r,e);const t=this.resolution;t.setBaseSize(r,e);const n=t.width,s=t.height;this.depthPass.setSize(n,s),this.renderTargetOutline.setSize(n,s),this.outlinePass.fullscreenMaterial.setSize(n,s)}initialize(r,e,t){this.blurPass.initialize(r,e,Qs),t!==void 0&&(this.depthPass.initialize(r,e,t),this.maskPass.initialize(r,e,t),this.outlinePass.initialize(r,e,t))}},r4=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,s4=class extends Gc{constructor({blendFunction:r,technique:e=Gh.DEFAULT,eskil:t=!1,offset:n=.5,darkness:s=.5}={}){super("VignetteEffect",r4,{blendFunction:r,defines:new Map([["VIGNETTE_TECHNIQUE",e.toFixed(0)]]),uniforms:new Map([["offset",new ze(n)],["darkness",new ze(s)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(r){this.technique!==r&&(this.defines.set("VIGNETTE_TECHNIQUE",r.toFixed(0)),this.setChanged())}get eskil(){return this.technique===Gh.ESKIL}set eskil(r){this.technique=r?Gh.ESKIL:Gh.DEFAULT}getTechnique(){return this.technique}setTechnique(r){this.technique=r}get offset(){return this.uniforms.get("offset").value}set offset(r){this.uniforms.get("offset").value=r}getOffset(){return this.offset}setOffset(r){this.offset=r}get darkness(){return this.uniforms.get("darkness").value}set darkness(r){this.uniforms.get("darkness").value=r}getDarkness(){return this.darkness}setDarkness(r){this.darkness=r}};const Jy=P.createContext(null),Dv=r=>(r.getAttributes()&Si.CONVOLUTION)===Si.CONVOLUTION,i4=Vc.memo(P.forwardRef(({children:r,camera:e,scene:t,resolutionScale:n,enabled:s=!0,renderPriority:i=1,autoClear:o=!0,depthBuffer:a,disableNormalPass:c,stencilBuffer:h,multisampling:f=8,frameBufferType:d=US},p)=>{const{gl:g,scene:_,camera:y,size:x}=lt(),w=t||_,T=e||y,[b,E,C]=P.useMemo(()=>{const R=aC(),F=new m3(g,{depthBuffer:a,stencilBuffer:h,multisampling:f>0&&R?f:0,frameBufferType:d});F.addPass(new Yf(w,T));let U=null,I=null;return c||(I=new h3(w,T),I.enabled=!1,F.addPass(I),n!==void 0&&R&&(U=new i3({normalBuffer:I.texture,resolutionScale:n}),U.enabled=!1,F.addPass(U))),[F,I,U]},[T,g,a,h,f,d,w,c,n]);P.useEffect(()=>b==null?void 0:b.setSize(x.width,x.height),[b,x]),mn((R,F)=>{if(s){const U=g.autoClear;g.autoClear=o,h&&!o&&g.clearStencil(),b.render(F),g.autoClear=U}},s?i:0);const A=P.useRef(null),M=CT(A);P.useLayoutEffect(()=>{const R=[];if(A.current&&M.current&&b){const F=M.current.objects;for(let U=0;U<F.length;U++){const I=F[U];if(I instanceof Gc){const z=[I];if(!Dv(I)){let q=null;for(;(q=F[U+1])instanceof Gc&&!Dv(q);)z.push(q),U++}const j=new a3(T,...z);R.push(j)}else I instanceof ir&&R.push(I)}for(const U of R)b==null||b.addPass(U);E&&(E.enabled=!0),C&&(C.enabled=!0)}return()=>{for(const F of R)b==null||b.removePass(F);E&&(E.enabled=!1),C&&(C.enabled=!1)}},[b,r,T,E,C,M]);const k=P.useMemo(()=>({composer:b,normalPass:E,downSamplingPass:C,resolutionScale:n,camera:T,scene:w}),[b,E,C,n,T,w]);return P.useImperativeHandle(p,()=>b,[b]),D.jsx(Jy.Provider,{value:k,children:D.jsx("group",{ref:A,children:r})})})),Iv=r=>typeof r=="object"&&r!=null&&"current"in r?r.current:r;let o4=0;const Uv=new WeakMap,$y=(r,e)=>Vc.forwardRef(function({blendFunction:n=e==null?void 0:e.blendFunction,opacity:s=e==null?void 0:e.opacity,...i},o){let a=Uv.get(r);if(!a){const f=`@react-three/postprocessing/${r.name}-${o4++}`;yu({[f]:r}),Uv.set(r,a=f)}const c=lt(f=>f.camera),h=Vc.useMemo(()=>{var f,d;return[...(f=e==null?void 0:e.args)!=null?f:[],...(d=i.args)!=null?d:[{...e,...i}]]},[JSON.stringify(i)]);return D.jsx(a,{camera:c,"blendMode-blendFunction":n,"blendMode-opacity-value":s,...i,ref:o,args:h})}),a4=$y($3,{blendFunction:Xe.ADD}),l4=P.forwardRef(function({selection:e=[],selectionLayer:t=10,blendFunction:n,patternTexture:s,edgeStrength:i,pulseSpeed:o,visibleEdgeColor:a,hiddenEdgeColor:c,width:h,height:f,kernelSize:d,blur:p,xRay:g,..._},y){const x=lt(C=>C.invalidate),{scene:w,camera:T}=P.useContext(Jy),b=P.useMemo(()=>new n4(w,T,{blendFunction:n,patternTexture:s,edgeStrength:i,pulseSpeed:o,visibleEdgeColor:a,hiddenEdgeColor:c,width:h,height:f,kernelSize:d,blur:p,xRay:g,..._}),[n,p,T,i,f,c,d,s,o,w,a,h,g]),E=P.useContext(ng);return P.useEffect(()=>{if(!E&&e)return b.selection.set(Array.isArray(e)?e.map(Iv):[Iv(e)]),x(),()=>{b.selection.clear(),x()}},[b,e,E,x]),P.useEffect(()=>{b.selectionLayer=t,x()},[b,x,t]),P.useRef(),P.useEffect(()=>{var C;if(E&&E.enabled&&(C=E.selected)!=null&&C.length)return b.selection.set(E.selected),x(),()=>{b.selection.clear(),x()}},[E,b.selection,x]),P.useEffect(()=>()=>{b.dispose()},[b]),D.jsx("primitive",{ref:y,object:b})}),c4=$y(s4);function rn(r,e){if(r==null)return{};var t={},n=Object.keys(r),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(t[s]=r[s]);return t}var u4=["color"],e2=P.forwardRef(function(r,e){var t=r.color,n=t===void 0?"currentColor":t,s=rn(r,u4);return P.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),P.createElement("path",{d:"M0 1.5C0 1.22386 0.223858 1 0.5 1H2.5C2.77614 1 3 1.22386 3 1.5C3 1.77614 2.77614 2 2.5 2H0.5C0.223858 2 0 1.77614 0 1.5ZM4 1.5C4 1.22386 4.22386 1 4.5 1H14.5C14.7761 1 15 1.22386 15 1.5C15 1.77614 14.7761 2 14.5 2H4.5C4.22386 2 4 1.77614 4 1.5ZM4 4.5C4 4.22386 4.22386 4 4.5 4H11.5C11.7761 4 12 4.22386 12 4.5C12 4.77614 11.7761 5 11.5 5H4.5C4.22386 5 4 4.77614 4 4.5ZM0 7.5C0 7.22386 0.223858 7 0.5 7H2.5C2.77614 7 3 7.22386 3 7.5C3 7.77614 2.77614 8 2.5 8H0.5C0.223858 8 0 7.77614 0 7.5ZM4 7.5C4 7.22386 4.22386 7 4.5 7H14.5C14.7761 7 15 7.22386 15 7.5C15 7.77614 14.7761 8 14.5 8H4.5C4.22386 8 4 7.77614 4 7.5ZM4 10.5C4 10.2239 4.22386 10 4.5 10H11.5C11.7761 10 12 10.2239 12 10.5C12 10.7761 11.7761 11 11.5 11H4.5C4.22386 11 4 10.7761 4 10.5ZM0 13.5C0 13.2239 0.223858 13 0.5 13H2.5C2.77614 13 3 13.2239 3 13.5C3 13.7761 2.77614 14 2.5 14H0.5C0.223858 14 0 13.7761 0 13.5ZM4 13.5C4 13.2239 4.22386 13 4.5 13H14.5C14.7761 13 15 13.2239 15 13.5C15 13.7761 14.7761 14 14.5 14H4.5C4.22386 14 4 13.7761 4 13.5Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),h4=["color"],f4=P.forwardRef(function(r,e){var t=r.color,n=t===void 0?"currentColor":t,s=rn(r,h4);return P.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),P.createElement("path",{d:"M11.5 1C11.7761 1 12 1.22386 12 1.5V13.5C12 13.7761 11.7761 14 11.5 14C11.2239 14 11 13.7761 11 13.5V1.5C11 1.22386 11.2239 1 11.5 1ZM9.5 3C9.77614 3 10 3.22386 10 3.5V13.5C10 13.7761 9.77614 14 9.5 14C9.22386 14 9 13.7761 9 13.5V3.5C9 3.22386 9.22386 3 9.5 3ZM13.5 3C13.7761 3 14 3.22386 14 3.5V13.5C14 13.7761 13.7761 14 13.5 14C13.2239 14 13 13.7761 13 13.5V3.5C13 3.22386 13.2239 3 13.5 3ZM5.5 4C5.77614 4 6 4.22386 6 4.5V13.5C6 13.7761 5.77614 14 5.5 14C5.22386 14 5 13.7761 5 13.5V4.5C5 4.22386 5.22386 4 5.5 4ZM1.5 5C1.77614 5 2 5.22386 2 5.5V13.5C2 13.7761 1.77614 14 1.5 14C1.22386 14 1 13.7761 1 13.5V5.5C1 5.22386 1.22386 5 1.5 5ZM7.5 5C7.77614 5 8 5.22386 8 5.5V13.5C8 13.7761 7.77614 14 7.5 14C7.22386 14 7 13.7761 7 13.5V5.5C7 5.22386 7.22386 5 7.5 5ZM3.5 7C3.77614 7 4 7.22386 4 7.5V13.5C4 13.7761 3.77614 14 3.5 14C3.22386 14 3 13.7761 3 13.5V7.5C3 7.22386 3.22386 7 3.5 7Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),d4=["color"],p4=P.forwardRef(function(r,e){var t=r.color,n=t===void 0?"currentColor":t,s=rn(r,d4);return P.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),P.createElement("path",{d:"M2 5H13C13.5523 5 14 5.44772 14 6V9C14 9.55228 13.5523 10 13 10H2C1.44772 10 1 9.55228 1 9V6C1 5.44772 1.44772 5 2 5ZM0 6C0 4.89543 0.895431 4 2 4H13C14.1046 4 15 4.89543 15 6V9C15 10.1046 14.1046 11 13 11H2C0.89543 11 0 10.1046 0 9V6ZM4.5 6.75C4.08579 6.75 3.75 7.08579 3.75 7.5C3.75 7.91421 4.08579 8.25 4.5 8.25C4.91421 8.25 5.25 7.91421 5.25 7.5C5.25 7.08579 4.91421 6.75 4.5 6.75ZM6.75 7.5C6.75 7.08579 7.08579 6.75 7.5 6.75C7.91421 6.75 8.25 7.08579 8.25 7.5C8.25 7.91421 7.91421 8.25 7.5 8.25C7.08579 8.25 6.75 7.91421 6.75 7.5ZM10.5 6.75C10.0858 6.75 9.75 7.08579 9.75 7.5C9.75 7.91421 10.0858 8.25 10.5 8.25C10.9142 8.25 11.25 7.91421 11.25 7.5C11.25 7.08579 10.9142 6.75 10.5 6.75Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),m4=["color"],g4=P.forwardRef(function(r,e){var t=r.color,n=t===void 0?"currentColor":t,s=rn(r,m4);return P.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),P.createElement("path",{d:"M7.28856 0.796908C7.42258 0.734364 7.57742 0.734364 7.71144 0.796908L13.7114 3.59691C13.8875 3.67906 14 3.85574 14 4.05V10.95C14 11.1443 13.8875 11.3209 13.7114 11.4031L7.71144 14.2031C7.57742 14.2656 7.42258 14.2656 7.28856 14.2031L1.28856 11.4031C1.11252 11.3209 1 11.1443 1 10.95V4.05C1 3.85574 1.11252 3.67906 1.28856 3.59691L7.28856 0.796908ZM2 4.80578L7 6.93078V12.9649L2 10.6316V4.80578ZM8 12.9649L13 10.6316V4.80578L8 6.93078V12.9649ZM7.5 6.05672L12.2719 4.02866L7.5 1.80176L2.72809 4.02866L7.5 6.05672Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),v4=["color"],_4=P.forwardRef(function(r,e){var t=r.color,n=t===void 0?"currentColor":t,s=rn(r,v4);return P.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),P.createElement("path",{d:"M7.5 9.125C8.39746 9.125 9.125 8.39746 9.125 7.5C9.125 6.60254 8.39746 5.875 7.5 5.875C6.60254 5.875 5.875 6.60254 5.875 7.5C5.875 8.39746 6.60254 9.125 7.5 9.125ZM7.5 10.125C8.94975 10.125 10.125 8.94975 10.125 7.5C10.125 6.05025 8.94975 4.875 7.5 4.875C6.05025 4.875 4.875 6.05025 4.875 7.5C4.875 8.94975 6.05025 10.125 7.5 10.125Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),y4=["color"],x4=P.forwardRef(function(r,e){var t=r.color,n=t===void 0?"currentColor":t,s=rn(r,y4);return P.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),P.createElement("path",{d:"M7.49999 3.09998C7.27907 3.09998 7.09999 3.27906 7.09999 3.49998C7.09999 3.72089 7.27907 3.89998 7.49999 3.89998H14.5C14.7209 3.89998 14.9 3.72089 14.9 3.49998C14.9 3.27906 14.7209 3.09998 14.5 3.09998H7.49999ZM7.49998 5.1C7.27907 5.1 7.09998 5.27908 7.09998 5.5C7.09998 5.72091 7.27907 5.9 7.49998 5.9H14.5C14.7209 5.9 14.9 5.72091 14.9 5.5C14.9 5.27908 14.7209 5.1 14.5 5.1H7.49998ZM7.1 7.5C7.1 7.27908 7.27909 7.1 7.5 7.1H14.5C14.7209 7.1 14.9 7.27908 14.9 7.5C14.9 7.72091 14.7209 7.9 14.5 7.9H7.5C7.27909 7.9 7.1 7.72091 7.1 7.5ZM7.49998 9.1C7.27907 9.1 7.09998 9.27908 7.09998 9.5C7.09998 9.72091 7.27907 9.9 7.49998 9.9H14.5C14.7209 9.9 14.9 9.72091 14.9 9.5C14.9 9.27908 14.7209 9.1 14.5 9.1H7.49998ZM7.09998 11.5C7.09998 11.2791 7.27907 11.1 7.49998 11.1H14.5C14.7209 11.1 14.9 11.2791 14.9 11.5C14.9 11.7209 14.7209 11.9 14.5 11.9H7.49998C7.27907 11.9 7.09998 11.7209 7.09998 11.5ZM2.5 9.25003L5 6.00003H0L2.5 9.25003Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),w4=["color"],S4=P.forwardRef(function(r,e){var t=r.color,n=t===void 0?"currentColor":t,s=rn(r,w4);return P.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),P.createElement("path",{d:"M13.3536 2.35355C13.5488 2.15829 13.5488 1.84171 13.3536 1.64645C13.1583 1.45118 12.8417 1.45118 12.6464 1.64645L10.6828 3.61012C9.70652 3.21671 8.63759 3 7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C0.902945 9.08812 2.02314 10.1861 3.36061 10.9323L1.64645 12.6464C1.45118 12.8417 1.45118 13.1583 1.64645 13.3536C1.84171 13.5488 2.15829 13.5488 2.35355 13.3536L4.31723 11.3899C5.29348 11.7833 6.36241 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C14.0971 5.9119 12.9769 4.81391 11.6394 4.06771L13.3536 2.35355ZM9.90428 4.38861C9.15332 4.1361 8.34759 4 7.5 4C4.80285 4 2.52952 5.37816 1.09622 7.50001C1.87284 8.6497 2.89609 9.58106 4.09974 10.1931L9.90428 4.38861ZM5.09572 10.6114L10.9003 4.80685C12.1039 5.41894 13.1272 6.35031 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11C6.65241 11 5.84668 10.8639 5.09572 10.6114Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),T4=["color"],C4=P.forwardRef(function(r,e){var t=r.color,n=t===void 0?"currentColor":t,s=rn(r,T4);return P.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),P.createElement("path",{d:"M7.5 11C4.80285 11 2.52952 9.62184 1.09622 7.50001C2.52952 5.37816 4.80285 4 7.5 4C10.1971 4 12.4705 5.37816 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11ZM7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C1.65639 10.2936 4.30786 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C13.3436 4.70638 10.6921 3 7.5 3ZM7.5 9.5C8.60457 9.5 9.5 8.60457 9.5 7.5C9.5 6.39543 8.60457 5.5 7.5 5.5C6.39543 5.5 5.5 6.39543 5.5 7.5C5.5 8.60457 6.39543 9.5 7.5 9.5Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),E4=["color"],cm=P.forwardRef(function(r,e){var t=r.color,n=t===void 0?"currentColor":t,s=rn(r,E4);return P.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),P.createElement("path",{d:"M2.5 1H12.5C13.3284 1 14 1.67157 14 2.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V2.5C1 1.67157 1.67157 1 2.5 1ZM2.5 2C2.22386 2 2 2.22386 2 2.5V8.3636L3.6818 6.6818C3.76809 6.59551 3.88572 6.54797 4.00774 6.55007C4.12975 6.55216 4.24568 6.60372 4.32895 6.69293L7.87355 10.4901L10.6818 7.6818C10.8575 7.50607 11.1425 7.50607 11.3182 7.6818L13 9.3636V2.5C13 2.22386 12.7761 2 12.5 2H2.5ZM2 12.5V9.6364L3.98887 7.64753L7.5311 11.4421L8.94113 13H2.5C2.22386 13 2 12.7761 2 12.5ZM12.5 13H10.155L8.48336 11.153L11 8.6364L13 10.6364V12.5C13 12.7761 12.7761 13 12.5 13ZM6.64922 5.5C6.64922 5.03013 7.03013 4.64922 7.5 4.64922C7.96987 4.64922 8.35078 5.03013 8.35078 5.5C8.35078 5.96987 7.96987 6.35078 7.5 6.35078C7.03013 6.35078 6.64922 5.96987 6.64922 5.5ZM7.5 3.74922C6.53307 3.74922 5.74922 4.53307 5.74922 5.5C5.74922 6.46693 6.53307 7.25078 7.5 7.25078C8.46693 7.25078 9.25078 6.46693 9.25078 5.5C9.25078 4.53307 8.46693 3.74922 7.5 3.74922Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),b4=["color"],M4=P.forwardRef(function(r,e){var t=r.color,n=t===void 0?"currentColor":t,s=rn(r,b4);return P.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),P.createElement("path",{d:"M5.49998 0.5C5.49998 0.223858 5.72383 0 5.99998 0H7.49998H8.99998C9.27612 0 9.49998 0.223858 9.49998 0.5C9.49998 0.776142 9.27612 1 8.99998 1H7.99998V2.11922C9.09832 2.20409 10.119 2.56622 10.992 3.13572C11.0116 3.10851 11.0336 3.08252 11.058 3.05806L12.058 2.05806C12.3021 1.81398 12.6978 1.81398 12.9419 2.05806C13.186 2.30214 13.186 2.69786 12.9419 2.94194L11.967 3.91682C13.1595 5.07925 13.9 6.70314 13.9 8.49998C13.9 12.0346 11.0346 14.9 7.49998 14.9C3.96535 14.9 1.09998 12.0346 1.09998 8.49998C1.09998 5.13361 3.69904 2.3743 6.99998 2.11922V1H5.99998C5.72383 1 5.49998 0.776142 5.49998 0.5ZM2.09998 8.49998C2.09998 5.51764 4.51764 3.09998 7.49998 3.09998C10.4823 3.09998 12.9 5.51764 12.9 8.49998C12.9 11.4823 10.4823 13.9 7.49998 13.9C4.51764 13.9 2.09998 11.4823 2.09998 8.49998ZM7.49998 8.49998V4.09998C5.06992 4.09998 3.09998 6.06992 3.09998 8.49998C3.09998 10.93 5.06992 12.9 7.49998 12.9C8.715 12.9 9.815 12.4075 10.6112 11.6112L7.49998 8.49998Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),O4=["color"],A4=P.forwardRef(function(r,e){var t=r.color,n=t===void 0?"currentColor":t,s=rn(r,O4);return P.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),P.createElement("path",{d:"M7.75432 0.819537C7.59742 0.726821 7.4025 0.726821 7.24559 0.819537L1.74559 4.06954C1.59336 4.15949 1.49996 4.32317 1.49996 4.5C1.49996 4.67683 1.59336 4.84051 1.74559 4.93046L7.24559 8.18046C7.4025 8.27318 7.59742 8.27318 7.75432 8.18046L13.2543 4.93046C13.4066 4.84051 13.5 4.67683 13.5 4.5C13.5 4.32317 13.4066 4.15949 13.2543 4.06954L7.75432 0.819537ZM7.49996 7.16923L2.9828 4.5L7.49996 1.83077L12.0171 4.5L7.49996 7.16923ZM1.5695 7.49564C1.70998 7.2579 2.01659 7.17906 2.25432 7.31954L7.49996 10.4192L12.7456 7.31954C12.9833 7.17906 13.2899 7.2579 13.4304 7.49564C13.5709 7.73337 13.4921 8.03998 13.2543 8.18046L7.75432 11.4305C7.59742 11.5232 7.4025 11.5232 7.24559 11.4305L1.74559 8.18046C1.50786 8.03998 1.42901 7.73337 1.5695 7.49564ZM1.56949 10.4956C1.70998 10.2579 2.01658 10.1791 2.25432 10.3195L7.49996 13.4192L12.7456 10.3195C12.9833 10.1791 13.2899 10.2579 13.4304 10.4956C13.5709 10.7334 13.4921 11.04 13.2543 11.1805L7.75432 14.4305C7.59742 14.5232 7.4025 14.5232 7.24559 14.4305L1.74559 11.1805C1.50785 11.04 1.42901 10.7334 1.56949 10.4956Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),k4=["color"],P4=P.forwardRef(function(r,e){var t=r.color,n=t===void 0?"currentColor":t,s=rn(r,k4);return P.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),P.createElement("path",{d:"M8.69667 0.0403541C8.90859 0.131038 9.03106 0.354857 8.99316 0.582235L8.0902 6.00001H12.5C12.6893 6.00001 12.8625 6.10701 12.9472 6.27641C13.0319 6.4458 13.0136 6.6485 12.8999 6.80001L6.89997 14.8C6.76167 14.9844 6.51521 15.0503 6.30328 14.9597C6.09135 14.869 5.96888 14.6452 6.00678 14.4178L6.90974 9H2.49999C2.31061 9 2.13748 8.893 2.05278 8.72361C1.96809 8.55422 1.98636 8.35151 2.09999 8.2L8.09997 0.200038C8.23828 0.0156255 8.48474 -0.0503301 8.69667 0.0403541ZM3.49999 8.00001H7.49997C7.64695 8.00001 7.78648 8.06467 7.88148 8.17682C7.97648 8.28896 8.01733 8.43723 7.99317 8.5822L7.33027 12.5596L11.5 7.00001H7.49997C7.353 7.00001 7.21347 6.93534 7.11846 6.8232C7.02346 6.71105 6.98261 6.56279 7.00678 6.41781L7.66968 2.44042L3.49999 8.00001Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),R4=["color"],D4=P.forwardRef(function(r,e){var t=r.color,n=t===void 0?"currentColor":t,s=rn(r,R4);return P.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),P.createElement("path",{d:"M1.49988 2.00012C1.77602 2.00012 1.99988 1.77626 1.99988 1.50012C1.99988 1.22398 1.77602 1.00012 1.49988 1.00012C1.22374 1.00012 0.999878 1.22398 0.999878 1.50012C0.999878 1.77626 1.22374 2.00012 1.49988 2.00012ZM4.49988 2.00012C4.77602 2.00012 4.99988 1.77626 4.99988 1.50012C4.99988 1.22398 4.77602 1.00012 4.49988 1.00012C4.22374 1.00012 3.99988 1.22398 3.99988 1.50012C3.99988 1.77626 4.22374 2.00012 4.49988 2.00012ZM7.99988 1.50012C7.99988 1.77626 7.77602 2.00012 7.49988 2.00012C7.22374 2.00012 6.99988 1.77626 6.99988 1.50012C6.99988 1.22398 7.22374 1.00012 7.49988 1.00012C7.77602 1.00012 7.99988 1.22398 7.99988 1.50012ZM10.4999 2.00012C10.776 2.00012 10.9999 1.77626 10.9999 1.50012C10.9999 1.22398 10.776 1.00012 10.4999 1.00012C10.2237 1.00012 9.99988 1.22398 9.99988 1.50012C9.99988 1.77626 10.2237 2.00012 10.4999 2.00012ZM13.9999 1.50012C13.9999 1.77626 13.776 2.00012 13.4999 2.00012C13.2237 2.00012 12.9999 1.77626 12.9999 1.50012C12.9999 1.22398 13.2237 1.00012 13.4999 1.00012C13.776 1.00012 13.9999 1.22398 13.9999 1.50012ZM1.49988 14.0001C1.77602 14.0001 1.99988 13.7763 1.99988 13.5001C1.99988 13.224 1.77602 13.0001 1.49988 13.0001C1.22374 13.0001 0.999878 13.224 0.999878 13.5001C0.999878 13.7763 1.22374 14.0001 1.49988 14.0001ZM1.99988 10.5001C1.99988 10.7763 1.77602 11.0001 1.49988 11.0001C1.22374 11.0001 0.999878 10.7763 0.999878 10.5001C0.999878 10.224 1.22374 10.0001 1.49988 10.0001C1.77602 10.0001 1.99988 10.224 1.99988 10.5001ZM1.49988 8.00012C1.77602 8.00012 1.99988 7.77626 1.99988 7.50012C1.99988 7.22398 1.77602 7.00012 1.49988 7.00012C1.22374 7.00012 0.999878 7.22398 0.999878 7.50012C0.999878 7.77626 1.22374 8.00012 1.49988 8.00012ZM1.99988 4.50012C1.99988 4.77626 1.77602 5.00012 1.49988 5.00012C1.22374 5.00012 0.999878 4.77626 0.999878 4.50012C0.999878 4.22398 1.22374 4.00012 1.49988 4.00012C1.77602 4.00012 1.99988 4.22398 1.99988 4.50012ZM13.4999 11.0001C13.776 11.0001 13.9999 10.7763 13.9999 10.5001C13.9999 10.224 13.776 10.0001 13.4999 10.0001C13.2237 10.0001 12.9999 10.224 12.9999 10.5001C12.9999 10.7763 13.2237 11.0001 13.4999 11.0001ZM13.9999 7.50012C13.9999 7.77626 13.776 8.00012 13.4999 8.00012C13.2237 8.00012 12.9999 7.77626 12.9999 7.50012C12.9999 7.22398 13.2237 7.00012 13.4999 7.00012C13.776 7.00012 13.9999 7.22398 13.9999 7.50012ZM13.4999 5.00012C13.776 5.00012 13.9999 4.77626 13.9999 4.50012C13.9999 4.22398 13.776 4.00012 13.4999 4.00012C13.2237 4.00012 12.9999 4.22398 12.9999 4.50012C12.9999 4.77626 13.2237 5.00012 13.4999 5.00012ZM4.99988 13.5001C4.99988 13.7763 4.77602 14.0001 4.49988 14.0001C4.22374 14.0001 3.99988 13.7763 3.99988 13.5001C3.99988 13.224 4.22374 13.0001 4.49988 13.0001C4.77602 13.0001 4.99988 13.224 4.99988 13.5001ZM7.49988 14.0001C7.77602 14.0001 7.99988 13.7763 7.99988 13.5001C7.99988 13.224 7.77602 13.0001 7.49988 13.0001C7.22374 13.0001 6.99988 13.224 6.99988 13.5001C6.99988 13.7763 7.22374 14.0001 7.49988 14.0001ZM10.9999 13.5001C10.9999 13.7763 10.776 14.0001 10.4999 14.0001C10.2237 14.0001 9.99988 13.7763 9.99988 13.5001C9.99988 13.224 10.2237 13.0001 10.4999 13.0001C10.776 13.0001 10.9999 13.224 10.9999 13.5001ZM13.4999 14.0001C13.776 14.0001 13.9999 13.7763 13.9999 13.5001C13.9999 13.224 13.776 13.0001 13.4999 13.0001C13.2237 13.0001 12.9999 13.224 12.9999 13.5001C12.9999 13.7763 13.2237 14.0001 13.4999 14.0001ZM3.99988 5.00012C3.99988 4.44784 4.44759 4.00012 4.99988 4.00012H9.99988C10.5522 4.00012 10.9999 4.44784 10.9999 5.00012V10.0001C10.9999 10.5524 10.5522 11.0001 9.99988 11.0001H4.99988C4.44759 11.0001 3.99988 10.5524 3.99988 10.0001V5.00012ZM4.99988 5.00012H9.99988V10.0001H4.99988V5.00012Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),I4=["color"],U4=P.forwardRef(function(r,e){var t=r.color,n=t===void 0?"currentColor":t,s=rn(r,I4);return P.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),P.createElement("path",{d:"M2.25 7.5C2.25 7.22386 2.47386 7 2.75 7H12.25C12.5261 7 12.75 7.22386 12.75 7.5C12.75 7.77614 12.5261 8 12.25 8H2.75C2.47386 8 2.25 7.77614 2.25 7.5Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),F4=["color"],N4=P.forwardRef(function(r,e){var t=r.color,n=t===void 0?"currentColor":t,s=rn(r,F4);return P.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),P.createElement("path",{d:"M6.04995 2.74998C6.04995 2.44623 5.80371 2.19998 5.49995 2.19998C5.19619 2.19998 4.94995 2.44623 4.94995 2.74998V12.25C4.94995 12.5537 5.19619 12.8 5.49995 12.8C5.80371 12.8 6.04995 12.5537 6.04995 12.25V2.74998ZM10.05 2.74998C10.05 2.44623 9.80371 2.19998 9.49995 2.19998C9.19619 2.19998 8.94995 2.44623 8.94995 2.74998V12.25C8.94995 12.5537 9.19619 12.8 9.49995 12.8C9.80371 12.8 10.05 12.5537 10.05 12.25V2.74998Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),L4=["color"],z4=P.forwardRef(function(r,e){var t=r.color,n=t===void 0?"currentColor":t,s=rn(r,L4);return P.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),P.createElement("path",{d:"M6.85357 3.85355L7.65355 3.05353C8.2981 2.40901 9.42858 1.96172 10.552 1.80125C11.1056 1.72217 11.6291 1.71725 12.0564 1.78124C12.4987 1.84748 12.7698 1.97696 12.8965 2.10357C13.0231 2.23018 13.1526 2.50125 13.2188 2.94357C13.2828 3.37086 13.2779 3.89439 13.1988 4.44801C13.0383 5.57139 12.591 6.70188 11.9464 7.34645L7.49999 11.7929L6.35354 10.6465C6.15827 10.4512 5.84169 10.4512 5.64643 10.6465C5.45117 10.8417 5.45117 11.1583 5.64643 11.3536L7.14644 12.8536C7.34171 13.0488 7.65829 13.0488 7.85355 12.8536L8.40073 12.3064L9.57124 14.2572C9.65046 14.3893 9.78608 14.4774 9.9389 14.4963C10.0917 14.5151 10.2447 14.4624 10.3535 14.3536L12.3535 12.3536C12.4648 12.2423 12.5172 12.0851 12.495 11.9293L12.0303 8.67679L12.6536 8.05355C13.509 7.19808 14.0117 5.82855 14.1887 4.58943C14.2784 3.9618 14.2891 3.33847 14.2078 2.79546C14.1287 2.26748 13.9519 1.74482 13.6035 1.39645C13.2552 1.04809 12.7325 0.871332 12.2045 0.792264C11.6615 0.710945 11.0382 0.721644 10.4105 0.8113C9.17143 0.988306 7.80189 1.491 6.94644 2.34642L6.32322 2.96968L3.07071 2.50504C2.91492 2.48278 2.75773 2.53517 2.64645 2.64646L0.646451 4.64645C0.537579 4.75533 0.484938 4.90829 0.50375 5.0611C0.522563 5.21391 0.61073 5.34954 0.742757 5.42876L2.69364 6.59928L2.14646 7.14645C2.0527 7.24022 2.00002 7.3674 2.00002 7.50001C2.00002 7.63261 2.0527 7.75979 2.14646 7.85356L3.64647 9.35356C3.84173 9.54883 4.15831 9.54883 4.35357 9.35356C4.54884 9.1583 4.54884 8.84172 4.35357 8.64646L3.20712 7.50001L3.85357 6.85356L6.85357 3.85355ZM10.0993 13.1936L9.12959 11.5775L11.1464 9.56067L11.4697 11.8232L10.0993 13.1936ZM3.42251 5.87041L5.43935 3.85356L3.17678 3.53034L1.80638 4.90074L3.42251 5.87041ZM2.35356 10.3535C2.54882 10.1583 2.54882 9.8417 2.35356 9.64644C2.1583 9.45118 1.84171 9.45118 1.64645 9.64644L0.646451 10.6464C0.451188 10.8417 0.451188 11.1583 0.646451 11.3535C0.841713 11.5488 1.1583 11.5488 1.35356 11.3535L2.35356 10.3535ZM3.85358 11.8536C4.04884 11.6583 4.04885 11.3417 3.85359 11.1465C3.65833 10.9512 3.34175 10.9512 3.14648 11.1465L1.14645 13.1464C0.95119 13.3417 0.951187 13.6583 1.14645 13.8535C1.34171 14.0488 1.65829 14.0488 1.85355 13.8536L3.85358 11.8536ZM5.35356 13.3535C5.54882 13.1583 5.54882 12.8417 5.35356 12.6464C5.1583 12.4512 4.84171 12.4512 4.64645 12.6464L3.64645 13.6464C3.45119 13.8417 3.45119 14.1583 3.64645 14.3535C3.84171 14.5488 4.1583 14.5488 4.35356 14.3535L5.35356 13.3535ZM9.49997 6.74881C10.1897 6.74881 10.7488 6.1897 10.7488 5.5C10.7488 4.8103 10.1897 4.25118 9.49997 4.25118C8.81026 4.25118 8.25115 4.8103 8.25115 5.5C8.25115 6.1897 8.81026 6.74881 9.49997 6.74881Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),B4=["color"],j4=P.forwardRef(function(r,e){var t=r.color,n=t===void 0?"currentColor":t,s=rn(r,B4);return P.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),P.createElement("path",{d:"M0.5 4C0.223858 4 0 4.22386 0 4.5V10.5C0 10.7761 0.223858 11 0.5 11H14.5C14.7761 11 15 10.7761 15 10.5V4.5C15 4.22386 14.7761 4 14.5 4H0.5ZM1 10V5H2.075V7.5C2.075 7.73472 2.26528 7.925 2.5 7.925C2.73472 7.925 2.925 7.73472 2.925 7.5V5H4.075V6.5C4.075 6.73472 4.26528 6.925 4.5 6.925C4.73472 6.925 4.925 6.73472 4.925 6.5V5H6.075V6.5C6.075 6.73472 6.26528 6.925 6.5 6.925C6.73472 6.925 6.925 6.73472 6.925 6.5V5H8.075V7.5C8.075 7.73472 8.26528 7.925 8.5 7.925C8.73472 7.925 8.925 7.73472 8.925 7.5V5H10.075V6.5C10.075 6.73472 10.2653 6.925 10.5 6.925C10.7347 6.925 10.925 6.73472 10.925 6.5V5H12.075V6.5C12.075 6.73472 12.2653 6.925 12.5 6.925C12.7347 6.925 12.925 6.73472 12.925 6.5V5H14V10H1Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),V4=["color"],G4=P.forwardRef(function(r,e){var t=r.color,n=t===void 0?"currentColor":t,s=rn(r,V4);return P.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),P.createElement("path",{d:"M2.5 4C2.22386 4 2 4.22386 2 4.5C2 4.77614 2.22386 5 2.5 5H12.5C12.7761 5 13 4.77614 13 4.5C13 4.22386 12.7761 4 12.5 4H2.5ZM2 7.5C2 7.22386 2.22386 7 2.5 7H12.5C12.7761 7 13 7.22386 13 7.5C13 7.77614 12.7761 8 12.5 8H2.5C2.22386 8 2 7.77614 2 7.5ZM2 10.5C2 10.2239 2.22386 10 2.5 10H12.5C12.7761 10 13 10.2239 13 10.5C13 10.7761 12.7761 11 12.5 11H2.5C2.22386 11 2 10.7761 2 10.5Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),H4=["color"],t2=P.forwardRef(function(r,e){var t=r.color,n=t===void 0?"currentColor":t,s=rn(r,H4);return P.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),P.createElement("path",{d:"M4 6H11L7.5 10.5L4 6Z",fill:n}))}),W4=["color"],n2=P.forwardRef(function(r,e){var t=r.color,n=t===void 0?"currentColor":t,s=rn(r,W4);return P.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),P.createElement("path",{d:"M4 9H11L7.5 4.5L4 9Z",fill:n}))}),q4=["color"],r2=P.forwardRef(function(r,e){var t=r.color,n=t===void 0?"currentColor":t,s=rn(r,q4);return P.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),P.createElement("path",{d:"M7.49998 1L6.92321 2.00307L1.17498 12L0.599976 13H1.7535H13.2464H14.4L13.825 12L8.07674 2.00307L7.49998 1ZM7.49998 3.00613L2.3285 12H12.6714L7.49998 3.00613Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))});function Z4(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Y4(r){var e=Z4(r,"string");return typeof e=="symbol"?e:String(e)}function X4(r,e,t){return e=Y4(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Fv(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function um(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Fv(Object(t),!0).forEach(function(n){X4(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Fv(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}const es={value:0,fpsLimit:60,isOverLimit:0},Mc=r=>(r==null?void 0:r.reduce((e,t)=>e+t,0))/r.length;class Q4{constructor(e={}){this.names=[""],this.finished=[],this.gl=void 0,this.extension=void 0,this.query=void 0,this.paused=!1,this.overClock=!1,this.queryHasResult=!1,this.queryCreated=!1,this.isWebGL2=!0,this.memAccums=[],this.gpuAccums=[],this.activeAccums=[],this.logsAccums={mem:[],gpu:[],cpu:[],fps:[],fpsFixed:[]},this.fpsChart=[],this.gpuChart=[],this.cpuChart=[],this.memChart=[],this.paramLogger=()=>{},this.glFinish=()=>{},this.chartLogger=()=>{},this.chartLen=60,this.maxMemory=1500,this.chartHz=10,this.startCpuProfiling=!1,this.lastCalculateFixed=0,this.chartFrame=0,this.gpuTimeProcess=0,this.chartTime=0,this.activeQueries=0,this.circularId=0,this.detected=0,this.frameId=0,this.rafId=0,this.idleCbId=0,this.checkQueryId=0,this.uuid=void 0,this.currentCpu=0,this.currentMem=0,this.paramFrame=0,this.paramTime=0,this.now=()=>{},this.t0=0,window.GLPerf=window.GLPerf||{},Object.assign(this,e),this.fpsChart=new Array(this.chartLen).fill(0),this.gpuChart=new Array(this.chartLen).fill(0),this.cpuChart=new Array(this.chartLen).fill(0),this.memChart=new Array(this.chartLen).fill(0),this.now=()=>window.performance&&window.performance.now?window.performance.now():Date.now(),this.initGpu(),this.is120hz()}initGpu(){this.uuid=Hm.generateUUID(),this.gl&&(this.isWebGL2=!0,this.extension||(this.extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")),this.extension===null&&(this.isWebGL2=!1))}is120hz(){let e=0;const t=n=>{++e<20?this.rafId=window.requestAnimationFrame(t):(this.detected=Math.ceil(1e3*e/(n-this.t0)/70),window.cancelAnimationFrame(this.rafId)),this.t0||(this.t0=n)};this.rafId=window.requestAnimationFrame(t)}addUI(e){this.names.indexOf(e)===-1&&(this.names.push(e),this.gpuAccums.push(0),this.activeAccums.push(!1))}nextFps(e){const t=16.666666666666668,n=t-e.timeRemaining(),s=t*es.fpsLimit/10/n;s<0||(es.value=s,es.isOverLimit<25?es.isOverLimit++:tt.setState({overclockingFps:!0}))}nextFrame(e){this.frameId++;const t=e||this.now();let n=t-this.paramTime,s=0;if(this.frameId<=1)this.paramFrame=this.frameId,this.paramTime=t;else if(t>=this.paramTime){this.maxMemory=window.performance.memory?window.performance.memory.jsHeapSizeLimit/1048576:0;const i=this.frameId-this.paramFrame,o=i*1e3/n,a=tt.getState().overclockingFps?es.value:o;if(s=this.isWebGL2?this.gpuAccums[0]:this.gpuAccums[0]/n,this.isWebGL2?this.gpuAccums[0]=0:Promise.all(this.finished).then(()=>{this.gpuAccums[0]=0,this.finished=[]}),this.currentMem=Math.round(window.performance&&window.performance.memory?window.performance.memory.usedJSHeapSize/1048576:0),window.performance&&this.startCpuProfiling){window.performance.mark("cpu-finished");const c=performance.measure("cpu-duration","cpu-started","cpu-finished");this.currentCpu=c.duration,this.logsAccums.cpu.push(this.currentCpu),this.startCpuProfiling=!1}this.logsAccums.mem.push(this.currentMem),this.logsAccums.fpsFixed.push(o),this.logsAccums.fps.push(a),this.logsAccums.gpu.push(s),this.overClock&&typeof window.requestIdleCallback<"u"&&(es.isOverLimit>0&&a>o?es.isOverLimit--:tt.getState().overclockingFps&&tt.setState({overclockingFps:!1})),t>=this.paramTime+180&&(this.paramLogger({cpu:Mc(this.logsAccums.cpu),gpu:Mc(this.logsAccums.gpu),mem:Mc(this.logsAccums.mem),fps:Mc(this.logsAccums.fps),duration:Math.round(n),maxMemory:this.maxMemory,frameCount:i}),this.logsAccums.mem=[],this.logsAccums.fps=[],this.logsAccums.gpu=[],this.logsAccums.cpu=[],this.paramFrame=this.frameId,this.paramTime=t),this.overClock&&t-this.lastCalculateFixed>=2*1e3&&(this.lastCalculateFixed=e,es.fpsLimit=Math.round(Mc(this.logsAccums.fpsFixed)/10)*100,tt.setState({fpsLimit:es.fpsLimit/10}),this.logsAccums.fpsFixed=[],this.paramFrame=this.frameId,this.paramTime=t)}if(!this.detected||!this.chartFrame)this.chartFrame=this.frameId,this.chartTime=t,this.circularId=0;else{const i=t-this.chartTime;let o=this.chartHz*i/1e3;for(;--o>0&&this.detected;){const c=(this.frameId-this.chartFrame)/i*1e3,h=tt.getState().overclockingFps?es.value:c;this.fpsChart[this.circularId%this.chartLen]=h;const f=1e3/this.currentMem,d=this.currentCpu,p=(this.isWebGL2?this.gpuAccums[1]*2:Math.round(this.gpuAccums[1]/n*100))+4;p>0&&(this.gpuChart[this.circularId%this.chartLen]=p),d>0&&(this.cpuChart[this.circularId%this.chartLen]=d),f>0&&(this.memChart[this.circularId%this.chartLen]=f);for(let g=0;g<this.names.length;g++)this.chartLogger({i:g,data:{fps:this.fpsChart,gpu:this.gpuChart,cpu:this.cpuChart,mem:this.memChart},circularId:this.circularId});this.circularId++,this.chartFrame=this.frameId,this.chartTime=t}}}startGpu(){const e=this.gl,t=this.extension;if(!(!e||!t)&&this.isWebGL2){let n=!1,s,i;if(this.query){this.queryHasResult=!1;let o=this.query;if(n=e.getQueryParameter(o,e.QUERY_RESULT_AVAILABLE),s=e.getParameter(t.GPU_DISJOINT_EXT),n&&!s){i=e.getQueryParameter(this.query,e.QUERY_RESULT);const a=i*1e-6;n&&a>0&&(s||this.activeAccums.forEach((c,h)=>{this.gpuAccums[h]=a}))}}(n||!this.query)&&(this.queryCreated=!0,this.query=e.createQuery(),e.beginQuery(t.TIME_ELAPSED_EXT,this.query))}}endGpu(){const e=this.extension,t=this.gl;this.isWebGL2&&this.queryCreated&&t.getQuery(e.TIME_ELAPSED_EXT,t.CURRENT_QUERY)&&t.endQuery(e.TIME_ELAPSED_EXT)}begin(e){this.startGpu(),this.updateAccums(e)}end(e){this.endGpu(),this.updateAccums(e)}updateAccums(e){let t=this.names.indexOf(e);t===-1&&(t=this.names.length,this.addUI(e));const n=this.now();this.activeAccums[t]=!this.activeAccums[t],this.t0=n}}const K4=r=>{r.forEach((e,t)=>{const{meshes:n}=e;if(!n)return;let s={total:0,type:"Triangle",data:[]};Object.keys(n).forEach(i=>{const o=n[i],{geometry:a,material:c}=o;let h=a.index;const f=a.attributes.position;if(!f)return;let d=1;c.wireframe===!0&&(d=0);const p=h!==null?h.count:f.count,g=a.drawRange.start*d,_=a.drawRange.count*d,y=g,x=Math.min(p,g+_)-1;let w=1;const T=o.count||1;let b="Triangle",E=0;o.isMesh?c.wireframe===!0?(b="Line",w=w/2):(b="Triangle",w=w/3):o.isLine?(b="Line",o.isLineSegments?w=w/2:o.isLineLoop?w=w:w=w-1):o.isPoints?(b="Point",w=w):o.isSprite&&(b="Triangle",w=w/3);const C=Math.round(Math.max(0,x-y+1)*(w*T));C>E&&(E=C,s.type=b),s.total+=C,s.data.push({drawCount:C,type:b}),o.userData.drawCount={type:b,count:C}}),e.drawCounts=s})},J4=Go.prototype.updateMatrixWorld,$4=Go.prototype.updateWorldMatrix,Nv=Go.prototype.updateMatrix;let el={value:0},Zs={value:0};const eb=r=>{let e=""+r;return e=e.match("^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"),e!==null},Lv=(r,e)=>{r.defines||(r.defines={}),r.defines&&!r.defines.muiPerf&&(r.defines=Object.assign(r.defines||{},{muiPerf:r.uuid}));const t=r.uuid;return e[t]||(e[t]={meshes:{},material:r},r.needsUpdate=!0),r.needsUpdate=!1,t},tb=r=>r==="muiPerf",tt=tS(r=>({log:null,paused:!1,triggerProgramsUpdate:0,customData:0,fpsLimit:60,overclockingFps:!1,chart:{data:{fps:[],cpu:[],gpu:[],mem:[]},circularId:0},gl:void 0,objectWithMaterials:null,scene:void 0,programs:new Map,sceneLength:void 0,tab:"infos"})),s2=({trackCPU:r,overClock:e,chart:t,deepAnalyze:n,matrixUpdate:s})=>{const{gl:i,scene:o}=lt();tt.setState({gl:i,scene:o});const a=P.useMemo(()=>{const c=new Q4({trackGPU:!0,overClock:e,chartLen:t?t.length:120,chartHz:t?t.hz:60,gl:i.getContext(),chartLogger:d=>{tt.setState({chart:d})},paramLogger:d=>{tt.setState({log:{maxMemory:d.maxMemory,gpu:d.gpu,cpu:d.cpu,mem:d.mem,fps:d.fps,totalTime:d.duration,frameCount:d.frameCount}})}}),h=new Map,f=new Map;return Object.defineProperty(hl.prototype,"onBeforeRender",{get(){return(...d)=>{var p;c&&c.begin("profiler"),(p=h.get(this))===null||p===void 0||p(...d)}},set(d){h.set(this,d)},configurable:!0}),Object.defineProperty(hl.prototype,"onAfterRender",{get(){return(...d)=>{var p;c&&c.end("profiler"),(p=f.get(this))===null||p===void 0||p(...d)}},set(d){f.set(this,d)},configurable:!0}),c},[]);return P.useEffect(()=>{a&&(a.overClock=e||!1,e===!1&&(tt.setState({overclockingFps:!1}),es.value=0,es.isOverLimit=0),a.chartHz=(t==null?void 0:t.hz)||60,a.chartLen=(t==null?void 0:t.length)||120)},[e,a,t==null?void 0:t.length,t==null?void 0:t.hz]),P.useEffect(()=>{s&&(Go.prototype.updateMatrixWorld=function(){(this.matrixWorldNeedsUpdate||arguments[0])&&el.value++,J4.apply(this,arguments)},Go.prototype.updateWorldMatrix=function(){el.value++,$4.apply(this,arguments)},Go.prototype.updateMatrix=function(){Zs.value++,Nv.apply(this,arguments)}),i.info.autoReset=!1;let c=null,h=null;if(i.info)return c=xT(function(){tt.getState().paused&&tt.setState({paused:!1}),window.performance&&(window.performance.mark("cpu-started"),a.startCpuProfiling=!0),Zs.value-=1,el.value=0,Zs.value=0,i.info&&i.info.reset()}),h=wT(function(){if(a&&!a.paused&&(a.nextFrame(window.performance.now()),e&&typeof window.requestIdleCallback<"u"&&(a.idleCbId=requestIdleCallback(a.nextFps))),n){var d,p;const g={},_=new Map;o.traverse(function(x){if((x instanceof ua||x instanceof FS)&&x.material){let w=x.material.uuid;Array.isArray(x.material)&&x.material.length>1?w=Lv(x.material[1],g):w=Lv(x.material,g),g[w].meshes[x.uuid]=x}}),i==null||(d=i.info)===null||d===void 0||(p=d.programs)===null||p===void 0||p.forEach(y=>{const x=y.cacheKey.split(","),w=x[x.findIndex(tb)+1];if(eb(w)&&g[w]){const{material:T,meshes:b}=g[w];_.set(w,{program:y,material:T,meshes:b,drawCounts:{total:0,type:"triangle",data:[]},expand:!1,visible:!0})}}),_.size!==tt.getState().programs.size&&(K4(_),tt.setState({programs:_,triggerProgramsUpdate:tt.getState().triggerProgramsUpdate++}))}}),()=>{a&&(typeof window.cancelIdleCallback<"u"&&window.cancelIdleCallback(a.idleCbId),window.cancelAnimationFrame(a.rafId),window.cancelAnimationFrame(a.checkQueryId)),s&&(Go.prototype.updateMatrixWorld=Nv),c(),h()}},[a,i,r,t,s]),P.useEffect(()=>{const c=ST(function(){return a&&(a.paused=!0,Zs.value=0,el.value=0,tt.setState({paused:!0,log:{maxMemory:0,gpu:0,mem:0,cpu:0,fps:0,totalTime:0,frameCount:0}})),!1});return()=>{c()}},[]),null},nb=pn("div",{position:"fixed",top:0,right:0,zIndex:9999,fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif`,backgroundColor:"rgba(36, 36, 36, .9)",color:"#fff",margin:0,minHeight:"100px",padding:"4px 0","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",userSelect:"none","&.top-left":{right:"initial",left:0},"&.bottom-left":{right:"initial",top:"initial",bottom:0,left:0,".__perf_toggle":{top:"-20px",bottom:"initial"}},"&.bottom-right":{top:"initial",bottom:0,".__perf_toggle":{top:"-20px",bottom:"initial"}},"&.minimal":{backgroundColor:"rgba(36, 36, 36, .75)"},"*":{margin:"0",padding:"0",border:"0",fontSize:"100%",lineHeight:"1",verticalAlign:"baseline"}}),Ip=pn("small",{position:"absolute",right:0,fontSize:"10px"}),Ln=pn("div",{display:"inline-flex",fontStyle:"normal",padding:0,lineHeight:"13px",fontSize:"14px",width:"62px",position:"relative",pointerEvents:"auto",cursor:"default",fontWeight:500,letterSpacing:"0px",textAlign:"left",height:"29px",whiteSpace:"nowrap",justifyContent:"space-evenly",fontVariantNumeric:"tabular-nums",small:{paddingLeft:"12px"},svg:{padding:0,color:"rgba(145, 145, 145, 0.3)",fontSize:"40px",position:"absolute",zIndex:1,maxHeight:"20px",left:" 50%",marginLeft:"-23px",top:"4px"}}),dr=pn("span",{verticalAlign:"bottom",position:"absolute",bottom:"5px",color:"rgba(101, 197, 188, 1)",textAlign:"right",letterSpacing:"1px",fontSize:"8px",fontWeight:"500",width:"60px"}),rb=pn("div",{display:"flex"}),sb=pn("div",{backgroundColor:"#404040",padding:"6px",display:"block",fontSize:"12px",marginBottom:"6px",cursor:"pointer","*":{cursor:"pointer !important"},"> span":{},small:{fontSize:"9px"},"> b":{marginRight:"4px",cursor:"pointer"}}),ib=pn("div",{height:"66px",overflow:"hidden",position:"absolute",pointerEvents:"none",display:"flex",top:"0px",justifyContent:"center",width:"100%",minWidth:"310px",margin:"0 auto",canvas:{background:"transparent !important",position:"absolute !important"}}),ob=pn("div",{textAlign:"center",fontWeight:700,fontSize:"12px",lineHeight:"12px",display:"flex",justifyContent:"center",alignItems:"center",verticalAlign:"middle",color:"#f1f1f1",padding:"7px",width:"100%",backgroundColor:"rgba(36, 36, 37, 0.8)",zIndex:1,position:"absolute",height:"100%"}),sg=pn("div",{pointerEvents:"auto",justifyContent:"center",cursor:"pointer",fontSize:"12px",backgroundColor:"rgb(41, 43, 45)",marginTop:"6px",width:"auto",margin:"0",color:"rgba(145, 145, 145, 1)",textAlign:"center",display:"inline-block",verticalAlign:"middle",padding:"4px 6px","&.__perf_toggle_tab_active":{backgroundColor:"rgb(31 31 31)"},svg:{width:"12px",height:"12px",float:"left"}}),ab=pn("div",{pointerEvents:"auto",justifyContent:"center",cursor:"pointer",fontSize:"12px",float:"right",backgroundColor:"rgb(41, 43, 45)",width:"auto",margin:"0",color:"rgba(145, 145, 145, 1)",textAlign:"center",display:"inline-block",verticalAlign:"middle",padding:"4px 6px","&.__perf_toggle_tab_active":{backgroundColor:"rgb(31 31 31)"},svg:{width:"12px",height:"12px",float:"left"}}),lb=pn("div",{padding:"4px 6px",fontSize:"12px",pointerEvents:"auto"}),cb=pn("span",{fontWeight:"bold",letterSpacing:"0.08em",maxWidth:"145px",overflow:"hidden",textOverflow:"ellipsis",display:"inline-block",verticalAlign:"middle",fontSize:"11px",marginRight:"10px"}),ub=pn("div",{maxHeight:"50vh",overflowY:"auto",marginTop:"38px"}),hb=pn("div",{marginTop:"0"}),zv=pn("div",{display:"flex",position:"relative",fontWeight:"bold",color:"#fff",lineHeight:"14px",svg:{marginRight:"4px",display:"inline-block"}}),i2=pn("ul",{display:"block",position:"relative",paddingLeft:"10px",margin:"6px 6px",img:{maxHeight:"60px",maxWidth:"100%",margin:"6px auto",display:"block"},"&:after":{content:"",position:"absolute",left:"0px",top:"0px",width:"1px",height:"100%",backgroundColor:"grey",transform:"translateX(-50%)",maxHeight:"50vh",overflowY:"auto"},li:{borderBottom:"1px solid #313131",display:"block",padding:"4px",margin:0,lineHeight:1,verticalAlign:"middle",height:"24px"},b:{fontWeight:"bold"},small:{textAlign:"revert",letterSpacing:"1px",fontSize:"10px",fontWeight:"500",marginLeft:"2px",color:"rgb(101, 197, 188)"}}),o2=pn("button",{fontWeight:"bold",letterSpacing:"0.02em",backgroundColor:"rgb(41, 43, 45)",color:"rgb(211, 211, 211)",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer",display:"block",verticalAlign:"middle",fontSize:"11px",padding:"5px",margin:"4px auto"}),fb=pn("div",{display:"flex",justifyContent:"center",cursor:"pointer",fontSize:"12px",backgroundColor:"rgb(41, 43, 45)",marginTop:"6px",width:"auto",margin:"0 auto",color:"rgba(145, 145, 145, 1)",textAlign:"center",position:"absolute",right:0,bottom:" -20px",svg:{width:"12px",height:"12px",float:"left"}}),db=pn("li",{display:"flex !important",height:"auto !important",span:{height:"40px",display:"block",position:"relative"},b:{paddingLeft:"12px"}}),Jr=P.memo(({isPerf:r,color:e,colorBlind:t,customData:n,isMemory:s,isShadersInfo:i,metric:o,fontSize:a,offsetY:c=0,offsetX:h,round:f,hasInstance:d})=>{const{width:p,height:g}=lt(x=>x.viewport),_=P.useRef(null),y=P.useRef(null);return mn(function(){const w=tt.getState().gl,T=tt.getState().log;if(!T||!_.current||(n&&(_.current.text=tt.getState().customData),!o))return;let b=T[o];if(i){var E;b=(E=w.info.programs)===null||E===void 0?void 0:E.length}else o==="matriceCount"?b=Zs.value:!r&&w.info.render&&(b=(s?w.info.memory:w.info.render)[o]);if(o==="fps"&&(_.current.color=tt.getState().overclockingFps?Bn(t).overClock.toString():`rgb(${Bn(t).fps.toString()})`),_.current.text=(Math.round(b*Math.pow(10,f))/Math.pow(10,f)).toFixed(f),d){const C=w.info.instance;if(typeof C>"u"&&o!=="matriceCount")return;let A;o==="matriceCount"?A=el.value:A=C[o],A>0?(_.current.fontSize=a/1.15,y.current.fontSize=b>0?a/1.4:a,_.current.position.y=g/2-c-a/1.9,y.current.text=" ±	"+(Math.round(A*Math.pow(10,f))/Math.pow(10,f)).toFixed(f)):(_.current.position.y=g/2-c-a,_.current.fontSize=a)}Zs.value-=1,_.current.updateMatrix(),_.current.matrixWorld.copy(_.current.matrix)}),D.jsxs(P.Suspense,{fallback:null,children:[D.jsxs(am,{textAlign:"justify",matrixAutoUpdate:!1,ref:_,fontSize:a,position:[-p/2+h+a,g/2-c-a,0],color:e,characters:"0123456789",onUpdate:x=>{x.updateMatrix(),Zs.value-=1,x.matrixWorld.copy(x.matrix)},children:[D.jsx("meshBasicMaterial",{blending:k1}),"0"]}),d&&D.jsx(am,{textAlign:"justify",matrixAutoUpdate:!1,ref:y,fontSize:8,position:[-p/2+h+a,g/2-c-a*1.15,0],color:"lightgrey",characters:"0123456789",onUpdate:x=>{x.updateMatrix(),Zs.value-=1,x.matrixWorld.copy(x.matrix)},children:D.jsx("meshBasicMaterial",{blending:k1})})]})}),pb=({colorBlind:r,customData:e,minimal:t,matrixUpdate:n})=>D.jsxs(D.Fragment,{children:[D.jsx(Jr,{colorBlind:r,color:`rgb(${Bn(r).fps.toString()})`,isPerf:!0,metric:"fps",fontSize:14,offsetX:140,round:0}),D.jsx(Jr,{color:`rgb(${Bn(r).cpu.toString()})`,isPerf:!0,metric:"cpu",fontSize:14,offsetX:72,round:3}),D.jsx(Jr,{color:`rgb(${Bn(r).gpu.toString()})`,isPerf:!0,metric:"gpu",fontSize:14,offsetX:10,round:3}),t?null:D.jsxs(D.Fragment,{children:[D.jsx(Jr,{metric:"calls",fontSize:14,offsetX:200,round:0,hasInstance:!0}),D.jsx(Jr,{metric:"triangles",fontSize:14,offsetX:260,round:0,hasInstance:!0}),D.jsx(Jr,{isMemory:!0,metric:"geometries",fontSize:14,offsetY:30,offsetX:0,round:0}),D.jsx(Jr,{isMemory:!0,metric:"textures",fontSize:14,offsetY:30,offsetX:80,round:0}),D.jsx(Jr,{isShadersInfo:!0,metric:"programs",fontSize:14,offsetY:30,offsetX:140,round:0}),D.jsx(Jr,{metric:"lines",fontSize:14,offsetY:30,offsetX:200,round:0,hasInstance:!0}),D.jsx(Jr,{metric:"points",fontSize:14,offsetY:30,offsetX:260,round:0,hasInstance:!0}),n&&D.jsx(Jr,{isPerf:!0,metric:"matriceCount",fontSize:14,offsetY:30,offsetX:320,round:0,hasInstance:!0})]}),e&&D.jsx(Jr,{color:`rgb(${Bn(r).custom.toString()})`,customData:e,fontSize:14,offsetY:0,offsetX:t?200:320,round:0})]}),mb=({colorBlind:r,minimal:e,chart:t={length:30,hz:15}})=>{const n=P.useMemo(()=>({fps:new Float32Array(t.length*3),cpu:new Float32Array(t.length*3),gpu:new Float32Array(t.length*3)}),[t]),s=P.useRef(null),i=P.useRef(null),o=P.useRef(null),a=P.useRef(null),c=P.useMemo(()=>new ye(0,0,0),[]),h=(f,d=1,p,g)=>{let _=0;const{width:y,height:x}=g,w=tt.getState().chart.data[f];if(!w||w.length===0)return;const T=e?2:6,b=e?12:50;let E=w.length;for(let C=0;C<E;C++){let A=(tt.getState().chart.circularId+C+1)%E;w[A]!==void 0&&(w[A]>_&&(_=w[A]*d),c.set(T+C/(E-1)*(y-T*2)-y/2,Math.min(100,w[A])*d/100*(x-T*2-b)-x/2,0),c.toArray(p.attributes.position.array,C*3))}p.attributes.position.needsUpdate=!0};return mn(function({viewport:d}){h("fps",1,s.current,d),i.current&&i.current.color.set(tt.getState().overclockingFps?Bn(r).overClock.toString():`rgb(${Bn(r).fps.toString()})`),h("gpu",5,o.current,d),h("cpu",5,a.current,d)}),D.jsxs(D.Fragment,{children:[D.jsxs("line",{children:[D.jsx("bufferGeometry",{ref:s,children:D.jsx("bufferAttribute",{attach:"attributes-position",count:t.length,array:n.fps,itemSize:3,usage:Uc,needsUpdate:!0})}),D.jsx("lineBasicMaterial",{ref:i,color:`rgb(${Bn(r).fps.toString()})`,transparent:!0,opacity:.5})]}),D.jsxs("line",{children:[D.jsx("bufferGeometry",{ref:o,children:D.jsx("bufferAttribute",{attach:"attributes-position",count:t.length,array:n.gpu,itemSize:3,usage:Uc,needsUpdate:!0})}),D.jsx("lineBasicMaterial",{color:`rgb(${Bn(r).gpu.toString()})`,transparent:!0,opacity:.5})]}),D.jsxs("line",{children:[D.jsx("bufferGeometry",{ref:a,children:D.jsx("bufferAttribute",{attach:"attributes-position",count:t.length,array:n.cpu,itemSize:3,usage:Uc,needsUpdate:!0})}),D.jsx("lineBasicMaterial",{color:`rgb(${Bn(r).cpu.toString()})`,transparent:!0,opacity:.5})]})]})},gb=({colorBlind:r,chart:e,customData:t,matrixUpdate:n,showGraph:s=!0,antialias:i=!0,minimal:o})=>{const a=P.useRef(void 0),c=tt(h=>h.paused);return D.jsxs(ib,{style:{display:"flex",position:"absolute",height:`${o?37:s?100:60}px`,minWidth:`${o?"100px":t?"370px":"310px"}`},children:[D.jsx(Sy,{ref:a,orthographic:!0,dpr:i?[1,2]:1,gl:{antialias:!0,alpha:!0,stencil:!1,depth:!1},onCreated:({scene:h})=>{h.traverse(f=>{f.matrixWorldAutoUpdate=!1,f.matrixAutoUpdate=!1})},flat:!0,style:{marginBottom:"-42px",position:"relative",pointerEvents:"none",background:"transparent !important",height:`${o?37:s?100:60}px`},children:c?null:D.jsxs(D.Fragment,{children:[D.jsx(vb,{}),D.jsx(pb,{customData:t,minimal:o,matrixUpdate:n}),s&&D.jsx(mb,{colorBlind:r,minimal:o,chart:e})]})}),c&&D.jsxs(ob,{children:[D.jsx(N4,{})," PAUSED"]})]})},vb=()=>(mn(function({gl:e,scene:t,camera:n}){n.updateMatrix(),Zs.value-=1,n.matrixWorld.copy(n.matrix),n.matrixWorldInverse.copy(n.matrixWorld).invert(),e.render(t,n),el.value=0,Zs.value=0},1/0),null);function _b(r,e){if(r==null)return{};var t={},n=Object.keys(r),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(t[s]=r[s]);return t}function yb(r,e){if(r==null)return{};var t=_b(r,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}const xb=["portal","className","children"],wb=P.forwardRef((r,e)=>{let{portal:t,className:n,children:s}=r,i=yb(r,xb);const o=lt(f=>f.gl),a=P.useRef(null),c=P.useRef(null),h=(t==null?void 0:t.current)!=null?t.current:o.domElement.parentNode;return P.useLayoutEffect(()=>{if(!a.current||!h)return;const f=document.createElement("div"),d=c.current=U_(f);return h.appendChild(f),()=>{d.unmount(),c.current=null,h.removeChild(f)}},[h]),P.useLayoutEffect(()=>{const f=c.current;f&&f.render(D.jsx("div",{ref:e,className:n,children:s}))}),D.jsx("group",um(um({},i),{},{ref:a}))}),Bv=(r,e)=>{const t=s=>{switch(s){case 1e3:return"RepeatWrapping";case 1001:return"ClampToEdgeWrapping";case 1002:return"MirroredRepeatWrapping";default:return"ClampToEdgeWrapping"}},n=s=>{switch(s){case 3e3:return"LinearEncoding";case 3001:return"sRGBEncoding";case 3002:return"RGBEEncoding";case 3003:return"LogLuvEncoding";case 3004:return"RGBM7Encoding";case 3005:return"RGBM16Encoding";case 3006:return"RGBDEncoding";case 3007:return"GammaEncoding";default:return"ClampToEdgeWrapping"}};return{name:r,url:e.image.currentSrc,encoding:n(e.encoding),wrapT:t(e.image.wrapT),flipY:e.flipY.toString()}},Sb=({program:r,material:e,setTexNumber:t})=>{const n=tt(o=>o.gl),[s,i]=P.useState(null);return P.useEffect(()=>{if(n){const o=r==null?void 0:r.getUniforms();let a=0;const c=new Map;o.seq.forEach(h=>{if(!h.id.includes("uTroika")&&h.id!=="isOrthographic"&&h.id!=="uvTransform"&&h.id!=="lightProbe"&&h.id!=="projectionMatrix"&&h.id!=="viewMatrix"&&h.id!=="normalMatrix"&&h.id!=="modelMatrix"&&h.id!=="modelViewMatrix"){let f=[],d={name:h.id};h.cache&&(h.cache.forEach(p=>{typeof p<"u"&&f.push(p.toString().substring(0,4))}),d.value=f.join(),e[h.id]&&e[h.id].image&&e[h.id].image&&(a++,d.value=Bv(h.id,e[h.id])),d.value||(d.value="empty"),c.set(h.id,d))}}),e.uniforms&&Object.keys(e.uniforms).forEach(h=>{const f=e.uniforms[h];if(f.value){const{value:d}=f;let p={name:h};if(h.includes("uTroika"))return;if(d instanceof gu)a++,p.value=Bv(h,d);else{let g=JSON.stringify(d);try{g=JSON.stringify(d)}catch{g=d.toString()}p.value=g}c.set(h,p)}}),a>0&&t(a),i(c)}},[]),D.jsx(i2,{children:s&&Array.from(s.values()).map(o=>D.jsx("span",{children:typeof o.value=="string"?D.jsx("li",{children:D.jsxs("span",{children:[o.name," :"," ",D.jsxs("b",{children:[o.value.substring(0,30),o.value.length>30?"...":""]})]})}):D.jsxs(D.Fragment,{children:[D.jsx("li",{children:D.jsxs("b",{children:[o.value.name,":"]})}),D.jsxs("div",{children:[Object.keys(o.value).map(a=>a!=="name"?D.jsx("div",{children:a==="url"?D.jsx("a",{href:o.value[a],target:"_blank",children:D.jsx("img",{src:o.value[a]})}):D.jsxs("li",{children:[a,": ",D.jsx("b",{children:o.value[a]})]})},a):null),D.jsxs(o2,{onClick:()=>{var a;console.info(e[o.value.name]||(e==null||(a=e.uniforms[o.value.name])===null||a===void 0?void 0:a.value))},children:["console.info(",o.value.name,");"]})]})]})},o.name))})},Tb=({el:r})=>{tt(n=>n.log);const e=tt(n=>n.gl),t=n=>{if(!e)return 0;const s=Math.round(n.drawCounts.total/(e.info.render.triangles+e.info.render.lines+e.info.render.points)*100*10)/10;return isFinite(s)&&s||0};return D.jsx(D.Fragment,{children:r.drawCounts.total>0&&D.jsxs(Ln,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[r.drawCounts.type==="Triangle"?D.jsx(r2,{style:{top:"-1px"}}):D.jsx(e2,{style:{top:"-1px"}}),r.drawCounts.total,D.jsxs("small",{children:[r.drawCounts.type,"s"]}),e&&D.jsxs(dr,{style:{bottom:"-10px",width:"40px",fontWeight:"bold"},children:[r.visible&&!r.material.wireframe?t(r):0,"%"]})]})})},Cb=({el:r})=>{const[e,t]=P.useState(r.visible),[n,s]=P.useState(r.expand),[i,o]=P.useState(0),{meshes:a,program:c,material:h}=r;return D.jsxs(lb,{children:[D.jsxs(sb,{onClick:()=>{r.expand=!n,Object.keys(a).forEach(f=>{const d=a[f];d.material.wireframe=!1}),s(!n)},children:[D.jsx(sg,{style:{marginRight:"6px"},children:n?D.jsx("span",{children:D.jsx(t2,{})}):D.jsx("span",{children:D.jsx(n2,{})})}),c&&D.jsxs("span",{children:[D.jsx(cb,{children:c.name}),D.jsxs(Ln,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[D.jsx(A4,{style:{top:"-1px"}}),Object.keys(a).length,D.jsx("small",{children:Object.keys(a).length>1?"users":"user"})]}),i>0&&D.jsxs(Ln,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[i>1?D.jsx(cm,{style:{top:"-1px"}}):D.jsx(cm,{style:{top:"-1px"}}),i,D.jsx("small",{children:"tex"})]}),D.jsx(Tb,{el:r}),h.glslVersion==="300 es"&&D.jsxs(Ln,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[D.jsx(z4,{style:{top:"-1px"}}),"300",D.jsx("small",{children:"es"}),D.jsx(dr,{style:{bottom:"-10px",width:"40px"},children:"glsl"})]})]}),D.jsx(ab,{onPointerEnter:()=>{Object.keys(a).forEach(f=>{const d=a[f];d.material.wireframe=!0})},onPointerLeave:()=>{Object.keys(a).forEach(f=>{const d=a[f];d.material.wireframe=!1})},onClick:f=>{f.stopPropagation(),Object.keys(a).forEach(d=>{const p=a[d],g=!e;p.visible=g,r.visible=g,t(g)})},children:e?D.jsx(C4,{}):D.jsx(S4,{})})]}),D.jsxs("div",{style:{maxHeight:n?"9999px":0,overflow:"hidden"},children:[D.jsxs(zv,{children:[D.jsx(p4,{})," Uniforms:"]}),D.jsx(Sb,{program:c,material:h,setTexNumber:o}),D.jsxs(zv,{children:[D.jsx(g4,{})," Geometries:"]}),D.jsx(i2,{children:a&&Object.keys(a).map(f=>a[f]&&a[f].geometry&&D.jsxs(db,{children:[D.jsxs("span",{children:[a[f].geometry.type,": "]}),a[f].userData&&a[f].userData.drawCount&&D.jsxs("b",{children:[D.jsxs("div",{children:[a[f].userData.drawCount.count,D.jsxs("small",{children:[" ",a[f].userData.drawCount.type,"s"]})]}),D.jsx("br",{}),D.jsxs("div",{children:[Math.round(lC(a[f].geometry)/1024*1e3)/1e3,"Kb",D.jsx("small",{children:" memory used"})]})]})]},f))}),D.jsxs(o2,{onClick:()=>{console.info(h)},children:["console.info(",h.type,")"]})]})]})},Eb=()=>{tt(e=>e.triggerProgramsUpdate);const r=tt(e=>e.programs);return D.jsx(hb,{children:r&&Array.from(r.values()).map(e=>e&&e?D.jsx(Cb,{el:e},e.material.uuid):null)})},Bn=r=>({overClock:"#ff6eff",fps:r?"100, 143, 255":"238,38,110",cpu:r?"254, 254, 98":"66,226,46",gpu:r?"254,254,254":"253,151,31",custom:r?"86,180,233":"40,255,255"}),bb=({showGraph:r,colorBlind:e})=>{const t=tt(s=>s.overclockingFps),n=tt(s=>s.fpsLimit);return D.jsxs(dr,{style:r?{color:t?Bn(e).overClock.toString():`rgb(${Bn(e).fps})`}:{},children:["FPS ",t?`${n}🚀`:""]})},Mb=({showGraph:r,colorBlind:e,customData:t,minimal:n})=>{const s=tt(i=>i.gl);return s?D.jsxs(rb,{children:[D.jsxs(Ln,{children:[D.jsx(P4,{}),D.jsx(dr,{style:r?{color:`rgb(${Bn(e).gpu.toString()})`}:{},children:"GPU"}),D.jsx(Ip,{children:"ms"})]}),D.jsxs(Ln,{children:[D.jsx(j4,{}),D.jsx(dr,{style:r?{color:`rgb(${Bn(e).cpu.toString()})`}:{},children:"CPU"}),D.jsx(Ip,{children:"ms"})]}),D.jsxs(Ln,{children:[D.jsx(M4,{}),D.jsx(bb,{showGraph:r,colorBlind:e})]}),!n&&s&&D.jsxs(Ln,{children:[D.jsx(G4,{}),D.jsx(dr,{children:s.info.render.calls===1?"call":"calls"})]}),!n&&s&&D.jsxs(Ln,{children:[D.jsx(r2,{}),D.jsx(dr,{children:"Triangles"})]}),t&&D.jsxs(Ln,{children:[D.jsx(f4,{}),D.jsx(dr,{style:r?{color:`rgb(${Bn(e).custom})`}:{},children:t.name}),t.info&&D.jsx(Ip,{children:t.info})]})]}):null},Ob=({showGraph:r,colorBlind:e,deepAnalyze:t,customData:n,matrixUpdate:s,openByDefault:i,minimal:o})=>D.jsxs(D.Fragment,{children:[D.jsx(Mb,{showGraph:r,colorBlind:e,customData:n,minimal:o}),!o&&D.jsx(kb,{matrixUpdate:s,openByDefault:i,deepAnalyze:t,showGraph:r})]}),Ab=({matrixUpdate:r})=>D.jsxs("div",{children:[D.jsxs(Ln,{children:[D.jsx(D4,{}),D.jsx(dr,{children:"Geometries"})]}),D.jsxs(Ln,{children:[D.jsx(cm,{}),D.jsx(dr,{children:"Textures"})]}),D.jsxs(Ln,{children:[D.jsx(e2,{}),D.jsx(dr,{children:"shaders"})]}),D.jsxs(Ln,{children:[D.jsx(U4,{}),D.jsx(dr,{children:"Lines"})]}),D.jsxs(Ln,{children:[D.jsx(_4,{}),D.jsx(dr,{children:"Points"})]}),r&&D.jsxs(Ln,{children:[D.jsx(x4,{}),D.jsx(dr,{children:"Matrices"})]})]}),jv=({tab:r,title:e,set:t})=>{const n=tt(s=>s.tab);return D.jsx(sg,{className:`${n===r?" __perf_toggle_tab_active":""}`,onClick:()=>{t(!0),tt.setState({tab:r})},children:D.jsx("span",{children:e})})},kb=({openByDefault:r,showGraph:e,deepAnalyze:t,matrixUpdate:n})=>{const[s,i]=Vc.useState(r);return D.jsxs("span",{children:[D.jsx(Pb,{show:s,showGraph:e,matrixUpdate:n}),r&&!t?null:D.jsxs(fb,{className:"__perf_toggle",children:[t&&D.jsx(jv,{tab:"programs",title:"Programs",set:i}),t&&D.jsx(jv,{tab:"infos",title:"Infos",set:i}),D.jsx(sg,{onClick:()=>{i(!s)},children:s?D.jsxs("span",{children:[D.jsx(t2,{})," Minimize"]}):D.jsxs("span",{children:[D.jsx(n2,{})," More"]})})]})]})},Pb=({show:r,showGraph:e,matrixUpdate:t})=>{const n=tt(s=>s.tab);return D.jsxs(D.Fragment,{children:[D.jsx(Ab,{matrixUpdate:t}),r&&D.jsx("div",{children:D.jsx(ub,{style:{marginTop:e?"38px":0},children:n==="programs"&&D.jsx(Eb,{})})})]})},Rb=({showGraph:r,colorBlind:e,openByDefault:t,className:n,overClock:s,style:i,position:o,chart:a,deepAnalyze:c,antialias:h,customData:f,matrixUpdate:d,minimal:p})=>{const g=P.useRef(null);return D.jsxs(D.Fragment,{children:[D.jsx(s2,{chart:a,overClock:s,deepAnalyze:c,matrixUpdate:d}),D.jsx(wb,{transform:!1,children:D.jsxs(nb,{className:(n?" ".concat(n):" ")+` ${o||""} ${p?"minimal":""}`,style:um({minHeight:p?"37px":r?"100px":"60px"},i),ref:g,children:[D.jsx(gb,{perfContainerRef:g,colorBlind:e,chart:a,showGraph:r,antialias:h,customData:f,minimal:p,matrixUpdate:d}),D.jsx(Ob,{colorBlind:e,showGraph:r,deepAnalyze:c,openByDefault:t,customData:f,matrixUpdate:d,minimal:p})]})})]})},Db=({headless:r=!1,colorBlind:e=!1,overClock:t=!1,showGraph:n=!0,trackCPU:s=!1,deepAnalyze:i=!1,antialias:o=!0,openByDefault:a=!0,customData:c,matrixUpdate:h=!1,position:f="top-right",chart:d={length:30,hz:15},className:p,style:g,minimal:_=!1})=>r?D.jsx(s2,{chart:d,deepAnalyze:i,matrixUpdate:h,overClock:t}):D.jsx(Rb,{colorBlind:e,showGraph:n,trackCPU:s,openByDefault:a,className:p,style:g,overClock:t,position:f,antialias:o,chart:d,deepAnalyze:i,minimal:_,customData:c,matrixUpdate:h}),ef=5e3,a2={show:"#FF723C",clip:"#FFFF00",episode:"#FF7F50",guest:"#E066FF",topic:"#F8F8FF"},ig=(r,e)=>{const t=a2[r]||"#F8F8FF";return e?t:parseInt(t.replace("#","0x"),16)},Ib={isUserDragging:!1,isUserScrolling:!1,userMovedCamera:!1,isUserScrollingOnHtmlPanel:!1},no=F_(r=>({...Ib,setIsUserDragging:e=>r({isUserDragging:e}),setIsUserScrolling:e=>r({isUserScrolling:e}),setUserMovedCamera:e=>r({userMovedCamera:e}),setIsUserScrollingOnHtmlPanel:e=>r({isUserScrollingOnHtmlPanel:e})}));function yi(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function l2(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}/*!
 * GSAP 3.12.4
 * https://gsap.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Lr={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},gl={duration:.5,overwrite:!1,delay:0},og,Vn,qt,rs=1e8,Tt=1/rs,hm=Math.PI*2,Ub=hm/4,Fb=0,c2=Math.sqrt,Nb=Math.cos,Lb=Math.sin,En=function(e){return typeof e=="string"},Yt=function(e){return typeof e=="function"},Ei=function(e){return typeof e=="number"},ag=function(e){return typeof e>"u"},Ks=function(e){return typeof e=="object"},mr=function(e){return e!==!1},lg=function(){return typeof window<"u"},Hh=function(e){return Yt(e)||En(e)},u2=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Gn=Array.isArray,fm=/(?:-?\.?\d|\.)+/gi,h2=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,tl=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Up=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,f2=/[+-]=-?[.\d]+/,d2=/[^,'"\[\]\s]+/gi,zb=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,zt,ns,dm,cg,jr={},uf={},p2,m2=function(e){return(uf=na(e,jr))&&xr},ug=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Hc=function(e,t){return!t&&console.warn(e)},g2=function(e,t){return e&&(jr[e]=t)&&uf&&(uf[e]=t)||jr},Wc=function(){return 0},Bb={suppressEvents:!0,isStart:!0,kill:!1},tf={suppressEvents:!0,kill:!1},jb={suppressEvents:!0},hg={},ro=[],pm={},v2,Ur={},Fp={},Vv=30,nf=[],fg="",dg=function(e){var t=e[0],n,s;if(Ks(t)||Yt(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(s=nf.length;s--&&!nf[s].targetTest(t););n=nf[s]}for(s=e.length;s--;)e[s]&&(e[s]._gsap||(e[s]._gsap=new j2(e[s],n)))||e.splice(s,1);return e},Qo=function(e){return e._gsap||dg(ss(e))[0]._gsap},_2=function(e,t,n){return(n=e[t])&&Yt(n)?e[t]():ag(n)&&e.getAttribute&&e.getAttribute(t)||n},gr=function(e,t){return(e=e.split(",")).forEach(t)||e},en=function(e){return Math.round(e*1e5)/1e5||0},Sn=function(e){return Math.round(e*1e7)/1e7||0},ol=function(e,t){var n=t.charAt(0),s=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+s:n==="-"?e-s:n==="*"?e*s:e/s},Vb=function(e,t){for(var n=t.length,s=0;e.indexOf(t[s])<0&&++s<n;);return s<n},hf=function(){var e=ro.length,t=ro.slice(0),n,s;for(pm={},ro.length=0,n=0;n<e;n++)s=t[n],s&&s._lazy&&(s.render(s._lazy[0],s._lazy[1],!0)._lazy=0)},y2=function(e,t,n,s){ro.length&&!Vn&&hf(),e.render(t,n,s||Vn&&t<0&&(e._initted||e._startAt)),ro.length&&!Vn&&hf()},x2=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(d2).length<2?t:En(e)?e.trim():e},w2=function(e){return e},ls=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},Gb=function(e){return function(t,n){for(var s in n)s in t||s==="duration"&&e||s==="ease"||(t[s]=n[s])}},na=function(e,t){for(var n in t)e[n]=t[n];return e},Gv=function r(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=Ks(t[n])?r(e[n]||(e[n]={}),t[n]):t[n]);return e},ff=function(e,t){var n={},s;for(s in e)s in t||(n[s]=e[s]);return n},Lc=function(e){var t=e.parent||zt,n=e.keyframes?Gb(Gn(e.keyframes)):ls;if(mr(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},Hb=function(e,t){for(var n=e.length,s=n===t.length;s&&n--&&e[n]===t[n];);return n<0},S2=function(e,t,n,s,i){n===void 0&&(n="_first"),s===void 0&&(s="_last");var o=e[s],a;if(i)for(a=t[i];o&&o[i]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[s]=t,t._prev=o,t.parent=t._dp=e,t},Xf=function(e,t,n,s){n===void 0&&(n="_first"),s===void 0&&(s="_last");var i=t._prev,o=t._next;i?i._next=o:e[n]===t&&(e[n]=o),o?o._prev=i:e[s]===t&&(e[s]=i),t._next=t._prev=t.parent=null},ao=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Ko=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},Wb=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},mm=function(e,t,n,s){return e._startAt&&(Vn?e._startAt.revert(tf):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,s))},qb=function r(e){return!e||e._ts&&r(e.parent)},Hv=function(e){return e._repeat?vl(e._tTime,e=e.duration()+e._rDelay)*e:0},vl=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},df=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Qf=function(e){return e._end=Sn(e._start+(e._tDur/Math.abs(e._ts||e._rts||Tt)||0))},Kf=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=Sn(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Qf(e),n._dirty||Ko(n,e)),e},T2=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=df(e.rawTime(),t),(!t._dur||Cu(0,t.totalDuration(),n)-t._tTime>Tt)&&t.render(n,!0)),Ko(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-Tt}},qs=function(e,t,n,s){return t.parent&&ao(t),t._start=Sn((Ei(n)?n:n||e!==zt?ts(e,n,t):e._time)+t._delay),t._end=Sn(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),S2(e,t,"_first","_last",e._sort?"_start":0),gm(t)||(e._recent=t),s||T2(e,t),e._ts<0&&Kf(e,e._tTime),e},C2=function(e,t){return(jr.ScrollTrigger||ug("scrollTrigger",t))&&jr.ScrollTrigger.create(t,e)},E2=function(e,t,n,s,i){if(mg(e,t,i),!e._initted)return 1;if(!n&&e._pt&&!Vn&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&v2!==Fr.frame)return ro.push(e),e._lazy=[i,s],1},Zb=function r(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||r(t))},gm=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},Yb=function(e,t,n,s){var i=e.ratio,o=t<0||!t&&(!e._start&&Zb(e)&&!(!e._initted&&gm(e))||(e._ts<0||e._dp._ts<0)&&!gm(e))?0:1,a=e._rDelay,c=0,h,f,d;if(a&&e._repeat&&(c=Cu(0,e._tDur,t),f=vl(c,a),e._yoyo&&f&1&&(o=1-o),f!==vl(e._tTime,a)&&(i=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==i||Vn||s||e._zTime===Tt||!t&&e._zTime){if(!e._initted&&E2(e,t,s,n,c))return;for(d=e._zTime,e._zTime=t||(n?Tt:0),n||(n=t&&!d),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=c,h=e._pt;h;)h.r(o,h.d),h=h._next;t<0&&mm(e,t,n,!0),e._onUpdate&&!n&&Nr(e,"onUpdate"),c&&e._repeat&&!n&&e.parent&&Nr(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&ao(e,1),!n&&!Vn&&(Nr(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},Xb=function(e,t,n){var s;if(n>t)for(s=e._first;s&&s._start<=n;){if(s.data==="isPause"&&s._start>t)return s;s=s._next}else for(s=e._last;s&&s._start>=n;){if(s.data==="isPause"&&s._start<t)return s;s=s._prev}},_l=function(e,t,n,s){var i=e._repeat,o=Sn(t)||0,a=e._tTime/e._tDur;return a&&!s&&(e._time*=o/e._dur),e._dur=o,e._tDur=i?i<0?1e10:Sn(o*(i+1)+e._rDelay*i):o,a>0&&!s&&Kf(e,e._tTime=e._tDur*a),e.parent&&Qf(e),n||Ko(e.parent,e),e},Wv=function(e){return e instanceof nr?Ko(e):_l(e,e._dur)},Qb={_start:0,endTime:Wc,totalDuration:Wc},ts=function r(e,t,n){var s=e.labels,i=e._recent||Qb,o=e.duration()>=rs?i.endTime(!1):e._dur,a,c,h;return En(t)&&(isNaN(t)||t in s)?(c=t.charAt(0),h=t.substr(-1)==="%",a=t.indexOf("="),c==="<"||c===">"?(a>=0&&(t=t.replace(/=/,"")),(c==="<"?i._start:i.endTime(i._repeat>=0))+(parseFloat(t.substr(1))||0)*(h?(a<0?i:n).totalDuration()/100:1)):a<0?(t in s||(s[t]=o),s[t]):(c=parseFloat(t.charAt(a-1)+t.substr(a+1)),h&&n&&(c=c/100*(Gn(n)?n[0]:n).totalDuration()),a>1?r(e,t.substr(0,a-1),n)+c:o+c)):t==null?o:+t},zc=function(e,t,n){var s=Ei(t[1]),i=(s?2:1)+(e<2?0:1),o=t[i],a,c;if(s&&(o.duration=t[1]),o.parent=n,e){for(a=o,c=n;c&&!("immediateRender"in a);)a=c.vars.defaults||{},c=mr(c.vars.inherit)&&c.parent;o.immediateRender=mr(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[i-1]}return new un(t[0],o,t[i+1])},mo=function(e,t){return e||e===0?t(e):t},Cu=function(e,t,n){return n<e?e:n>t?t:n},jn=function(e,t){return!En(e)||!(t=zb.exec(e))?"":t[1]},Kb=function(e,t,n){return mo(n,function(s){return Cu(e,t,s)})},vm=[].slice,b2=function(e,t){return e&&Ks(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Ks(e[0]))&&!e.nodeType&&e!==ns},Jb=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(s){var i;return En(s)&&!t||b2(s,1)?(i=n).push.apply(i,ss(s)):n.push(s)})||n},ss=function(e,t,n){return qt&&!t&&qt.selector?qt.selector(e):En(e)&&!n&&(dm||!yl())?vm.call((t||cg).querySelectorAll(e),0):Gn(e)?Jb(e,n):b2(e)?vm.call(e,0):e?[e]:[]},_m=function(e){return e=ss(e)[0]||Hc("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return ss(t,n.querySelectorAll?n:n===e?Hc("Invalid scope")||cg.createElement("div"):e)}},M2=function(e){return e.sort(function(){return .5-Math.random()})},O2=function(e){if(Yt(e))return e;var t=Ks(e)?e:{each:e},n=Jo(t.ease),s=t.from||0,i=parseFloat(t.base)||0,o={},a=s>0&&s<1,c=isNaN(s)||a,h=t.axis,f=s,d=s;return En(s)?f=d={center:.5,edges:.5,end:1}[s]||0:!a&&c&&(f=s[0],d=s[1]),function(p,g,_){var y=(_||t).length,x=o[y],w,T,b,E,C,A,M,k,R;if(!x){if(R=t.grid==="auto"?0:(t.grid||[1,rs])[1],!R){for(M=-rs;M<(M=_[R++].getBoundingClientRect().left)&&R<y;);R<y&&R--}for(x=o[y]=[],w=c?Math.min(R,y)*f-.5:s%R,T=R===rs?0:c?y*d/R-.5:s/R|0,M=0,k=rs,A=0;A<y;A++)b=A%R-w,E=T-(A/R|0),x[A]=C=h?Math.abs(h==="y"?E:b):c2(b*b+E*E),C>M&&(M=C),C<k&&(k=C);s==="random"&&M2(x),x.max=M-k,x.min=k,x.v=y=(parseFloat(t.amount)||parseFloat(t.each)*(R>y?y-1:h?h==="y"?y/R:R:Math.max(R,y/R))||0)*(s==="edges"?-1:1),x.b=y<0?i-y:i,x.u=jn(t.amount||t.each)||0,n=n&&y<0?L2(n):n}return y=(x[p]-x.min)/x.max||0,Sn(x.b+(n?n(y):y)*x.v)+x.u}},ym=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var s=Sn(Math.round(parseFloat(n)/e)*e*t);return(s-s%1)/t+(Ei(n)?0:jn(n))}},A2=function(e,t){var n=Gn(e),s,i;return!n&&Ks(e)&&(s=n=e.radius||rs,e.values?(e=ss(e.values),(i=!Ei(e[0]))&&(s*=s)):e=ym(e.increment)),mo(t,n?Yt(e)?function(o){return i=e(o),Math.abs(i-o)<=s?i:o}:function(o){for(var a=parseFloat(i?o.x:o),c=parseFloat(i?o.y:0),h=rs,f=0,d=e.length,p,g;d--;)i?(p=e[d].x-a,g=e[d].y-c,p=p*p+g*g):p=Math.abs(e[d]-a),p<h&&(h=p,f=d);return f=!s||h<=s?e[f]:o,i||f===o||Ei(o)?f:f+jn(o)}:ym(e))},k2=function(e,t,n,s){return mo(Gn(e)?!t:n===!0?!!(n=0):!s,function(){return Gn(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(s=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*s)/s})},$b=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(s){return t.reduce(function(i,o){return o(i)},s)}},e5=function(e,t){return function(n){return e(parseFloat(n))+(t||jn(n))}},t5=function(e,t,n){return R2(e,t,0,1,n)},P2=function(e,t,n){return mo(n,function(s){return e[~~t(s)]})},n5=function r(e,t,n){var s=t-e;return Gn(e)?P2(e,r(0,e.length),t):mo(n,function(i){return(s+(i-e)%s)%s+e})},r5=function r(e,t,n){var s=t-e,i=s*2;return Gn(e)?P2(e,r(0,e.length-1),t):mo(n,function(o){return o=(i+(o-e)%i)%i||0,e+(o>s?i-o:o)})},qc=function(e){for(var t=0,n="",s,i,o,a;~(s=e.indexOf("random(",t));)o=e.indexOf(")",s),a=e.charAt(s+7)==="[",i=e.substr(s+7,o-s-7).match(a?d2:fm),n+=e.substr(t,s-t)+k2(a?i:+i[0],a?0:+i[1],+i[2]||1e-5),t=o+1;return n+e.substr(t,e.length-t)},R2=function(e,t,n,s,i){var o=t-e,a=s-n;return mo(i,function(c){return n+((c-e)/o*a||0)})},s5=function r(e,t,n,s){var i=isNaN(e+t)?0:function(g){return(1-g)*e+g*t};if(!i){var o=En(e),a={},c,h,f,d,p;if(n===!0&&(s=1)&&(n=null),o)e={p:e},t={p:t};else if(Gn(e)&&!Gn(t)){for(f=[],d=e.length,p=d-2,h=1;h<d;h++)f.push(r(e[h-1],e[h]));d--,i=function(_){_*=d;var y=Math.min(p,~~_);return f[y](_-y)},n=t}else s||(e=na(Gn(e)?[]:{},e));if(!f){for(c in t)pg.call(a,e,c,"get",t[c]);i=function(_){return _g(_,a)||(o?e.p:e)}}}return mo(n,i)},qv=function(e,t,n){var s=e.labels,i=rs,o,a,c;for(o in s)a=s[o]-t,a<0==!!n&&a&&i>(a=Math.abs(a))&&(c=o,i=a);return c},Nr=function(e,t,n){var s=e.vars,i=s[t],o=qt,a=e._ctx,c,h,f;if(i)return c=s[t+"Params"],h=s.callbackScope||e,n&&ro.length&&hf(),a&&(qt=a),f=c?i.apply(h,c):i.call(h),qt=o,f},Dc=function(e){return ao(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Vn),e.progress()<1&&Nr(e,"onInterrupt"),e},nl,D2=[],I2=function(e){if(lg()&&e){e=!e.name&&e.default||e;var t=e.name,n=Yt(e),s=t&&!n&&e.init?function(){this._props=[]}:e,i={init:Wc,render:_g,add:pg,kill:x5,modifier:y5,rawVars:0},o={targetTest:0,get:0,getSetter:vg,aliases:{},register:0};if(yl(),e!==s){if(Ur[t])return;ls(s,ls(ff(e,i),o)),na(s.prototype,na(i,ff(e,o))),Ur[s.prop=t]=s,e.targetTest&&(nf.push(s),hg[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}g2(t,s),e.register&&e.register(xr,s,vr)}else e&&D2.push(e)},St=255,Ic={aqua:[0,St,St],lime:[0,St,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,St],navy:[0,0,128],white:[St,St,St],olive:[128,128,0],yellow:[St,St,0],orange:[St,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[St,0,0],pink:[St,192,203],cyan:[0,St,St],transparent:[St,St,St,0]},Np=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*St+.5|0},U2=function(e,t,n){var s=e?Ei(e)?[e>>16,e>>8&St,e&St]:0:Ic.black,i,o,a,c,h,f,d,p,g,_;if(!s){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Ic[e])s=Ic[e];else if(e.charAt(0)==="#"){if(e.length<6&&(i=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+i+i+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return s=parseInt(e.substr(1,6),16),[s>>16,s>>8&St,s&St,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),s=[e>>16,e>>8&St,e&St]}else if(e.substr(0,3)==="hsl"){if(s=_=e.match(fm),!t)c=+s[0]%360/360,h=+s[1]/100,f=+s[2]/100,o=f<=.5?f*(h+1):f+h-f*h,i=f*2-o,s.length>3&&(s[3]*=1),s[0]=Np(c+1/3,i,o),s[1]=Np(c,i,o),s[2]=Np(c-1/3,i,o);else if(~e.indexOf("="))return s=e.match(h2),n&&s.length<4&&(s[3]=1),s}else s=e.match(fm)||Ic.transparent;s=s.map(Number)}return t&&!_&&(i=s[0]/St,o=s[1]/St,a=s[2]/St,d=Math.max(i,o,a),p=Math.min(i,o,a),f=(d+p)/2,d===p?c=h=0:(g=d-p,h=f>.5?g/(2-d-p):g/(d+p),c=d===i?(o-a)/g+(o<a?6:0):d===o?(a-i)/g+2:(i-o)/g+4,c*=60),s[0]=~~(c+.5),s[1]=~~(h*100+.5),s[2]=~~(f*100+.5)),n&&s.length<4&&(s[3]=1),s},F2=function(e){var t=[],n=[],s=-1;return e.split(so).forEach(function(i){var o=i.match(tl)||[];t.push.apply(t,o),n.push(s+=o.length+1)}),t.c=n,t},Zv=function(e,t,n){var s="",i=(e+s).match(so),o=t?"hsla(":"rgba(",a=0,c,h,f,d;if(!i)return e;if(i=i.map(function(p){return(p=U2(p,t,1))&&o+(t?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),n&&(f=F2(e),c=n.c,c.join(s)!==f.c.join(s)))for(h=e.replace(so,"1").split(tl),d=h.length-1;a<d;a++)s+=h[a]+(~c.indexOf(a)?i.shift()||o+"0,0,0,0)":(f.length?f:i.length?i:n).shift());if(!h)for(h=e.split(so),d=h.length-1;a<d;a++)s+=h[a]+i[a];return s+h[d]},so=function(){var r="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Ic)r+="|"+e+"\\b";return new RegExp(r+")","gi")}(),i5=/hsl[a]?\(/,N2=function(e){var t=e.join(" "),n;if(so.lastIndex=0,so.test(t))return n=i5.test(t),e[1]=Zv(e[1],n),e[0]=Zv(e[0],n,F2(e[1])),!0},Zc,Fr=function(){var r=Date.now,e=500,t=33,n=r(),s=n,i=1e3/240,o=i,a=[],c,h,f,d,p,g,_=function y(x){var w=r()-s,T=x===!0,b,E,C,A;if(w>e&&(n+=w-t),s+=w,C=s-n,b=C-o,(b>0||T)&&(A=++d.frame,p=C-d.time*1e3,d.time=C=C/1e3,o+=b+(b>=i?4:i-b),E=1),T||(c=h(y)),E)for(g=0;g<a.length;g++)a[g](C,p,A,x)};return d={time:0,frame:0,tick:function(){_(!0)},deltaRatio:function(x){return p/(1e3/(x||60))},wake:function(){p2&&(!dm&&lg()&&(ns=dm=window,cg=ns.document||{},jr.gsap=xr,(ns.gsapVersions||(ns.gsapVersions=[])).push(xr.version),m2(uf||ns.GreenSockGlobals||!ns.gsap&&ns||{}),f=ns.requestAnimationFrame,D2.forEach(I2)),c&&d.sleep(),h=f||function(x){return setTimeout(x,o-d.time*1e3+1|0)},Zc=1,_(2))},sleep:function(){(f?ns.cancelAnimationFrame:clearTimeout)(c),Zc=0,h=Wc},lagSmoothing:function(x,w){e=x||1/0,t=Math.min(w||33,e)},fps:function(x){i=1e3/(x||240),o=d.time*1e3+i},add:function(x,w,T){var b=w?function(E,C,A,M){x(E,C,A,M),d.remove(b)}:x;return d.remove(x),a[T?"unshift":"push"](b),yl(),b},remove:function(x,w){~(w=a.indexOf(x))&&a.splice(w,1)&&g>=w&&g--},_listeners:a},d}(),yl=function(){return!Zc&&Fr.wake()},nt={},o5=/^[\d.\-M][\d.\-,\s]/,a5=/["']/g,l5=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),s=n[0],i=1,o=n.length,a,c,h;i<o;i++)c=n[i],a=i!==o-1?c.lastIndexOf(","):c.length,h=c.substr(0,a),t[s]=isNaN(h)?h.replace(a5,"").trim():+h,s=c.substr(a+1).trim();return t},c5=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),s=e.indexOf("(",t);return e.substring(t,~s&&s<n?e.indexOf(")",n+1):n)},u5=function(e){var t=(e+"").split("("),n=nt[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[l5(t[1])]:c5(e).split(",").map(x2)):nt._CE&&o5.test(e)?nt._CE("",e):n},L2=function(e){return function(t){return 1-e(1-t)}},z2=function r(e,t){for(var n=e._first,s;n;)n instanceof nr?r(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?r(n.timeline,t):(s=n._ease,n._ease=n._yEase,n._yEase=s,n._yoyo=t)),n=n._next},Jo=function(e,t){return e&&(Yt(e)?e:nt[e]||u5(e))||t},fa=function(e,t,n,s){n===void 0&&(n=function(c){return 1-t(1-c)}),s===void 0&&(s=function(c){return c<.5?t(c*2)/2:1-t((1-c)*2)/2});var i={easeIn:t,easeOut:n,easeInOut:s},o;return gr(e,function(a){nt[a]=jr[a]=i,nt[o=a.toLowerCase()]=n;for(var c in i)nt[o+(c==="easeIn"?".in":c==="easeOut"?".out":".inOut")]=nt[a+"."+c]=i[c]}),i},B2=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},Lp=function r(e,t,n){var s=t>=1?t:1,i=(n||(e?.3:.45))/(t<1?t:1),o=i/hm*(Math.asin(1/s)||0),a=function(f){return f===1?1:s*Math.pow(2,-10*f)*Lb((f-o)*i)+1},c=e==="out"?a:e==="in"?function(h){return 1-a(1-h)}:B2(a);return i=hm/i,c.config=function(h,f){return r(e,h,f)},c},zp=function r(e,t){t===void 0&&(t=1.70158);var n=function(o){return o?--o*o*((t+1)*o+t)+1:0},s=e==="out"?n:e==="in"?function(i){return 1-n(1-i)}:B2(n);return s.config=function(i){return r(e,i)},s};gr("Linear,Quad,Cubic,Quart,Quint,Strong",function(r,e){var t=e<5?e+1:e;fa(r+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});nt.Linear.easeNone=nt.none=nt.Linear.easeIn;fa("Elastic",Lp("in"),Lp("out"),Lp());(function(r,e){var t=1/e,n=2*t,s=2.5*t,i=function(a){return a<t?r*a*a:a<n?r*Math.pow(a-1.5/e,2)+.75:a<s?r*(a-=2.25/e)*a+.9375:r*Math.pow(a-2.625/e,2)+.984375};fa("Bounce",function(o){return 1-i(1-o)},i)})(7.5625,2.75);fa("Expo",function(r){return r?Math.pow(2,10*(r-1)):0});fa("Circ",function(r){return-(c2(1-r*r)-1)});fa("Sine",function(r){return r===1?1:-Nb(r*Ub)+1});fa("Back",zp("in"),zp("out"),zp());nt.SteppedEase=nt.steps=jr.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,s=e+(t?0:1),i=t?1:0,o=1-Tt;return function(a){return((s*Cu(0,o,a)|0)+i)*n}}};gl.ease=nt["quad.out"];gr("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(r){return fg+=r+","+r+"Params,"});var j2=function(e,t){this.id=Fb++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:_2,this.set=t?t.getSetter:vg},Yc=function(){function r(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,_l(this,+t.duration,1,1),this.data=t.data,qt&&(this._ctx=qt,qt.data.push(this)),Zc||Fr.wake()}var e=r.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,_l(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,s){if(yl(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(Kf(this,n),!i._dp||i.parent||T2(i,this);i&&i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&qs(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!s||this._initted&&Math.abs(this._zTime)===Tt||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),y2(this,n,s)),this},e.time=function(n,s){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+Hv(this))%(this._dur+this._rDelay)||(n?this._dur:0),s):this._time},e.totalProgress=function(n,s){return arguments.length?this.totalTime(this.totalDuration()*n,s):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(n,s){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+Hv(this),s):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,s){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*i,s):this._repeat?vl(this._tTime,i)+1:1},e.timeScale=function(n,s){if(!arguments.length)return this._rts===-Tt?0:this._rts;if(this._rts===n)return this;var i=this.parent&&this._ts?df(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-Tt?0:this._rts,this.totalTime(Cu(-Math.abs(this._delay),this._tDur,i),s!==!1),Qf(this),Wb(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(yl(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Tt&&(this._tTime-=Tt)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var s=this.parent||this._dp;return s&&(s._sort||!this.parent)&&qs(s,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(mr(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var s=this.parent||this._dp;return s?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?df(s.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=jb);var s=Vn;return Vn=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),Vn=s,this},e.globalTime=function(n){for(var s=this,i=arguments.length?n:s.rawTime();s;)i=s._start+i/(Math.abs(s._ts)||1),s=s._dp;return!this.parent&&this._sat?this._sat.globalTime(n):i},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,Wv(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var s=this._time;return this._rDelay=n,Wv(this),s?this.time(s):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,s){return this.totalTime(ts(this,n),mr(s))},e.restart=function(n,s){return this.play().totalTime(n?-this._delay:0,mr(s))},e.play=function(n,s){return n!=null&&this.seek(n,s),this.reversed(!1).paused(!1)},e.reverse=function(n,s){return n!=null&&this.seek(n||this.totalDuration(),s),this.reversed(!0).paused(!1)},e.pause=function(n,s){return n!=null&&this.seek(n,s),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-Tt:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Tt,this},e.isActive=function(){var n=this.parent||this._dp,s=this._start,i;return!!(!n||this._ts&&this._initted&&n.isActive()&&(i=n.rawTime(!0))>=s&&i<this.endTime(!0)-Tt)},e.eventCallback=function(n,s,i){var o=this.vars;return arguments.length>1?(s?(o[n]=s,i&&(o[n+"Params"]=i),n==="onUpdate"&&(this._onUpdate=s)):delete o[n],this):o[n]},e.then=function(n){var s=this;return new Promise(function(i){var o=Yt(n)?n:w2,a=function(){var h=s.then;s.then=null,Yt(o)&&(o=o(s))&&(o.then||o===s)&&(s.then=h),i(o),s.then=h};s._initted&&s.totalProgress()===1&&s._ts>=0||!s._tTime&&s._ts<0?a():s._prom=a})},e.kill=function(){Dc(this)},r}();ls(Yc.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Tt,_prom:0,_ps:!1,_rts:1});var nr=function(r){l2(e,r);function e(n,s){var i;return n===void 0&&(n={}),i=r.call(this,n)||this,i.labels={},i.smoothChildTiming=!!n.smoothChildTiming,i.autoRemoveChildren=!!n.autoRemoveChildren,i._sort=mr(n.sortChildren),zt&&qs(n.parent||zt,yi(i),s),n.reversed&&i.reverse(),n.paused&&i.paused(!0),n.scrollTrigger&&C2(yi(i),n.scrollTrigger),i}var t=e.prototype;return t.to=function(s,i,o){return zc(0,arguments,this),this},t.from=function(s,i,o){return zc(1,arguments,this),this},t.fromTo=function(s,i,o,a){return zc(2,arguments,this),this},t.set=function(s,i,o){return i.duration=0,i.parent=this,Lc(i).repeatDelay||(i.repeat=0),i.immediateRender=!!i.immediateRender,new un(s,i,ts(this,o),1),this},t.call=function(s,i,o){return qs(this,un.delayedCall(0,s,i),o)},t.staggerTo=function(s,i,o,a,c,h,f){return o.duration=i,o.stagger=o.stagger||a,o.onComplete=h,o.onCompleteParams=f,o.parent=this,new un(s,o,ts(this,c)),this},t.staggerFrom=function(s,i,o,a,c,h,f){return o.runBackwards=1,Lc(o).immediateRender=mr(o.immediateRender),this.staggerTo(s,i,o,a,c,h,f)},t.staggerFromTo=function(s,i,o,a,c,h,f,d){return a.startAt=o,Lc(a).immediateRender=mr(a.immediateRender),this.staggerTo(s,i,a,c,h,f,d)},t.render=function(s,i,o){var a=this._time,c=this._dirty?this.totalDuration():this._tDur,h=this._dur,f=s<=0?0:Sn(s),d=this._zTime<0!=s<0&&(this._initted||!h),p,g,_,y,x,w,T,b,E,C,A,M;if(this!==zt&&f>c&&s>=0&&(f=c),f!==this._tTime||o||d){if(a!==this._time&&h&&(f+=this._time-a,s+=this._time-a),p=f,E=this._start,b=this._ts,w=!b,d&&(h||(a=this._zTime),(s||!i)&&(this._zTime=s)),this._repeat){if(A=this._yoyo,x=h+this._rDelay,this._repeat<-1&&s<0)return this.totalTime(x*100+s,i,o);if(p=Sn(f%x),f===c?(y=this._repeat,p=h):(y=~~(f/x),y&&y===f/x&&(p=h,y--),p>h&&(p=h)),C=vl(this._tTime,x),!a&&this._tTime&&C!==y&&this._tTime-C*x-this._dur<=0&&(C=y),A&&y&1&&(p=h-p,M=1),y!==C&&!this._lock){var k=A&&C&1,R=k===(A&&y&1);if(y<C&&(k=!k),a=k?0:f%h?h:f,this._lock=1,this.render(a||(M?0:Sn(y*x)),i,!h)._lock=0,this._tTime=f,!i&&this.parent&&Nr(this,"onRepeat"),this.vars.repeatRefresh&&!M&&(this.invalidate()._lock=1),a&&a!==this._time||w!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(h=this._dur,c=this._tDur,R&&(this._lock=2,a=k?h:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!M&&this.invalidate()),this._lock=0,!this._ts&&!w)return this;z2(this,M)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(T=Xb(this,Sn(a),Sn(p)),T&&(f-=p-(p=T._start))),this._tTime=f,this._time=p,this._act=!b,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=s,a=0),!a&&p&&!i&&!y&&(Nr(this,"onStart"),this._tTime!==f))return this;if(p>=a&&s>=0)for(g=this._first;g;){if(_=g._next,(g._act||p>=g._start)&&g._ts&&T!==g){if(g.parent!==this)return this.render(s,i,o);if(g.render(g._ts>0?(p-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(p-g._start)*g._ts,i,o),p!==this._time||!this._ts&&!w){T=0,_&&(f+=this._zTime=-Tt);break}}g=_}else{g=this._last;for(var F=s<0?s:p;g;){if(_=g._prev,(g._act||F<=g._end)&&g._ts&&T!==g){if(g.parent!==this)return this.render(s,i,o);if(g.render(g._ts>0?(F-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(F-g._start)*g._ts,i,o||Vn&&(g._initted||g._startAt)),p!==this._time||!this._ts&&!w){T=0,_&&(f+=this._zTime=F?-Tt:Tt);break}}g=_}}if(T&&!i&&(this.pause(),T.render(p>=a?0:-Tt)._zTime=p>=a?1:-1,this._ts))return this._start=E,Qf(this),this.render(s,i,o);this._onUpdate&&!i&&Nr(this,"onUpdate",!0),(f===c&&this._tTime>=this.totalDuration()||!f&&a)&&(E===this._start||Math.abs(b)!==Math.abs(this._ts))&&(this._lock||((s||!h)&&(f===c&&this._ts>0||!f&&this._ts<0)&&ao(this,1),!i&&!(s<0&&!a)&&(f||a||!c)&&(Nr(this,f===c&&s>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(f<c&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(s,i){var o=this;if(Ei(i)||(i=ts(this,i,s)),!(s instanceof Yc)){if(Gn(s))return s.forEach(function(a){return o.add(a,i)}),this;if(En(s))return this.addLabel(s,i);if(Yt(s))s=un.delayedCall(0,s);else return this}return this!==s?qs(this,s,i):this},t.getChildren=function(s,i,o,a){s===void 0&&(s=!0),i===void 0&&(i=!0),o===void 0&&(o=!0),a===void 0&&(a=-rs);for(var c=[],h=this._first;h;)h._start>=a&&(h instanceof un?i&&c.push(h):(o&&c.push(h),s&&c.push.apply(c,h.getChildren(!0,i,o)))),h=h._next;return c},t.getById=function(s){for(var i=this.getChildren(1,1,1),o=i.length;o--;)if(i[o].vars.id===s)return i[o]},t.remove=function(s){return En(s)?this.removeLabel(s):Yt(s)?this.killTweensOf(s):(Xf(this,s),s===this._recent&&(this._recent=this._last),Ko(this))},t.totalTime=function(s,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Sn(Fr.time-(this._ts>0?s/this._ts:(this.totalDuration()-s)/-this._ts))),r.prototype.totalTime.call(this,s,i),this._forcing=0,this):this._tTime},t.addLabel=function(s,i){return this.labels[s]=ts(this,i),this},t.removeLabel=function(s){return delete this.labels[s],this},t.addPause=function(s,i,o){var a=un.delayedCall(0,i||Wc,o);return a.data="isPause",this._hasPause=1,qs(this,a,ts(this,s))},t.removePause=function(s){var i=this._first;for(s=ts(this,s);i;)i._start===s&&i.data==="isPause"&&ao(i),i=i._next},t.killTweensOf=function(s,i,o){for(var a=this.getTweensOf(s,o),c=a.length;c--;)Ji!==a[c]&&a[c].kill(s,i);return this},t.getTweensOf=function(s,i){for(var o=[],a=ss(s),c=this._first,h=Ei(i),f;c;)c instanceof un?Vb(c._targets,a)&&(h?(!Ji||c._initted&&c._ts)&&c.globalTime(0)<=i&&c.globalTime(c.totalDuration())>i:!i||c.isActive())&&o.push(c):(f=c.getTweensOf(a,i)).length&&o.push.apply(o,f),c=c._next;return o},t.tweenTo=function(s,i){i=i||{};var o=this,a=ts(o,s),c=i,h=c.startAt,f=c.onStart,d=c.onStartParams,p=c.immediateRender,g,_=un.to(o,ls({ease:i.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:i.duration||Math.abs((a-(h&&"time"in h?h.time:o._time))/o.timeScale())||Tt,onStart:function(){if(o.pause(),!g){var x=i.duration||Math.abs((a-(h&&"time"in h?h.time:o._time))/o.timeScale());_._dur!==x&&_l(_,x,0,1).render(_._time,!0,!0),g=1}f&&f.apply(_,d||[])}},i));return p?_.render(0):_},t.tweenFromTo=function(s,i,o){return this.tweenTo(i,ls({startAt:{time:ts(this,s)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(s){return s===void 0&&(s=this._time),qv(this,ts(this,s))},t.previousLabel=function(s){return s===void 0&&(s=this._time),qv(this,ts(this,s),1)},t.currentLabel=function(s){return arguments.length?this.seek(s,!0):this.previousLabel(this._time+Tt)},t.shiftChildren=function(s,i,o){o===void 0&&(o=0);for(var a=this._first,c=this.labels,h;a;)a._start>=o&&(a._start+=s,a._end+=s),a=a._next;if(i)for(h in c)c[h]>=o&&(c[h]+=s);return Ko(this)},t.invalidate=function(s){var i=this._first;for(this._lock=0;i;)i.invalidate(s),i=i._next;return r.prototype.invalidate.call(this,s)},t.clear=function(s){s===void 0&&(s=!0);for(var i=this._first,o;i;)o=i._next,this.remove(i),i=o;return this._dp&&(this._time=this._tTime=this._pTime=0),s&&(this.labels={}),Ko(this)},t.totalDuration=function(s){var i=0,o=this,a=o._last,c=rs,h,f,d;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-s:s));if(o._dirty){for(d=o.parent;a;)h=a._prev,a._dirty&&a.totalDuration(),f=a._start,f>c&&o._sort&&a._ts&&!o._lock?(o._lock=1,qs(o,a,f-a._delay,1)._lock=0):c=f,f<0&&a._ts&&(i-=f,(!d&&!o._dp||d&&d.smoothChildTiming)&&(o._start+=f/o._ts,o._time-=f,o._tTime-=f),o.shiftChildren(-f,!1,-1/0),c=0),a._end>i&&a._ts&&(i=a._end),a=h;_l(o,o===zt&&o._time>i?o._time:i,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(s){if(zt._ts&&(y2(zt,df(s,zt)),v2=Fr.frame),Fr.frame>=Vv){Vv+=Lr.autoSleep||120;var i=zt._first;if((!i||!i._ts)&&Lr.autoSleep&&Fr._listeners.length<2){for(;i&&!i._ts;)i=i._next;i||Fr.sleep()}}},e}(Yc);ls(nr.prototype,{_lock:0,_hasPause:0,_forcing:0});var h5=function(e,t,n,s,i,o,a){var c=new vr(this._pt,e,t,0,1,Z2,null,i),h=0,f=0,d,p,g,_,y,x,w,T;for(c.b=n,c.e=s,n+="",s+="",(w=~s.indexOf("random("))&&(s=qc(s)),o&&(T=[n,s],o(T,e,t),n=T[0],s=T[1]),p=n.match(Up)||[];d=Up.exec(s);)_=d[0],y=s.substring(h,d.index),g?g=(g+1)%5:y.substr(-5)==="rgba("&&(g=1),_!==p[f++]&&(x=parseFloat(p[f-1])||0,c._pt={_next:c._pt,p:y||f===1?y:",",s:x,c:_.charAt(1)==="="?ol(x,_)-x:parseFloat(_)-x,m:g&&g<4?Math.round:0},h=Up.lastIndex);return c.c=h<s.length?s.substring(h,s.length):"",c.fp=a,(f2.test(s)||w)&&(c.e=0),this._pt=c,c},pg=function(e,t,n,s,i,o,a,c,h,f){Yt(s)&&(s=s(i||0,e,o));var d=e[t],p=n!=="get"?n:Yt(d)?h?e[t.indexOf("set")||!Yt(e["get"+t.substr(3)])?t:"get"+t.substr(3)](h):e[t]():d,g=Yt(d)?h?g5:W2:gg,_;if(En(s)&&(~s.indexOf("random(")&&(s=qc(s)),s.charAt(1)==="="&&(_=ol(p,s)+(jn(p)||0),(_||_===0)&&(s=_))),!f||p!==s||xm)return!isNaN(p*s)&&s!==""?(_=new vr(this._pt,e,t,+p||0,s-(p||0),typeof d=="boolean"?_5:q2,0,g),h&&(_.fp=h),a&&_.modifier(a,this,e),this._pt=_):(!d&&!(t in e)&&ug(t,s),h5.call(this,e,t,p,s,g,c||Lr.stringFilter,h))},f5=function(e,t,n,s,i){if(Yt(e)&&(e=Bc(e,i,t,n,s)),!Ks(e)||e.style&&e.nodeType||Gn(e)||u2(e))return En(e)?Bc(e,i,t,n,s):e;var o={},a;for(a in e)o[a]=Bc(e[a],i,t,n,s);return o},V2=function(e,t,n,s,i,o){var a,c,h,f;if(Ur[e]&&(a=new Ur[e]).init(i,a.rawVars?t[e]:f5(t[e],s,i,o,n),n,s,o)!==!1&&(n._pt=c=new vr(n._pt,i,e,0,1,a.render,a,0,a.priority),n!==nl))for(h=n._ptLookup[n._targets.indexOf(i)],f=a._props.length;f--;)h[a._props[f]]=c;return a},Ji,xm,mg=function r(e,t,n){var s=e.vars,i=s.ease,o=s.startAt,a=s.immediateRender,c=s.lazy,h=s.onUpdate,f=s.runBackwards,d=s.yoyoEase,p=s.keyframes,g=s.autoRevert,_=e._dur,y=e._startAt,x=e._targets,w=e.parent,T=w&&w.data==="nested"?w.vars.targets:x,b=e._overwrite==="auto"&&!og,E=e.timeline,C,A,M,k,R,F,U,I,z,j,q,Y,$;if(E&&(!p||!i)&&(i="none"),e._ease=Jo(i,gl.ease),e._yEase=d?L2(Jo(d===!0?i:d,gl.ease)):0,d&&e._yoyo&&!e._repeat&&(d=e._yEase,e._yEase=e._ease,e._ease=d),e._from=!E&&!!s.runBackwards,!E||p&&!s.stagger){if(I=x[0]?Qo(x[0]).harness:0,Y=I&&s[I.prop],C=ff(s,hg),y&&(y._zTime<0&&y.progress(1),t<0&&f&&a&&!g?y.render(-1,!0):y.revert(f&&_?tf:Bb),y._lazy=0),o){if(ao(e._startAt=un.set(x,ls({data:"isStart",overwrite:!1,parent:w,immediateRender:!0,lazy:!y&&mr(c),startAt:null,delay:0,onUpdate:h&&function(){return Nr(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Vn||!a&&!g)&&e._startAt.revert(tf),a&&_&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(f&&_&&!y){if(t&&(a=!1),M=ls({overwrite:!1,data:"isFromStart",lazy:a&&!y&&mr(c),immediateRender:a,stagger:0,parent:w},C),Y&&(M[I.prop]=Y),ao(e._startAt=un.set(x,M)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Vn?e._startAt.revert(tf):e._startAt.render(-1,!0)),e._zTime=t,!a)r(e._startAt,Tt,Tt);else if(!t)return}for(e._pt=e._ptCache=0,c=_&&mr(c)||c&&!_,A=0;A<x.length;A++){if(R=x[A],U=R._gsap||dg(x)[A]._gsap,e._ptLookup[A]=j={},pm[U.id]&&ro.length&&hf(),q=T===x?A:T.indexOf(R),I&&(z=new I).init(R,Y||C,e,q,T)!==!1&&(e._pt=k=new vr(e._pt,R,z.name,0,1,z.render,z,0,z.priority),z._props.forEach(function(W){j[W]=k}),z.priority&&(F=1)),!I||Y)for(M in C)Ur[M]&&(z=V2(M,C,e,q,R,T))?z.priority&&(F=1):j[M]=k=pg.call(e,R,M,"get",C[M],q,T,0,s.stringFilter);e._op&&e._op[A]&&e.kill(R,e._op[A]),b&&e._pt&&(Ji=e,zt.killTweensOf(R,j,e.globalTime(t)),$=!e.parent,Ji=0),e._pt&&c&&(pm[U.id]=1)}F&&Y2(e),e._onInit&&e._onInit(e)}e._onUpdate=h,e._initted=(!e._op||e._pt)&&!$,p&&t<=0&&E.render(rs,!0,!0)},d5=function(e,t,n,s,i,o,a,c){var h=(e._pt&&e._ptCache||(e._ptCache={}))[t],f,d,p,g;if(!h)for(h=e._ptCache[t]=[],p=e._ptLookup,g=e._targets.length;g--;){if(f=p[g][t],f&&f.d&&f.d._pt)for(f=f.d._pt;f&&f.p!==t&&f.fp!==t;)f=f._next;if(!f)return xm=1,e.vars[t]="+=0",mg(e,a),xm=0,c?Hc(t+" not eligible for reset"):1;h.push(f)}for(g=h.length;g--;)d=h[g],f=d._pt||d,f.s=(s||s===0)&&!i?s:f.s+(s||0)+o*f.c,f.c=n-f.s,d.e&&(d.e=en(n)+jn(d.e)),d.b&&(d.b=f.s+jn(d.b))},p5=function(e,t){var n=e[0]?Qo(e[0]).harness:0,s=n&&n.aliases,i,o,a,c;if(!s)return t;i=na({},t);for(o in s)if(o in i)for(c=s[o].split(","),a=c.length;a--;)i[c[a]]=i[o];return i},m5=function(e,t,n,s){var i=t.ease||s||"power1.inOut",o,a;if(Gn(t))a=n[e]||(n[e]=[]),t.forEach(function(c,h){return a.push({t:h/(t.length-1)*100,v:c,e:i})});else for(o in t)a=n[o]||(n[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:i})},Bc=function(e,t,n,s,i){return Yt(e)?e.call(t,n,s,i):En(e)&&~e.indexOf("random(")?qc(e):e},G2=fg+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",H2={};gr(G2+",id,stagger,delay,duration,paused,scrollTrigger",function(r){return H2[r]=1});var un=function(r){l2(e,r);function e(n,s,i,o){var a;typeof s=="number"&&(i.duration=s,s=i,i=null),a=r.call(this,o?s:Lc(s))||this;var c=a.vars,h=c.duration,f=c.delay,d=c.immediateRender,p=c.stagger,g=c.overwrite,_=c.keyframes,y=c.defaults,x=c.scrollTrigger,w=c.yoyoEase,T=s.parent||zt,b=(Gn(n)||u2(n)?Ei(n[0]):"length"in s)?[n]:ss(n),E,C,A,M,k,R,F,U;if(a._targets=b.length?dg(b):Hc("GSAP target "+n+" not found. https://gsap.com",!Lr.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=g,_||p||Hh(h)||Hh(f)){if(s=a.vars,E=a.timeline=new nr({data:"nested",defaults:y||{},targets:T&&T.data==="nested"?T.vars.targets:b}),E.kill(),E.parent=E._dp=yi(a),E._start=0,p||Hh(h)||Hh(f)){if(M=b.length,F=p&&O2(p),Ks(p))for(k in p)~G2.indexOf(k)&&(U||(U={}),U[k]=p[k]);for(C=0;C<M;C++)A=ff(s,H2),A.stagger=0,w&&(A.yoyoEase=w),U&&na(A,U),R=b[C],A.duration=+Bc(h,yi(a),C,R,b),A.delay=(+Bc(f,yi(a),C,R,b)||0)-a._delay,!p&&M===1&&A.delay&&(a._delay=f=A.delay,a._start+=f,A.delay=0),E.to(R,A,F?F(C,R,b):0),E._ease=nt.none;E.duration()?h=f=0:a.timeline=0}else if(_){Lc(ls(E.vars.defaults,{ease:"none"})),E._ease=Jo(_.ease||s.ease||"none");var I=0,z,j,q;if(Gn(_))_.forEach(function(Y){return E.to(b,Y,">")}),E.duration();else{A={};for(k in _)k==="ease"||k==="easeEach"||m5(k,_[k],A,_.easeEach);for(k in A)for(z=A[k].sort(function(Y,$){return Y.t-$.t}),I=0,C=0;C<z.length;C++)j=z[C],q={ease:j.e,duration:(j.t-(C?z[C-1].t:0))/100*h},q[k]=j.v,E.to(b,q,I),I+=q.duration;E.duration()<h&&E.to({},{duration:h-E.duration()})}}h||a.duration(h=E.duration())}else a.timeline=0;return g===!0&&!og&&(Ji=yi(a),zt.killTweensOf(b),Ji=0),qs(T,yi(a),i),s.reversed&&a.reverse(),s.paused&&a.paused(!0),(d||!h&&!_&&a._start===Sn(T._time)&&mr(d)&&qb(yi(a))&&T.data!=="nested")&&(a._tTime=-Tt,a.render(Math.max(0,-f)||0)),x&&C2(yi(a),x),a}var t=e.prototype;return t.render=function(s,i,o){var a=this._time,c=this._tDur,h=this._dur,f=s<0,d=s>c-Tt&&!f?c:s<Tt?0:s,p,g,_,y,x,w,T,b,E;if(!h)Yb(this,s,i,o);else if(d!==this._tTime||!s||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==f){if(p=d,b=this.timeline,this._repeat){if(y=h+this._rDelay,this._repeat<-1&&f)return this.totalTime(y*100+s,i,o);if(p=Sn(d%y),d===c?(_=this._repeat,p=h):(_=~~(d/y),_&&_===Sn(d/y)&&(p=h,_--),p>h&&(p=h)),w=this._yoyo&&_&1,w&&(E=this._yEase,p=h-p),x=vl(this._tTime,y),p===a&&!o&&this._initted&&_===x)return this._tTime=d,this;_!==x&&(b&&this._yEase&&z2(b,w),this.vars.repeatRefresh&&!w&&!this._lock&&this._time!==h&&this._initted&&(this._lock=o=1,this.render(Sn(y*_),!0).invalidate()._lock=0))}if(!this._initted){if(E2(this,f?s:p,o,i,d))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&_!==x))return this;if(h!==this._dur)return this.render(s,i,o)}if(this._tTime=d,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=T=(E||this._ease)(p/h),this._from&&(this.ratio=T=1-T),p&&!a&&!i&&!_&&(Nr(this,"onStart"),this._tTime!==d))return this;for(g=this._pt;g;)g.r(T,g.d),g=g._next;b&&b.render(s<0?s:!p&&w?-Tt:b._dur*b._ease(p/this._dur),i,o)||this._startAt&&(this._zTime=s),this._onUpdate&&!i&&(f&&mm(this,s,i,o),Nr(this,"onUpdate")),this._repeat&&_!==x&&this.vars.onRepeat&&!i&&this.parent&&Nr(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(f&&!this._onUpdate&&mm(this,s,!0,!0),(s||!h)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&ao(this,1),!i&&!(f&&!a)&&(d||a||w)&&(Nr(this,d===c?"onComplete":"onReverseComplete",!0),this._prom&&!(d<c&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(s){return(!s||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(s),r.prototype.invalidate.call(this,s)},t.resetTo=function(s,i,o,a,c){Zc||Fr.wake(),this._ts||this.play();var h=Math.min(this._dur,(this._dp._time-this._start)*this._ts),f;return this._initted||mg(this,h),f=this._ease(h/this._dur),d5(this,s,i,o,a,f,h,c)?this.resetTo(s,i,o,a,1):(Kf(this,0),this.parent||S2(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(s,i){if(i===void 0&&(i="all"),!s&&(!i||i==="all"))return this._lazy=this._pt=0,this.parent?Dc(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(s,i,Ji&&Ji.vars.overwrite!==!0)._first||Dc(this),this.parent&&o!==this.timeline.totalDuration()&&_l(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,c=s?ss(s):a,h=this._ptLookup,f=this._pt,d,p,g,_,y,x,w;if((!i||i==="all")&&Hb(a,c))return i==="all"&&(this._pt=0),Dc(this);for(d=this._op=this._op||[],i!=="all"&&(En(i)&&(y={},gr(i,function(T){return y[T]=1}),i=y),i=p5(a,i)),w=a.length;w--;)if(~c.indexOf(a[w])){p=h[w],i==="all"?(d[w]=i,_=p,g={}):(g=d[w]=d[w]||{},_=i);for(y in _)x=p&&p[y],x&&((!("kill"in x.d)||x.d.kill(y)===!0)&&Xf(this,x,"_pt"),delete p[y]),g!=="all"&&(g[y]=1)}return this._initted&&!this._pt&&f&&Dc(this),this},e.to=function(s,i){return new e(s,i,arguments[2])},e.from=function(s,i){return zc(1,arguments)},e.delayedCall=function(s,i,o,a){return new e(i,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:s,onComplete:i,onReverseComplete:i,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(s,i,o){return zc(2,arguments)},e.set=function(s,i){return i.duration=0,i.repeatDelay||(i.repeat=0),new e(s,i)},e.killTweensOf=function(s,i,o){return zt.killTweensOf(s,i,o)},e}(Yc);ls(un.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});gr("staggerTo,staggerFrom,staggerFromTo",function(r){un[r]=function(){var e=new nr,t=vm.call(arguments,0);return t.splice(r==="staggerFromTo"?5:4,0,0),e[r].apply(e,t)}});var gg=function(e,t,n){return e[t]=n},W2=function(e,t,n){return e[t](n)},g5=function(e,t,n,s){return e[t](s.fp,n)},v5=function(e,t,n){return e.setAttribute(t,n)},vg=function(e,t){return Yt(e[t])?W2:ag(e[t])&&e.setAttribute?v5:gg},q2=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},_5=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},Z2=function(e,t){var n=t._pt,s="";if(!e&&t.b)s=t.b;else if(e===1&&t.e)s=t.e;else{for(;n;)s=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+s,n=n._next;s+=t.c}t.set(t.t,t.p,s,t)},_g=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},y5=function(e,t,n,s){for(var i=this._pt,o;i;)o=i._next,i.p===s&&i.modifier(e,t,n),i=o},x5=function(e){for(var t=this._pt,n,s;t;)s=t._next,t.p===e&&!t.op||t.op===e?Xf(this,t,"_pt"):t.dep||(n=1),t=s;return!n},w5=function(e,t,n,s){s.mSet(e,t,s.m.call(s.tween,n,s.mt),s)},Y2=function(e){for(var t=e._pt,n,s,i,o;t;){for(n=t._next,s=i;s&&s.pr>t.pr;)s=s._next;(t._prev=s?s._prev:o)?t._prev._next=t:i=t,(t._next=s)?s._prev=t:o=t,t=n}e._pt=i},vr=function(){function r(t,n,s,i,o,a,c,h,f){this.t=n,this.s=i,this.c=o,this.p=s,this.r=a||q2,this.d=c||this,this.set=h||gg,this.pr=f||0,this._next=t,t&&(t._prev=this)}var e=r.prototype;return e.modifier=function(n,s,i){this.mSet=this.mSet||this.set,this.set=w5,this.m=n,this.mt=i,this.tween=s},r}();gr(fg+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(r){return hg[r]=1});jr.TweenMax=jr.TweenLite=un;jr.TimelineLite=jr.TimelineMax=nr;zt=new nr({sortChildren:!1,defaults:gl,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Lr.stringFilter=N2;var $o=[],rf={},S5=[],Yv=0,T5=0,Bp=function(e){return(rf[e]||S5).map(function(t){return t()})},wm=function(){var e=Date.now(),t=[];e-Yv>2&&(Bp("matchMediaInit"),$o.forEach(function(n){var s=n.queries,i=n.conditions,o,a,c,h;for(a in s)o=ns.matchMedia(s[a]).matches,o&&(c=1),o!==i[a]&&(i[a]=o,h=1);h&&(n.revert(),c&&t.push(n))}),Bp("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n,function(s){return n.add(null,s)})}),Yv=e,Bp("matchMedia"))},X2=function(){function r(t,n){this.selector=n&&_m(n),this.data=[],this._r=[],this.isReverted=!1,this.id=T5++,t&&this.add(t)}var e=r.prototype;return e.add=function(n,s,i){Yt(n)&&(i=s,s=n,n=Yt);var o=this,a=function(){var h=qt,f=o.selector,d;return h&&h!==o&&h.data.push(o),i&&(o.selector=_m(i)),qt=o,d=s.apply(o,arguments),Yt(d)&&o._r.push(d),qt=h,o.selector=f,o.isReverted=!1,d};return o.last=a,n===Yt?a(o,function(c){return o.add(null,c)}):n?o[n]=a:a},e.ignore=function(n){var s=qt;qt=null,n(this),qt=s},e.getTweens=function(){var n=[];return this.data.forEach(function(s){return s instanceof r?n.push.apply(n,s.getTweens()):s instanceof un&&!(s.parent&&s.parent.data==="nested")&&n.push(s)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,s){var i=this;if(n?function(){for(var a=i.getTweens(),c=i.data.length,h;c--;)h=i.data[c],h.data==="isFlip"&&(h.revert(),h.getChildren(!0,!0,!1).forEach(function(f){return a.splice(a.indexOf(f),1)}));for(a.map(function(f){return{g:f._dur||f._delay||f._sat&&!f._sat.vars.immediateRender?f.globalTime(0):-1/0,t:f}}).sort(function(f,d){return d.g-f.g||-1/0}).forEach(function(f){return f.t.revert(n)}),c=i.data.length;c--;)h=i.data[c],h instanceof nr?h.data!=="nested"&&(h.scrollTrigger&&h.scrollTrigger.revert(),h.kill()):!(h instanceof un)&&h.revert&&h.revert(n);i._r.forEach(function(f){return f(n,i)}),i.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),s)for(var o=$o.length;o--;)$o[o].id===this.id&&$o.splice(o,1)},e.revert=function(n){this.kill(n||{})},r}(),C5=function(){function r(t){this.contexts=[],this.scope=t}var e=r.prototype;return e.add=function(n,s,i){Ks(n)||(n={matches:n});var o=new X2(0,i||this.scope),a=o.conditions={},c,h,f;qt&&!o.selector&&(o.selector=qt.selector),this.contexts.push(o),s=o.add("onMatch",s),o.queries=n;for(h in n)h==="all"?f=1:(c=ns.matchMedia(n[h]),c&&($o.indexOf(o)<0&&$o.push(o),(a[h]=c.matches)&&(f=1),c.addListener?c.addListener(wm):c.addEventListener("change",wm)));return f&&s(o,function(d){return o.add(null,d)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(s){return s.kill(n,!0)})},r}(),pf={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(s){return I2(s)})},timeline:function(e){return new nr(e)},getTweensOf:function(e,t){return zt.getTweensOf(e,t)},getProperty:function(e,t,n,s){En(e)&&(e=ss(e)[0]);var i=Qo(e||{}).get,o=n?w2:x2;return n==="native"&&(n=""),e&&(t?o((Ur[t]&&Ur[t].get||i)(e,t,n,s)):function(a,c,h){return o((Ur[a]&&Ur[a].get||i)(e,a,c,h))})},quickSetter:function(e,t,n){if(e=ss(e),e.length>1){var s=e.map(function(f){return xr.quickSetter(f,t,n)}),i=s.length;return function(f){for(var d=i;d--;)s[d](f)}}e=e[0]||{};var o=Ur[t],a=Qo(e),c=a.harness&&(a.harness.aliases||{})[t]||t,h=o?function(f){var d=new o;nl._pt=0,d.init(e,n?f+n:f,nl,0,[e]),d.render(1,d),nl._pt&&_g(1,nl)}:a.set(e,c);return o?h:function(f){return h(e,c,n?f+n:f,a,1)}},quickTo:function(e,t,n){var s,i=xr.to(e,na((s={},s[t]="+=0.1",s.paused=!0,s),n||{})),o=function(c,h,f){return i.resetTo(t,c,h,f)};return o.tween=i,o},isTweening:function(e){return zt.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Jo(e.ease,gl.ease)),Gv(gl,e||{})},config:function(e){return Gv(Lr,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,s=e.plugins,i=e.defaults,o=e.extendTimeline;(s||"").split(",").forEach(function(a){return a&&!Ur[a]&&!jr[a]&&Hc(t+" effect requires "+a+" plugin.")}),Fp[t]=function(a,c,h){return n(ss(a),ls(c||{},i),h)},o&&(nr.prototype[t]=function(a,c,h){return this.add(Fp[t](a,Ks(c)?c:(h=c)&&{},this),h)})},registerEase:function(e,t){nt[e]=Jo(t)},parseEase:function(e,t){return arguments.length?Jo(e,t):nt},getById:function(e){return zt.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new nr(e),s,i;for(n.smoothChildTiming=mr(e.smoothChildTiming),zt.remove(n),n._dp=0,n._time=n._tTime=zt._time,s=zt._first;s;)i=s._next,(t||!(!s._dur&&s instanceof un&&s.vars.onComplete===s._targets[0]))&&qs(n,s,s._start-s._delay),s=i;return qs(zt,n,0),n},context:function(e,t){return e?new X2(e,t):qt},matchMedia:function(e){return new C5(e)},matchMediaRefresh:function(){return $o.forEach(function(e){var t=e.conditions,n,s;for(s in t)t[s]&&(t[s]=!1,n=1);n&&e.revert()})||wm()},addEventListener:function(e,t){var n=rf[e]||(rf[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=rf[e],s=n&&n.indexOf(t);s>=0&&n.splice(s,1)},utils:{wrap:n5,wrapYoyo:r5,distribute:O2,random:k2,snap:A2,normalize:t5,getUnit:jn,clamp:Kb,splitColor:U2,toArray:ss,selector:_m,mapRange:R2,pipe:$b,unitize:e5,interpolate:s5,shuffle:M2},install:m2,effects:Fp,ticker:Fr,updateRoot:nr.updateRoot,plugins:Ur,globalTimeline:zt,core:{PropTween:vr,globals:g2,Tween:un,Timeline:nr,Animation:Yc,getCache:Qo,_removeLinkedListItem:Xf,reverting:function(){return Vn},context:function(e){return e&&qt&&(qt.data.push(e),e._ctx=qt),qt},suppressOverwrites:function(e){return og=e}}};gr("to,from,fromTo,delayedCall,set,killTweensOf",function(r){return pf[r]=un[r]});Fr.add(nr.updateRoot);nl=pf.to({},{duration:0});var E5=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},b5=function(e,t){var n=e._targets,s,i,o;for(s in t)for(i=n.length;i--;)o=e._ptLookup[i][s],o&&(o=o.d)&&(o._pt&&(o=E5(o,s)),o&&o.modifier&&o.modifier(t[s],e,n[i],s))},jp=function(e,t){return{name:e,rawVars:1,init:function(s,i,o){o._onInit=function(a){var c,h;if(En(i)&&(c={},gr(i,function(f){return c[f]=1}),i=c),t){c={};for(h in i)c[h]=t(i[h]);i=c}b5(a,i)}}}},xr=pf.registerPlugin({name:"attr",init:function(e,t,n,s,i){var o,a,c;this.tween=n;for(o in t)c=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(c||0)+"",t[o],s,i,0,0,o),a.op=o,a.b=c,this._props.push(o)},render:function(e,t){for(var n=t._pt;n;)Vn?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},jp("roundProps",ym),jp("modifiers"),jp("snap",A2))||pf;un.version=nr.version=xr.version="3.12.4";p2=1;lg()&&yl();nt.Power0;nt.Power1;nt.Power2;nt.Power3;nt.Power4;nt.Linear;nt.Quad;nt.Cubic;nt.Quart;nt.Quint;nt.Strong;nt.Elastic;nt.Back;nt.SteppedEase;nt.Bounce;nt.Sine;nt.Expo;nt.Circ;/*!
 * CSSPlugin 3.12.4
 * https://gsap.com
 *
 * Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Xv,$i,al,yg,Wo,Qv,xg,M5=function(){return typeof window<"u"},bi={},Bo=180/Math.PI,ll=Math.PI/180,Ha=Math.atan2,Kv=1e8,wg=/([A-Z])/g,O5=/(left|right|width|margin|padding|x)/i,A5=/[\s,\(]\S/,Ys={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Sm=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},k5=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},P5=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},R5=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},Q2=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},K2=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},D5=function(e,t,n){return e.style[t]=n},I5=function(e,t,n){return e.style.setProperty(t,n)},U5=function(e,t,n){return e._gsap[t]=n},F5=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},N5=function(e,t,n,s,i){var o=e._gsap;o.scaleX=o.scaleY=n,o.renderTransform(i,o)},L5=function(e,t,n,s,i){var o=e._gsap;o[t]=n,o.renderTransform(i,o)},Bt="transform",_r=Bt+"Origin",z5=function r(e,t){var n=this,s=this.target,i=s.style,o=s._gsap;if(e in bi&&i){if(this.tfm=this.tfm||{},e!=="transform")e=Ys[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return n.tfm[a]=wi(s,a)}):this.tfm[e]=o.x?o[e]:wi(s,e),e===_r&&(this.tfm.zOrigin=o.zOrigin);else return Ys.transform.split(",").forEach(function(a){return r.call(n,a,t)});if(this.props.indexOf(Bt)>=0)return;o.svg&&(this.svgo=s.getAttribute("data-svg-origin"),this.props.push(_r,t,"")),e=Bt}(i||t)&&this.props.push(e,t,i[e])},J2=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},B5=function(){var e=this.props,t=this.target,n=t.style,s=t._gsap,i,o;for(i=0;i<e.length;i+=3)e[i+1]?t[e[i]]=e[i+2]:e[i+2]?n[e[i]]=e[i+2]:n.removeProperty(e[i].substr(0,2)==="--"?e[i]:e[i].replace(wg,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)s[o]=this.tfm[o];s.svg&&(s.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),i=xg(),(!i||!i.isStart)&&!n[Bt]&&(J2(n),s.zOrigin&&n[_r]&&(n[_r]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},$2=function(e,t){var n={target:e,props:[],revert:B5,save:z5};return e._gsap||xr.core.getCache(e),t&&t.split(",").forEach(function(s){return n.save(s)}),n},ex,Tm=function(e,t){var n=$i.createElementNS?$i.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):$i.createElement(e);return n&&n.style?n:$i.createElement(e)},Xs=function r(e,t,n){var s=getComputedStyle(e);return s[t]||s.getPropertyValue(t.replace(wg,"-$1").toLowerCase())||s.getPropertyValue(t)||!n&&r(e,xl(t)||t,1)||""},Jv="O,Moz,ms,Ms,Webkit".split(","),xl=function(e,t,n){var s=t||Wo,i=s.style,o=5;if(e in i&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(Jv[o]+e in i););return o<0?null:(o===3?"ms":o>=0?Jv[o]:"")+e},Cm=function(){M5()&&window.document&&(Xv=window,$i=Xv.document,al=$i.documentElement,Wo=Tm("div")||{style:{}},Tm("div"),Bt=xl(Bt),_r=Bt+"Origin",Wo.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",ex=!!xl("perspective"),xg=xr.core.reverting,yg=1)},Vp=function r(e){var t=Tm("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,s=this.nextSibling,i=this.style.cssText,o;if(al.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=r}catch{}else this._gsapBBox&&(o=this._gsapBBox());return n&&(s?n.insertBefore(this,s):n.appendChild(this)),al.removeChild(t),this.style.cssText=i,o},$v=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},tx=function(e){var t;try{t=e.getBBox()}catch{t=Vp.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===Vp||(t=Vp.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+$v(e,["x","cx","x1"])||0,y:+$v(e,["y","cy","y1"])||0,width:0,height:0}:t},nx=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&tx(e))},ra=function(e,t){if(t){var n=e.style,s;t in bi&&t!==_r&&(t=Bt),n.removeProperty?(s=t.substr(0,2),(s==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(s==="--"?t:t.replace(wg,"-$1").toLowerCase())):n.removeAttribute(t)}},eo=function(e,t,n,s,i,o){var a=new vr(e._pt,t,n,0,1,o?K2:Q2);return e._pt=a,a.b=s,a.e=i,e._props.push(n),a},e_={deg:1,rad:1,turn:1},j5={grid:1,flex:1},lo=function r(e,t,n,s){var i=parseFloat(n)||0,o=(n+"").trim().substr((i+"").length)||"px",a=Wo.style,c=O5.test(t),h=e.tagName.toLowerCase()==="svg",f=(h?"client":"offset")+(c?"Width":"Height"),d=100,p=s==="px",g=s==="%",_,y,x,w;if(s===o||!i||e_[s]||e_[o])return i;if(o!=="px"&&!p&&(i=r(e,t,n,"px")),w=e.getCTM&&nx(e),(g||o==="%")&&(bi[t]||~t.indexOf("adius")))return _=w?e.getBBox()[c?"width":"height"]:e[f],en(g?i/_*d:i/100*_);if(a[c?"width":"height"]=d+(p?o:s),y=~t.indexOf("adius")||s==="em"&&e.appendChild&&!h?e:e.parentNode,w&&(y=(e.ownerSVGElement||{}).parentNode),(!y||y===$i||!y.appendChild)&&(y=$i.body),x=y._gsap,x&&g&&x.width&&c&&x.time===Fr.time&&!x.uncache)return en(i/x.width*d);if(g&&(t==="height"||t==="width")){var T=e.style[t];e.style[t]=d+s,_=e[f],T?e.style[t]=T:ra(e,t)}else(g||o==="%")&&!j5[Xs(y,"display")]&&(a.position=Xs(e,"position")),y===e&&(a.position="static"),y.appendChild(Wo),_=Wo[f],y.removeChild(Wo),a.position="absolute";return c&&g&&(x=Qo(y),x.time=Fr.time,x.width=y[f]),en(p?_*i/d:_&&i?d/_*i:0)},wi=function(e,t,n,s){var i;return yg||Cm(),t in Ys&&t!=="transform"&&(t=Ys[t],~t.indexOf(",")&&(t=t.split(",")[0])),bi[t]&&t!=="transform"?(i=Qc(e,s),i=t!=="transformOrigin"?i[t]:i.svg?i.origin:gf(Xs(e,_r))+" "+i.zOrigin+"px"):(i=e.style[t],(!i||i==="auto"||s||~(i+"").indexOf("calc("))&&(i=mf[t]&&mf[t](e,t,n)||Xs(e,t)||_2(e,t)||(t==="opacity"?1:0))),n&&!~(i+"").trim().indexOf(" ")?lo(e,t,i,n)+n:i},V5=function(e,t,n,s){if(!n||n==="none"){var i=xl(t,e,1),o=i&&Xs(e,i,1);o&&o!==n?(t=i,n=o):t==="borderColor"&&(n=Xs(e,"borderTopColor"))}var a=new vr(this._pt,e.style,t,0,1,Z2),c=0,h=0,f,d,p,g,_,y,x,w,T,b,E,C;if(a.b=n,a.e=s,n+="",s+="",s==="auto"&&(y=e.style[t],e.style[t]=s,s=Xs(e,t)||s,y?e.style[t]=y:ra(e,t)),f=[n,s],N2(f),n=f[0],s=f[1],p=n.match(tl)||[],C=s.match(tl)||[],C.length){for(;d=tl.exec(s);)x=d[0],T=s.substring(c,d.index),_?_=(_+1)%5:(T.substr(-5)==="rgba("||T.substr(-5)==="hsla(")&&(_=1),x!==(y=p[h++]||"")&&(g=parseFloat(y)||0,E=y.substr((g+"").length),x.charAt(1)==="="&&(x=ol(g,x)+E),w=parseFloat(x),b=x.substr((w+"").length),c=tl.lastIndex-b.length,b||(b=b||Lr.units[t]||E,c===s.length&&(s+=b,a.e+=b)),E!==b&&(g=lo(e,t,y,b)||0),a._pt={_next:a._pt,p:T||h===1?T:",",s:g,c:w-g,m:_&&_<4||t==="zIndex"?Math.round:0});a.c=c<s.length?s.substring(c,s.length):""}else a.r=t==="display"&&s==="none"?K2:Q2;return f2.test(s)&&(a.e=0),this._pt=a,a},t_={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},G5=function(e){var t=e.split(" "),n=t[0],s=t[1]||"50%";return(n==="top"||n==="bottom"||s==="left"||s==="right")&&(e=n,n=s,s=e),t[0]=t_[n]||n,t[1]=t_[s]||s,t.join(" ")},H5=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,s=n.style,i=t.u,o=n._gsap,a,c,h;if(i==="all"||i===!0)s.cssText="",c=1;else for(i=i.split(","),h=i.length;--h>-1;)a=i[h],bi[a]&&(c=1,a=a==="transformOrigin"?_r:Bt),ra(n,a);c&&(ra(n,Bt),o&&(o.svg&&n.removeAttribute("transform"),Qc(n,1),o.uncache=1,J2(s)))}},mf={clearProps:function(e,t,n,s,i){if(i.data!=="isFromStart"){var o=e._pt=new vr(e._pt,t,n,0,0,H5);return o.u=s,o.pr=-10,o.tween=i,e._props.push(n),1}}},Xc=[1,0,0,1,0,0],rx={},sx=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},n_=function(e){var t=Xs(e,Bt);return sx(t)?Xc:t.substr(7).match(h2).map(en)},Sg=function(e,t){var n=e._gsap||Qo(e),s=e.style,i=n_(e),o,a,c,h;return n.svg&&e.getAttribute("transform")?(c=e.transform.baseVal.consolidate().matrix,i=[c.a,c.b,c.c,c.d,c.e,c.f],i.join(",")==="1,0,0,1,0,0"?Xc:i):(i===Xc&&!e.offsetParent&&e!==al&&!n.svg&&(c=s.display,s.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(h=1,a=e.nextElementSibling,al.appendChild(e)),i=n_(e),c?s.display=c:ra(e,"display"),h&&(a?o.insertBefore(e,a):o?o.appendChild(e):al.removeChild(e))),t&&i.length>6?[i[0],i[1],i[4],i[5],i[12],i[13]]:i)},Em=function(e,t,n,s,i,o){var a=e._gsap,c=i||Sg(e,!0),h=a.xOrigin||0,f=a.yOrigin||0,d=a.xOffset||0,p=a.yOffset||0,g=c[0],_=c[1],y=c[2],x=c[3],w=c[4],T=c[5],b=t.split(" "),E=parseFloat(b[0])||0,C=parseFloat(b[1])||0,A,M,k,R;n?c!==Xc&&(M=g*x-_*y)&&(k=E*(x/M)+C*(-y/M)+(y*T-x*w)/M,R=E*(-_/M)+C*(g/M)-(g*T-_*w)/M,E=k,C=R):(A=tx(e),E=A.x+(~b[0].indexOf("%")?E/100*A.width:E),C=A.y+(~(b[1]||b[0]).indexOf("%")?C/100*A.height:C)),s||s!==!1&&a.smooth?(w=E-h,T=C-f,a.xOffset=d+(w*g+T*y)-w,a.yOffset=p+(w*_+T*x)-T):a.xOffset=a.yOffset=0,a.xOrigin=E,a.yOrigin=C,a.smooth=!!s,a.origin=t,a.originIsAbsolute=!!n,e.style[_r]="0px 0px",o&&(eo(o,a,"xOrigin",h,E),eo(o,a,"yOrigin",f,C),eo(o,a,"xOffset",d,a.xOffset),eo(o,a,"yOffset",p,a.yOffset)),e.setAttribute("data-svg-origin",E+" "+C)},Qc=function(e,t){var n=e._gsap||new j2(e);if("x"in n&&!t&&!n.uncache)return n;var s=e.style,i=n.scaleX<0,o="px",a="deg",c=getComputedStyle(e),h=Xs(e,_r)||"0",f,d,p,g,_,y,x,w,T,b,E,C,A,M,k,R,F,U,I,z,j,q,Y,$,W,V,H,L,B,J,te,X;return f=d=p=y=x=w=T=b=E=0,g=_=1,n.svg=!!(e.getCTM&&nx(e)),c.translate&&((c.translate!=="none"||c.scale!=="none"||c.rotate!=="none")&&(s[Bt]=(c.translate!=="none"?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(c.rotate!=="none"?"rotate("+c.rotate+") ":"")+(c.scale!=="none"?"scale("+c.scale.split(" ").join(",")+") ":"")+(c[Bt]!=="none"?c[Bt]:"")),s.scale=s.rotate=s.translate="none"),M=Sg(e,n.svg),n.svg&&(n.uncache?(W=e.getBBox(),h=n.xOrigin-W.x+"px "+(n.yOrigin-W.y)+"px",$=""):$=!t&&e.getAttribute("data-svg-origin"),Em(e,$||h,!!$||n.originIsAbsolute,n.smooth!==!1,M)),C=n.xOrigin||0,A=n.yOrigin||0,M!==Xc&&(U=M[0],I=M[1],z=M[2],j=M[3],f=q=M[4],d=Y=M[5],M.length===6?(g=Math.sqrt(U*U+I*I),_=Math.sqrt(j*j+z*z),y=U||I?Ha(I,U)*Bo:0,T=z||j?Ha(z,j)*Bo+y:0,T&&(_*=Math.abs(Math.cos(T*ll))),n.svg&&(f-=C-(C*U+A*z),d-=A-(C*I+A*j))):(X=M[6],J=M[7],H=M[8],L=M[9],B=M[10],te=M[11],f=M[12],d=M[13],p=M[14],k=Ha(X,B),x=k*Bo,k&&(R=Math.cos(-k),F=Math.sin(-k),$=q*R+H*F,W=Y*R+L*F,V=X*R+B*F,H=q*-F+H*R,L=Y*-F+L*R,B=X*-F+B*R,te=J*-F+te*R,q=$,Y=W,X=V),k=Ha(-z,B),w=k*Bo,k&&(R=Math.cos(-k),F=Math.sin(-k),$=U*R-H*F,W=I*R-L*F,V=z*R-B*F,te=j*F+te*R,U=$,I=W,z=V),k=Ha(I,U),y=k*Bo,k&&(R=Math.cos(k),F=Math.sin(k),$=U*R+I*F,W=q*R+Y*F,I=I*R-U*F,Y=Y*R-q*F,U=$,q=W),x&&Math.abs(x)+Math.abs(y)>359.9&&(x=y=0,w=180-w),g=en(Math.sqrt(U*U+I*I+z*z)),_=en(Math.sqrt(Y*Y+X*X)),k=Ha(q,Y),T=Math.abs(k)>2e-4?k*Bo:0,E=te?1/(te<0?-te:te):0),n.svg&&($=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!sx(Xs(e,Bt)),$&&e.setAttribute("transform",$))),Math.abs(T)>90&&Math.abs(T)<270&&(i?(g*=-1,T+=y<=0?180:-180,y+=y<=0?180:-180):(_*=-1,T+=T<=0?180:-180)),t=t||n.uncache,n.x=f-((n.xPercent=f&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-f)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+o,n.y=d-((n.yPercent=d&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-d)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+o,n.z=p+o,n.scaleX=en(g),n.scaleY=en(_),n.rotation=en(y)+a,n.rotationX=en(x)+a,n.rotationY=en(w)+a,n.skewX=T+a,n.skewY=b+a,n.transformPerspective=E+o,(n.zOrigin=parseFloat(h.split(" ")[2])||!t&&n.zOrigin||0)&&(s[_r]=gf(h)),n.xOffset=n.yOffset=0,n.force3D=Lr.force3D,n.renderTransform=n.svg?q5:ex?ix:W5,n.uncache=0,n},gf=function(e){return(e=e.split(" "))[0]+" "+e[1]},Gp=function(e,t,n){var s=jn(t);return en(parseFloat(t)+parseFloat(lo(e,"x",n+"px",s)))+s},W5=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,ix(e,t)},Lo="0deg",Oc="0px",zo=") ",ix=function(e,t){var n=t||this,s=n.xPercent,i=n.yPercent,o=n.x,a=n.y,c=n.z,h=n.rotation,f=n.rotationY,d=n.rotationX,p=n.skewX,g=n.skewY,_=n.scaleX,y=n.scaleY,x=n.transformPerspective,w=n.force3D,T=n.target,b=n.zOrigin,E="",C=w==="auto"&&e&&e!==1||w===!0;if(b&&(d!==Lo||f!==Lo)){var A=parseFloat(f)*ll,M=Math.sin(A),k=Math.cos(A),R;A=parseFloat(d)*ll,R=Math.cos(A),o=Gp(T,o,M*R*-b),a=Gp(T,a,-Math.sin(A)*-b),c=Gp(T,c,k*R*-b+b)}x!==Oc&&(E+="perspective("+x+zo),(s||i)&&(E+="translate("+s+"%, "+i+"%) "),(C||o!==Oc||a!==Oc||c!==Oc)&&(E+=c!==Oc||C?"translate3d("+o+", "+a+", "+c+") ":"translate("+o+", "+a+zo),h!==Lo&&(E+="rotate("+h+zo),f!==Lo&&(E+="rotateY("+f+zo),d!==Lo&&(E+="rotateX("+d+zo),(p!==Lo||g!==Lo)&&(E+="skew("+p+", "+g+zo),(_!==1||y!==1)&&(E+="scale("+_+", "+y+zo),T.style[Bt]=E||"translate(0, 0)"},q5=function(e,t){var n=t||this,s=n.xPercent,i=n.yPercent,o=n.x,a=n.y,c=n.rotation,h=n.skewX,f=n.skewY,d=n.scaleX,p=n.scaleY,g=n.target,_=n.xOrigin,y=n.yOrigin,x=n.xOffset,w=n.yOffset,T=n.forceCSS,b=parseFloat(o),E=parseFloat(a),C,A,M,k,R;c=parseFloat(c),h=parseFloat(h),f=parseFloat(f),f&&(f=parseFloat(f),h+=f,c+=f),c||h?(c*=ll,h*=ll,C=Math.cos(c)*d,A=Math.sin(c)*d,M=Math.sin(c-h)*-p,k=Math.cos(c-h)*p,h&&(f*=ll,R=Math.tan(h-f),R=Math.sqrt(1+R*R),M*=R,k*=R,f&&(R=Math.tan(f),R=Math.sqrt(1+R*R),C*=R,A*=R)),C=en(C),A=en(A),M=en(M),k=en(k)):(C=d,k=p,A=M=0),(b&&!~(o+"").indexOf("px")||E&&!~(a+"").indexOf("px"))&&(b=lo(g,"x",o,"px"),E=lo(g,"y",a,"px")),(_||y||x||w)&&(b=en(b+_-(_*C+y*M)+x),E=en(E+y-(_*A+y*k)+w)),(s||i)&&(R=g.getBBox(),b=en(b+s/100*R.width),E=en(E+i/100*R.height)),R="matrix("+C+","+A+","+M+","+k+","+b+","+E+")",g.setAttribute("transform",R),T&&(g.style[Bt]=R)},Z5=function(e,t,n,s,i){var o=360,a=En(i),c=parseFloat(i)*(a&&~i.indexOf("rad")?Bo:1),h=c-s,f=s+h+"deg",d,p;return a&&(d=i.split("_")[1],d==="short"&&(h%=o,h!==h%(o/2)&&(h+=h<0?o:-o)),d==="cw"&&h<0?h=(h+o*Kv)%o-~~(h/o)*o:d==="ccw"&&h>0&&(h=(h-o*Kv)%o-~~(h/o)*o)),e._pt=p=new vr(e._pt,t,n,s,h,k5),p.e=f,p.u="deg",e._props.push(n),p},r_=function(e,t){for(var n in t)e[n]=t[n];return e},Y5=function(e,t,n){var s=r_({},n._gsap),i="perspective,force3D,transformOrigin,svgOrigin",o=n.style,a,c,h,f,d,p,g,_;s.svg?(h=n.getAttribute("transform"),n.setAttribute("transform",""),o[Bt]=t,a=Qc(n,1),ra(n,Bt),n.setAttribute("transform",h)):(h=getComputedStyle(n)[Bt],o[Bt]=t,a=Qc(n,1),o[Bt]=h);for(c in bi)h=s[c],f=a[c],h!==f&&i.indexOf(c)<0&&(g=jn(h),_=jn(f),d=g!==_?lo(n,c,h,_):parseFloat(h),p=parseFloat(f),e._pt=new vr(e._pt,a,c,d,p-d,Sm),e._pt.u=_||0,e._props.push(c));r_(a,s)};gr("padding,margin,Width,Radius",function(r,e){var t="Top",n="Right",s="Bottom",i="Left",o=(e<3?[t,n,s,i]:[t+i,t+n,s+n,s+i]).map(function(a){return e<2?r+a:"border"+a+r});mf[e>1?"border"+r:r]=function(a,c,h,f,d){var p,g;if(arguments.length<4)return p=o.map(function(_){return wi(a,_,h)}),g=p.join(" "),g.split(p[0]).length===5?p[0]:g;p=(f+"").split(" "),g={},o.forEach(function(_,y){return g[_]=p[y]=p[y]||p[(y-1)/2|0]}),a.init(c,g,d)}});var ox={name:"css",register:Cm,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,s,i){var o=this._props,a=e.style,c=n.vars.startAt,h,f,d,p,g,_,y,x,w,T,b,E,C,A,M,k;yg||Cm(),this.styles=this.styles||$2(e),k=this.styles.props,this.tween=n;for(y in t)if(y!=="autoRound"&&(f=t[y],!(Ur[y]&&V2(y,t,n,s,e,i)))){if(g=typeof f,_=mf[y],g==="function"&&(f=f.call(n,s,e,i),g=typeof f),g==="string"&&~f.indexOf("random(")&&(f=qc(f)),_)_(this,e,y,f,n)&&(M=1);else if(y.substr(0,2)==="--")h=(getComputedStyle(e).getPropertyValue(y)+"").trim(),f+="",so.lastIndex=0,so.test(h)||(x=jn(h),w=jn(f)),w?x!==w&&(h=lo(e,y,h,w)+w):x&&(f+=x),this.add(a,"setProperty",h,f,s,i,0,0,y),o.push(y),k.push(y,0,a[y]);else if(g!=="undefined"){if(c&&y in c?(h=typeof c[y]=="function"?c[y].call(n,s,e,i):c[y],En(h)&&~h.indexOf("random(")&&(h=qc(h)),jn(h+"")||h==="auto"||(h+=Lr.units[y]||jn(wi(e,y))||""),(h+"").charAt(1)==="="&&(h=wi(e,y))):h=wi(e,y),p=parseFloat(h),T=g==="string"&&f.charAt(1)==="="&&f.substr(0,2),T&&(f=f.substr(2)),d=parseFloat(f),y in Ys&&(y==="autoAlpha"&&(p===1&&wi(e,"visibility")==="hidden"&&d&&(p=0),k.push("visibility",0,a.visibility),eo(this,a,"visibility",p?"inherit":"hidden",d?"inherit":"hidden",!d)),y!=="scale"&&y!=="transform"&&(y=Ys[y],~y.indexOf(",")&&(y=y.split(",")[0]))),b=y in bi,b){if(this.styles.save(y),E||(C=e._gsap,C.renderTransform&&!t.parseTransform||Qc(e,t.parseTransform),A=t.smoothOrigin!==!1&&C.smooth,E=this._pt=new vr(this._pt,a,Bt,0,1,C.renderTransform,C,0,-1),E.dep=1),y==="scale")this._pt=new vr(this._pt,C,"scaleY",C.scaleY,(T?ol(C.scaleY,T+d):d)-C.scaleY||0,Sm),this._pt.u=0,o.push("scaleY",y),y+="X";else if(y==="transformOrigin"){k.push(_r,0,a[_r]),f=G5(f),C.svg?Em(e,f,0,A,0,this):(w=parseFloat(f.split(" ")[2])||0,w!==C.zOrigin&&eo(this,C,"zOrigin",C.zOrigin,w),eo(this,a,y,gf(h),gf(f)));continue}else if(y==="svgOrigin"){Em(e,f,1,A,0,this);continue}else if(y in rx){Z5(this,C,y,p,T?ol(p,T+f):f);continue}else if(y==="smoothOrigin"){eo(this,C,"smooth",C.smooth,f);continue}else if(y==="force3D"){C[y]=f;continue}else if(y==="transform"){Y5(this,f,e);continue}}else y in a||(y=xl(y)||y);if(b||(d||d===0)&&(p||p===0)&&!A5.test(f)&&y in a)x=(h+"").substr((p+"").length),d||(d=0),w=jn(f)||(y in Lr.units?Lr.units[y]:x),x!==w&&(p=lo(e,y,h,w)),this._pt=new vr(this._pt,b?C:a,y,p,(T?ol(p,T+d):d)-p,!b&&(w==="px"||y==="zIndex")&&t.autoRound!==!1?R5:Sm),this._pt.u=w||0,x!==w&&w!=="%"&&(this._pt.b=h,this._pt.r=P5);else if(y in a)V5.call(this,e,y,h,T?T+f:f);else if(y in e)this.add(e,y,h||e[y],T?T+f:f,s,i);else if(y!=="parseTransform"){ug(y,f);continue}b||(y in a?k.push(y,0,a[y]):k.push(y,1,h||e[y])),o.push(y)}}M&&Y2(this)},render:function(e,t){if(t.tween._time||!xg())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:wi,aliases:Ys,getSetter:function(e,t,n){var s=Ys[t];return s&&s.indexOf(",")<0&&(t=s),t in bi&&t!==_r&&(e._gsap.x||wi(e,"x"))?n&&Qv===n?t==="scale"?F5:U5:(Qv=n||{})&&(t==="scale"?N5:L5):e.style&&!ag(e.style[t])?D5:~t.indexOf("-")?I5:vg(e,t)},core:{_removeProperty:ra,_getMatrix:Sg}};xr.utils.checkPrefix=xl;xr.core.getStyleSaver=$2;(function(r,e,t,n){var s=gr(r+","+e+","+t,function(i){bi[i]=1});gr(e,function(i){Lr.units[i]="deg",rx[i]=1}),Ys[s[13]]=r+","+e,gr(n,function(i){var o=i.split(":");Ys[o[1]]=s[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");gr("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(r){Lr.units[r]="px"});xr.registerPlugin(ox);var ax=xr.registerPlugin(ox)||xr;ax.core.Tween;const X5=(r,e,t,n,s)=>{const i=new LS,o=1e-5;i.absarc(o,o,o,-Math.PI/2,-Math.PI,!0),i.absarc(o,e-n*2,o,Math.PI,Math.PI/2,!0),i.absarc(r-n*2,e-n*2,o,Math.PI/2,0,!0),i.absarc(r-n*2,o,o,0,-Math.PI/2,!0);const a=new zS(i,{depth:t-n*2,bevelEnabled:!0,bevelSegments:s,steps:2,bevelSize:n,bevelThickness:n,curveSegments:s});a.center();const c=[],h=a.getAttribute("normal"),f=a.getAttribute("position");for(let d=0;d<f.count;d+=1){const p=new ye(h.getX(d),h.getY(d),h.getZ(d)),g=new ye(f.getX(d),f.getY(d),f.getZ(d));let _=0,y=0;Math.abs(p.y)>.9?(_=g.x/r+.5,y=1-(g.z/t+.5)):Math.abs(p.x)>.9?(_=-g.z/t+.5,y=1-(-g.y/e+.5)):Math.abs(p.z)>.9&&(_=g.x/r+.5,y=1-(-g.y/e+.5)),c.push(_,y)}return a.setAttribute("uv",new af(c,2)),a};X5(10,10,10,2,10);const bm=new NS(10,10,10),lx=r=>r.node_type==="topic"&&(r.scale||1)>5,Q5=500,K5=800;let Ac=null;const J5=500,Tg=(r,e)=>{if(Ac)return null;Ac=setTimeout(()=>{Ac&&(clearTimeout(Ac),Ac=null)},J5);const t=[];return r.forEach(s=>{const i=e.position.distanceTo(BS.set(s.x,s.y,s.z));i<K5&&t.push({id:s.ref_id||"",distance:i})}),t.sort((s,i)=>s.distance-i.distance).slice(0,Q5).map(s=>s.id)},Ti=new ye(5e3,600,1600),s_=100,$5=600,eM=2e3,Hp={x:172.7392402058252,y:-239.04675366094037,z:-2e3},cx="14.8.49",i_=(r,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:r}),o_=(r,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:r}),Mm=(r,e)=>({startTime:e,type:"setValue",value:r}),ux=(r,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:r}),hx=(r,e,{startTime:t,target:n,timeConstant:s})=>n+(e-n)*Math.exp((t-r)/s),rl=r=>r.type==="exponentialRampToValue",vf=r=>r.type==="linearRampToValue",Qi=r=>rl(r)||vf(r),Cg=r=>r.type==="setValue",xi=r=>r.type==="setValueCurve",_f=(r,e,t,n)=>{const s=r[e];return s===void 0?n:Qi(s)||Cg(s)?s.value:xi(s)?s.values[s.values.length-1]:hx(t,_f(r,e-1,s.startTime,n),s)},a_=(r,e,t,n,s)=>t===void 0?[n.insertTime,s]:Qi(t)?[t.endTime,t.value]:Cg(t)?[t.startTime,t.value]:xi(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,_f(r,e-1,t.startTime,s)],Om=r=>r.type==="cancelAndHold",Am=r=>r.type==="cancelScheduledValues",Yi=r=>Om(r)||Am(r)?r.cancelTime:rl(r)||vf(r)?r.endTime:r.startTime,l_=(r,e,t,{endTime:n,value:s})=>t===s?s:0<t&&0<s||t<0&&s<0?t*(s/t)**((r-e)/(n-e)):0,c_=(r,e,t,{endTime:n,value:s})=>t+(r-e)/(n-e)*(s-t),tM=(r,e)=>{const t=Math.floor(e),n=Math.ceil(e);return t===n?r[t]:(1-(e-t))*r[t]+(1-(n-e))*r[n]},nM=(r,{duration:e,startTime:t,values:n})=>{const s=(r-t)/e*(n.length-1);return tM(n,s)},Wh=r=>r.type==="setTarget";class rM{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=Yi(e);if(Om(e)||Am(e)){const n=this._automationEvents.findIndex(i=>Am(e)&&xi(i)?i.startTime+i.duration>=t:Yi(i)>=t),s=this._automationEvents[n];if(n!==-1&&(this._automationEvents=this._automationEvents.slice(0,n)),Om(e)){const i=this._automationEvents[this._automationEvents.length-1];if(s!==void 0&&Qi(s)){if(i!==void 0&&Wh(i))throw new Error("The internal list is malformed.");const o=i===void 0?s.insertTime:xi(i)?i.startTime+i.duration:Yi(i),a=i===void 0?this._defaultValue:xi(i)?i.values[i.values.length-1]:i.value,c=rl(s)?l_(t,o,a,s):c_(t,o,a,s),h=rl(s)?i_(c,t,this._currenTime):o_(c,t,this._currenTime);this._automationEvents.push(h)}if(i!==void 0&&Wh(i)&&this._automationEvents.push(Mm(this.getValue(t),t)),i!==void 0&&xi(i)&&i.startTime+i.duration>t){const o=t-i.startTime,a=(i.values.length-1)/i.duration,c=Math.max(2,1+Math.ceil(o*a)),h=o/(c-1)*a,f=i.values.slice(0,c);if(h<1)for(let d=1;d<c;d+=1){const p=h*d%1;f[d]=i.values[d-1]*(1-p)+i.values[d]*p}this._automationEvents[this._automationEvents.length-1]=ux(f,i.startTime,o)}}}else{const n=this._automationEvents.findIndex(o=>Yi(o)>t),s=n===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[n-1];if(s!==void 0&&xi(s)&&Yi(s)+s.duration>t)return!1;const i=rl(e)?i_(e.value,e.endTime,this._currenTime):vf(e)?o_(e.value,t,this._currenTime):e;if(n===-1)this._automationEvents.push(i);else{if(xi(e)&&t+e.duration>Yi(this._automationEvents[n]))return!1;this._automationEvents.splice(n,0,i)}}return!0}flush(e){const t=this._automationEvents.findIndex(n=>Yi(n)>e);if(t>1){const n=this._automationEvents.slice(t-1),s=n[0];Wh(s)&&n.unshift(Mm(_f(this._automationEvents,t-2,s.startTime,this._defaultValue),s.startTime)),this._automationEvents=n}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(o=>Yi(o)>e),n=this._automationEvents[t],s=(t===-1?this._automationEvents.length:t)-1,i=this._automationEvents[s];if(i!==void 0&&Wh(i)&&(n===void 0||!Qi(n)||n.insertTime>e))return hx(e,_f(this._automationEvents,s-1,i.startTime,this._defaultValue),i);if(i!==void 0&&Cg(i)&&(n===void 0||!Qi(n)))return i.value;if(i!==void 0&&xi(i)&&(n===void 0||!Qi(n)||i.startTime+i.duration>e))return e<i.startTime+i.duration?nM(e,i):i.values[i.values.length-1];if(i!==void 0&&Qi(i)&&(n===void 0||!Qi(n)))return i.value;if(n!==void 0&&rl(n)){const[o,a]=a_(this._automationEvents,s,i,n,this._defaultValue);return l_(e,o,a,n)}if(n!==void 0&&vf(n)){const[o,a]=a_(this._automationEvents,s,i,n,this._defaultValue);return c_(e,o,a,n)}return this._defaultValue}}const sM=r=>({cancelTime:r,type:"cancelAndHold"}),iM=r=>({cancelTime:r,type:"cancelScheduledValues"}),oM=(r,e)=>({endTime:e,type:"exponentialRampToValue",value:r}),aM=(r,e)=>({endTime:e,type:"linearRampToValue",value:r}),lM=(r,e,t)=>({startTime:e,target:r,timeConstant:t,type:"setTarget"}),cM=()=>new DOMException("","AbortError"),uM=r=>(e,t,[n,s,i],o)=>{r(e[s],[t,n,i],a=>a[0]===t&&a[1]===n,o)},hM=r=>(e,t,n)=>{const s=[];for(let i=0;i<n.numberOfInputs;i+=1)s.push(new Set);r.set(e,{activeInputs:s,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},fM=r=>(e,t)=>{r.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},wl=new WeakSet,fx=new WeakMap,Eg=new WeakMap,dx=new WeakMap,bg=new WeakMap,Jf=new WeakMap,px=new WeakMap,km=new WeakMap,Pm=new WeakMap,Rm=new WeakMap,mx={construct(){return mx}},dM=r=>{try{const e=new Proxy(r,mx);new e}catch{return!1}return!0},u_=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,h_=(r,e)=>{const t=[];let n=r.replace(/^[\s]+/,""),s=n.match(u_);for(;s!==null;){const i=s[1].slice(1,-1),o=s[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());t.push(o),n=n.slice(s[0].length).replace(/^[\s]+/,""),s=n.match(u_)}return[t.join(";"),n]},f_=r=>{if(r!==void 0&&!Array.isArray(r))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},d_=r=>{if(!dM(r))throw new TypeError("The given value for processorCtor should be a constructor.");if(r.prototype===null||typeof r.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},pM=(r,e,t,n,s,i,o,a,c,h,f,d,p)=>{let g=0;return(_,y,x={credentials:"omit"})=>{const w=f.get(_);if(w!==void 0&&w.has(y))return Promise.resolve();const T=h.get(_);if(T!==void 0){const C=T.get(y);if(C!==void 0)return C}const b=i(_),E=b.audioWorklet===void 0?s(y).then(([C,A])=>{const[M,k]=h_(C,A),R=`${M};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${k}
})})(window,'_AWGS')`;return t(R)}).then(()=>{const C=p._AWGS.pop();if(C===void 0)throw new SyntaxError;n(b.currentTime,b.sampleRate,()=>C(class{},void 0,(A,M)=>{if(A.trim()==="")throw e();const k=Pm.get(b);if(k!==void 0){if(k.has(A))throw e();d_(M),f_(M.parameterDescriptors),k.set(A,M)}else d_(M),f_(M.parameterDescriptors),Pm.set(b,new Map([[A,M]]))},b.sampleRate,void 0,void 0))}):Promise.all([s(y),Promise.resolve(r(d,d))]).then(([[C,A],M])=>{const k=g+1;g=k;const[R,F]=h_(C,A),j=`${R};((AudioWorkletProcessor,registerProcessor)=>{${F}
})(${M?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${M?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${M?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${k}',class extends AudioWorkletProcessor{process(){return !1}})`,q=new Blob([j],{type:"application/javascript; charset=utf-8"}),Y=URL.createObjectURL(q);return b.audioWorklet.addModule(Y,x).then(()=>{if(a(b))return b;const $=o(b);return $.audioWorklet.addModule(Y,x).then(()=>$)}).then($=>{if(c===null)throw new SyntaxError;try{new c($,`__sac${k}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(Y))});return T===void 0?h.set(_,new Map([[y,E]])):T.set(y,E),E.then(()=>{const C=f.get(_);C===void 0?f.set(_,new Set([y])):C.add(y)}).finally(()=>{const C=h.get(_);C!==void 0&&C.delete(y)}),E}},Ss=(r,e)=>{const t=r.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},$f=(r,e)=>{const t=Array.from(r).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[n]=t;return r.delete(n),n},gx=(r,e,t,n)=>{const s=Ss(r,e),i=$f(s,o=>o[0]===t&&o[1]===n);return s.size===0&&r.delete(e),i},Eu=r=>Ss(px,r),Sl=r=>{if(wl.has(r))throw new Error("The AudioNode is already stored.");wl.add(r),Eu(r).forEach(e=>e(!0))},vx=r=>"port"in r,bu=r=>{if(!wl.has(r))throw new Error("The AudioNode is not stored.");wl.delete(r),Eu(r).forEach(e=>e(!1))},Dm=(r,e)=>{!vx(r)&&e.every(t=>t.size===0)&&bu(r)},mM=(r,e,t,n,s,i,o,a,c,h,f,d,p)=>{const g=new WeakMap;return(_,y,x,w,T)=>{const{activeInputs:b,passiveInputs:E}=i(y),{outputs:C}=i(_),A=a(_),M=k=>{const R=c(y),F=c(_);if(k){const U=gx(E,_,x,w);r(b,_,U,!1),!T&&!d(_)&&t(F,R,x,w),p(y)&&Sl(y)}else{const U=n(b,_,x,w);e(E,w,U,!1),!T&&!d(_)&&s(F,R,x,w);const I=o(y);if(I===0)f(y)&&Dm(y,b);else{const z=g.get(y);z!==void 0&&clearTimeout(z),g.set(y,setTimeout(()=>{f(y)&&Dm(y,b)},I*1e3))}}};return h(C,[y,x,w],k=>k[0]===y&&k[1]===x&&k[2]===w,!0)?(A.add(M),f(_)?r(b,_,[x,w,M],!0):e(E,w,[_,x,M],!0),!0):!1}},gM=r=>(e,t,[n,s,i],o)=>{const a=e.get(n);a===void 0?e.set(n,new Set([[s,t,i]])):r(a,[s,t,i],c=>c[0]===s&&c[1]===t,o)},vM=r=>(e,t)=>{const n=r(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(n).connect(e.destination);const s=()=>{t.removeEventListener("ended",s),t.disconnect(n),n.disconnect()};t.addEventListener("ended",s)},_M=r=>(e,t)=>{r(e).add(t)},yM={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},xM=(r,e,t,n,s,i)=>class extends r{constructor(a,c){const h=s(a),f={...yM,...c},d=n(h,f),p=i(h)?e():null;super(a,!1,d,p),this._nativeAnalyserNode=d}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},Wn=(r,e)=>r.context===e,wM=(r,e,t)=>()=>{const n=new WeakMap,s=async(i,o)=>{let a=e(i);if(!Wn(a,o)){const h={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=r(o,h)}return n.set(o,a),await t(i,o,a),a};return{render(i,o){const a=n.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},yf=r=>{try{r.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},$s=()=>new DOMException("","IndexSizeError"),Mg=r=>{r.getChannelData=(e=>t=>{try{return e.call(r,t)}catch(n){throw n.code===12?$s():n}})(r.getChannelData)},SM={numberOfChannels:1},TM=(r,e,t,n,s,i,o,a)=>{let c=null;return class _x{constructor(f){if(s===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:d,numberOfChannels:p,sampleRate:g}={...SM,...f};c===null&&(c=new s(1,1,44100));const _=n!==null&&e(i,i)?new n({length:d,numberOfChannels:p,sampleRate:g}):c.createBuffer(p,d,g);if(_.numberOfChannels===0)throw t();return typeof _.copyFromChannel!="function"?(o(_),Mg(_)):e(yf,()=>yf(_))||a(_),r.add(_),_}static[Symbol.hasInstance](f){return f!==null&&typeof f=="object"&&Object.getPrototypeOf(f)===_x.prototype||r.has(f)}}},pr=-34028234663852886e22,tr=-pr,Ci=r=>wl.has(r),CM={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},EM=(r,e,t,n,s,i,o,a)=>class extends r{constructor(h,f){const d=i(h),p={...CM,...f},g=s(d,p),_=o(d),y=_?e():null;super(h,!1,g,y),this._audioBufferSourceNodeRenderer=y,this._isBufferNullified=!1,this._isBufferSet=p.buffer!==null,this._nativeAudioBufferSourceNode=g,this._onended=null,this._playbackRate=t(this,_,g.playbackRate,tr,pr)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(h){if(this._nativeAudioBufferSourceNode.buffer=h,h!==null){if(this._isBufferSet)throw n();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(h){this._nativeAudioBufferSourceNode.loop=h}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(h){this._nativeAudioBufferSourceNode.loopEnd=h}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(h){this._nativeAudioBufferSourceNode.loopStart=h}get onended(){return this._onended}set onended(h){const f=typeof h=="function"?a(this,h):null;this._nativeAudioBufferSourceNode.onended=f;const d=this._nativeAudioBufferSourceNode.onended;this._onended=d!==null&&d===f?h:d}get playbackRate(){return this._playbackRate}start(h=0,f=0,d){if(this._nativeAudioBufferSourceNode.start(h,f,d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=d===void 0?[h,f]:[h,f,d]),this.context.state!=="closed"){Sl(this);const p=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",p),Ci(this)&&bu(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",p)}}stop(h=0){this._nativeAudioBufferSourceNode.stop(h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=h)}},bM=(r,e,t,n,s)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(h,f)=>{let d=t(h);const p=Wn(d,f);if(!p){const g={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,loop:d.loop,loopEnd:d.loopEnd,loopStart:d.loopStart,playbackRate:d.playbackRate.value};d=e(f,g),o!==null&&d.start(...o),a!==null&&d.stop(a)}return i.set(f,d),p?await r(f,h.playbackRate,d.playbackRate):await n(f,h.playbackRate,d.playbackRate),await s(h,f,d),d};return{set start(h){o=h},set stop(h){a=h},render(h,f){const d=i.get(f);return d!==void 0?Promise.resolve(d):c(h,f)}}},MM=r=>"playbackRate"in r,OM=r=>"frequency"in r&&"gain"in r,AM=r=>"offset"in r,kM=r=>!("frequency"in r)&&"gain"in r,PM=r=>"detune"in r&&"frequency"in r,RM=r=>"pan"in r,sr=r=>Ss(fx,r),Mu=r=>Ss(dx,r),Im=(r,e)=>{const{activeInputs:t}=sr(r);t.forEach(s=>s.forEach(([i])=>{e.includes(r)||Im(i,[...e,r])}));const n=MM(r)?[r.playbackRate]:vx(r)?Array.from(r.parameters.values()):OM(r)?[r.Q,r.detune,r.frequency,r.gain]:AM(r)?[r.offset]:kM(r)?[r.gain]:PM(r)?[r.detune,r.frequency]:RM(r)?[r.pan]:[];for(const s of n){const i=Mu(s);i!==void 0&&i.activeInputs.forEach(([o])=>Im(o,e))}Ci(r)&&bu(r)},yx=r=>{Im(r.destination,[])},DM=r=>r===void 0||typeof r=="number"||typeof r=="string"&&(r==="balanced"||r==="interactive"||r==="playback"),IM=(r,e,t,n,s,i,o,a,c)=>class extends r{constructor(f={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let d;try{d=new c(f)}catch(_){throw _.code===12&&_.message==="sampleRate is not in range"?t():_}if(d===null)throw n();if(!DM(f.latencyHint))throw new TypeError(`The provided value '${f.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(f.sampleRate!==void 0&&d.sampleRate!==f.sampleRate)throw t();super(d,2);const{latencyHint:p}=f,{sampleRate:g}=d;if(this._baseLatency=typeof d.baseLatency=="number"?d.baseLatency:p==="balanced"?512/g:p==="interactive"||p===void 0?256/g:p==="playback"?1024/g:Math.max(2,Math.min(128,Math.round(p*g/128)))*128/g,this._nativeAudioContext=d,c.name==="webkitAudioContext"?(this._nativeGainNode=d.createGain(),this._nativeOscillatorNode=d.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(d.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,d.state==="running"){this._state="suspended";const _=()=>{this._state==="suspended"&&(this._state=null),d.removeEventListener("statechange",_)};d.addEventListener("statechange",_)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),yx(this)}))}createMediaElementSource(f){return new s(this,{mediaElement:f})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(f){return new o(this,{mediaStream:f})}createMediaStreamTrackSource(f){return new a(this,{mediaStreamTrack:f})}resume(){return this._state==="suspended"?new Promise((f,d)=>{const p=()=>{this._nativeAudioContext.removeEventListener("statechange",p),this._nativeAudioContext.state==="running"?f():this.resume().then(f,d)};this._nativeAudioContext.addEventListener("statechange",p)}):this._nativeAudioContext.resume().catch(f=>{throw f===void 0||f.code===15?e():f})}suspend(){return this._nativeAudioContext.suspend().catch(f=>{throw f===void 0?e():f})}},UM=(r,e,t,n,s,i,o,a)=>class extends r{constructor(h,f){const d=i(h),p=o(d),g=s(d,f,p),_=p?e(a):null;super(h,!1,g,_),this._isNodeOfNativeOfflineAudioContext=p,this._nativeAudioDestinationNode=g}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(h){if(this._isNodeOfNativeOfflineAudioContext)throw n();if(h>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=h}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(h){if(this._isNodeOfNativeOfflineAudioContext)throw n();this._nativeAudioDestinationNode.channelCountMode=h}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},FM=r=>{const e=new WeakMap,t=async(n,s)=>{const i=s.destination;return e.set(s,i),await r(n,s,i),i};return{render(n,s){const i=e.get(s);return i!==void 0?Promise.resolve(i):t(n,s)}}},NM=(r,e,t,n,s,i,o,a)=>(c,h)=>{const f=h.listener,d=()=>{const C=new Float32Array(1),A=e(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),M=o(h);let k=!1,R=[0,0,-1,0,1,0],F=[0,0,0];const U=()=>{if(k)return;k=!0;const q=n(h,256,9,0);q.onaudioprocess=({inputBuffer:Y})=>{const $=[i(Y,C,0),i(Y,C,1),i(Y,C,2),i(Y,C,3),i(Y,C,4),i(Y,C,5)];$.some((V,H)=>V!==R[H])&&(f.setOrientation(...$),R=$);const W=[i(Y,C,6),i(Y,C,7),i(Y,C,8)];W.some((V,H)=>V!==F[H])&&(f.setPosition(...W),F=W)},A.connect(q)},I=q=>Y=>{Y!==R[q]&&(R[q]=Y,f.setOrientation(...R))},z=q=>Y=>{Y!==F[q]&&(F[q]=Y,f.setPosition(...F))},j=(q,Y,$)=>{const W=t(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Y});W.connect(A,0,q),W.start(),Object.defineProperty(W.offset,"defaultValue",{get(){return Y}});const V=r({context:c},M,W.offset,tr,pr);return a(V,"value",H=>()=>H.call(V),H=>L=>{try{H.call(V,L)}catch(B){if(B.code!==9)throw B}U(),M&&$(L)}),V.cancelAndHoldAtTime=(H=>M?()=>{throw s()}:(...L)=>{const B=H.apply(V,L);return U(),B})(V.cancelAndHoldAtTime),V.cancelScheduledValues=(H=>M?()=>{throw s()}:(...L)=>{const B=H.apply(V,L);return U(),B})(V.cancelScheduledValues),V.exponentialRampToValueAtTime=(H=>M?()=>{throw s()}:(...L)=>{const B=H.apply(V,L);return U(),B})(V.exponentialRampToValueAtTime),V.linearRampToValueAtTime=(H=>M?()=>{throw s()}:(...L)=>{const B=H.apply(V,L);return U(),B})(V.linearRampToValueAtTime),V.setTargetAtTime=(H=>M?()=>{throw s()}:(...L)=>{const B=H.apply(V,L);return U(),B})(V.setTargetAtTime),V.setValueAtTime=(H=>M?()=>{throw s()}:(...L)=>{const B=H.apply(V,L);return U(),B})(V.setValueAtTime),V.setValueCurveAtTime=(H=>M?()=>{throw s()}:(...L)=>{const B=H.apply(V,L);return U(),B})(V.setValueCurveAtTime),V};return{forwardX:j(0,0,I(0)),forwardY:j(1,0,I(1)),forwardZ:j(2,-1,I(2)),positionX:j(6,0,z(0)),positionY:j(7,0,z(1)),positionZ:j(8,0,z(2)),upX:j(3,0,I(3)),upY:j(4,1,I(4)),upZ:j(5,0,I(5))}},{forwardX:p,forwardY:g,forwardZ:_,positionX:y,positionY:x,positionZ:w,upX:T,upY:b,upZ:E}=f.forwardX===void 0?d():f;return{get forwardX(){return p},get forwardY(){return g},get forwardZ(){return _},get positionX(){return y},get positionY(){return x},get positionZ(){return w},get upX(){return T},get upY(){return b},get upZ(){return E}}},xf=r=>"context"in r,Ou=r=>xf(r[0]),da=(r,e,t,n)=>{for(const s of r)if(t(s)){if(n)return!1;throw Error("The set contains at least one similar element.")}return r.add(e),!0},p_=(r,e,[t,n],s)=>{da(r,[e,t,n],i=>i[0]===e&&i[1]===t,s)},m_=(r,[e,t,n],s)=>{const i=r.get(e);i===void 0?r.set(e,new Set([[t,n]])):da(i,[t,n],o=>o[0]===t,s)},kl=r=>"inputs"in r,wf=(r,e,t,n)=>{if(kl(e)){const s=e.inputs[n];return r.connect(s,t,0),[s,t,0]}return r.connect(e,t,n),[e,t,n]},xx=(r,e,t)=>{for(const n of r)if(n[0]===e&&n[1]===t)return r.delete(n),n;return null},LM=(r,e,t)=>$f(r,n=>n[0]===e&&n[1]===t),wx=(r,e)=>{if(!Eu(r).delete(e))throw new Error("Missing the expected event listener.")},Sx=(r,e,t)=>{const n=Ss(r,e),s=$f(n,i=>i[0]===t);return n.size===0&&r.delete(e),s},Sf=(r,e,t,n)=>{kl(e)?r.disconnect(e.inputs[n],t,0):r.disconnect(e,t,n)},Rt=r=>Ss(Eg,r),Kc=r=>Ss(bg,r),sa=r=>km.has(r),sf=r=>!wl.has(r),g_=(r,e)=>new Promise(t=>{if(e!==null)t(!0);else{const n=r.createScriptProcessor(256,1,1),s=r.createGain(),i=r.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=r.createBufferSource();a.buffer=i,a.loop=!0,a.connect(n).connect(r.destination),a.connect(s),a.disconnect(s),n.onaudioprocess=c=>{const h=c.inputBuffer.getChannelData(0);Array.prototype.some.call(h,f=>f===1)?t(!0):t(!1),a.stop(),n.onaudioprocess=null,a.disconnect(n),n.disconnect(r.destination)},a.start()}}),Wp=(r,e)=>{const t=new Map;for(const n of r)for(const s of n){const i=t.get(s);t.set(s,i===void 0?1:i+1)}t.forEach((n,s)=>e(s,n))},Tf=r=>"context"in r,zM=r=>{const e=new Map;r.connect=(t=>(n,s=0,i=0)=>{const o=Tf(n)?t(n,s,i):t(n,s),a=e.get(n);return a===void 0?e.set(n,[{input:i,output:s}]):a.every(c=>c.input!==i||c.output!==s)&&a.push({input:i,output:s}),o})(r.connect.bind(r)),r.disconnect=(t=>(n,s,i)=>{if(t.apply(r),n===void 0)e.clear();else if(typeof n=="number")for(const[o,a]of e){const c=a.filter(h=>h.output!==n);c.length===0?e.delete(o):e.set(o,c)}else if(e.has(n))if(s===void 0)e.delete(n);else{const o=e.get(n);if(o!==void 0){const a=o.filter(c=>c.output!==s&&(c.input!==i||i===void 0));a.length===0?e.delete(n):e.set(n,a)}}for(const[o,a]of e)a.forEach(c=>{Tf(o)?r.connect(o,c.output,c.input):r.connect(o,c.output)})})(r.disconnect)},BM=(r,e,t,n)=>{const{activeInputs:s,passiveInputs:i}=Mu(e),{outputs:o}=sr(r),a=Eu(r),c=h=>{const f=Rt(r),d=Kc(e);if(h){const p=Sx(i,r,t);p_(s,r,p,!1),!n&&!sa(r)&&f.connect(d,t)}else{const p=LM(s,r,t);m_(i,p,!1),!n&&!sa(r)&&f.disconnect(d,t)}};return da(o,[e,t],h=>h[0]===e&&h[1]===t,!0)?(a.add(c),Ci(r)?p_(s,r,[t,c],!0):m_(i,[r,t,c],!0),!0):!1},jM=(r,e,t,n)=>{const{activeInputs:s,passiveInputs:i}=sr(e),o=xx(s[n],r,t);return o===null?[gx(i,r,t,n)[2],!1]:[o[2],!0]},VM=(r,e,t)=>{const{activeInputs:n,passiveInputs:s}=Mu(e),i=xx(n,r,t);return i===null?[Sx(s,r,t)[1],!1]:[i[2],!0]},Og=(r,e,t,n,s)=>{const[i,o]=jM(r,t,n,s);if(i!==null&&(wx(r,i),o&&!e&&!sa(r)&&Sf(Rt(r),Rt(t),n,s)),Ci(t)){const{activeInputs:a}=sr(t);Dm(t,a)}},Ag=(r,e,t,n)=>{const[s,i]=VM(r,t,n);s!==null&&(wx(r,s),i&&!e&&!sa(r)&&Rt(r).disconnect(Kc(t),n))},GM=(r,e)=>{const t=sr(r),n=[];for(const s of t.outputs)Ou(s)?Og(r,e,...s):Ag(r,e,...s),n.push(s[0]);return t.outputs.clear(),n},HM=(r,e,t)=>{const n=sr(r),s=[];for(const i of n.outputs)i[1]===t&&(Ou(i)?Og(r,e,...i):Ag(r,e,...i),s.push(i[0]),n.outputs.delete(i));return s},WM=(r,e,t,n,s)=>{const i=sr(r);return Array.from(i.outputs).filter(o=>o[0]===t&&(n===void 0||o[1]===n)&&(s===void 0||o[2]===s)).map(o=>(Ou(o)?Og(r,e,...o):Ag(r,e,...o),i.outputs.delete(o),o[0]))},qM=(r,e,t,n,s,i,o,a,c,h,f,d,p,g,_,y)=>class extends h{constructor(w,T,b,E){super(b),this._context=w,this._nativeAudioNode=b;const C=f(w);d(C)&&t(g_,()=>g_(C,y))!==!0&&zM(b),Eg.set(this,b),px.set(this,new Set),w.state!=="closed"&&T&&Sl(this),r(this,E,b)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(w){this._nativeAudioNode.channelCount=w}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(w){this._nativeAudioNode.channelCountMode=w}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(w){this._nativeAudioNode.channelInterpretation=w}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(w,T=0,b=0){if(T<0||T>=this._nativeAudioNode.numberOfOutputs)throw s();const E=f(this._context),C=_(E);if(p(w)||g(w))throw i();if(xf(w)){const k=Rt(w);try{const F=wf(this._nativeAudioNode,k,T,b),U=sf(this);(C||U)&&this._nativeAudioNode.disconnect(...F),this.context.state!=="closed"&&!U&&sf(w)&&Sl(w)}catch(F){throw F.code===12?i():F}if(e(this,w,T,b,C)){const F=c([this],w);Wp(F,n(C))}return w}const A=Kc(w);if(A.name==="playbackRate"&&A.maxValue===1024)throw o();try{this._nativeAudioNode.connect(A,T),(C||sf(this))&&this._nativeAudioNode.disconnect(A,T)}catch(k){throw k.code===12?i():k}if(BM(this,w,T,C)){const k=c([this],w);Wp(k,n(C))}}disconnect(w,T,b){let E;const C=f(this._context),A=_(C);if(w===void 0)E=GM(this,A);else if(typeof w=="number"){if(w<0||w>=this.numberOfOutputs)throw s();E=HM(this,A,w)}else{if(T!==void 0&&(T<0||T>=this.numberOfOutputs)||xf(w)&&b!==void 0&&(b<0||b>=w.numberOfInputs))throw s();if(E=WM(this,A,w,T,b),E.length===0)throw i()}for(const M of E){const k=c([this],M);Wp(k,a)}}},ZM=(r,e,t,n,s,i,o,a,c,h,f,d,p)=>(g,_,y,x=null,w=null)=>{const T=y.value,b=new rM(T),E=_?n(b):null,C={get defaultValue(){return T},get maxValue(){return x===null?y.maxValue:x},get minValue(){return w===null?y.minValue:w},get value(){return y.value},set value(A){y.value=A,C.setValueAtTime(A,g.context.currentTime)},cancelAndHoldAtTime(A){if(typeof y.cancelAndHoldAtTime=="function")E===null&&b.flush(g.context.currentTime),b.add(s(A)),y.cancelAndHoldAtTime(A);else{const M=Array.from(b).pop();E===null&&b.flush(g.context.currentTime),b.add(s(A));const k=Array.from(b).pop();y.cancelScheduledValues(A),M!==k&&k!==void 0&&(k.type==="exponentialRampToValue"?y.exponentialRampToValueAtTime(k.value,k.endTime):k.type==="linearRampToValue"?y.linearRampToValueAtTime(k.value,k.endTime):k.type==="setValue"?y.setValueAtTime(k.value,k.startTime):k.type==="setValueCurve"&&y.setValueCurveAtTime(k.values,k.startTime,k.duration))}return C},cancelScheduledValues(A){return E===null&&b.flush(g.context.currentTime),b.add(i(A)),y.cancelScheduledValues(A),C},exponentialRampToValueAtTime(A,M){if(A===0)throw new RangeError;if(!Number.isFinite(M)||M<0)throw new RangeError;const k=g.context.currentTime;return E===null&&b.flush(k),Array.from(b).length===0&&(b.add(h(T,k)),y.setValueAtTime(T,k)),b.add(o(A,M)),y.exponentialRampToValueAtTime(A,M),C},linearRampToValueAtTime(A,M){const k=g.context.currentTime;return E===null&&b.flush(k),Array.from(b).length===0&&(b.add(h(T,k)),y.setValueAtTime(T,k)),b.add(a(A,M)),y.linearRampToValueAtTime(A,M),C},setTargetAtTime(A,M,k){return E===null&&b.flush(g.context.currentTime),b.add(c(A,M,k)),y.setTargetAtTime(A,M,k),C},setValueAtTime(A,M){return E===null&&b.flush(g.context.currentTime),b.add(h(A,M)),y.setValueAtTime(A,M),C},setValueCurveAtTime(A,M,k){const R=A instanceof Float32Array?A:new Float32Array(A);if(d!==null&&d.name==="webkitAudioContext"){const F=M+k,U=g.context.sampleRate,I=Math.ceil(M*U),z=Math.floor(F*U),j=z-I,q=new Float32Array(j);for(let $=0;$<j;$+=1){const W=(R.length-1)/k*((I+$)/U-M),V=Math.floor(W),H=Math.ceil(W);q[$]=V===H?R[V]:(1-(W-V))*R[V]+(1-(H-W))*R[H]}E===null&&b.flush(g.context.currentTime),b.add(f(q,M,k)),y.setValueCurveAtTime(q,M,k);const Y=z/U;Y<F&&p(C,q[q.length-1],Y),p(C,R[R.length-1],F)}else E===null&&b.flush(g.context.currentTime),b.add(f(R,M,k)),y.setValueCurveAtTime(R,M,k);return C}};return t.set(C,y),e.set(C,g),r(C,E),C},YM=r=>({replay(e){for(const t of r)if(t.type==="exponentialRampToValue"){const{endTime:n,value:s}=t;e.exponentialRampToValueAtTime(s,n)}else if(t.type==="linearRampToValue"){const{endTime:n,value:s}=t;e.linearRampToValueAtTime(s,n)}else if(t.type==="setTarget"){const{startTime:n,target:s,timeConstant:i}=t;e.setTargetAtTime(s,n,i)}else if(t.type==="setValue"){const{startTime:n,value:s}=t;e.setValueAtTime(s,n)}else if(t.type==="setValueCurve"){const{duration:n,startTime:s,values:i}=t;e.setValueCurveAtTime(i,s,n)}else throw new Error("Can't apply an unknown automation.")}});class Tx{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((n,s)=>e.call(t,n,s,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const XM={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},QM=(r,e,t,n,s,i,o,a,c,h,f,d,p,g)=>class extends e{constructor(y,x,w){var T;const b=a(y),E=c(b),C=f({...XM,...w});p(C);const A=Pm.get(b),M=A==null?void 0:A.get(x),k=E||b.state!=="closed"?b:(T=o(b))!==null&&T!==void 0?T:b,R=s(k,E?null:y.baseLatency,h,x,M,C),F=E?n(x,C,M):null;super(y,!0,R,F);const U=[];R.parameters.forEach((z,j)=>{const q=t(this,E,z);U.push([j,q])}),this._nativeAudioWorkletNode=R,this._onprocessorerror=null,this._parameters=new Tx(U),E&&r(b,this);const{activeInputs:I}=i(this);d(R,I)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(y){const x=typeof y=="function"?g(this,y):null;this._nativeAudioWorkletNode.onprocessorerror=x;const w=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=w!==null&&w===x?y:w}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Cf(r,e,t,n,s){if(typeof r.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),r.copyFromChannel(e[t],n,s);else{const i=r.getChannelData(n);if(e[t].byteLength===0)e[t]=i.slice(s,s+128);else{const o=new Float32Array(i.buffer,s*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(o)}}}const Cx=(r,e,t,n,s)=>{typeof r.copyToChannel=="function"?e[t].byteLength!==0&&r.copyToChannel(e[t],n,s):e[t].byteLength!==0&&r.getChannelData(n).set(e[t],s)},Ef=(r,e)=>{const t=[];for(let n=0;n<r;n+=1){const s=[],i=typeof e=="number"?e:e[n];for(let o=0;o<i;o+=1)s.push(new Float32Array(128));t.push(s)}return t},KM=(r,e)=>{const t=Ss(Rm,r),n=Rt(e);return Ss(t,n)},JM=async(r,e,t,n,s,i,o)=>{const a=e===null?Math.ceil(r.context.length/128)*128:e.length,c=n.channelCount*n.numberOfInputs,h=s.reduce((x,w)=>x+w,0),f=h===0?null:t.createBuffer(h,a,t.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const d=sr(r),p=await KM(t,r),g=Ef(n.numberOfInputs,n.channelCount),_=Ef(n.numberOfOutputs,s),y=Array.from(r.parameters.keys()).reduce((x,w)=>({...x,[w]:new Float32Array(128)}),{});for(let x=0;x<a;x+=128){if(n.numberOfInputs>0&&e!==null)for(let w=0;w<n.numberOfInputs;w+=1)for(let T=0;T<n.channelCount;T+=1)Cf(e,g[w],T,T,x);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:w},T)=>{Cf(e,y,w,c+T,x)});for(let w=0;w<n.numberOfInputs;w+=1)for(let T=0;T<s[w];T+=1)_[w][T].byteLength===0&&(_[w][T]=new Float32Array(128));try{const w=g.map((b,E)=>d.activeInputs[E].size===0?[]:b),T=o(x/t.sampleRate,t.sampleRate,()=>p.process(w,_,y));if(f!==null)for(let b=0,E=0;b<n.numberOfOutputs;b+=1){for(let C=0;C<s[b];C+=1)Cx(f,_[b],C,E+C,x);E+=s[b]}if(!T)break}catch(w){r.dispatchEvent(new ErrorEvent("processorerror",{colno:w.colno,filename:w.filename,lineno:w.lineno,message:w.message}));break}}return f},$M=(r,e,t,n,s,i,o,a,c,h,f,d,p,g,_,y)=>(x,w,T)=>{const b=new WeakMap;let E=null;const C=async(A,M)=>{let k=f(A),R=null;const F=Wn(k,M),U=Array.isArray(w.outputChannelCount)?w.outputChannelCount:Array.from(w.outputChannelCount);if(d===null){const I=U.reduce((Y,$)=>Y+$,0),z=s(M,{channelCount:Math.max(1,I),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,I)}),j=[];for(let Y=0;Y<A.numberOfOutputs;Y+=1)j.push(n(M,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:U[Y]}));const q=o(M,{channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation,gain:1});q.connect=e.bind(null,j),q.disconnect=c.bind(null,j),R=[z,j,q]}else F||(k=new d(M,x));if(b.set(M,R===null?k:R[2]),R!==null){if(E===null){if(T===void 0)throw new Error("Missing the processor constructor.");if(p===null)throw new Error("Missing the native OfflineAudioContext constructor.");const $=A.channelCount*A.numberOfInputs,W=T.parameterDescriptors===void 0?0:T.parameterDescriptors.length,V=$+W;E=JM(A,V===0?null:await(async()=>{const L=new p(V,Math.ceil(A.context.length/128)*128,M.sampleRate),B=[],J=[];for(let oe=0;oe<w.numberOfInputs;oe+=1)B.push(o(L,{channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation,gain:1})),J.push(s(L,{channelCount:w.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:w.channelCount}));const te=await Promise.all(Array.from(A.parameters.values()).map(async oe=>{const re=i(L,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:oe.value});return await g(L,oe,re.offset),re})),X=n(L,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,$+W)});for(let oe=0;oe<w.numberOfInputs;oe+=1){B[oe].connect(J[oe]);for(let re=0;re<w.channelCount;re+=1)J[oe].connect(X,re,oe*w.channelCount+re)}for(const[oe,re]of te.entries())re.connect(X,0,$+oe),re.start(0);return X.connect(L.destination),await Promise.all(B.map(oe=>_(A,L,oe))),y(L)})(),M,w,U,T,h)}const I=await E,z=t(M,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[j,q,Y]=R;I!==null&&(z.buffer=I,z.start(0)),z.connect(j);for(let $=0,W=0;$<A.numberOfOutputs;$+=1){const V=q[$];for(let H=0;H<U[$];H+=1)j.connect(V,W+H,H);W+=U[$]}return Y}if(F)for(const[I,z]of A.parameters.entries())await r(M,z,k.parameters.get(I));else for(const[I,z]of A.parameters.entries())await g(M,z,k.parameters.get(I));return await _(A,M,k),k};return{render(A,M){a(M,A);const k=b.get(M);return k!==void 0?Promise.resolve(k):C(A,M)}}},eO=(r,e,t,n,s,i,o,a,c,h,f,d,p,g,_,y,x,w,T,b)=>class extends _{constructor(C,A){super(C,A),this._nativeContext=C,this._audioWorklet=r===void 0?void 0:{addModule:(M,k)=>r(this,M,k)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new s(this)}createBuffer(C,A,M){return new t({length:A,numberOfChannels:C,sampleRate:M})}createBufferSource(){return new n(this)}createChannelMerger(C=6){return new i(this,{numberOfInputs:C})}createChannelSplitter(C=6){return new o(this,{numberOfOutputs:C})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(C=1){return new f(this,{maxDelayTime:C})}createDynamicsCompressor(){return new d(this)}createGain(){return new p(this)}createIIRFilter(C,A){return new g(this,{feedback:A,feedforward:C})}createOscillator(){return new y(this)}createPanner(){return new x(this)}createPeriodicWave(C,A,M={disableNormalization:!1}){return new w(this,{...M,imag:A,real:C})}createStereoPanner(){return new T(this)}createWaveShaper(){return new b(this)}decodeAudioData(C,A,M){return h(this._nativeContext,C).then(k=>(typeof A=="function"&&A(k),k),k=>{throw typeof M=="function"&&M(k),k})}},tO={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},nO=(r,e,t,n,s,i,o,a)=>class extends r{constructor(h,f){const d=i(h),p={...tO,...f},g=s(d,p),_=o(d),y=_?t():null;super(h,!1,g,y),this._Q=e(this,_,g.Q,tr,pr),this._detune=e(this,_,g.detune,1200*Math.log2(tr),-1200*Math.log2(tr)),this._frequency=e(this,_,g.frequency,h.sampleRate/2,0),this._gain=e(this,_,g.gain,40*Math.log10(tr),pr),this._nativeBiquadFilterNode=g,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(h){this._nativeBiquadFilterNode.type=h}getFrequencyResponse(h,f,d){try{this._nativeBiquadFilterNode.getFrequencyResponse(h,f,d)}catch(p){throw p.code===11?n():p}if(h.length!==f.length||f.length!==d.length)throw n()}},rO=(r,e,t,n,s)=>()=>{const i=new WeakMap,o=async(a,c)=>{let h=t(a);const f=Wn(h,c);if(!f){const d={Q:h.Q.value,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,gain:h.gain.value,type:h.type};h=e(c,d)}return i.set(c,h),f?(await r(c,a.Q,h.Q),await r(c,a.detune,h.detune),await r(c,a.frequency,h.frequency),await r(c,a.gain,h.gain)):(await n(c,a.Q,h.Q),await n(c,a.detune,h.detune),await n(c,a.frequency,h.frequency),await n(c,a.gain,h.gain)),await s(a,c,h),h};return{render(a,c){const h=i.get(c);return h!==void 0?Promise.resolve(h):o(a,c)}}},sO=(r,e)=>(t,n)=>{const s=e.get(t);if(s!==void 0)return s;const i=r.get(t);if(i!==void 0)return i;try{const o=n();return o instanceof Promise?(r.set(t,o),o.catch(()=>!1).then(a=>(r.delete(t),e.set(t,a),a))):(e.set(t,o),o)}catch{return e.set(t,!1),!1}},iO={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},oO=(r,e,t,n,s)=>class extends r{constructor(o,a){const c=n(o),h={...iO,...a},f=t(c,h),d=s(c)?e():null;super(o,!1,f,d)}},aO=(r,e,t)=>()=>{const n=new WeakMap,s=async(i,o)=>{let a=e(i);if(!Wn(a,o)){const h={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=r(o,h)}return n.set(o,a),await t(i,o,a),a};return{render(i,o){const a=n.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},lO={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},cO=(r,e,t,n,s,i)=>class extends r{constructor(a,c){const h=n(a),f=i({...lO,...c}),d=t(h,f),p=s(h)?e():null;super(a,!1,d,p)}},uO=(r,e,t)=>()=>{const n=new WeakMap,s=async(i,o)=>{let a=e(i);if(!Wn(a,o)){const h={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=r(o,h)}return n.set(o,a),await t(i,o,a),a};return{render(i,o){const a=n.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},hO=r=>(e,t,n)=>r(t,e,n),fO=r=>(e,t,n=0,s=0)=>{const i=e[n];if(i===void 0)throw r();return Tf(t)?i.connect(t,0,s):i.connect(t,0)},dO=r=>(e,t)=>{const n=r(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),s=e.createBuffer(1,2,44100);return n.buffer=s,n.loop=!0,n.connect(t),n.start(),()=>{n.stop(),n.disconnect(t)}},pO={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},mO=(r,e,t,n,s,i,o)=>class extends r{constructor(c,h){const f=s(c),d={...pO,...h},p=n(f,d),g=i(f),_=g?t():null;super(c,!1,p,_),this._constantSourceNodeRenderer=_,this._nativeConstantSourceNode=p,this._offset=e(this,g,p.offset,tr,pr),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){const h=typeof c=="function"?o(this,c):null;this._nativeConstantSourceNode.onended=h;const f=this._nativeConstantSourceNode.onended;this._onended=f!==null&&f===h?c:f}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){Sl(this);const h=()=>{this._nativeConstantSourceNode.removeEventListener("ended",h),Ci(this)&&bu(this)};this._nativeConstantSourceNode.addEventListener("ended",h)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}},gO=(r,e,t,n,s)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(h,f)=>{let d=t(h);const p=Wn(d,f);if(!p){const g={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,offset:d.offset.value};d=e(f,g),o!==null&&d.start(o),a!==null&&d.stop(a)}return i.set(f,d),p?await r(f,h.offset,d.offset):await n(f,h.offset,d.offset),await s(h,f,d),d};return{set start(h){o=h},set stop(h){a=h},render(h,f){const d=i.get(f);return d!==void 0?Promise.resolve(d):c(h,f)}}},vO=r=>e=>(r[0]=e,r[0]),_O={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},yO=(r,e,t,n,s,i)=>class extends r{constructor(a,c){const h=n(a),f={..._O,...c},d=t(h,f),g=s(h)?e():null;super(a,!1,d,g),this._isBufferNullified=!1,this._nativeConvolverNode=d,f.buffer!==null&&i(this,f.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,c.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},xO=(r,e,t)=>()=>{const n=new WeakMap,s=async(i,o)=>{let a=e(i);if(!Wn(a,o)){const h={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=r(o,h)}return n.set(o,a),kl(a)?await t(i,o,a.inputs[0]):await t(i,o,a),a};return{render(i,o){const a=n.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},wO=(r,e)=>(t,n,s)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,n,s)}catch(i){throw i.name==="SyntaxError"?r():i}},SO=()=>new DOMException("","DataCloneError"),v_=r=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(n=>{const s=()=>{t.onmessage=null,e.close(),t.close(),n()};t.onmessage=()=>s();try{e.postMessage(r,[r])}catch{}finally{s()}})},TO=(r,e,t,n,s,i,o,a,c,h,f)=>(d,p)=>{const g=o(d)?d:i(d);if(s.has(p)){const _=t();return Promise.reject(_)}try{s.add(p)}catch{}return e(c,()=>c(g))?g.decodeAudioData(p).then(_=>(v_(p).catch(()=>{}),e(a,()=>a(_))||f(_),r.add(_),_)):new Promise((_,y)=>{const x=async()=>{try{await v_(p)}catch{}},w=T=>{y(T),x()};try{g.decodeAudioData(p,T=>{typeof T.copyFromChannel!="function"&&(h(T),Mg(T)),r.add(T),x().then(()=>_(T))},T=>{w(T===null?n():T)})}catch(T){w(T)}})},CO=(r,e,t,n,s,i,o,a)=>(c,h)=>{const f=e.get(c);if(f===void 0)throw new Error("Missing the expected cycle count.");const d=i(c.context),p=a(d);if(f===h){if(e.delete(c),!p&&o(c)){const g=n(c),{outputs:_}=t(c);for(const y of _)if(Ou(y)){const x=n(y[0]);r(g,x,y[1],y[2])}else{const x=s(y[0]);g.connect(x,y[1])}}}else e.set(c,f-h)},EO={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},bO=(r,e,t,n,s,i,o)=>class extends r{constructor(c,h){const f=s(c),d={...EO,...h},p=n(f,d),g=i(f),_=g?t(d.maxDelayTime):null;super(c,!1,p,_),this._delayTime=e(this,g,p.delayTime),o(this,d.maxDelayTime)}get delayTime(){return this._delayTime}},MO=(r,e,t,n,s)=>i=>{const o=new WeakMap,a=async(c,h)=>{let f=t(c);const d=Wn(f,h);if(!d){const p={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,delayTime:f.delayTime.value,maxDelayTime:i};f=e(h,p)}return o.set(h,f),d?await r(h,c.delayTime,f.delayTime):await n(h,c.delayTime,f.delayTime),await s(c,h,f),f};return{render(c,h){const f=o.get(h);return f!==void 0?Promise.resolve(f):a(c,h)}}},OO=r=>(e,t,n,s)=>r(e[s],i=>i[0]===t&&i[1]===n),AO=r=>(e,t)=>{r(e).delete(t)},kO=r=>"delayTime"in r,PO=(r,e,t)=>function n(s,i){const o=xf(i)?i:t(r,i);if(kO(o))return[];if(s[0]===o)return[s];if(s.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map(c=>n([...s,o],c[0])).reduce((c,h)=>c.concat(h),[])},qh=(r,e,t)=>{const n=e[t];if(n===void 0)throw r();return n},RO=r=>(e,t=void 0,n=void 0,s=0)=>t===void 0?e.forEach(i=>i.disconnect()):typeof t=="number"?qh(r,e,t).disconnect():Tf(t)?n===void 0?e.forEach(i=>i.disconnect(t)):s===void 0?qh(r,e,n).disconnect(t,0):qh(r,e,n).disconnect(t,0,s):n===void 0?e.forEach(i=>i.disconnect(t)):qh(r,e,n).disconnect(t,0),DO={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},IO=(r,e,t,n,s,i,o,a)=>class extends r{constructor(h,f){const d=i(h),p={...DO,...f},g=n(d,p),_=o(d),y=_?t():null;super(h,!1,g,y),this._attack=e(this,_,g.attack),this._knee=e(this,_,g.knee),this._nativeDynamicsCompressorNode=g,this._ratio=e(this,_,g.ratio),this._release=e(this,_,g.release),this._threshold=e(this,_,g.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(h){const f=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=h,h>2)throw this._nativeDynamicsCompressorNode.channelCount=f,s()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(h){const f=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=h,h==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=f,s()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},UO=(r,e,t,n,s)=>()=>{const i=new WeakMap,o=async(a,c)=>{let h=t(a);const f=Wn(h,c);if(!f){const d={attack:h.attack.value,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,knee:h.knee.value,ratio:h.ratio.value,release:h.release.value,threshold:h.threshold.value};h=e(c,d)}return i.set(c,h),f?(await r(c,a.attack,h.attack),await r(c,a.knee,h.knee),await r(c,a.ratio,h.ratio),await r(c,a.release,h.release),await r(c,a.threshold,h.threshold)):(await n(c,a.attack,h.attack),await n(c,a.knee,h.knee),await n(c,a.ratio,h.ratio),await n(c,a.release,h.release),await n(c,a.threshold,h.threshold)),await s(a,c,h),h};return{render(a,c){const h=i.get(c);return h!==void 0?Promise.resolve(h):o(a,c)}}},FO=()=>new DOMException("","EncodingError"),NO=r=>e=>new Promise((t,n)=>{if(r===null){n(new SyntaxError);return}const s=r.document.head;if(s===null)n(new SyntaxError);else{const i=r.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),c=r.onerror,h=()=>{r.onerror=c,URL.revokeObjectURL(a)};r.onerror=(f,d,p,g,_)=>{if(d===a||d===r.location.href&&p===1&&g===1)return h(),n(_),!1;if(c!==null)return c(f,d,p,g,_)},i.onerror=()=>{h(),n(new SyntaxError)},i.onload=()=>{h(),t()},i.src=a,i.type="module",s.appendChild(i)}}),LO=r=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,n,s){if(n!==null){let i=this._listeners.get(n);i===void 0&&(i=r(this,n),typeof n=="function"&&this._listeners.set(n,i)),this._nativeEventTarget.addEventListener(t,i,s)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,n,s){const i=n===null?void 0:this._listeners.get(n);this._nativeEventTarget.removeEventListener(t,i===void 0?null:i,s)}},zO=r=>(e,t,n)=>{Object.defineProperties(r,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return n()}finally{r!==null&&(delete r.currentFrame,delete r.currentTime)}},BO=r=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw r()},jO={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},VO=(r,e,t,n,s,i)=>class extends r{constructor(a,c){const h=s(a),f={...jO,...c},d=n(h,f),p=i(h),g=p?t():null;super(a,!1,d,g),this._gain=e(this,p,d.gain,tr,pr)}get gain(){return this._gain}},GO=(r,e,t,n,s)=>()=>{const i=new WeakMap,o=async(a,c)=>{let h=t(a);const f=Wn(h,c);if(!f){const d={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,gain:h.gain.value};h=e(c,d)}return i.set(c,h),f?await r(c,a.gain,h.gain):await n(c,a.gain,h.gain),await s(a,c,h),h};return{render(a,c){const h=i.get(c);return h!==void 0?Promise.resolve(h):o(a,c)}}},HO=(r,e)=>t=>e(r,t),WO=r=>e=>{const t=r(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},qO=r=>e=>{var t;return(t=r.get(e))!==null&&t!==void 0?t:0},ZO=r=>e=>{const t=r(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},YO=r=>e=>r.get(e),Cn=()=>new DOMException("","InvalidStateError"),XO=r=>e=>{const t=r.get(e);if(t===void 0)throw Cn();return t},QO=(r,e)=>t=>{let n=r.get(t);if(n!==void 0)return n;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return n=new e(1,1,44100),r.set(t,n),n},KO=r=>e=>{const t=r.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},ed=()=>new DOMException("","InvalidAccessError"),JO=r=>{r.getFrequencyResponse=(e=>(t,n,s)=>{if(t.length!==n.length||n.length!==s.length)throw ed();return e.call(r,t,n,s)})(r.getFrequencyResponse)},$O={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},eA=(r,e,t,n,s,i)=>class extends r{constructor(a,c){const h=n(a),f=s(h),d={...$O,...c},p=e(h,f?null:a.baseLatency,d),g=f?t(d.feedback,d.feedforward):null;super(a,!1,p,g),JO(p),this._nativeIIRFilterNode=p,i(this,1)}getFrequencyResponse(a,c,h){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,h)}},Ex=(r,e,t,n,s,i,o,a,c,h,f)=>{const d=h.length;let p=a;for(let g=0;g<d;g+=1){let _=t[0]*h[g];for(let y=1;y<s;y+=1){const x=p-y&c-1;_+=t[y]*i[x],_-=r[y]*o[x]}for(let y=s;y<n;y+=1)_+=t[y]*i[p-y&c-1];for(let y=s;y<e;y+=1)_-=r[y]*o[p-y&c-1];i[p]=h[g],o[p]=_,p=p+1&c-1,f[g]=_}return p},tA=(r,e,t,n)=>{const s=t instanceof Float64Array?t:new Float64Array(t),i=n instanceof Float64Array?n:new Float64Array(n),o=s.length,a=i.length,c=Math.min(o,a);if(s[0]!==1){for(let _=0;_<o;_+=1)i[_]/=s[0];for(let _=1;_<a;_+=1)s[_]/=s[0]}const h=32,f=new Float32Array(h),d=new Float32Array(h),p=e.createBuffer(r.numberOfChannels,r.length,r.sampleRate),g=r.numberOfChannels;for(let _=0;_<g;_+=1){const y=r.getChannelData(_),x=p.getChannelData(_);f.fill(0),d.fill(0),Ex(s,o,i,a,c,f,d,0,h,y,x)}return p},nA=(r,e,t,n,s)=>(i,o)=>{const a=new WeakMap;let c=null;const h=async(f,d)=>{let p=null,g=e(f);const _=Wn(g,d);if(d.createIIRFilter===void 0?p=r(d,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):_||(g=d.createIIRFilter(o,i)),a.set(d,p===null?g:p),p!==null){if(c===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const x=new t(f.context.destination.channelCount,f.context.length,d.sampleRate);c=(async()=>{await n(f,x,x.destination);const w=await s(x);return tA(w,d,i,o)})()}const y=await c;return p.buffer=y,p.start(0),p}return await n(f,d,g),g};return{render(f,d){const p=a.get(d);return p!==void 0?Promise.resolve(p):h(f,d)}}},rA=(r,e,t,n,s,i)=>o=>(a,c)=>{const h=r.get(a);if(h===void 0){if(!o&&i(a)){const f=n(a),{outputs:d}=t(a);for(const p of d)if(Ou(p)){const g=n(p[0]);e(f,g,p[1],p[2])}else{const g=s(p[0]);f.disconnect(g,p[1])}}r.set(a,c)}else r.set(a,h+c)},sA=(r,e)=>t=>{const n=r.get(t);return e(n)||e(t)},iA=(r,e)=>t=>r.has(t)||e(t),oA=(r,e)=>t=>r.has(t)||e(t),aA=(r,e)=>t=>{const n=r.get(t);return e(n)||e(t)},lA=r=>e=>r!==null&&e instanceof r,cA=r=>e=>r!==null&&typeof r.AudioNode=="function"&&e instanceof r.AudioNode,uA=r=>e=>r!==null&&typeof r.AudioParam=="function"&&e instanceof r.AudioParam,hA=(r,e)=>t=>r(t)||e(t),fA=r=>e=>r!==null&&e instanceof r,dA=r=>r!==null&&r.isSecureContext,pA=(r,e,t,n)=>class extends r{constructor(i,o){const a=t(i),c=e(a,o);if(n(a))throw TypeError();super(i,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},mA={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},gA=(r,e,t,n)=>class extends r{constructor(i,o){const a=t(i);if(n(a))throw new TypeError;const c={...mA,...o},h=e(a,c);super(i,!1,h,null),this._nativeMediaStreamAudioDestinationNode=h}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},vA=(r,e,t,n)=>class extends r{constructor(i,o){const a=t(i),c=e(a,o);if(n(a))throw new TypeError;super(i,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},_A=(r,e,t)=>class extends r{constructor(s,i){const o=t(s),a=e(o,i);super(s,!0,a,null)}},yA=(r,e,t,n,s,i)=>class extends t{constructor(a,c){super(a),this._nativeContext=a,Jf.set(this,a),n(a)&&s.set(a,new Set),this._destination=new r(this,c),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const c=typeof a=="function"?i(this,a):null;this._nativeContext.onstatechange=c;const h=this._nativeContext.onstatechange;this._onstatechange=h!==null&&h===c?a:h}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Jc=r=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=r.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},xA=(r,e)=>(t,n,s)=>{const i=new Set;return t.connect=(o=>(a,c=0,h=0)=>{const f=i.size===0;if(e(a))return o.call(t,a,c,h),r(i,[a,c,h],d=>d[0]===a&&d[1]===c&&d[2]===h,!0),f&&n(),a;o.call(t,a,c),r(i,[a,c],d=>d[0]===a&&d[1]===c,!0),f&&n()})(t.connect),t.disconnect=(o=>(a,c,h)=>{const f=i.size>0;if(a===void 0)o.apply(t),i.clear();else if(typeof a=="number"){o.call(t,a);for(const p of i)p[1]===a&&i.delete(p)}else{e(a)?o.call(t,a,c,h):o.call(t,a,c);for(const p of i)p[0]===a&&(c===void 0||p[1]===c)&&(h===void 0||p[2]===h)&&i.delete(p)}const d=i.size===0;f&&d&&s()})(t.disconnect),t},Ft=(r,e,t)=>{const n=e[t];n!==void 0&&n!==r[t]&&(r[t]=n)},dn=(r,e)=>{Ft(r,e,"channelCount"),Ft(r,e,"channelCountMode"),Ft(r,e,"channelInterpretation")},__=r=>typeof r.getFloatTimeDomainData=="function",wA=r=>{r.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);r.getByteTimeDomainData(t);const n=Math.max(t.length,r.fftSize);for(let s=0;s<n;s+=1)e[s]=(t[s]-128)*.0078125;return e}},SA=(r,e)=>(t,n)=>{const s=t.createAnalyser();if(dn(s,n),!(n.maxDecibels>n.minDecibels))throw e();return Ft(s,n,"fftSize"),Ft(s,n,"maxDecibels"),Ft(s,n,"minDecibels"),Ft(s,n,"smoothingTimeConstant"),r(__,()=>__(s))||wA(s),s},TA=r=>r===null?null:r.hasOwnProperty("AudioBuffer")?r.AudioBuffer:null,Zt=(r,e,t)=>{const n=e[t];n!==void 0&&n!==r[t].value&&(r[t].value=n)},CA=r=>{r.start=(e=>{let t=!1;return(n=0,s=0,i)=>{if(t)throw Cn();e.call(r,n,s,i),t=!0}})(r.start)},kg=r=>{r.start=(e=>(t=0,n=0,s)=>{if(typeof s=="number"&&s<0||n<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(r,t,n,s)})(r.start)},Pg=r=>{r.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(r,t)})(r.stop)},EA=(r,e,t,n,s,i,o,a,c,h,f)=>(d,p)=>{const g=d.createBufferSource();return dn(g,p),Zt(g,p,"playbackRate"),Ft(g,p,"buffer"),Ft(g,p,"loop"),Ft(g,p,"loopEnd"),Ft(g,p,"loopStart"),e(t,()=>t(d))||CA(g),e(n,()=>n(d))||c(g),e(s,()=>s(d))||h(g,d),e(i,()=>i(d))||kg(g),e(o,()=>o(d))||f(g,d),e(a,()=>a(d))||Pg(g),r(d,g),g},bA=r=>r===null?null:r.hasOwnProperty("AudioContext")?r.AudioContext:r.hasOwnProperty("webkitAudioContext")?r.webkitAudioContext:null,MA=(r,e)=>(t,n,s)=>{const i=t.destination;if(i.channelCount!==n)try{i.channelCount=n}catch{}s&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:n});const o=r(t,{channelCount:n,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(o,"channelCount",a=>()=>a.call(o),a=>c=>{a.call(o,c);try{i.channelCount=c}catch(h){if(c>i.maxChannelCount)throw h}}),e(o,"channelCountMode",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelCountMode=c}),e(o,"channelInterpretation",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelInterpretation=c}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o},OA=r=>r===null?null:r.hasOwnProperty("AudioWorkletNode")?r.AudioWorkletNode:null,AA=r=>{const{port1:e}=new MessageChannel;try{e.postMessage(r)}finally{e.close()}},kA=(r,e,t,n,s)=>(i,o,a,c,h,f)=>{if(a!==null)try{const d=new a(i,c,f),p=new Map;let g=null;if(Object.defineProperties(d,{channelCount:{get:()=>f.channelCount,set:()=>{throw r()}},channelCountMode:{get:()=>"explicit",set:()=>{throw r()}},onprocessorerror:{get:()=>g,set:_=>{typeof g=="function"&&d.removeEventListener("processorerror",g),g=typeof _=="function"?_:null,typeof g=="function"&&d.addEventListener("processorerror",g)}}}),d.addEventListener=(_=>(...y)=>{if(y[0]==="processorerror"){const x=typeof y[1]=="function"?y[1]:typeof y[1]=="object"&&y[1]!==null&&typeof y[1].handleEvent=="function"?y[1].handleEvent:null;if(x!==null){const w=p.get(y[1]);w!==void 0?y[1]=w:(y[1]=T=>{T.type==="error"?(Object.defineProperties(T,{type:{value:"processorerror"}}),x(T)):x(new ErrorEvent(y[0],{...T}))},p.set(x,y[1]))}}return _.call(d,"error",y[1],y[2]),_.call(d,...y)})(d.addEventListener),d.removeEventListener=(_=>(...y)=>{if(y[0]==="processorerror"){const x=p.get(y[1]);x!==void 0&&(p.delete(y[1]),y[1]=x)}return _.call(d,"error",y[1],y[2]),_.call(d,y[0],y[1],y[2])})(d.removeEventListener),f.numberOfOutputs!==0){const _=t(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return d.connect(_).connect(i.destination),s(d,()=>_.disconnect(),()=>_.connect(i.destination))}return d}catch(d){throw d.code===11?n():d}if(h===void 0)throw n();return AA(f),e(i,o,h,f)},bx=(r,e)=>r===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(r*e))))),PA=r=>new Promise((e,t)=>{const{port1:n,port2:s}=new MessageChannel;n.onmessage=({data:i})=>{n.close(),s.close(),e(i)},n.onmessageerror=({data:i})=>{n.close(),s.close(),t(i)},s.postMessage(r)}),RA=async(r,e)=>{const t=await PA(e);return new r(t)},DA=(r,e,t,n)=>{let s=Rm.get(r);s===void 0&&(s=new WeakMap,Rm.set(r,s));const i=RA(t,n);return s.set(e,i),i},IA=(r,e,t,n,s,i,o,a,c,h,f,d,p)=>(g,_,y,x)=>{if(x.numberOfInputs===0&&x.numberOfOutputs===0)throw c();const w=Array.isArray(x.outputChannelCount)?x.outputChannelCount:Array.from(x.outputChannelCount);if(w.some(ee=>ee<1))throw c();if(w.length!==x.numberOfOutputs)throw e();if(x.channelCountMode!=="explicit")throw c();const T=x.channelCount*x.numberOfInputs,b=w.reduce((ee,he)=>ee+he,0),E=y.parameterDescriptors===void 0?0:y.parameterDescriptors.length;if(T+E>6||b>6)throw c();const C=new MessageChannel,A=[],M=[];for(let ee=0;ee<x.numberOfInputs;ee+=1)A.push(o(g,{channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation,gain:1})),M.push(s(g,{channelCount:x.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:x.channelCount}));const k=[];if(y.parameterDescriptors!==void 0)for(const{defaultValue:ee,maxValue:he,minValue:xe,name:ce}of y.parameterDescriptors){const de=i(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:x.parameterData[ce]!==void 0?x.parameterData[ce]:ee===void 0?0:ee});Object.defineProperties(de.offset,{defaultValue:{get:()=>ee===void 0?0:ee},maxValue:{get:()=>he===void 0?tr:he},minValue:{get:()=>xe===void 0?pr:xe}}),k.push(de)}const R=n(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,T+E)}),F=bx(_,g.sampleRate),U=a(g,F,T+E,Math.max(1,b)),I=s(g,{channelCount:Math.max(1,b),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,b)}),z=[];for(let ee=0;ee<x.numberOfOutputs;ee+=1)z.push(n(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:w[ee]}));for(let ee=0;ee<x.numberOfInputs;ee+=1){A[ee].connect(M[ee]);for(let he=0;he<x.channelCount;he+=1)M[ee].connect(R,he,ee*x.channelCount+he)}const j=new Tx(y.parameterDescriptors===void 0?[]:y.parameterDescriptors.map(({name:ee},he)=>{const xe=k[he];return xe.connect(R,0,T+he),xe.start(0),[ee,xe.offset]}));R.connect(U);let q=x.channelInterpretation,Y=null;const $=x.numberOfOutputs===0?[U]:z,W={get bufferSize(){return F},get channelCount(){return x.channelCount},set channelCount(ee){throw t()},get channelCountMode(){return x.channelCountMode},set channelCountMode(ee){throw t()},get channelInterpretation(){return q},set channelInterpretation(ee){for(const he of A)he.channelInterpretation=ee;q=ee},get context(){return U.context},get inputs(){return A},get numberOfInputs(){return x.numberOfInputs},get numberOfOutputs(){return x.numberOfOutputs},get onprocessorerror(){return Y},set onprocessorerror(ee){typeof Y=="function"&&W.removeEventListener("processorerror",Y),Y=typeof ee=="function"?ee:null,typeof Y=="function"&&W.addEventListener("processorerror",Y)},get parameters(){return j},get port(){return C.port2},addEventListener(...ee){return U.addEventListener(ee[0],ee[1],ee[2])},connect:r.bind(null,$),disconnect:h.bind(null,$),dispatchEvent(...ee){return U.dispatchEvent(ee[0])},removeEventListener(...ee){return U.removeEventListener(ee[0],ee[1],ee[2])}},V=new Map;C.port1.addEventListener=(ee=>(...he)=>{if(he[0]==="message"){const xe=typeof he[1]=="function"?he[1]:typeof he[1]=="object"&&he[1]!==null&&typeof he[1].handleEvent=="function"?he[1].handleEvent:null;if(xe!==null){const ce=V.get(he[1]);ce!==void 0?he[1]=ce:(he[1]=de=>{f(g.currentTime,g.sampleRate,()=>xe(de))},V.set(xe,he[1]))}}return ee.call(C.port1,he[0],he[1],he[2])})(C.port1.addEventListener),C.port1.removeEventListener=(ee=>(...he)=>{if(he[0]==="message"){const xe=V.get(he[1]);xe!==void 0&&(V.delete(he[1]),he[1]=xe)}return ee.call(C.port1,he[0],he[1],he[2])})(C.port1.removeEventListener);let H=null;Object.defineProperty(C.port1,"onmessage",{get:()=>H,set:ee=>{typeof H=="function"&&C.port1.removeEventListener("message",H),H=typeof ee=="function"?ee:null,typeof H=="function"&&(C.port1.addEventListener("message",H),C.port1.start())}}),y.prototype.port=C.port1;let L=null;DA(g,W,y,x).then(ee=>L=ee);const J=Ef(x.numberOfInputs,x.channelCount),te=Ef(x.numberOfOutputs,w),X=y.parameterDescriptors===void 0?[]:y.parameterDescriptors.reduce((ee,{name:he})=>({...ee,[he]:new Float32Array(128)}),{});let oe=!0;const re=()=>{x.numberOfOutputs>0&&U.disconnect(I);for(let ee=0,he=0;ee<x.numberOfOutputs;ee+=1){const xe=z[ee];for(let ce=0;ce<w[ee];ce+=1)I.disconnect(xe,he+ce,ce);he+=w[ee]}},Q=new Map;U.onaudioprocess=({inputBuffer:ee,outputBuffer:he})=>{if(L!==null){const xe=d(W);for(let ce=0;ce<F;ce+=128){for(let de=0;de<x.numberOfInputs;de+=1)for(let pe=0;pe<x.channelCount;pe+=1)Cf(ee,J[de],pe,pe,ce);y.parameterDescriptors!==void 0&&y.parameterDescriptors.forEach(({name:de},pe)=>{Cf(ee,X,de,T+pe,ce)});for(let de=0;de<x.numberOfInputs;de+=1)for(let pe=0;pe<w[de];pe+=1)te[de][pe].byteLength===0&&(te[de][pe]=new Float32Array(128));try{const de=J.map((ue,Me)=>{if(xe[Me].size>0)return Q.set(Me,F/128),ue;const Ce=Q.get(Me);return Ce===void 0?[]:(ue.every(Te=>Te.every(et=>et===0))&&(Ce===1?Q.delete(Me):Q.set(Me,Ce-1)),ue)});oe=f(g.currentTime+ce/g.sampleRate,g.sampleRate,()=>L.process(de,te,X));for(let ue=0,Me=0;ue<x.numberOfOutputs;ue+=1){for(let Se=0;Se<w[ue];Se+=1)Cx(he,te[ue],Se,Me+Se,ce);Me+=w[ue]}}catch(de){oe=!1,W.dispatchEvent(new ErrorEvent("processorerror",{colno:de.colno,filename:de.filename,lineno:de.lineno,message:de.message}))}if(!oe){for(let de=0;de<x.numberOfInputs;de+=1){A[de].disconnect(M[de]);for(let pe=0;pe<x.channelCount;pe+=1)M[ce].disconnect(R,pe,de*x.channelCount+pe)}if(y.parameterDescriptors!==void 0){const de=y.parameterDescriptors.length;for(let pe=0;pe<de;pe+=1){const ue=k[pe];ue.disconnect(R,0,T+pe),ue.stop()}}R.disconnect(U),U.onaudioprocess=null,ge?re():le();break}}}};let ge=!1;const ve=o(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),ae=()=>U.connect(ve).connect(g.destination),le=()=>{U.disconnect(ve),ve.disconnect()},be=()=>{if(oe){le(),x.numberOfOutputs>0&&U.connect(I);for(let ee=0,he=0;ee<x.numberOfOutputs;ee+=1){const xe=z[ee];for(let ce=0;ce<w[ee];ce+=1)I.connect(xe,he+ce,ce);he+=w[ee]}}ge=!0},Fe=()=>{oe&&(ae(),re()),ge=!1};return ae(),p(W,be,Fe)},Mx=(r,e)=>{const t=r.createBiquadFilter();return dn(t,e),Zt(t,e,"Q"),Zt(t,e,"detune"),Zt(t,e,"frequency"),Zt(t,e,"gain"),Ft(t,e,"type"),t},UA=(r,e)=>(t,n)=>{const s=t.createChannelMerger(n.numberOfInputs);return r!==null&&r.name==="webkitAudioContext"&&e(t,s),dn(s,n),s},FA=r=>{const e=r.numberOfOutputs;Object.defineProperty(r,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw Cn()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw Cn()}}),Object.defineProperty(r,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw Cn()}})},Au=(r,e)=>{const t=r.createChannelSplitter(e.numberOfOutputs);return dn(t,e),FA(t),t},NA=(r,e,t,n,s)=>(i,o)=>{if(i.createConstantSource===void 0)return t(i,o);const a=i.createConstantSource();return dn(a,o),Zt(a,o,"offset"),e(n,()=>n(i))||kg(a),e(s,()=>s(i))||Pg(a),r(i,a),a},Pl=(r,e)=>(r.connect=e.connect.bind(e),r.disconnect=e.disconnect.bind(e),r),LA=(r,e,t,n)=>(s,{offset:i,...o})=>{const a=s.createBuffer(1,2,44100),c=e(s,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),h=t(s,{...o,gain:i}),f=a.getChannelData(0);f[0]=1,f[1]=1,c.buffer=a,c.loop=!0;const d={get bufferSize(){},get channelCount(){return h.channelCount},set channelCount(_){h.channelCount=_},get channelCountMode(){return h.channelCountMode},set channelCountMode(_){h.channelCountMode=_},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(_){h.channelInterpretation=_},get context(){return h.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get offset(){return h.gain},get onended(){return c.onended},set onended(_){c.onended=_},addEventListener(..._){return c.addEventListener(_[0],_[1],_[2])},dispatchEvent(..._){return c.dispatchEvent(_[0])},removeEventListener(..._){return c.removeEventListener(_[0],_[1],_[2])},start(_=0){c.start.call(c,_)},stop(_=0){c.stop.call(c,_)}},p=()=>c.connect(h),g=()=>c.disconnect(h);return r(s,c),n(Pl(d,h),p,g)},zA=(r,e)=>(t,n)=>{const s=t.createConvolver();if(dn(s,n),n.disableNormalization===s.normalize&&(s.normalize=!n.disableNormalization),Ft(s,n,"buffer"),n.channelCount>2||(e(s,"channelCount",i=>()=>i.call(s),i=>o=>{if(o>2)throw r();return i.call(s,o)}),n.channelCountMode==="max"))throw r();return e(s,"channelCountMode",i=>()=>i.call(s),i=>o=>{if(o==="max")throw r();return i.call(s,o)}),s},Ox=(r,e)=>{const t=r.createDelay(e.maxDelayTime);return dn(t,e),Zt(t,e,"delayTime"),t},BA=r=>(e,t)=>{const n=e.createDynamicsCompressor();if(dn(n,t),t.channelCount>2||t.channelCountMode==="max")throw r();return Zt(n,t,"attack"),Zt(n,t,"knee"),Zt(n,t,"ratio"),Zt(n,t,"release"),Zt(n,t,"threshold"),n},wr=(r,e)=>{const t=r.createGain();return dn(t,e),Zt(t,e,"gain"),t},jA=r=>(e,t,n)=>{if(e.createIIRFilter===void 0)return r(e,t,n);const s=e.createIIRFilter(n.feedforward,n.feedback);return dn(s,n),s};function VA(r,e){const t=e[0]*e[0]+e[1]*e[1];return[(r[0]*e[0]+r[1]*e[1])/t,(r[1]*e[0]-r[0]*e[1])/t]}function GA(r,e){return[r[0]*e[0]-r[1]*e[1],r[0]*e[1]+r[1]*e[0]]}function y_(r,e){let t=[0,0];for(let n=r.length-1;n>=0;n-=1)t=GA(t,e),t[0]+=r[n];return t}const HA=(r,e,t,n)=>(s,i,{channelCount:o,channelCountMode:a,channelInterpretation:c,feedback:h,feedforward:f})=>{const d=bx(i,s.sampleRate),p=h instanceof Float64Array?h:new Float64Array(h),g=f instanceof Float64Array?f:new Float64Array(f),_=p.length,y=g.length,x=Math.min(_,y);if(_===0||_>20)throw n();if(p[0]===0)throw e();if(y===0||y>20)throw n();if(g[0]===0)throw e();if(p[0]!==1){for(let k=0;k<y;k+=1)g[k]/=p[0];for(let k=1;k<_;k+=1)p[k]/=p[0]}const w=t(s,d,o,o);w.channelCount=o,w.channelCountMode=a,w.channelInterpretation=c;const T=32,b=[],E=[],C=[];for(let k=0;k<o;k+=1){b.push(0);const R=new Float32Array(T),F=new Float32Array(T);R.fill(0),F.fill(0),E.push(R),C.push(F)}w.onaudioprocess=k=>{const R=k.inputBuffer,F=k.outputBuffer,U=R.numberOfChannels;for(let I=0;I<U;I+=1){const z=R.getChannelData(I),j=F.getChannelData(I);b[I]=Ex(p,_,g,y,x,E[I],C[I],b[I],T,z,j)}};const A=s.sampleRate/2;return Pl({get bufferSize(){return d},get channelCount(){return w.channelCount},set channelCount(k){w.channelCount=k},get channelCountMode(){return w.channelCountMode},set channelCountMode(k){w.channelCountMode=k},get channelInterpretation(){return w.channelInterpretation},set channelInterpretation(k){w.channelInterpretation=k},get context(){return w.context},get inputs(){return[w]},get numberOfInputs(){return w.numberOfInputs},get numberOfOutputs(){return w.numberOfOutputs},addEventListener(...k){return w.addEventListener(k[0],k[1],k[2])},dispatchEvent(...k){return w.dispatchEvent(k[0])},getFrequencyResponse(k,R,F){if(k.length!==R.length||R.length!==F.length)throw r();const U=k.length;for(let I=0;I<U;I+=1){const z=-Math.PI*(k[I]/A),j=[Math.cos(z),Math.sin(z)],q=y_(g,j),Y=y_(p,j),$=VA(q,Y);R[I]=Math.sqrt($[0]*$[0]+$[1]*$[1]),F[I]=Math.atan2($[1],$[0])}},removeEventListener(...k){return w.removeEventListener(k[0],k[1],k[2])}},w)},WA=(r,e)=>r.createMediaElementSource(e.mediaElement),qA=(r,e)=>{const t=r.createMediaStreamDestination();return dn(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},ZA=(r,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const n=t.slice(0,1),s=r.createMediaStreamSource(new MediaStream(n));return Object.defineProperty(s,"mediaStream",{value:e}),s},YA=(r,e)=>(t,{mediaStreamTrack:n})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(n);const s=new MediaStream([n]),i=t.createMediaStreamSource(s);if(n.kind!=="audio")throw r();if(e(t))throw new TypeError;return i},XA=r=>r===null?null:r.hasOwnProperty("OfflineAudioContext")?r.OfflineAudioContext:r.hasOwnProperty("webkitOfflineAudioContext")?r.webkitOfflineAudioContext:null,QA=(r,e,t,n,s,i)=>(o,a)=>{const c=o.createOscillator();return dn(c,a),Zt(c,a,"detune"),Zt(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):Ft(c,a,"type"),e(t,()=>t(o))||kg(c),e(n,()=>n(o))||i(c,o),e(s,()=>s(o))||Pg(c),r(o,c),c},KA=r=>(e,t)=>{const n=e.createPanner();return n.orientationX===void 0?r(e,t):(dn(n,t),Zt(n,t,"orientationX"),Zt(n,t,"orientationY"),Zt(n,t,"orientationZ"),Zt(n,t,"positionX"),Zt(n,t,"positionY"),Zt(n,t,"positionZ"),Ft(n,t,"coneInnerAngle"),Ft(n,t,"coneOuterAngle"),Ft(n,t,"coneOuterGain"),Ft(n,t,"distanceModel"),Ft(n,t,"maxDistance"),Ft(n,t,"panningModel"),Ft(n,t,"refDistance"),Ft(n,t,"rolloffFactor"),n)},JA=(r,e,t,n,s,i,o,a,c,h)=>(f,{coneInnerAngle:d,coneOuterAngle:p,coneOuterGain:g,distanceModel:_,maxDistance:y,orientationX:x,orientationY:w,orientationZ:T,panningModel:b,positionX:E,positionY:C,positionZ:A,refDistance:M,rolloffFactor:k,...R})=>{const F=f.createPanner();if(R.channelCount>2||R.channelCountMode==="max")throw o();dn(F,R);const U={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},I=t(f,{...U,channelInterpretation:"speakers",numberOfInputs:6}),z=n(f,{...R,gain:1}),j=n(f,{...U,gain:1}),q=n(f,{...U,gain:0}),Y=n(f,{...U,gain:0}),$=n(f,{...U,gain:0}),W=n(f,{...U,gain:0}),V=n(f,{...U,gain:0}),H=s(f,256,6,1),L=i(f,{...U,curve:new Float32Array([1,1]),oversample:"none"});let B=[x,w,T],J=[E,C,A];const te=new Float32Array(1);H.onaudioprocess=({inputBuffer:Q})=>{const ge=[c(Q,te,0),c(Q,te,1),c(Q,te,2)];ge.some((ae,le)=>ae!==B[le])&&(F.setOrientation(...ge),B=ge);const ve=[c(Q,te,3),c(Q,te,4),c(Q,te,5)];ve.some((ae,le)=>ae!==J[le])&&(F.setPosition(...ve),J=ve)},Object.defineProperty(q.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Y.gain,"defaultValue",{get:()=>0}),Object.defineProperty($.gain,"defaultValue",{get:()=>0}),Object.defineProperty(W.gain,"defaultValue",{get:()=>0}),Object.defineProperty(V.gain,"defaultValue",{get:()=>0});const X={get bufferSize(){},get channelCount(){return F.channelCount},set channelCount(Q){if(Q>2)throw o();z.channelCount=Q,F.channelCount=Q},get channelCountMode(){return F.channelCountMode},set channelCountMode(Q){if(Q==="max")throw o();z.channelCountMode=Q,F.channelCountMode=Q},get channelInterpretation(){return F.channelInterpretation},set channelInterpretation(Q){z.channelInterpretation=Q,F.channelInterpretation=Q},get coneInnerAngle(){return F.coneInnerAngle},set coneInnerAngle(Q){F.coneInnerAngle=Q},get coneOuterAngle(){return F.coneOuterAngle},set coneOuterAngle(Q){F.coneOuterAngle=Q},get coneOuterGain(){return F.coneOuterGain},set coneOuterGain(Q){if(Q<0||Q>1)throw e();F.coneOuterGain=Q},get context(){return F.context},get distanceModel(){return F.distanceModel},set distanceModel(Q){F.distanceModel=Q},get inputs(){return[z]},get maxDistance(){return F.maxDistance},set maxDistance(Q){if(Q<0)throw new RangeError;F.maxDistance=Q},get numberOfInputs(){return F.numberOfInputs},get numberOfOutputs(){return F.numberOfOutputs},get orientationX(){return j.gain},get orientationY(){return q.gain},get orientationZ(){return Y.gain},get panningModel(){return F.panningModel},set panningModel(Q){F.panningModel=Q},get positionX(){return $.gain},get positionY(){return W.gain},get positionZ(){return V.gain},get refDistance(){return F.refDistance},set refDistance(Q){if(Q<0)throw new RangeError;F.refDistance=Q},get rolloffFactor(){return F.rolloffFactor},set rolloffFactor(Q){if(Q<0)throw new RangeError;F.rolloffFactor=Q},addEventListener(...Q){return z.addEventListener(Q[0],Q[1],Q[2])},dispatchEvent(...Q){return z.dispatchEvent(Q[0])},removeEventListener(...Q){return z.removeEventListener(Q[0],Q[1],Q[2])}};d!==X.coneInnerAngle&&(X.coneInnerAngle=d),p!==X.coneOuterAngle&&(X.coneOuterAngle=p),g!==X.coneOuterGain&&(X.coneOuterGain=g),_!==X.distanceModel&&(X.distanceModel=_),y!==X.maxDistance&&(X.maxDistance=y),x!==X.orientationX.value&&(X.orientationX.value=x),w!==X.orientationY.value&&(X.orientationY.value=w),T!==X.orientationZ.value&&(X.orientationZ.value=T),b!==X.panningModel&&(X.panningModel=b),E!==X.positionX.value&&(X.positionX.value=E),C!==X.positionY.value&&(X.positionY.value=C),A!==X.positionZ.value&&(X.positionZ.value=A),M!==X.refDistance&&(X.refDistance=M),k!==X.rolloffFactor&&(X.rolloffFactor=k),(B[0]!==1||B[1]!==0||B[2]!==0)&&F.setOrientation(...B),(J[0]!==0||J[1]!==0||J[2]!==0)&&F.setPosition(...J);const oe=()=>{z.connect(F),r(z,L,0,0),L.connect(j).connect(I,0,0),L.connect(q).connect(I,0,1),L.connect(Y).connect(I,0,2),L.connect($).connect(I,0,3),L.connect(W).connect(I,0,4),L.connect(V).connect(I,0,5),I.connect(H).connect(f.destination)},re=()=>{z.disconnect(F),a(z,L,0,0),L.disconnect(j),j.disconnect(I),L.disconnect(q),q.disconnect(I),L.disconnect(Y),Y.disconnect(I),L.disconnect($),$.disconnect(I),L.disconnect(W),W.disconnect(I),L.disconnect(V),V.disconnect(I),I.disconnect(H),H.disconnect(f.destination)};return h(Pl(X,F),oe,re)},$A=r=>(e,{disableNormalization:t,imag:n,real:s})=>{const i=n instanceof Float32Array?n:new Float32Array(n),o=s instanceof Float32Array?s:new Float32Array(s),a=e.createPeriodicWave(o,i,{disableNormalization:t});if(Array.from(n).length<2)throw r();return a},ku=(r,e,t,n)=>r.createScriptProcessor(e,t,n),ek=(r,e)=>(t,n)=>{const s=n.channelCountMode;if(s==="clamped-max")throw e();if(t.createStereoPanner===void 0)return r(t,n);const i=t.createStereoPanner();return dn(i,n),Zt(i,n,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>s,set:o=>{if(o!==s)throw e()}}),i},tk=(r,e,t,n,s,i)=>{const a=new Float32Array([1,1]),c=Math.PI/2,h={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},f={...h,oversample:"none"},d=(_,y,x,w)=>{const T=new Float32Array(16385),b=new Float32Array(16385);for(let R=0;R<16385;R+=1){const F=R/16384*c;T[R]=Math.cos(F),b[R]=Math.sin(F)}const E=t(_,{...h,gain:0}),C=n(_,{...f,curve:T}),A=n(_,{...f,curve:a}),M=t(_,{...h,gain:0}),k=n(_,{...f,curve:b});return{connectGraph(){y.connect(E),y.connect(A.inputs===void 0?A:A.inputs[0]),y.connect(M),A.connect(x),x.connect(C.inputs===void 0?C:C.inputs[0]),x.connect(k.inputs===void 0?k:k.inputs[0]),C.connect(E.gain),k.connect(M.gain),E.connect(w,0,0),M.connect(w,0,1)},disconnectGraph(){y.disconnect(E),y.disconnect(A.inputs===void 0?A:A.inputs[0]),y.disconnect(M),A.disconnect(x),x.disconnect(C.inputs===void 0?C:C.inputs[0]),x.disconnect(k.inputs===void 0?k:k.inputs[0]),C.disconnect(E.gain),k.disconnect(M.gain),E.disconnect(w,0,0),M.disconnect(w,0,1)}}},p=(_,y,x,w)=>{const T=new Float32Array(16385),b=new Float32Array(16385),E=new Float32Array(16385),C=new Float32Array(16385),A=Math.floor(16385/2);for(let $=0;$<16385;$+=1)if($>A){const W=($-A)/(16384-A)*c;T[$]=Math.cos(W),b[$]=Math.sin(W),E[$]=0,C[$]=1}else{const W=$/(16384-A)*c;T[$]=1,b[$]=0,E[$]=Math.cos(W),C[$]=Math.sin(W)}const M=e(_,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),k=t(_,{...h,gain:0}),R=n(_,{...f,curve:T}),F=t(_,{...h,gain:0}),U=n(_,{...f,curve:b}),I=n(_,{...f,curve:a}),z=t(_,{...h,gain:0}),j=n(_,{...f,curve:E}),q=t(_,{...h,gain:0}),Y=n(_,{...f,curve:C});return{connectGraph(){y.connect(M),y.connect(I.inputs===void 0?I:I.inputs[0]),M.connect(k,0),M.connect(F,0),M.connect(z,1),M.connect(q,1),I.connect(x),x.connect(R.inputs===void 0?R:R.inputs[0]),x.connect(U.inputs===void 0?U:U.inputs[0]),x.connect(j.inputs===void 0?j:j.inputs[0]),x.connect(Y.inputs===void 0?Y:Y.inputs[0]),R.connect(k.gain),U.connect(F.gain),j.connect(z.gain),Y.connect(q.gain),k.connect(w,0,0),z.connect(w,0,0),F.connect(w,0,1),q.connect(w,0,1)},disconnectGraph(){y.disconnect(M),y.disconnect(I.inputs===void 0?I:I.inputs[0]),M.disconnect(k,0),M.disconnect(F,0),M.disconnect(z,1),M.disconnect(q,1),I.disconnect(x),x.disconnect(R.inputs===void 0?R:R.inputs[0]),x.disconnect(U.inputs===void 0?U:U.inputs[0]),x.disconnect(j.inputs===void 0?j:j.inputs[0]),x.disconnect(Y.inputs===void 0?Y:Y.inputs[0]),R.disconnect(k.gain),U.disconnect(F.gain),j.disconnect(z.gain),Y.disconnect(q.gain),k.disconnect(w,0,0),z.disconnect(w,0,0),F.disconnect(w,0,1),q.disconnect(w,0,1)}}},g=(_,y,x,w,T)=>{if(y===1)return d(_,x,w,T);if(y===2)return p(_,x,w,T);throw s()};return(_,{channelCount:y,channelCountMode:x,pan:w,...T})=>{if(x==="max")throw s();const b=r(_,{...T,channelCount:1,channelCountMode:x,numberOfInputs:2}),E=t(_,{...T,channelCount:y,channelCountMode:x,gain:1}),C=t(_,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:w});let{connectGraph:A,disconnectGraph:M}=g(_,y,E,C,b);Object.defineProperty(C.gain,"defaultValue",{get:()=>0}),Object.defineProperty(C.gain,"maxValue",{get:()=>1}),Object.defineProperty(C.gain,"minValue",{get:()=>-1});const k={get bufferSize(){},get channelCount(){return E.channelCount},set channelCount(I){E.channelCount!==I&&(R&&M(),{connectGraph:A,disconnectGraph:M}=g(_,I,E,C,b),R&&A()),E.channelCount=I},get channelCountMode(){return E.channelCountMode},set channelCountMode(I){if(I==="clamped-max"||I==="max")throw s();E.channelCountMode=I},get channelInterpretation(){return E.channelInterpretation},set channelInterpretation(I){E.channelInterpretation=I},get context(){return E.context},get inputs(){return[E]},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get pan(){return C.gain},addEventListener(...I){return E.addEventListener(I[0],I[1],I[2])},dispatchEvent(...I){return E.dispatchEvent(I[0])},removeEventListener(...I){return E.removeEventListener(I[0],I[1],I[2])}};let R=!1;const F=()=>{A(),R=!0},U=()=>{M(),R=!1};return i(Pl(k,b),F,U)}},nk=(r,e,t,n,s,i,o)=>(a,c)=>{const h=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return t(a,c);dn(h,c);const f=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(f!==null&&f.length<2)throw e();Ft(h,{curve:f},"curve"),Ft(h,c,"oversample");let d=null,p=!1;return o(h,"curve",y=>()=>y.call(h),y=>x=>(y.call(h,x),p&&(n(x)&&d===null?d=r(a,h):!n(x)&&d!==null&&(d(),d=null)),x)),s(h,()=>{p=!0,n(h.curve)&&(d=r(a,h))},()=>{p=!1,d!==null&&(d(),d=null)})},rk=(r,e,t,n,s)=>(i,{curve:o,oversample:a,...c})=>{const h=i.createWaveShaper(),f=i.createWaveShaper();dn(h,c),dn(f,c);const d=t(i,{...c,gain:1}),p=t(i,{...c,gain:-1}),g=t(i,{...c,gain:1}),_=t(i,{...c,gain:-1});let y=null,x=!1,w=null;const T={get bufferSize(){},get channelCount(){return h.channelCount},set channelCount(C){d.channelCount=C,p.channelCount=C,h.channelCount=C,g.channelCount=C,f.channelCount=C,_.channelCount=C},get channelCountMode(){return h.channelCountMode},set channelCountMode(C){d.channelCountMode=C,p.channelCountMode=C,h.channelCountMode=C,g.channelCountMode=C,f.channelCountMode=C,_.channelCountMode=C},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(C){d.channelInterpretation=C,p.channelInterpretation=C,h.channelInterpretation=C,g.channelInterpretation=C,f.channelInterpretation=C,_.channelInterpretation=C},get context(){return h.context},get curve(){return w},set curve(C){if(C!==null&&C.length<2)throw e();if(C===null)h.curve=C,f.curve=C;else{const A=C.length,M=new Float32Array(A+2-A%2),k=new Float32Array(A+2-A%2);M[0]=C[0],k[0]=-C[A-1];const R=Math.ceil((A+1)/2),F=(A+1)/2-1;for(let U=1;U<R;U+=1){const I=U/R*F,z=Math.floor(I),j=Math.ceil(I);M[U]=z===j?C[z]:(1-(I-z))*C[z]+(1-(j-I))*C[j],k[U]=z===j?-C[A-1-z]:-((1-(I-z))*C[A-1-z])-(1-(j-I))*C[A-1-j]}M[R]=A%2===1?C[R-1]:(C[R-2]+C[R-1])/2,h.curve=M,f.curve=k}w=C,x&&(n(w)&&y===null?y=r(i,d):y!==null&&(y(),y=null))},get inputs(){return[d]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get oversample(){return h.oversample},set oversample(C){h.oversample=C,f.oversample=C},addEventListener(...C){return d.addEventListener(C[0],C[1],C[2])},dispatchEvent(...C){return d.dispatchEvent(C[0])},removeEventListener(...C){return d.removeEventListener(C[0],C[1],C[2])}};o!==null&&(T.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==T.oversample&&(T.oversample=a);const b=()=>{d.connect(h).connect(g),d.connect(p).connect(f).connect(_).connect(g),x=!0,n(w)&&(y=r(i,d))},E=()=>{d.disconnect(h),h.disconnect(g),d.disconnect(p),p.disconnect(f),f.disconnect(_),_.disconnect(g),x=!1,y!==null&&(y(),y=null)};return s(Pl(T,g),b,E)},or=()=>new DOMException("","NotSupportedError"),sk={numberOfChannels:1},ik=(r,e,t,n,s)=>class extends r{constructor(o,a,c){let h;if(typeof o=="number"&&a!==void 0&&c!==void 0)h={length:a,numberOfChannels:o,sampleRate:c};else if(typeof o=="object")h=o;else throw new Error("The given parameters are not valid.");const{length:f,numberOfChannels:d,sampleRate:p}={...sk,...h},g=n(d,f,p);e(Jc,()=>Jc(g))||g.addEventListener("statechange",(()=>{let _=0;const y=x=>{this._state==="running"&&(_>0?(g.removeEventListener("statechange",y),x.stopImmediatePropagation(),this._waitForThePromiseToSettle(x)):_+=1)};return y})()),super(g,d),this._length=f,this._nativeOfflineAudioContext=g,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",s(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,yx(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},ok={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},ak=(r,e,t,n,s,i,o)=>class extends r{constructor(c,h){const f=s(c),d={...ok,...h},p=t(f,d),g=i(f),_=g?n():null,y=c.sampleRate/2;super(c,!1,p,_),this._detune=e(this,g,p.detune,153600,-153600),this._frequency=e(this,g,p.frequency,y,-y),this._nativeOscillatorNode=p,this._onended=null,this._oscillatorNodeRenderer=_,this._oscillatorNodeRenderer!==null&&d.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=d.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){const h=typeof c=="function"?o(this,c):null;this._nativeOscillatorNode.onended=h;const f=this._nativeOscillatorNode.onended;this._onended=f!==null&&f===h?c:f}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){Sl(this);const h=()=>{this._nativeOscillatorNode.removeEventListener("ended",h),Ci(this)&&bu(this)};this._nativeOscillatorNode.addEventListener("ended",h)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}},lk=(r,e,t,n,s)=>()=>{const i=new WeakMap;let o=null,a=null,c=null;const h=async(f,d)=>{let p=t(f);const g=Wn(p,d);if(!g){const _={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,detune:p.detune.value,frequency:p.frequency.value,periodicWave:o===null?void 0:o,type:p.type};p=e(d,_),a!==null&&p.start(a),c!==null&&p.stop(c)}return i.set(d,p),g?(await r(d,f.detune,p.detune),await r(d,f.frequency,p.frequency)):(await n(d,f.detune,p.detune),await n(d,f.frequency,p.frequency)),await s(f,d,p),p};return{set periodicWave(f){o=f},set start(f){a=f},set stop(f){c=f},render(f,d){const p=i.get(d);return p!==void 0?Promise.resolve(p):h(f,d)}}},ck={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},uk=(r,e,t,n,s,i,o)=>class extends r{constructor(c,h){const f=s(c),d={...ck,...h},p=t(f,d),g=i(f),_=g?n():null;super(c,!1,p,_),this._nativePannerNode=p,this._orientationX=e(this,g,p.orientationX,tr,pr),this._orientationY=e(this,g,p.orientationY,tr,pr),this._orientationZ=e(this,g,p.orientationZ,tr,pr),this._positionX=e(this,g,p.positionX,tr,pr),this._positionY=e(this,g,p.positionY,tr,pr),this._positionZ=e(this,g,p.positionZ,tr,pr),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}},hk=(r,e,t,n,s,i,o,a,c,h)=>()=>{const f=new WeakMap;let d=null;const p=async(g,_)=>{let y=null,x=i(g);const w={channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation},T={...w,coneInnerAngle:x.coneInnerAngle,coneOuterAngle:x.coneOuterAngle,coneOuterGain:x.coneOuterGain,distanceModel:x.distanceModel,maxDistance:x.maxDistance,panningModel:x.panningModel,refDistance:x.refDistance,rolloffFactor:x.rolloffFactor},b=Wn(x,_);if("bufferSize"in x)y=n(_,{...w,gain:1});else if(!b){const E={...T,orientationX:x.orientationX.value,orientationY:x.orientationY.value,orientationZ:x.orientationZ.value,positionX:x.positionX.value,positionY:x.positionY.value,positionZ:x.positionZ.value};x=s(_,E)}if(f.set(_,y===null?x:y),y!==null){if(d===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const U=new o(6,g.context.length,_.sampleRate),I=e(U,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});I.connect(U.destination),d=(async()=>{const z=await Promise.all([g.orientationX,g.orientationY,g.orientationZ,g.positionX,g.positionY,g.positionZ].map(async(j,q)=>{const Y=t(U,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:q===0?1:0});return await a(U,j,Y.offset),Y}));for(let j=0;j<6;j+=1)z[j].connect(I,0,j),z[j].start(0);return h(U)})()}const E=await d,C=n(_,{...w,gain:1});await c(g,_,C);const A=[];for(let U=0;U<E.numberOfChannels;U+=1)A.push(E.getChannelData(U));let M=[A[0][0],A[1][0],A[2][0]],k=[A[3][0],A[4][0],A[5][0]],R=n(_,{...w,gain:1}),F=s(_,{...T,orientationX:M[0],orientationY:M[1],orientationZ:M[2],positionX:k[0],positionY:k[1],positionZ:k[2]});C.connect(R).connect(F.inputs[0]),F.connect(y);for(let U=128;U<E.length;U+=128){const I=[A[0][U],A[1][U],A[2][U]],z=[A[3][U],A[4][U],A[5][U]];if(I.some((j,q)=>j!==M[q])||z.some((j,q)=>j!==k[q])){M=I,k=z;const j=U/_.sampleRate;R.gain.setValueAtTime(0,j),R=n(_,{...w,gain:0}),F=s(_,{...T,orientationX:M[0],orientationY:M[1],orientationZ:M[2],positionX:k[0],positionY:k[1],positionZ:k[2]}),R.gain.setValueAtTime(1,j),C.connect(R).connect(F.inputs[0]),F.connect(y)}}return y}return b?(await r(_,g.orientationX,x.orientationX),await r(_,g.orientationY,x.orientationY),await r(_,g.orientationZ,x.orientationZ),await r(_,g.positionX,x.positionX),await r(_,g.positionY,x.positionY),await r(_,g.positionZ,x.positionZ)):(await a(_,g.orientationX,x.orientationX),await a(_,g.orientationY,x.orientationY),await a(_,g.orientationZ,x.orientationZ),await a(_,g.positionX,x.positionX),await a(_,g.positionY,x.positionY),await a(_,g.positionZ,x.positionZ)),kl(x)?await c(g,_,x.inputs[0]):await c(g,_,x),x};return{render(g,_){const y=f.get(_);return y!==void 0?Promise.resolve(y):p(g,_)}}},fk={disableNormalization:!1},dk=(r,e,t,n)=>class Ax{constructor(i,o){const a=e(i),c=n({...fk,...o}),h=r(a,c);return t.add(h),h}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===Ax.prototype||t.has(i)}},pk=(r,e)=>(t,n,s)=>(r(n).replay(s),e(n,t,s)),mk=(r,e,t)=>async(n,s,i)=>{const o=r(n);await Promise.all(o.activeInputs.map((a,c)=>Array.from(a).map(async([h,f])=>{const p=await e(h).render(h,s),g=n.context.destination;!t(h)&&(n!==g||!t(n))&&p.connect(i,f,c)})).reduce((a,c)=>[...a,...c],[]))},gk=(r,e,t)=>async(n,s,i)=>{const o=e(n);await Promise.all(Array.from(o.activeInputs).map(async([a,c])=>{const f=await r(a).render(a,s);t(a)||f.connect(i,c)}))},vk=(r,e,t,n)=>s=>r(Jc,()=>Jc(s))?Promise.resolve(r(n,n)).then(i=>{if(!i){const o=t(s,512,0,1);s.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>s.currentTime,o.connect(s.destination)}return s.startRendering()}):new Promise(i=>{const o=e(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});s.oncomplete=a=>{o.disconnect(),i(a.renderedBuffer)},o.connect(s.destination),s.startRendering()}),_k=r=>(e,t)=>{r.set(e,t)},yk=r=>(e,t)=>r.set(e,t),xk=(r,e,t,n,s,i,o,a)=>(c,h)=>t(c).render(c,h).then(()=>Promise.all(Array.from(n(h)).map(f=>t(f).render(f,h)))).then(()=>s(h)).then(f=>(typeof f.copyFromChannel!="function"?(o(f),Mg(f)):e(i,()=>i(f))||a(f),r.add(f),f)),wk={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},Sk=(r,e,t,n,s,i)=>class extends r{constructor(a,c){const h=s(a),f={...wk,...c},d=t(h,f),p=i(h),g=p?n():null;super(a,!1,d,g),this._pan=e(this,p,d.pan)}get pan(){return this._pan}},Tk=(r,e,t,n,s)=>()=>{const i=new WeakMap,o=async(a,c)=>{let h=t(a);const f=Wn(h,c);if(!f){const d={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,pan:h.pan.value};h=e(c,d)}return i.set(c,h),f?await r(c,a.pan,h.pan):await n(c,a.pan,h.pan),kl(h)?await s(a,c,h.inputs[0]):await s(a,c,h),h};return{render(a,c){const h=i.get(c);return h!==void 0?Promise.resolve(h):o(a,c)}}},Ck=r=>()=>{if(r===null)return!1;try{new r({length:1,sampleRate:44100})}catch{return!1}return!0},Ek=(r,e)=>async()=>{if(r===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),n=new e(1,128,44100),s=URL.createObjectURL(t);let i=!1,o=!1;try{await n.audioWorklet.addModule(s);const a=new r(n,"a",{numberOfOutputs:0}),c=n.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>o=!0,c.connect(a),c.start(0),await n.startRendering(),await new Promise(h=>setTimeout(h))}catch{}finally{URL.revokeObjectURL(s)}return i&&!o},bk=(r,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),n=r(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(s=>{t.oncomplete=()=>{n.disconnect(),s(t.currentTime!==0)},t.startRendering()})},Mk=()=>new DOMException("","UnknownError"),Ok={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Ak=(r,e,t,n,s,i,o)=>class extends r{constructor(c,h){const f=s(c),d={...Ok,...h},p=t(f,d),_=i(f)?n():null;super(c,!0,p,_),this._isCurveNullified=!1,this._nativeWaveShaperNode=p,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}},kk=(r,e,t)=>()=>{const n=new WeakMap,s=async(i,o)=>{let a=e(i);if(!Wn(a,o)){const h={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=r(o,h)}return n.set(o,a),kl(a)?await t(i,o,a.inputs[0]):await t(i,o,a),a};return{render(i,o){const a=n.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},Pk=()=>typeof window>"u"?null:window,Rk=(r,e)=>t=>{t.copyFromChannel=(n,s,i=0)=>{const o=r(i),a=r(s);if(a>=t.numberOfChannels)throw e();const c=t.length,h=t.getChannelData(a),f=n.length;for(let d=o<0?-o:0;d+o<c&&d<f;d+=1)n[d]=h[d+o]},t.copyToChannel=(n,s,i=0)=>{const o=r(i),a=r(s);if(a>=t.numberOfChannels)throw e();const c=t.length,h=t.getChannelData(a),f=n.length;for(let d=o<0?-o:0;d+o<c&&d<f;d+=1)h[d+o]=n[d]}},Dk=r=>e=>{e.copyFromChannel=(t=>(n,s,i=0)=>{const o=r(i),a=r(s);if(o<e.length)return t.call(e,n,a,o)})(e.copyFromChannel),e.copyToChannel=(t=>(n,s,i=0)=>{const o=r(i),a=r(s);if(o<e.length)return t.call(e,n,a,o)})(e.copyToChannel)},Ik=r=>(e,t)=>{const n=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=n),r(e,"buffer",s=>()=>{const i=s.call(e);return i===n?null:i},s=>i=>s.call(e,i===null?n:i))},Uk=(r,e)=>(t,n)=>{n.channelCount=1,n.channelCountMode="explicit",Object.defineProperty(n,"channelCount",{get:()=>1,set:()=>{throw r()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:()=>{throw r()}});const s=t.createBufferSource();e(n,()=>{const a=n.numberOfInputs;for(let c=0;c<a;c+=1)s.connect(n,0,c)},()=>s.disconnect(n))},kx=(r,e,t)=>r.copyFromChannel===void 0?r.getChannelData(t)[0]:(r.copyFromChannel(e,t),e[0]),Px=r=>{if(r===null)return!1;const e=r.length;return e%2!==0?r[Math.floor(e/2)]!==0:r[e/2-1]+r[e/2]!==0},Pu=(r,e,t,n)=>{let s=r;for(;!s.hasOwnProperty(e);)s=Object.getPrototypeOf(s);const{get:i,set:o}=Object.getOwnPropertyDescriptor(s,e);Object.defineProperty(r,e,{get:t(i),set:n(o)})},Fk=r=>({...r,outputChannelCount:r.outputChannelCount!==void 0?r.outputChannelCount:r.numberOfInputs===1&&r.numberOfOutputs===1?[r.channelCount]:Array.from({length:r.numberOfOutputs},()=>1)}),Nk=r=>({...r,channelCount:r.numberOfOutputs}),Lk=r=>{const{imag:e,real:t}=r;return e===void 0?t===void 0?{...r,imag:[0,0],real:[0,0]}:{...r,imag:Array.from(t,()=>0),real:t}:t===void 0?{...r,imag:e,real:Array.from(e,()=>0)}:{...r,imag:e,real:t}},Rx=(r,e,t)=>{try{r.setValueAtTime(e,t)}catch(n){if(n.code!==9)throw n;Rx(r,e,t+1e-7)}},zk=r=>{const e=r.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},Bk=r=>{const e=r.createBufferSource(),t=r.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},jk=r=>{const e=r.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},Rg=r=>{const e=r.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},Dx=r=>{const e=r.createBuffer(1,1,44100),t=r.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},Dg=r=>{const e=r.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},Vk=r=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(r)}finally{e.close(),t.close()}},Gk=r=>{r.start=(e=>(t=0,n=0,s)=>{const i=r.buffer,o=i===null?n:Math.min(i.duration,n);i!==null&&o>i.duration-.5/r.context.sampleRate?e.call(r,t,0,0):e.call(r,t,o,s)})(r.start)},Ix=(r,e)=>{const t=e.createGain();r.connect(t);const n=(s=>()=>{s.call(r,t),r.removeEventListener("ended",n)})(r.disconnect);r.addEventListener("ended",n),Pl(r,t),r.stop=(s=>{let i=!1;return(o=0)=>{if(i)try{s.call(r,o)}catch{t.gain.setValueAtTime(0,o)}else s.call(r,o),i=!0}})(r.stop)},Rl=(r,e)=>t=>{const n={value:r};return Object.defineProperties(t,{currentTarget:n,target:n}),typeof e=="function"?e.call(r,t):e.handleEvent.call(r,t)},Hk=uM(da),Wk=gM(da),qk=OO($f),Ux=new WeakMap,Zk=qO(Ux),Os=sO(new Map,new WeakMap),Js=Pk(),Fx=SA(Os,$s),Ig=WO(sr),Rn=mk(sr,Ig,sa),Yk=wM(Fx,Rt,Rn),Mt=XO(Jf),Pi=XA(Js),yt=fA(Pi),Nx=new WeakMap,Lx=LO(Rl),Ru=bA(Js),Ug=lA(Ru),Fg=cA(Js),zx=uA(Js),$c=OA(Js),sn=qM(hM(fx),mM(Hk,Wk,wf,qk,Sf,sr,Zk,Eu,Rt,da,Ci,sa,sf),Os,rA(km,Sf,sr,Rt,Kc,Ci),$s,ed,or,CO(wf,km,sr,Rt,Kc,Mt,Ci,yt),PO(Nx,sr,Ss),Lx,Mt,Ug,Fg,zx,yt,$c),Xk=xM(sn,Yk,$s,Fx,Mt,yt),Ng=new WeakSet,x_=TA(Js),Bx=vO(new Uint32Array(1)),Lg=Rk(Bx,$s),zg=Dk(Bx),jx=TM(Ng,Os,or,x_,Pi,Ck(x_),Lg,zg),td=vM(wr),Vx=gk(Ig,Mu,sa),ei=hO(Vx),Dl=EA(td,Os,zk,Bk,jk,Rg,Dx,Dg,Gk,Ik(Pu),Ix),ti=pk(ZO(Mu),Vx),Qk=bM(ei,Dl,Rt,ti,Rn),As=ZM(fM(dx),Nx,bg,YM,sM,iM,oM,aM,lM,Mm,ux,Ru,Rx),Kk=EM(sn,Qk,As,Cn,Dl,Mt,yt,Rl),Jk=UM(sn,FM,$s,Cn,MA(wr,Pu),Mt,yt,Rn),$k=rO(ei,Mx,Rt,ti,Rn),pa=yk(Ux),e9=nO(sn,As,$k,ed,Mx,Mt,yt,pa),go=xA(da,Fg),t9=Uk(Cn,go),vo=UA(Ru,t9),n9=aO(vo,Rt,Rn),r9=oO(sn,n9,vo,Mt,yt),s9=uO(Au,Rt,Rn),i9=cO(sn,s9,Au,Mt,yt,Nk),o9=LA(td,Dl,wr,go),Il=NA(td,Os,o9,Rg,Dg),a9=gO(ei,Il,Rt,ti,Rn),l9=mO(sn,As,a9,Il,Mt,yt,Rl),Gx=zA(or,Pu),c9=xO(Gx,Rt,Rn),u9=yO(sn,c9,Gx,Mt,yt,pa),h9=MO(ei,Ox,Rt,ti,Rn),f9=bO(sn,As,h9,Ox,Mt,yt,pa),Hx=BA(or),d9=UO(ei,Hx,Rt,ti,Rn),p9=IO(sn,As,d9,Hx,or,Mt,yt,pa),m9=GO(ei,wr,Rt,ti,Rn),g9=VO(sn,As,m9,wr,Mt,yt),v9=HA(ed,Cn,ku,or),nd=vk(Os,wr,ku,bk(wr,Pi)),_9=nA(Dl,Rt,Pi,Rn,nd),y9=jA(v9),x9=eA(sn,y9,_9,Mt,yt,pa),w9=NM(As,vo,Il,ku,or,kx,yt,Pu),Wx=new WeakMap,S9=yA(Jk,w9,Lx,yt,Wx,Rl),qx=QA(td,Os,Rg,Dx,Dg,Ix),T9=lk(ei,qx,Rt,ti,Rn),C9=ak(sn,As,qx,T9,Mt,yt,Rl),Zx=dO(Dl),E9=rk(Zx,Cn,wr,Px,go),rd=nk(Zx,Cn,E9,Px,go,Ru,Pu),b9=JA(wf,Cn,vo,wr,ku,rd,or,Sf,kx,go),Yx=KA(b9),M9=hk(ei,vo,Il,wr,Yx,Rt,Pi,ti,Rn,nd),O9=uk(sn,As,Yx,M9,Mt,yt,pa),A9=$A($s),k9=dk(A9,Mt,new WeakSet,Lk),P9=tk(vo,Au,wr,rd,or,go),Xx=ek(P9,or),R9=Tk(ei,Xx,Rt,ti,Rn),D9=Sk(sn,As,Xx,R9,Mt,yt),I9=kk(rd,Rt,Rn),U9=Ak(sn,Cn,rd,I9,Mt,yt,pa),Qx=dA(Js),Bg=zO(Js),Kx=new WeakMap,F9=QO(Kx,Pi),N9=Qx?pM(Os,or,NO(Js),Bg,BO(cM),Mt,F9,yt,$c,new WeakMap,new WeakMap,Ek($c,Pi),Js):void 0,L9=hA(Ug,yt),z9=TO(Ng,Os,SO,FO,new WeakSet,Mt,L9,yf,Jc,Lg,zg),Jx=eO(N9,Xk,jx,Kk,e9,r9,i9,l9,u9,z9,f9,p9,g9,x9,S9,C9,O9,k9,D9,U9),B9=pA(sn,WA,Mt,yt),j9=gA(sn,qA,Mt,yt),V9=vA(sn,ZA,Mt,yt),G9=YA(Cn,yt),H9=_A(sn,G9,Mt),W9=IM(Jx,Cn,or,Mk,B9,j9,V9,H9,Ru),jg=KO(Wx),q9=_M(jg),$x=fO($s),Z9=AO(jg),ew=RO($s),tw=new WeakMap,Y9=HO(tw,Ss),X9=IA($x,$s,Cn,vo,Au,Il,wr,ku,or,ew,Bg,Y9,go),Q9=kA(Cn,X9,wr,or,go),K9=$M(ei,$x,Dl,vo,Au,Il,wr,Z9,ew,Bg,Rt,$c,Pi,ti,Rn,nd),J9=YO(Kx),$9=_k(tw),w_=Qx?QM(q9,sn,As,K9,Q9,sr,J9,Mt,yt,$c,Fk,$9,Vk,Rl):void 0,eP=wO(or,Pi),tP=xk(Ng,Os,Ig,jg,nd,yf,Lg,zg),nP=ik(Jx,Os,Cn,eP,tP),rP=sA(Jf,Ug),sP=iA(Eg,Fg),iP=oA(bg,zx),oP=aA(Jf,yt);function zr(r){return typeof r>"u"}function $e(r){return!zr(r)}function aP(r){return typeof r=="function"}function co(r){return typeof r=="number"}function ea(r){return Object.prototype.toString.call(r)==="[object Object]"&&r.constructor===Object}function lP(r){return typeof r=="boolean"}function ws(r){return Array.isArray(r)}function Mi(r){return typeof r=="string"}function Zh(r){return Mi(r)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(r)}function Be(r,e){if(!r)throw new Error(e)}function Ts(r,e,t=1/0){if(!(e<=r&&r<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${r}`)}function nw(r){!r.isOffline&&r.state!=="running"&&Vg('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let rw=!1,S_=!1;function T_(r){rw=r}function cP(r){zr(r)&&rw&&!S_&&(S_=!0,Vg("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let sw=console;function uP(...r){sw.log(...r)}function Vg(...r){sw.warn(...r)}function hP(r){return new W9(r)}function fP(r,e,t){return new nP(r,e,t)}const ta=typeof self=="object"?self:null,dP=ta&&(ta.hasOwnProperty("AudioContext")||ta.hasOwnProperty("webkitAudioContext"));function pP(r,e,t){return Be($e(w_),"This node only works in a secure context (https or localhost)"),new w_(r,e,t)}class mP{constructor(e,t,n,s){this._callback=e,this._type=t,this._minimumUpdateInterval=Math.max(128/(s||44100),.001),this.updateInterval=n,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),n=new Worker(t);n.onmessage=this._callback.bind(this),this._worker=n}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var t;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((t=this._worker)===null||t===void 0||t.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function ia(r){return iP(r)}function io(r){return sP(r)}function of(r){return oP(r)}function Qa(r){return rP(r)}function gP(r){return r instanceof jx}function vP(r,e){return r==="value"||ia(e)||io(e)||gP(e)}function cl(r,...e){if(!e.length)return r;const t=e.shift();if(ea(r)&&ea(t))for(const n in t)vP(n,t[n])?r[n]=t[n]:ea(t[n])?(r[n]||Object.assign(r,{[n]:{}}),cl(r[n],t[n])):Object.assign(r,{[n]:t[n]});return cl(r,...e)}function _P(r,e){return r.length===e.length&&r.every((t,n)=>e[n]===t)}function fe(r,e,t=[],n){const s={},i=Array.from(e);if(ea(i[0])&&n&&!Reflect.has(i[0],n)&&(Object.keys(i[0]).some(a=>Reflect.has(r,a))||(cl(s,{[n]:i[0]}),t.splice(t.indexOf(n),1),i.shift())),i.length===1&&ea(i[0]))cl(s,i[0]);else for(let o=0;o<t.length;o++)$e(i[o])&&(s[t[o]]=i[o]);return cl(r,s)}function yP(r){return r.constructor.getDefaults()}function ul(r,e){return zr(r)?e:r}function sl(r,e){return e.forEach(t=>{Reflect.has(r,t)&&delete r[t]}),r}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class Ri{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||ta&&this.toString()===ta.TONE_DEBUG_CLASS)&&uP(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Ri.version=cx;const Gg=1e-6;function Tl(r,e){return r>e+Gg}function Um(r,e){return Tl(r,e)||_s(r,e)}function bf(r,e){return r+Gg<e}function _s(r,e){return Math.abs(r-e)<Gg}function xP(r,e,t){return Math.max(Math.min(r,t),e)}class os extends Ri{constructor(){super(),this.name="Timeline",this._timeline=[];const e=fe(os.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(Be(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];Be(Um(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const n=this._search(e,t);return n!==-1?this._timeline[n]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const n=this._search(e,t);return n+1<this._timeline.length?this._timeline[n+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const n=this._search(e);return n-1>=0?this._timeline[n-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(_s(this._timeline[t].time,e)){for(let n=t;n>=0&&_s(this._timeline[n].time,e);n--)t=n;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&Um(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let n=0;const s=this._timeline.length;let i=s;if(s>0&&this._timeline[s-1][t]<=e)return s-1;for(;n<i;){let o=Math.floor(n+(i-n)/2);const a=this._timeline[o],c=this._timeline[o+1];if(_s(a[t],e)){for(let h=o;h<this._timeline.length;h++){const f=this._timeline[h];if(_s(f[t],e))o=h;else break}return o}else{if(bf(a[t],e)&&Tl(c[t],e))return o;Tl(a[t],e)?i=o:n=o+1}}return-1}_iterate(e,t=0,n=this._timeline.length-1){this._timeline.slice(t,n+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const n=this._search(e);return n!==-1&&this._iterate(t,0,n),this}forEachAfter(e,t){const n=this._search(e);return this._iterate(t,n+1),this}forEachBetween(e,t,n){let s=this._search(e),i=this._search(t);return s!==-1&&i!==-1?(this._timeline[s].time!==e&&(s+=1),this._timeline[i].time===t&&(i-=1),this._iterate(n,s,i)):s===-1&&this._iterate(n,0,i),this}forEachFrom(e,t){let n=this._search(e);for(;n>=0&&this._timeline[n].time>=e;)n--;return this._iterate(t,n+1),this}forEachAtTime(e,t){const n=this._search(e);if(n!==-1&&_s(this._timeline[n].time,e)){let s=n;for(let i=n;i>=0&&_s(this._timeline[i].time,e);i--)s=i;this._iterate(i=>{t(i)},s,n)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const iw=[];function sd(r){iw.push(r)}function wP(r){iw.forEach(e=>e(r))}const ow=[];function id(r){ow.push(r)}function SP(r){ow.forEach(e=>e(r))}class Du extends Ri{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(s=>{zr(this._events)&&(this._events={}),this._events.hasOwnProperty(s)||(this._events[s]=[]),this._events[s].push(t)}),this}once(e,t){const n=(...s)=>{t(...s),this.off(e,n)};return this.on(e,n),this}off(e,t){return e.split(/\W+/).forEach(s=>{if(zr(this._events)&&(this._events={}),this._events.hasOwnProperty(s))if(zr(t))this._events[s]=[];else{const i=this._events[s];for(let o=i.length-1;o>=0;o--)i[o]===t&&i.splice(o,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const n=this._events[e].slice(0);for(let s=0,i=n.length;s<i;s++)n[s].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const n=Object.getOwnPropertyDescriptor(Du.prototype,t);Object.defineProperty(e.prototype,t,n)})}dispose(){return super.dispose(),this._events=void 0,this}}class aw extends Du{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Iu extends aw{constructor(){var e,t;super(),this.name="Context",this._constants=new Map,this._timeouts=new os,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const n=fe(Iu.getDefaults(),arguments,["context"]);n.context?(this._context=n.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=hP({latencyHint:n.latencyHint}),this._latencyHint=n.latencyHint),this._ticker=new mP(this.emit.bind(this,"tick"),n.clockSource,n.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((t=arguments[0])===null||t===void 0)&&t.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=n.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(wP(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,n){return this._context.createBuffer(e,t,n)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,n){return this._context.createPeriodicWave(e,t,n)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return Be(Qa(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return Be(Qa(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return Be(Qa(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){Be(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){Be(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){Be(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){Be(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return pP(this.rawContext,e,t)}addAudioWorkletModule(e){return nn(this,void 0,void 0,function*(){Be($e(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return nn(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return Qa(this._context)?this._context.resume():Promise.resolve()}close(){return nn(this,void 0,void 0,function*(){Qa(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&SP(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),n=t.getChannelData(0);for(let i=0;i<n.length;i++)n[i]=e;const s=this._context.createBufferSource();return s.channelCount=1,s.channelCountMode="explicit",s.buffer=t,s.loop=!0,s.start(0),this._constants.set(e,s),s}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();let t=this._timeouts.peek();for(;this._timeouts.length&&t&&t.time<=e;)t.callback(),this._timeouts.shift(),t=this._timeouts.peek()}setTimeout(e,t){this._timeoutIds++;const n=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:n+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const n=++this._timeoutIds,s=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),s()},id:n,time:i+t})};return s(),n}}class TP extends aw{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,n){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,n){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return nn(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function Ot(r,e){ws(e)?e.forEach(t=>Ot(r,t)):Object.defineProperty(r,e,{enumerable:!0,writable:!1})}function Hg(r,e){ws(e)?e.forEach(t=>Hg(r,t)):Object.defineProperty(r,e,{writable:!0})}const mt=()=>{};class gt extends Ri{constructor(){super(),this.name="ToneAudioBuffer",this.onload=mt;const e=fe(gt.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,Mi(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:mt,onload:mt,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:ys().sampleRate}set(e){return e instanceof gt?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return nn(this,void 0,void 0,function*(){const t=gt.load(e).then(n=>{this.set(n),this.onload(this)});gt.downloads.push(t);try{yield t}finally{const n=gt.downloads.indexOf(t);gt.downloads.splice(n,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=ws(e)&&e[0].length>0,n=t?e.length:1,s=t?e[0].length:e.length,i=ys(),o=i.createBuffer(n,s,i.sampleRate),a=!t&&n===1?[e]:e;for(let c=0;c<n;c++)o.copyToChannel(a[c],c);return this._buffer=o,this}toMono(e){if(co(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const n=this.numberOfChannels;for(let s=0;s<n;s++){const i=this.toArray(s);for(let o=0;o<i.length;o++)t[o]+=i[o]}t=t.map(s=>s/n),this.fromArray(t)}return this}toArray(e){if(co(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let n=0;n<this.numberOfChannels;n++)t[n]=this.getChannelData(n);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){Be(this.loaded,"Buffer is not loaded");const n=Math.floor(e*this.sampleRate),s=Math.floor(t*this.sampleRate);Be(n<s,"The start time must be less than the end time");const i=s-n,o=ys().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(n,s),a);return new gt(o)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new gt().fromArray(e)}static fromUrl(e){return nn(this,void 0,void 0,function*(){return yield new gt().load(e)})}static load(e){return nn(this,void 0,void 0,function*(){const t=e.match(/\[([^\]\[]+\|.+)\]$/);if(t){const c=t[1].split("|");let h=c[0];for(const f of c)if(gt.supportsType(f)){h=f;break}e=e.replace(t[0],h)}const n=gt.baseUrl===""||gt.baseUrl.endsWith("/")?gt.baseUrl:gt.baseUrl+"/",s=document.createElement("a");s.href=n+e,s.pathname=(s.pathname+s.hash).split("/").map(encodeURIComponent).join("/");const i=yield fetch(s.href);if(!i.ok)throw new Error(`could not load url: ${e}`);const o=yield i.arrayBuffer();return yield ys().decodeAudioData(o)})}static supportsType(e){const t=e.split("."),n=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+n)!==""}static loaded(){return nn(this,void 0,void 0,function*(){for(yield Promise.resolve();gt.downloads.length;)yield gt.downloads[0]})}}gt.baseUrl="";gt.downloads=[];class od extends Iu{constructor(){super({clockSource:"offline",context:of(arguments[0])?arguments[0]:fP(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:of(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=of(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return nn(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const n=Math.floor(this.sampleRate/128);e&&t%n===0&&(yield new Promise(s=>setTimeout(s,1)))}})}render(e=!0){return nn(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new gt(t)})}close(){return Promise.resolve()}}const lw=new TP;let qo=lw;function ys(){return qo===lw&&dP&&CP(new Iu),qo}function CP(r,e=!1){e&&qo.dispose(),Qa(r)?qo=new Iu(r):of(r)?qo=new od(r):qo=r}function EP(){return qo.resume()}if(ta&&!ta.TONE_SILENCE_LOGGING){const e=` * Tone.js v${cx} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function bP(r){return Math.pow(10,r/20)}function MP(r){return 20*(Math.log(r)/Math.LN10)}function cw(r){return Math.pow(2,r/12)}let ad=440;function OP(){return ad}function AP(r){ad=r}function Fm(r){return Math.round(uw(r))}function uw(r){return 69+12*Math.log2(r/ad)}function kP(r){return ad*Math.pow(2,(r-69)/12)}class Wg extends Ri{constructor(e,t,n){super(),this.defaultUnits="s",this._val=t,this._units=n,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const n=parseInt(e,10),s=t==="."?1.5:1;return n===1?this._beatsToUnits(this._getTimeSignature())*s:this._beatsToUnits(4/n)*s},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,n)=>{let s=0;return e&&e!=="0"&&(s+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(s+=this._beatsToUnits(parseFloat(t))),n&&n!=="0"&&(s+=this._beatsToUnits(parseFloat(n)/4)),s},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Wg&&this.fromType(this._val),zr(this._val))return this._noArg();if(Mi(this._val)&&zr(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(ea(this._val)){let e=0;for(const t in this._val)if($e(this._val[t])){const n=this._val[t],s=new this.constructor(this.context,t).valueOf()*n;e+=s}return e}if($e(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return Mi(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class xs extends Wg{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new xs(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const n=new this.constructor(this.context,e).valueOf(),s=this.valueOf(),a=Math.round(s/n)*n-s;return s+a*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);t.push(o+"n."),t.push(o+"n"),t.push(o+"t")}t.push("0");let n=t[0],s=new xs(this.context,t[0]).toSeconds();return t.forEach(i=>{const o=new xs(this.context,i).toSeconds();Math.abs(o-e)<Math.abs(s-e)&&(n=i,s=o)}),n}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const n=Math.floor(t/this._getTimeSignature());let s=t%1*4;t=Math.floor(t)%this._getTimeSignature();const i=s.toString();return i.length>3&&(s=parseFloat(parseFloat(i).toFixed(3))),[n,t,s].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Fm(this.toFrequency())}_now(){return this.context.now()}}class is extends xs{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return OP()}static set A4(e){AP(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:is.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){const s=PP[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?s:is.mtof(s)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,n){let s=1;return e&&e!=="0"&&(s*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(s*=this._beatsToUnits(parseFloat(t))),n&&n!=="0"&&(s*=this._beatsToUnits(parseFloat(n)/4)),s}}})}transpose(e){return new is(this.context,this.valueOf()*cw(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return Fm(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/is.A4);let n=Math.round(12*t)+57;const s=Math.floor(n/12);return s<0&&(n+=-12*s),RP[n%12]+s.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return kP(e)}static ftom(e){return Fm(e)}}const PP={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},RP=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class jc extends xs{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class yr extends Ri{constructor(){super();const e=fe(yr.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:ys()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return cP(e),new xs(this.context,e).toSeconds()}toFrequency(e){return new is(this.context,e).toFrequency()}toTicks(e){return new jc(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(n=>{zr(e[n])&&delete t[n]}),t}get(){const e=yP(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const n=this[t];$e(n)&&$e(n.value)&&$e(n.setValueAtTime)?e[t]=n.value:n instanceof yr?e[t]=n._getPartialProperties(e[t]):ws(n)||co(n)||Mi(n)||lP(n)?e[t]=n:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&$e(this[t])&&(this[t]&&$e(this[t].value)&&$e(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof yr?this[t].set(e[t]):this[t]=e[t])}),this}}class qg extends os{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,n){return Ts(t,0),this.add(Object.assign({},n,{state:e,time:t})),this}getLastState(e,t){const n=this._search(t);for(let s=n;s>=0;s--){const i=this._timeline[s];if(i.state===e)return i}}getNextState(e,t){const n=this._search(t);if(n!==-1)for(let s=n;s<this._timeline.length;s++){const i=this._timeline[s];if(i.state===e)return i}}}class vt extends yr{constructor(){super(fe(vt.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const e=fe(vt.getDefaults(),arguments,["param","units","convert"]);for(Be($e(e.param)&&(ia(e.param)||e.param instanceof vt),"param must be an AudioParam");!ia(e.param);)e.param=e.param._param;this._swappable=$e(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new os(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,$e(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(yr.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return $e(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return $e(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return $e(this.maxValue)&&$e(this.minValue)&&Ts(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?bP(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?MP(e):e}setValueAtTime(e,t){const n=this.toSeconds(t),s=this._fromType(e);return Be(isFinite(s)&&isFinite(n),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(s),this.log(this.units,"setValueAtTime",e,n),this._events.add({time:n,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,n),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),n=this._events.getAfter(t),s=this._events.get(t);let i=this._initialValue;if(s===null)i=this._initialValue;else if(s.type==="setTargetAtTime"&&(n===null||n.type==="setValueAtTime")){const o=this._events.getBefore(s.time);let a;o===null?a=this._initialValue:a=o.value,s.type==="setTargetAtTime"&&(i=this._exponentialApproach(s.time,a,s.value,s.constant,t))}else if(n===null)i=s.value;else if(n.type==="linearRampToValueAtTime"||n.type==="exponentialRampToValueAtTime"){let o=s.value;if(s.type==="setTargetAtTime"){const a=this._events.getBefore(s.time);a===null?o=this._initialValue:o=a.value}n.type==="linearRampToValueAtTime"?i=this._linearInterpolate(s.time,o,n.time,n.value,t):i=this._exponentialInterpolate(s.time,o,n.time,n.value,t)}else i=s.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const n=this._fromType(e),s=this.toSeconds(t);return Be(isFinite(n)&&isFinite(s),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(n),this._events.add({time:s,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",e,s),this._param.linearRampToValueAtTime(n,s),this}exponentialRampToValueAtTime(e,t){let n=this._fromType(e);n=_s(n,0)?this._minOutput:n,this._assertRange(n);const s=this.toSeconds(t);return Be(isFinite(n)&&isFinite(s),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:s,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",e,s),this._param.exponentialRampToValueAtTime(n,s),this}exponentialRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(e,n+this.toSeconds(t)),this}linearRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(e,n+this.toSeconds(t)),this}targetRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(e,n,t),this}exponentialApproachValueAtTime(e,t,n){t=this.toSeconds(t),n=this.toSeconds(n);const s=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(e,t,s),this.cancelAndHoldAtTime(t+n*.9),this.linearRampToValueAtTime(e,t+n),this}setTargetAtTime(e,t,n){const s=this._fromType(e);Be(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(t);return this._assertRange(s),Be(isFinite(s)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:n,time:i,type:"setTargetAtTime",value:s}),this.log(this.units,"setTargetAtTime",e,i,n),this._param.setTargetAtTime(s,i,n),this}setValueCurveAtTime(e,t,n,s=1){n=this.toSeconds(n),t=this.toSeconds(t);const i=this._fromType(e[0])*s;this.setValueAtTime(this._toType(i),t);const o=n/(e.length-1);for(let a=1;a<e.length;a++){const c=this._fromType(e[a])*s;this.linearRampToValueAtTime(this._toType(c),t+a*o)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return Be(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),n=this._fromType(this.getValueAtTime(t));Be(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+n);const s=this._events.get(t),i=this._events.getAfter(t);return s&&_s(s.time,t)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(n),t):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(n),t)),this._events.add({time:t,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,t),this}rampTo(e,t=.1,n){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,n):this.linearRampTo(e,t,n),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const n=this._events.get(t);if(n&&n.type==="setTargetAtTime"){const s=this._events.getAfter(n.time),i=s?s.time:t+2,o=(i-t)/10;for(let a=t;a<i;a+=o)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,s=>{s.type==="cancelScheduledValues"?e.cancelScheduledValues(s.time):s.type==="setTargetAtTime"?e.setTargetAtTime(s.value,s.time,s.constant):e[s.type](s.value,s.time)}),this}setParam(e){Be(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,n,s,i){return n+(t-n)*Math.exp(-(i-e)/s)}_linearInterpolate(e,t,n,s,i){return t+(s-t)*((i-e)/(n-e))}_exponentialInterpolate(e,t,n,s,i){return t*Math.pow(s/t,(i-e)/(n-e))}}class Ie extends yr{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return $e(this.input)?ia(this.input)||this.input instanceof vt?1:this.input.numberOfInputs:0}get numberOfOutputs(){return $e(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return $e(e)&&(e instanceof Ie||io(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(n=>{n.channelCount=e.channelCount,n.channelCountMode=e.channelCountMode,n.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();Be(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,n=0){return uo(this,e,t,n),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Vg("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,n=0){return DP(this,e,t,n),this}chain(...e){return eu(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),$e(this.input)&&(this.input instanceof Ie?this.input.dispose():io(this.input)&&this.input.disconnect()),$e(this.output)&&(this.output instanceof Ie?this.output.dispose():io(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function eu(...r){const e=r.shift();r.reduce((t,n)=>(t instanceof Ie?t.connect(n):io(t)&&uo(t,n),n),e)}function uo(r,e,t=0,n=0){for(Be($e(r),"Cannot connect from undefined node"),Be($e(e),"Cannot connect to undefined node"),(e instanceof Ie||io(e))&&Be(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Be(r.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof Ie||e instanceof vt;)$e(e.input)&&(e=e.input);for(;r instanceof Ie;)$e(r.output)&&(r=r.output);ia(e)?r.connect(e,t):r.connect(e,t,n)}function DP(r,e,t=0,n=0){if($e(e))for(;e instanceof Ie;)e=e.input;for(;!io(r);)$e(r.output)&&(r=r.output);ia(e)?r.disconnect(e,t):io(e)?r.disconnect(e,t,n):r.disconnect()}class Ct extends Ie{constructor(){super(fe(Ct.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const e=fe(Ct.getDefaults(),arguments,["gain","units"]);this.gain=new vt({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Ot(this,"gain")}static getDefaults(){return Object.assign(Ie.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Cl extends Ie{constructor(e){super(e),this.onended=mt,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Ct({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const n=this.toSeconds(t);return this._startTime!==-1&&n>=this._startTime&&(this._stopTime===-1||n<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(Ie.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:mt})}_startGain(e,t=1){Be(this._startTime===-1,"Source cannot be started more than once");const n=this.toSeconds(this._fadeIn);return this._startTime=e+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+n):this._gainNode.gain.exponentialApproachValueAtTime(t,e,n)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){Be(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.now()),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const n=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+n),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==mt&&(this.onended(this),this.onended=mt,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Be(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=mt,this}}class Mf extends Cl{constructor(){super(fe(Mf.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const e=fe(Mf.getDefaults(),arguments,["offset"]);uo(this._source,this._gainNode),this.offset=new vt({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Cl.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class bt extends Ie{constructor(){super(fe(bt.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const e=fe(bt.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new Mf({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(Ie.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,n=0){return Zg(this,e,t,n),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,n){return this._param.exponentialRampTo(e,t,n),this}linearRampTo(e,t,n){return this._param.linearRampTo(e,t,n),this}targetRampTo(e,t,n){return this._param.targetRampTo(e,t,n),this}exponentialApproachValueAtTime(e,t,n){return this._param.exponentialApproachValueAtTime(e,t,n),this}setTargetAtTime(e,t,n){return this._param.setTargetAtTime(e,t,n),this}setValueCurveAtTime(e,t,n,s){return this._param.setValueCurveAtTime(e,t,n,s),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,n){return this._param.rampTo(e,t,n),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function Zg(r,e,t,n){(e instanceof vt||ia(e)||e instanceof bt&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof bt&&(e.overridden=!0)),uo(r,e,t,n)}class Of extends vt{constructor(){super(fe(Of.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new os(1/0),this._multiplier=1;const e=fe(Of.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(vt.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,n){t=this.toSeconds(t),this.setRampPoint(t);const s=this._fromType(e),i=this._events.get(t),o=Math.round(Math.max(1/n,1));for(let a=0;a<=o;a++){const c=n*a+t,h=this._exponentialApproach(i.time,i.value,s,n,c);this.linearRampToValueAtTime(this._toType(h),c)}return this}setValueAtTime(e,t){const n=this.toSeconds(t);super.setValueAtTime(e,t);const s=this._events.get(n),i=this._events.previousEvent(s),o=this._getTicksUntilEvent(i,n);return s.ticks=Math.max(o,0),this}linearRampToValueAtTime(e,t){const n=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const s=this._events.get(n),i=this._events.previousEvent(s),o=this._getTicksUntilEvent(i,n);return s.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const n=this._fromType(e),s=this._events.get(t),i=Math.round(Math.max((t-s.time)*10,1)),o=(t-s.time)/i;for(let a=0;a<=i;a++){const c=o*a+s.time,h=this._exponentialInterpolate(s.time,s.value,t,n,c);this.linearRampToValueAtTime(this._toType(h),c)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(zr(e.ticks)){const o=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(o,e.time)}const n=this._fromType(this.getValueAtTime(e.time));let s=this._fromType(this.getValueAtTime(t));const i=this._events.get(t);return i&&i.time===t&&i.type==="setValueAtTime"&&(s=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(n+s)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),n=this._events.get(t);return Math.max(this._getTicksUntilEvent(n,t),0)}getDurationOfTicks(e,t){const n=this.toSeconds(t),s=this.getTicksAtTime(t);return this.getTimeOfTick(s+e)-n}getTimeOfTick(e){const t=this._events.get(e,"ticks"),n=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&n&&n.type==="linearRampToValueAtTime"&&t.value!==n.value){const s=this._fromType(this.getValueAtTime(t.time)),o=(this._fromType(this.getValueAtTime(n.time))-s)/(n.time-t.time),a=Math.sqrt(Math.pow(s,2)-2*o*(t.ticks-e)),c=(-s+a)/o,h=(-s-a)/o;return(c>0?c:h)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const n=this.toSeconds(t),s=this.toSeconds(e),i=this.getTicksAtTime(n);return this.getTicksAtTime(n+s)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class Af extends bt{constructor(){super(fe(Af.getDefaults(),arguments,["value"])),this.name="TickSignal";const e=fe(Af.getDefaults(),arguments,["value"]);this.input=this._param=new Of({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(bt.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class kf extends yr{constructor(){super(fe(kf.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new qg,this._tickOffset=new os,this._ticksAtTime=new os,this._secondsAtTime=new os;const e=fe(kf.getDefaults(),arguments,["frequency"]);this.frequency=new Af({context:this.context,units:e.units,value:e.frequency}),Ot(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},yr.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const n=this.toSeconds(e);return this._state.getValueAtTime(n)!=="started"&&(this._state.setStateAtTime("started",n),$e(t)&&this.setTicksAtTime(t,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const n=this._state.get(t);n&&n.time>0&&(this._tickOffset.cancel(n.time),this._state.cancel(n.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),n=this._state.getLastState("stopped",t),s=this._ticksAtTime.get(t),i={state:"paused",time:t};this._state.add(i);let o=s||n,a=s?s.ticks:0,c=null;return this._state.forEachBetween(o.time,t+this.sampleTime,h=>{let f=o.time;const d=this._tickOffset.get(h.time);d&&d.time>=o.time&&(a=d.ticks,f=d.time),o.state==="started"&&h.state!=="started"&&(a+=this.frequency.getTicksAtTime(h.time)-this.frequency.getTicksAtTime(f),h.time!=i.time&&(c={state:h.state,time:h.time,ticks:a})),o=h}),this._state.remove(i),c&&this._ticksAtTime.add(c),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),n=this.frequency.timeToTicks(e,t);this.setTicksAtTime(n,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),n={state:"paused",time:e};this._state.add(n);const s=this._secondsAtTime.get(e);let i=s||t,o=s?s.seconds:0,a=null;return this._state.forEachBetween(i.time,e+this.sampleTime,c=>{let h=i.time;const f=this._tickOffset.get(c.time);f&&f.time>=i.time&&(o=f.seconds,h=f.time),i.state==="started"&&c.state!=="started"&&(o+=c.time-h,c.time!=n.time&&(a={state:c.state,time:c.time,seconds:o})),i=c}),this._state.remove(n),a&&this._secondsAtTime.add(a),o}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const n=this._tickOffset.get(t),s=this._state.get(t),i=Math.max(n.time,s.time),o=this.frequency.getTicksAtTime(i)+e-n.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(e,t,n){let s=this._state.get(e);this._state.forEachBetween(e,t,o=>{s&&s.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(s.time,e),o.time-this.sampleTime,n),s=o});let i=null;if(s&&s.state==="started"){const o=Math.max(s.time,e),a=this.frequency.getTicksAtTime(o),c=this.frequency.getTicksAtTime(s.time),h=a-c;let f=Math.ceil(h)-h;f=_s(f,1)?0:f;let d=this.frequency.getTimeOfTick(a+f);for(;d<t;){try{n(d,Math.round(this.getTicksAtTime(d)))}catch(p){i=p;break}d+=this.frequency.getDurationOfTicks(1,d)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class tu extends yr{constructor(){super(fe(tu.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=mt,this._lastUpdate=0,this._state=new qg("stopped"),this._boundLoop=this._loop.bind(this);const e=fe(tu.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new kf({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Ot(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(yr.getDefaults(),{callback:mt,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){nw(this.context);const n=this.toSeconds(e);return this.log("start",n),this._state.getValueAtTime(n)!=="started"&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,t),n<this._lastUpdate&&this.emit("start",n,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const n=this.toSeconds(t),s=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(s+e,n)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,n=>{switch(n.state){case"started":const s=this._tickSource.getTicksAtTime(n.time);this.emit("start",n.time,s);break;case"stopped":n.time!==0&&this.emit("stop",n.time);break;case"paused":this.emit("pause",n.time);break}}),this._tickSource.forEachTickBetween(e,t,(n,s)=>{this.callback(n,s)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Du.mixin(tu);class Yg extends Ri{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=fe(Yg.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const n=e.urls[t];this.add(t,n,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:mt,onload:mt,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return Be(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,n=mt,s=mt){return Mi(t)?(this.baseUrl&&t.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new gt(this.baseUrl+t,n,s))):this._buffers.set(e.toString(),new gt(t,n,s)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class il extends jc{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class IP extends yr{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new os,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const t=this._events.shift();t&&e-t.time<=this.expiration&&t.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}sd(r=>{r.draw=new IP({context:r})});id(r=>{r.draw.dispose()});class UP extends Ri{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){Be($e(e.time),"Events must have a time property"),Be($e(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new FP(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const n of t)if(n.event===e){this._removeNode(n),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let n,s=null;if(t>0)if(e.left.right===null)n=e.left,n.right=e.right,s=n;else{for(n=e.left.right;n.right!==null;)n=n.right;n.parent&&(n.parent.right=n.left,s=n.parent,n.left=e.left,n.right=e.right)}else if(e.right.left===null)n=e.right,n.left=e.left,s=n;else{for(n=e.right.left;n.left!==null;)n=n.left;n.parent&&(n.parent.left=n.right,s=n.parent,n.left=e.left,n.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=n:e.parent.right=n:this._setRoot(n),s&&this._rebalance(s)}e.dispose()}_rotateLeft(e){const t=e.parent,n=e.isLeftChild(),s=e.right;s&&(e.right=s.left,s.left=e),t!==null?n?t.left=s:t.right=s:this._setRoot(s)}_rotateRight(e){const t=e.parent,n=e.isLeftChild(),s=e.left;s&&(e.left=s.right,s.right=e),t!==null?n?t.left=s:t.right=s:this._setRoot(s)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let n=t[0];for(let s=1;s<t.length;s++)t[s].low>n.low&&(n=t[s]);return n.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(n=>t.push(n)),t.forEach(n=>{n.event&&e(n.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const n=[];this._root.search(e,n),n.forEach(s=>{s.event&&t(s.event)})}return this}forEachFrom(e,t){if(this._root!==null){const n=[];this._root.searchAfter(e,n),n.forEach(s=>{s.event&&t(s.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class FP{constructor(e,t,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class ho extends Ie{constructor(){super(fe(ho.getDefaults(),arguments,["volume"])),this.name="Volume";const e=fe(ho.getDefaults(),arguments,["volume"]);this.input=this.output=new Ct({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Ot(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(Ie.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}let NP=class Nm extends Ie{constructor(){super(fe(Nm.getDefaults(),arguments)),this.name="Destination",this.input=new ho({context:this.context}),this.output=new Ct({context:this.context}),this.volume=this.input.volume;const e=fe(Nm.getDefaults(),arguments);eu(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(Ie.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),eu(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}};sd(r=>{r.destination=new NP({context:r})});id(r=>{r.destination.dispose()});class LP extends Ri{constructor(e){super(),this.name="TimelineValue",this._timeline=new os({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class Oi extends Ie{constructor(){super(Object.assign(fe(Oi.getDefaults(),arguments,["context"])))}connect(e,t=0,n=0){return Zg(this,e,t,n),this}}class oa extends Oi{constructor(){super(Object.assign(fe(oa.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const e=fe(oa.getDefaults(),arguments,["mapping","length"]);ws(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):aP(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(bt.getDefaults(),{length:1024})}setMap(e,t=1024){const n=new Float32Array(t);for(let s=0,i=t;s<i;s++){const o=s/(i-1)*2-1;n[s]=e(o,s)}return this.curve=n,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(n=>n.includes(e));Be(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class nu extends Oi{constructor(){super(Object.assign(fe(nu.getDefaults(),arguments,["value"]))),this.name="Pow";const e=fe(nu.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new oa({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Oi.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class fo{constructor(e,t){this.id=fo._eventId++,this._remainderTime=0;const n=Object.assign(fo.getDefaults(),t);this.transport=e,this.callback=n.callback,this._once=n.once,this.time=Math.floor(n.time),this._remainderTime=n.time-this.time}static getDefaults(){return{callback:mt,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}fo._eventId=0;class Xg extends fo{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const n=Object.assign(Xg.getDefaults(),t);this.duration=n.duration,this._interval=n.interval,this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},fo.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return bf(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new il(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){bf(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new il(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const t=this.transport.getTicksAtTime(e);Tl(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class ru extends yr{constructor(){super(fe(ru.getDefaults(),arguments)),this.name="Transport",this._loop=new LP(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new os,this._repeatedEvents=new UP,this._syncedSignals=[],this._swingAmount=0;const e=fe(ru.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new tu({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Ot(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(yr.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const n=t%(this._swingTicks*2)/(this._swingTicks*2),s=Math.sin(n*Math.PI)*this._swingAmount;e+=new il(this.context,this._swingTicks*2/3).toSeconds()*s}T_(!0),this._timeline.forEachAtTime(t,n=>n.invoke(e)),T_(!1)}schedule(e,t){const n=new fo(this,{callback:e,time:new jc(this.context,t).toTicks()});return this._addEvent(n,this._timeline)}scheduleRepeat(e,t,n,s=1/0){const i=new Xg(this,{callback:e,duration:new xs(this.context,s).toTicks(),interval:new xs(this.context,t).toTicks(),time:new jc(this.context,n).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,t){const n=new fo(this,{callback:e,once:!0,time:new jc(this.context,t).toTicks()});return this._addEvent(n,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,n=>this.clear(n.id)),this._repeatedEvents.forEachFrom(t,n=>this.clear(n.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new il(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){this.context.resume();let n;return $e(t)&&(n=this.toTicks(t)),this._clock.start(e,n),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){ws(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new xs(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new xs(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new il(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new il(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),n=this._clock.frequency.timeToTicks(e,t);this.ticks=n}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const n=this._clock.getTicksAtTime(t),s=this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,t),i=t+s;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),n=this.getTicksAtTime(t),s=e-n%e;return this._clock.nextTickTime(s,t)}}syncSignal(e,t){const n=this.now();let s=this.bpm,i=1/(60/s.getValueAtTime(n)/this.PPQ),o=[];if(e.units==="time"){const c=.015625/i,h=new Ct(c),f=new nu(-1),d=new Ct(c);s.chain(h,f,d),s=d,i=1/i,o=[h,f,d]}t||(e.getValueAtTime(n)!==0?t=e.getValueAtTime(n)/i:t=0);const a=new Ct(t);return s.connect(a),a.connect(e._param),o.push(a),this._syncedSignals.push({initial:e.value,nodes:o,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const n=this._syncedSignals[t];n.signal===e&&(n.nodes.forEach(s=>s.dispose()),n.signal.value=n.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Hg(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Du.mixin(ru);sd(r=>{r.transport=new ru({context:r})});id(r=>{r.transport.dispose()});class Hn extends Ie{constructor(e){super(e),this.input=void 0,this._state=new qg("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=mt,this._syncedStop=mt,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new ho({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Ot(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(Ie.getDefaults(),{mute:!1,onstop:mt,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,n){let s=zr(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(s=this._clampToCurrentTime(s),!this._synced&&this._state.getValueAtTime(s)==="started")Be(Tl(s,this._state.get(s).time),"Start time must be strictly greater than previous start time"),this._state.cancel(s),this._state.setStateAtTime("started",s),this.log("restart",s),this.restart(s,t,n);else if(this.log("start",s),this._state.setStateAtTime("started",s),this._synced){const i=this._state.get(s);i&&(i.offset=this.toSeconds(ul(t,0)),i.duration=n?this.toSeconds(n):void 0);const o=this.context.transport.schedule(a=>{this._start(a,t,n)},s);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>s&&this._syncedStart(this.now(),this.context.transport.seconds)}else nw(this.context),this._start(s,t,n);return this}stop(e){let t=zr(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||$e(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const n=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(n)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,n){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,n)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(Tl(t,0)){const n=this._state.get(t);if(n&&n.state==="started"&&n.time!==t){const s=t-this.toSeconds(n.time);let i;n.duration&&(i=this.toSeconds(n.duration)-s),this._start(e,this.toSeconds(n.offset)+s,i)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=mt,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class El extends Cl{constructor(){super(fe(El.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const e=fe(El.getDefaults(),arguments,["url","onload"]);uo(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new vt({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new gt(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Cl.getDefaults(),{url:new gt,loop:!1,loopEnd:0,loopStart:0,onload:mt,onerror:mt,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,n,s=1){Be(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,s),this.loop?t=ul(t,this.loopStart):t=ul(t,0);let o=Math.max(this.toSeconds(t),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),h=a-c;Um(o,a)&&(o=(o-c)%h+c),_s(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,bf(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),$e(n)){let a=this.toSeconds(n);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class su extends Hn{constructor(){super(fe(su.getDefaults(),arguments,["type"])),this.name="Noise",this._source=null;const e=fe(su.getDefaults(),arguments,["type"]);this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Hn.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(Be(e in C_,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const t=this.now();this._stop(t),this._start(t)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const t=C_[this._type];this._source=new El({url:t,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(t.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const Wa=44100*5,qp=2,vi={brown:null,pink:null,white:null},C_={get brown(){if(!vi.brown){const r=[];for(let e=0;e<qp;e++){const t=new Float32Array(Wa);r[e]=t;let n=0;for(let s=0;s<Wa;s++){const i=Math.random()*2-1;t[s]=(n+.02*i)/1.02,n=t[s],t[s]*=3.5}}vi.brown=new gt().fromArray(r)}return vi.brown},get pink(){if(!vi.pink){const r=[];for(let e=0;e<qp;e++){const t=new Float32Array(Wa);r[e]=t;let n,s,i,o,a,c,h;n=s=i=o=a=c=h=0;for(let f=0;f<Wa;f++){const d=Math.random()*2-1;n=.99886*n+d*.0555179,s=.99332*s+d*.0750759,i=.969*i+d*.153852,o=.8665*o+d*.3104856,a=.55*a+d*.5329522,c=-.7616*c-d*.016898,t[f]=n+s+i+o+a+c+h+d*.5362,t[f]*=.11,h=d*.115926}}vi.pink=new gt().fromArray(r)}return vi.pink},get white(){if(!vi.white){const r=[];for(let e=0;e<qp;e++){const t=new Float32Array(Wa);r[e]=t;for(let n=0;n<Wa;n++)t[n]=Math.random()*2-1}vi.white=new gt().fromArray(r)}return vi.white}};function ma(r,e){return nn(this,void 0,void 0,function*(){const t=e/r.context.sampleRate,n=new od(1,t,r.context.sampleRate);return new r.constructor(Object.assign(r.get(),{frequency:2/t,detune:0,context:n})).toDestination().start(0),(yield n.render()).getChannelData(0)})}class Pf extends Cl{constructor(){super(fe(Pf.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const e=fe(Pf.getDefaults(),arguments,["frequency","type"]);uo(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new vt({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new vt({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Ot(this,["frequency","detune"])}static getDefaults(){return Object.assign(Cl.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class tn extends Hn{constructor(){super(fe(tn.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const e=fe(tn.getDefaults(),arguments,["frequency","type"]);this.frequency=new bt({context:this.context,units:"frequency",value:e.frequency}),Ot(this,"frequency"),this.detune=new bt({context:this.context,units:"cents",value:e.detune}),Ot(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(Hn.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),n=new Pf({context:this.context,onended:()=>this.onstop(this)});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return tn._periodicWaveCache.find(t=>t.phase===this._phase&&_P(t.partials,this._partials));{const e=tn._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const n=this._getCachedPeriodicWave();if($e(n)){const{partials:s,wave:i}=n;this._wave=i,this._partials=s,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[s,i]=this._getRealImaginary(e,this._phase),o=this.context.createPeriodicWave(s,i);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),tn._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:s,type:this._type,wave:this._wave}),tn._periodicWaveCache.length>100&&tn._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){Ts(e,0);let t=this._type;const n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(t=n[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const s=new Float32Array(e);this._partials.forEach((i,o)=>s[o]=i),this._partials=Array.from(s),this.type=this._type}}_getRealImaginary(e,t){let s=2048;const i=new Float32Array(s),o=new Float32Array(s);let a=1;if(e==="custom"){if(a=this._partials.length+1,this._partialCount=this._partials.length,s=a,this._partials.length===0)return[i,o]}else{const c=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);c?(a=parseInt(c[2],10)+1,this._partialCount=parseInt(c[2],10),e=c[1],a=Math.max(a,2),s=a):this._partialCount=0,this._partials=[]}for(let c=1;c<s;++c){const h=2/(c*Math.PI);let f;switch(e){case"sine":f=c<=a?1:0,this._partials[c-1]=f;break;case"square":f=c&1?2*h:0,this._partials[c-1]=f;break;case"sawtooth":f=h*(c&1?1:-1),this._partials[c-1]=f;break;case"triangle":c&1?f=2*(h*h)*(c-1>>1&1?-1:1):f=0,this._partials[c-1]=f;break;case"custom":f=this._partials[c-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}f!==0?(i[c]=-f*Math.sin(t*c),o[c]=f*Math.cos(t*c)):(i[c]=0,o[c]=0)}return[i,o]}_inverseFFT(e,t,n){let s=0;const i=e.length;for(let o=0;o<i;o++)s+=e[o]*Math.cos(o*n)+t[o]*Math.sin(o*n);return s}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let n=0;const s=Math.PI*2,i=32;for(let o=0;o<i;o++)n=Math.max(this._inverseFFT(e,t,o/i*s),n);return xP(-this._inverseFFT(e,t,this._phase)/n,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return nn(this,void 0,void 0,function*(){return ma(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}tn._periodicWaveCache=[];class zP extends Oi{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new oa({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class po extends bt{constructor(){super(Object.assign(fe(po.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const e=fe(po.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new Ct({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(bt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class iu extends Hn{constructor(){super(fe(iu.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new zP({context:this.context}),this._modulationNode=new Ct({context:this.context});const e=fe(iu.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new tn({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new tn({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new po({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Ot(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(tn.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return nn(this,void 0,void 0,function*(){return ma(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class ou extends Hn{constructor(){super(fe(ou.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new Ct({context:this.context,gain:0});const e=fe(ou.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new tn({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new bt({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new tn({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new po({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new po({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Ot(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(tn.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return nn(this,void 0,void 0,function*(){return ma(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class bl extends Hn{constructor(){super(fe(bl.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new Ct({context:this.context,gain:0}),this._thresh=new oa({context:this.context,mapping:t=>t<=0?-1:1});const e=fe(bl.getDefaults(),arguments,["frequency","width"]);this.width=new bt({context:this.context,units:"audioRange",value:e.width}),this._triangle=new tn({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Ot(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Hn.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return nn(this,void 0,void 0,function*(){return ma(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class au extends Hn{constructor(){super(fe(au.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const e=fe(au.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new bt({context:this.context,units:"frequency",value:e.frequency}),this.detune=new bt({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Ot(this,["frequency","detune"])}static getDefaults(){return Object.assign(tn.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,n=e/(this._oscillators.length-1);this._forEach((s,i)=>s.detune.value=t+n*i)}}get count(){return this._oscillators.length}set count(e){if(Ts(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const n=new tn({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):mt});this.type==="custom"&&(n.partials=this._partials),this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.detune.overridden=!1,n.connect(this.output),this._oscillators[t]=n}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,n)=>t.phase=this._phase+n/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return nn(this,void 0,void 0,function*(){return ma(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class lu extends Hn{constructor(){super(fe(lu.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new po({context:this.context,value:2});const e=fe(lu.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new bl({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new tn({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Ot(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Hn.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return nn(this,void 0,void 0,function*(){return ma(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const E_={am:iu,fat:au,fm:ou,oscillator:tn,pulse:bl,pwm:lu};class aa extends Hn{constructor(){super(fe(aa.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const e=fe(aa.getDefaults(),arguments,["frequency","type"]);this.frequency=new bt({context:this.context,units:"frequency",value:e.frequency}),this.detune=new bt({context:this.context,units:"cents",value:e.detune}),Ot(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(tn.getDefaults(),ou.getDefaults(),iu.getDefaults(),au.getDefaults(),bl.getDefaults(),lu.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=E_[e],n=this.now();if(this._oscillator){const s=this._oscillator;s.stop(n),this.context.setTimeout(()=>s.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(n)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof E_[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&co(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&co(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Mi(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return nn(this,void 0,void 0,function*(){return ma(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Qg extends bt{constructor(){super(Object.assign(fe(Qg.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Add",this._sum=new Ct({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,eu(this._constantSource,this._sum)}static getDefaults(){return Object.assign(bt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Rf extends Oi{constructor(){super(Object.assign(fe(Rf.getDefaults(),arguments,["min","max"]))),this.name="Scale";const e=fe(Rf.getDefaults(),arguments,["min","max"]);this._mult=this.input=new po({context:this.context,value:e.max-e.min}),this._add=this.output=new Qg({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Oi.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}function hw(r,e=1/0){const t=new WeakMap;return function(n,s){Reflect.defineProperty(n,s,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){Ts(i,r,e),t.set(this,i)}})}}function Di(r,e=1/0){const t=new WeakMap;return function(n,s){Reflect.defineProperty(n,s,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){Ts(this.toSeconds(i),r,e),t.set(this,i)}})}}class cu extends Hn{constructor(){super(fe(cu.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const e=fe(cu.getDefaults(),arguments,["url","onload"]);this._buffer=new gt({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Hn.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:mt,onerror:mt,playbackRate:1,reverse:!1})}load(e){return nn(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=mt){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,n){return super.start(e,t,n),this}_start(e,t,n){this._loop?t=ul(t,this._loopStart):t=ul(t,0);const s=this.toSeconds(t),i=n;n=ul(n,Math.max(this._buffer.duration-s,0));let o=this.toSeconds(n);o=o/this._playbackRate,e=this.toSeconds(e);const a=new El({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+o),this._state.setStateAtTime("stopped",e+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&zr(i)?a.start(e,s):a.start(e,s,o-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(n=>n.stop(t))}restart(e,t,n){return super.restart(e,t,n),this}_restart(e,t,n){var s;(s=[...this._activeSources].pop())===null||s===void 0||s.stop(e),this._start(e,t,n)}seek(e,t){const n=this.toSeconds(t);if(this._state.getValueAtTime(n)==="started"){const s=this.toSeconds(e);this._stop(n),this._start(n,s)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&Ts(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&Ts(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),n=this._state.getNextState("stopped",t);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach(s=>s.cancelStop())),this._activeSources.forEach(s=>{s.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}bs([Di(0)],cu.prototype,"fadeIn",void 0);bs([Di(0)],cu.prototype,"fadeOut",void 0);class BP extends Oi{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new oa({context:this.context,mapping:e=>Math.abs(e)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class cs extends Ie{constructor(){super(fe(cs.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new bt({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const e=fe(cs.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(Ie.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(Mi(e))return e;{let n;for(n in Yh)if(Yh[n][t]===e)return n;return e}}_setCurve(e,t,n){if(Mi(n)&&Reflect.has(Yh,n)){const s=Yh[n];ea(s)?e!=="_decayCurve"&&(this[e]=s[t]):this[e]=s}else if(ws(n)&&e!=="_decayCurve")this[e]=n;else throw new Error("Envelope: invalid curve: "+n)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let s=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(e);if(o>0){const a=1/s;s=(1-o)/a}if(s<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,s,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,s,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let c=1;c<a.length;c++)if(a[c-1]<=o&&o<=a[c]){a=this._attackCurve.slice(c),a[0]=o;break}this._sig.setValueCurveAtTime(a,e,s,t)}if(i&&this.sustain<1){const a=t*this.sustain,c=e+s;this.log("decay",c),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,i+c):this._sig.exponentialApproachValueAtTime(a,c,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,n,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,n,e):(Be(ws(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,n,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,n=1){return t=this.toSeconds(t),this.triggerAttack(t,n),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,n=0){return Zg(this,e,t,n),this}asArray(e=1024){return nn(this,void 0,void 0,function*(){const t=e/this.context.sampleRate,n=new od(1,t,this.context.sampleRate),s=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=s+this.toSeconds(this.release),o=i*.1,a=i+o,c=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/a,decay:t*this.toSeconds(this.decay)/a,release:t*this.toSeconds(this.release)/a,context:n}));return c._sig.toDestination(),c.triggerAttackRelease(t*(s+o)/a,0),(yield n.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}bs([Di(0)],cs.prototype,"attack",void 0);bs([Di(0)],cs.prototype,"decay",void 0);bs([hw(0,1)],cs.prototype,"sustain",void 0);bs([Di(0)],cs.prototype,"release",void 0);const Yh=(()=>{let e,t;const n=[];for(e=0;e<128;e++)n[e]=Math.sin(e/(128-1)*(Math.PI/2));const s=[],i=6.4;for(e=0;e<128-1;e++){t=e/(128-1);const p=Math.sin(t*(Math.PI*2)*i-Math.PI/2)+1;s[e]=p/10+t*.83}s[128-1]=1;const o=[],a=5;for(e=0;e<128;e++)o[e]=Math.ceil(e/(128-1)*a)/a;const c=[];for(e=0;e<128;e++)t=e/(128-1),c[e]=.5*(1-Math.cos(Math.PI*t));const h=[];for(e=0;e<128;e++){t=e/(128-1);const p=Math.pow(t,3)*4+.2,g=Math.cos(p*Math.PI*2*t);h[e]=Math.abs(g*(1-t))}function f(p){const g=new Array(p.length);for(let _=0;_<p.length;_++)g[_]=1-p[_];return g}function d(p){return p.slice(0).reverse()}return{bounce:{In:f(h),Out:h},cosine:{In:n,Out:d(n)},exponential:"exponential",linear:"linear",ripple:{In:s,Out:f(s)},sine:{In:c,Out:f(c)},step:{In:o,Out:f(o)}}})();class la extends Ie{constructor(){super(fe(la.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t);const e=fe(la.getDefaults(),arguments);this._volume=this.output=new ho({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Ot(this,"volume")}static getDefaults(){return Object.assign(Ie.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const n=this["_original_"+e]=this[e];this[e]=(...s)=>{const i=s[t],o=this.context.transport.schedule(a=>{s[t]=a,n.apply(this,s)},i);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,n,s){const i=this.toSeconds(n),o=this.toSeconds(t);return this.triggerAttack(e,i,s),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Ai extends la{constructor(){super(fe(Ai.getDefaults(),arguments));const e=fe(Ai.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(la.getDefaults(),{detune:0,onsilence:mt,portamento:0})}triggerAttack(e,t,n=1){this.log("triggerAttack",e,t,n);const s=this.toSeconds(t);return this._triggerEnvelopeAttack(s,n),this.setNote(e,s),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const n=this.toSeconds(t),s=e instanceof is?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(n)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(s,i,n)}else this.frequency.setValueAtTime(s,n);return this}}bs([Di(0)],Ai.prototype,"portamento",void 0);class ld extends cs{constructor(){super(fe(ld.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Ct({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class uu extends Ai{constructor(){super(fe(uu.getDefaults(),arguments)),this.name="Synth";const e=fe(uu.getDefaults(),arguments);this.oscillator=new aa(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new ld(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Ot(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Ai.getDefaults(),{envelope:Object.assign(sl(cs.getDefaults(),Object.keys(Ie.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(sl(aa.getDefaults(),[...Object.keys(Hn.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const n=this.toSeconds(this.envelope.attack),s=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+n+s)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class hu extends Ie{constructor(){super(fe(hu.getDefaults(),arguments,["frequency","type"])),this.name="BiquadFilter";const e=fe(hu.getDefaults(),arguments,["frequency","type"]);this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new vt({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new vt({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new vt({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new vt({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(Ie.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){Be(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const t=new Float32Array(e);for(let o=0;o<e;o++){const c=Math.pow(o/e,2)*(2e4-20)+20;t[o]=c}const n=new Float32Array(e),s=new Float32Array(e),i=this.context.createBiquadFilter();return i.type=this.type,i.Q.value=this.Q.value,i.frequency.value=this.frequency.value,i.gain.value=this.gain.value,i.getFrequencyResponse(t,n,s),n}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class Ml extends Ie{constructor(){super(fe(Ml.getDefaults(),arguments,["frequency","type","rolloff"])),this.name="Filter",this.input=new Ct({context:this.context}),this.output=new Ct({context:this.context}),this._filters=[];const e=fe(Ml.getDefaults(),arguments,["frequency","type","rolloff"]);this._filters=[],this.Q=new bt({context:this.context,units:"positive",value:e.Q}),this.frequency=new bt({context:this.context,units:"frequency",value:e.frequency}),this.detune=new bt({context:this.context,units:"cents",value:e.detune}),this.gain=new bt({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,Ot(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(Ie.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){Be(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(n=>n.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const t=co(e)?e:parseInt(e,10),n=[-12,-24,-48,-96];let s=n.indexOf(t);Be(s!==-1,`rolloff can only be ${n.join(", ")}`),s+=1,this._rolloff=t,this.input.disconnect(),this._filters.forEach(i=>i.disconnect()),this._filters=new Array(s);for(let i=0;i<s;i++){const o=new hu({context:this.context});o.type=this._type,this.frequency.connect(o.frequency),this.detune.connect(o.detune),this.Q.connect(o.Q),this.gain.connect(o.gain),this._filters[i]=o}this._internalChannels=this._filters,eu(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const t=new hu({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),n=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{t.getFrequencyResponse(e).forEach((i,o)=>n[o]*=i)}),t.dispose(),n}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),Hg(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class fu extends cs{constructor(){super(fe(fu.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="FrequencyEnvelope";const e=fe(fu.getDefaults(),arguments,["attack","decay","sustain","release"]);this._octaves=e.octaves,this._baseFrequency=this.toFrequency(e.baseFrequency),this._exponent=this.input=new nu({context:this.context,value:e.exponent}),this._scale=this.output=new Rf({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(cs.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){const t=this.toFrequency(e);Ts(t,0),this._baseFrequency=t,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._scale.max=this._baseFrequency*Math.pow(2,e)}get exponent(){return this._exponent.value}set exponent(e){this._exponent.value=e}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class du extends Ai{constructor(){super(fe(du.getDefaults(),arguments)),this.name="MonoSynth";const e=fe(du.getDefaults(),arguments);this.oscillator=new aa(Object.assign(e.oscillator,{context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new Ml(Object.assign(e.filter,{context:this.context})),this.filterEnvelope=new fu(Object.assign(e.filterEnvelope,{context:this.context})),this.envelope=new ld(Object.assign(e.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),Ot(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(Ai.getDefaults(),{envelope:Object.assign(sl(cs.getDefaults(),Object.keys(Ie.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(sl(Ml.getDefaults(),Object.keys(Ie.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(sl(fu.getDefaults(),Object.keys(Ie.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(sl(aa.getDefaults(),Object.keys(Hn.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(e,t=1){if(this.envelope.triggerAttack(e,t),this.filterEnvelope.triggerAttack(e),this.oscillator.start(e),this.envelope.sustain===0){const n=this.toSeconds(this.envelope.attack),s=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+n+s)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.filterEnvelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class pu extends uu{constructor(){super(fe(pu.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const e=fe(pu.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Ot(this,["oscillator","envelope"])}static getDefaults(){return cl(Ai.getDefaults(),uu.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const n=this.toSeconds(t),s=this.toFrequency(e instanceof is?e.toFrequency():e),i=s*this.octaves;return this.oscillator.frequency.setValueAtTime(i,n),this.oscillator.frequency.exponentialRampToValueAtTime(s,n+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}bs([hw(0)],pu.prototype,"octaves",void 0);bs([Di(0)],pu.prototype,"pitchDecay",void 0);const fw=new Set;function Kg(r){fw.add(r)}function dw(r,e){const t=`registerProcessor("${r}", ${e})`;fw.add(t)}const jP=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;Kg(jP);const VP=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;Kg(VP);const GP=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;Kg(GP);const HP="feedback-comb-filter",WP=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;dw(HP,WP);class mu extends la{constructor(){super(fe(mu.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const e=fe(mu.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),t={};Object.keys(e.urls).forEach(n=>{const s=parseInt(n,10);if(Be(Zh(n)||co(s)&&isFinite(s),`url key is neither a note or midi pitch: ${n}`),Zh(n)){const i=new is(this.context,n).toMidi();t[i]=e.urls[n]}else co(s)&&isFinite(s)&&(t[s]=e.urls[s])}),this._buffers=new Yg({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(la.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:mt,onerror:mt,release:.1,urls:{}})}_findClosest(e){let n=0;for(;n<96;){if(this._buffers.has(e+n))return-n;if(this._buffers.has(e-n))return n;n++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,n=1){return this.log("triggerAttack",e,t,n),Array.isArray(e)||(e=[e]),e.forEach(s=>{const i=uw(new is(this.context,s).toFrequency()),o=Math.round(i),a=i-o,c=this._findClosest(o),h=o-c,f=this._buffers.get(h),d=cw(c+a),p=new El({url:f,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:d}).connect(this.output);p.start(t,0,f.duration/d,n),ws(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(p),p.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const g=this._activeSources.get(o),_=g.indexOf(p);_!==-1&&g.splice(_,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(n=>{const s=new is(this.context,n).toMidi();if(this._activeSources.has(s)&&this._activeSources.get(s).length){const i=this._activeSources.get(s);t=this.toSeconds(t),i.forEach(o=>{o.stop(t)}),this._activeSources.set(s,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(n=>{for(;n.length;)n.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,n,s=1){const i=this.toSeconds(n);return this.triggerAttack(e,i,s),ws(t)?(Be(ws(e),"notes must be an array when duration is array"),e.forEach((o,a)=>{const c=t[Math.min(a,t.length-1)];this.triggerRelease(o,i+this.toSeconds(c))})):this.triggerRelease(e,i+this.toSeconds(t)),this}add(e,t,n){if(Be(Zh(e)||isFinite(e),`note must be a pitch or midi: ${e}`),Zh(e)){const s=new is(this.context,e).toMidi();this._buffers.add(s,t,n)}else this._buffers.add(e,t,n);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}bs([Di(0)],mu.prototype,"attack",void 0);bs([Di(0)],mu.prototype,"release",void 0);class Df extends Ie{constructor(){super(Object.assign(fe(Df.getDefaults(),arguments,["fade"]))),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new BP({context:this.context}),this.a=new Ct({context:this.context,gain:0}),this.b=new Ct({context:this.context,gain:0}),this.output=new Ct({context:this.context}),this._internalChannels=[this.a,this.b];const e=fe(Df.getDefaults(),arguments,["fade"]);this.fade=new bt({context:this.context,units:"normalRange",value:e.fade}),Ot(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",uo(this._split,this.a.gain,0),uo(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(Ie.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class b_ extends Ie{constructor(e){super(e),this.name="Effect",this._dryWet=new Df({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new Ct({context:this.context}),this.effectReturn=new Ct({context:this.context}),this.input=new Ct({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(e.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],Ot(this,"wet")}static getDefaults(){return Object.assign(Ie.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class If extends Ie{constructor(){super(Object.assign(fe(If.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const e=fe(If.getDefaults(),arguments,["pan"]);this.pan=new vt({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Ot(this,"pan")}static getDefaults(){return Object.assign(Ie.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const qP="bit-crusher",ZP=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;dw(qP,ZP);class Uf extends Ie{constructor(){super(fe(Uf.getDefaults(),arguments,["channels"])),this.name="Merge";const e=fe(Uf.getDefaults(),arguments,["channels"]);this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(Ie.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class Ff extends b_{constructor(){super(fe(Ff.getDefaults(),arguments,["decay"])),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const e=fe(Ff.getDefaults(),arguments,["decay"]);this._decay=e.decay,this._preDelay=e.preDelay,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(b_.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(e){e=this.toSeconds(e),Ts(e,.001),this._decay=e,this.generate()}get preDelay(){return this._preDelay}set preDelay(e){e=this.toSeconds(e),Ts(e,0),this._preDelay=e,this.generate()}generate(){return nn(this,void 0,void 0,function*(){const e=this.ready,t=new od(2,this._decay+this._preDelay,this.context.sampleRate),n=new su({context:t}),s=new su({context:t}),i=new Uf({context:t});n.connect(i,0,0),s.connect(i,0,1);const o=new Ct({context:t}).toDestination();i.connect(o),n.start(0),s.start(0),o.gain.setValueAtTime(0,0),o.gain.setValueAtTime(1,this._preDelay),o.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const a=t.render();return this.ready=a.then(mt),yield e,this._convolver.buffer=(yield a).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class $t extends Ie{constructor(){super(fe($t.getDefaults(),arguments,["solo"])),this.name="Solo";const e=fe($t.getDefaults(),arguments,["solo"]);this.input=this.output=new Ct({context:this.context}),$t._allSolos.has(this.context)||$t._allSolos.set(this.context,new Set),$t._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(Ie.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),$t._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){$t._soloed.has(this.context)||$t._soloed.set(this.context,new Set),$t._soloed.get(this.context).add(this)}_removeSolo(){$t._soloed.has(this.context)&&$t._soloed.get(this.context).delete(this)}_isSoloed(){return $t._soloed.has(this.context)&&$t._soloed.get(this.context).has(this)}_noSolos(){return!$t._soloed.has(this.context)||$t._soloed.has(this.context)&&$t._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),$t._allSolos.get(this.context).delete(this),this._removeSolo(),this}}$t._allSolos=new Map;$t._soloed=new Map;class Nf extends Ie{constructor(){super(fe(Nf.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const e=fe(Nf.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new If({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new ho({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Ot(this,["pan","volume"])}static getDefaults(){return Object.assign(Ie.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class jo extends Ie{constructor(){super(fe(jo.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const e=fe(jo.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new $t({solo:e.solo,context:this.context}),this._panVol=this.output=new Nf({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Ot(this,["pan","volume"])}static getDefaults(){return Object.assign(Ie.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return jo.buses.has(e)||jo.buses.set(e,new Ct({context:this.context})),jo.buses.get(e)}send(e,t=0){const n=this._getBus(e),s=new Ct({context:this.context,units:"decibels",gain:t});return this.connect(s),s.connect(n),s}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}jo.buses=new Map;class YP extends Ie{constructor(){super(...arguments),this.name="Listener",this.positionX=new vt({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new vt({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new vt({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new vt({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new vt({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new vt({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new vt({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new vt({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new vt({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(Ie.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}sd(r=>{r.listener=new YP({context:r})});id(r=>{r.listener.dispose()});ys().transport;const Jg=ys().destination;ys().destination;ys().listener;ys().draw;ys();const $g=new Ml(900,"highpass"),pw=new ho(-6);pw.chain($g,Jg);const XP=new Ff(3).connect(pw),cd=new du({envelope:{attack:0,decay:.9,sustain:.2,release:.1}});cd.oscillator.type="triangle2";cd.volume.value=-6;cd.chain($g,Jg);const ud=new du({envelope:{attack:.4,decay:.9,sustain:.7,release:.6}}).connect(XP);ud.oscillator.type="triangle";ud.volume.value=-6;ud.chain($g,Jg);function QP(){return Math.floor((Math.random()-.5)*20)}let M_=!1;const KP=async(r=0)=>{M_||(await EP(),M_=!0);try{if(r>2e3)ud.triggerAttackRelease(60,.3);else if(r>1e3){let e=310;e+=QP(),cd.triggerAttackRelease(e,.001)}}catch(e){console.warn(e)}};let qa,kc;const JP=4e3,$P=2e3,eR=r=>{const e=Ms(),t=Re(M=>M.cameraFocusTrigger),n=no(M=>M.isUserDragging),s=no(M=>M.isUserScrolling),i=no(M=>M.setUserMovedCamera),o=Re(M=>M.setNearbyNodeIds),a=Re(M=>M.showSelectionGraph),c=Re(M=>M.data),h=Re(M=>M.graphStyle),{camera:f}=lt(),[d,p]=P.useState(!1),[g,_]=P.useState(!1),[y,x]=P.useState(s_),w=P.useMemo(()=>{if(a)return new ye(0,0,0);const M=c==null?void 0:c.nodes.find(R=>R.ref_id===(e==null?void 0:e.ref_id));let k=new ye(2e3,2e3,3e3);if(M&&c){const R=c==null?void 0:c.nodes.filter(j=>{var q;return(q=M.children)==null?void 0:q.find(Y=>Y===j.id)}),F=new ye(M.x,M.y,M.z);let U=new ye(0,0,0);R.map(j=>(U=U.add(new ye(j.x,j.y,j.z).normalize()),j));const I=M.scale?1-1/(M.scale+10):1,z=F.sub(U).multiplyScalar(.8*I);k=F.add(z)}return k},[a,e,c]),T=P.useMemo(()=>{if(a)return new ye(0,0,0);const M=c==null?void 0:c.nodes.find(k=>k.ref_id===(e==null?void 0:e.ref_id));return new ye((M==null?void 0:M.x)||0,(M==null?void 0:M.y)||0,(M==null?void 0:M.z)||0)},[a,e,c]);P.useEffect(()=>{var M;a&&((M=r.current)==null||M.setLookAt(Hp.x,Hp.y,Hp.z,0,0,0,!1)),b()},[a]),P.useEffect(()=>{a?x(eM):(e==null?void 0:e.node_type)==="topic"?x($5):x(s_)},[e,x,a]),P.useEffect(()=>{E()},[t]),P.useEffect(()=>{(n||s)&&(p(!0),_(!0))},[n,s,p,_]),P.useEffect(()=>{if(e)if(!a&&h==="earth"&&(r!=null&&r.current)){const M=r.current.camera.position.distanceTo(new ye),k=jS(T,-M/2);r.current.setLookAt(k.x,k.y,k.z,0,0,0,!0)}else qa&&clearTimeout(qa),qa=setTimeout(()=>{_(!0),clearTimeout(qa)},$P),b();return()=>{qa&&clearTimeout(qa),kc&&clearTimeout(kc)}},[e]),mn(M=>{r.current&&(d||C(w,M.camera),g||A(T,M.camera))});const b=()=>{if(e){const M=f.position.distanceTo(w);KP(M)}E()},E=()=>{p(!1),_(!1),i(!1),kc&&clearTimeout(kc),kc=setTimeout(()=>{p(!0),_(!0)},JP)},C=(M,k)=>{if(k.position.distanceTo(M)<y)p(!0);else{k.position.lerp(M,.5);const F=Tg((c==null?void 0:c.nodes)||[],f);F&&o(F)}},A=(M,k)=>{var R;(R=r==null?void 0:r.current)==null||R.setLookAt(k.position.x,k.position.y,k.position.z,M.x,M.y,M.z,!0)};return null},tR=1;let _i=null;const nR=(r,{enabled:e})=>{const t=Ms();eR(r);const n=no(f=>f.isUserDragging),s=Re(f=>f.disableCameraRotation),i=Re(f=>f.data),o=Re(f=>f.graphStyle),a=Re(f=>f.graphRadius),c=Re(f=>f.setNearbyNodeIds);P.useEffect(()=>{e||(_i==null||_i.kill(),_i=null)},[e]);const h=P.useCallback(()=>{_i==null||_i.kill();const f={value:-244},d=ax.to(f,{duration:5,keyframes:{"0%":{value:10},"100%":{delay:2,ease:"Power4.easeIn",value:-200}},onComplete:()=>{_i=null},onInterrupt(){d.kill()},onUpdate:()=>{var g;const{value:p}=f;if(r.current){const _=Tg((i==null?void 0:i.nodes)||[],r.current.camera);_&&c(_),(g=r.current)==null||g.dolly(p,!1)}}});d.play(),_i=d},[]);return P.useEffect(()=>{r.current&&a&&(o==="sphere"?(r.current.maxDistance=8e3,r.current.minDistance=200,r.current.setTarget(0,0,500,!0)):(r.current.maxDistance=r.current.getDistanceToFitSphere(a+200),r.current.minDistance=100))},[a,o,r]),P.useEffect(()=>{h()},[h,o]),P.useEffect(()=>{!t&&r.current&&r.current.setLookAt(Ti.x,Ti.y,Ti.z,0,0,0,!0)},[t]),mn((f,d)=>{r.current&&(!s&&!n&&(r.current.azimuthAngle+=tR*d*Hm.DEG2RAD),r.current.update(d))}),null},rR=({disableAnimations:r})=>{const e=P.useRef(null),t=Re(p=>p.graphStyle),n=Re(p=>p.data),s=Re(p=>p.setNearbyNodeIds),i=Re(p=>p.setDisableCameraRotation),[o]=P.useState(.8),{camera:a}=lt(),[c,h,f,d]=no(p=>[p.isUserDragging,p.setIsUserDragging,p.isUserScrolling,p.isUserScrollingOnHtmlPanel]);return nR(e,{enabled:!r&&!f&&!c}),P.useEffect(()=>{e.current&&e.current.setLookAt(Ti.x,Ti.y,Ti.z,0,0,0,!0)},[t]),P.useEffect(()=>{if(!c){const p=Tg((n==null?void 0:n.nodes)||[],a);p&&s(p)}},[a,a.position,a.position.x,a.position.y,a.position.z,n==null?void 0:n.nodes,s,c]),P.useEffect(()=>{c&&i(!0)},[c,i]),D.jsx(gE,{ref:e,boundaryEnclosesCamera:!0,enabled:!d,makeDefault:!0,maxDistance:12e3,minDistance:100,onEnd:()=>h(!1),onStart:()=>h(!0),smoothTime:o})},hd={metalness:.9,roughness:0},sR={...hd},iR=new _u(sR),oR=({hide:r})=>{const e=Zm(),t=Re(s=>s.graphStyle),n=P.useMemo(()=>e.nodes.map((s,i)=>{if(s.node_type==="topic")return!1;const o=!lx(s),a=ig(s.node_type||"",!0);return D.jsx(Vy,{color:a,name:s.id,position:[s.x,s.y,s.z],scale:o?(s.scale||1)*.9:0,userData:s},`${s.ref_id||s.id}-instanced-node-${i}-${t}`)}),[t,e]);return D.jsx(yE,{geometry:bm,material:iR,visible:!r,children:n})},mw=new Vf,Lf=mw.load("noimage.jpeg"),O_=new _u({...hd,map:Lf}),gw=.4,aR=new _u({...hd,map:Lf,transparent:!0,opacity:gw}),Xh={},lR=(r,e)=>{const[t,n]=P.useState(Lf),[s,i]=P.useState(O_);return P.useEffect(()=>{const o=`${r}${e&&"-transparent"}`;if(Xh[o]){n(Xh[o].texture),i(Xh[o].material);return}mw.load(r,a=>{const c=new _u({map:a,transparent:e,opacity:e?gw:1,...hd});Xh[o]={texture:a,material:c},n(a),i(c)},void 0,()=>{n(Lf),i(e?aR:O_)})},[r,e]),P.useEffect(()=>function(){t.dispose(),s.dispose()},[t,s]),s},e0=P.memo(({node:r,hide:e,animated:t})=>{const n=P.useRef(null),[s]=P.useState(bm),i=Ms(),o=Re(f=>f.showSelectionGraph),a=!!i&&r.ref_id===i.ref_id,c=lR(r.image_url||"noimage.jpeg",!1);mn((f,d)=>{t&&n.current&&(n.current.position.set(r.x,r.y,r.z),a&&(n.current.rotation.y+=d*1,n.current.rotation.x-=d*.6))}),P.useEffect(()=>function(){s.dispose()},[s]);const h=P.useMemo(()=>o&&a?20:a?(r.scale||1)*1.2:r.scale,[r,a,o]);return D.jsx(bE,{enabled:!!a,children:D.jsx("mesh",{ref:n,geometry:bm,material:c,name:r.id,position:[r.x,r.y,r.z],scale:h,userData:r,visible:!e})})});e0.displayName="Cube";const cR=Cs(cn)`
  text-align: center;
  width: ${r=>r.type==="topic"?"auto":`${r.size}px`};
  height: ${r=>r.type==="topic"?"auto":`${r.size}px`};
  outline: 1px solid ${r=>zn.white};
  outline-offset: 0px;
  background: rgba(0, 0, 0, 0.75);
  color: ${r=>r.fontColor};
  border-radius: ${r=>`${r.type==="guest"?"100%":"6px"}`};
  font-size: ${r=>`${r.fontSize}px`};
  cursor: pointer;
  transition: font-size 0.4s, outline 0.4s;
  transform: scale(${r=>r.scale});
  align-items: center;
  justify-content: center;
  font-family: Barlow;
  font-size: 26px;
  font-style: normal;
  font-weight: 700;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);

  &:hover {
    outline-offset: 4px;
  }

  &.selected {
    .badge-wrapper {
      top: 0;
    }

    font-size: 36px;

    &:hover {
      outline-offset: 0px;
    }
  }

  &.topic {
    outline: none;
    background: none;
    &:hover {
      font-size: 36px;
    }
    white-space: nowrap;
    .badge-wrapper {
      display: none;
    }
  }

  .badge-wrapper {
    position: absolute;
    top: -7px;
    left: -14px;
  }
`;Cs.img`
  background-image: ${({src:r})=>`url(${r})`};
  background-size: contain;
  background-repeat: no-repeat;
  width: ${r=>r.size}px;
  height: ${r=>r.size}px;
  border-radius: ${r=>r.borderRadius};
`;Cs.div`
  display: flex;
  position: absolute;
  bottom: -14px;
  left: -5px;
  width: auto;
  justify-content: center;
  align-items: center;
`;Cs.div`
  display: flex;
  justify-content: center;
  align-items: center;
  background: ${zn.transparentBlack};
  border: 2px solid ${r=>r.color};
  color: #fff;
  padding: 0 4px;
  min-width: 30px;
  height: 26px;
  font-size: 12px;
  font-weight: 500;
  border-radius: 6px;
  margin-right: 5px;
`;Cs.div`
  display: flex;
  justify-content: center;
  align-items: center;
  border: 2px solid ${r=>r.color}44;
  background: ${zn.transparentBlack};
  padding: 0 4px;
  color: ${r=>r.color};
  min-width: 30px;
  height: 26px;
  font-size: 12px;
  font-weight: 500;
  border-radius: 6px;
  margin-right: 5px;
`;const uR=new ye,hR=({position:r,userData:e,color:t})=>{const n=P.useRef(null),[s,i]=Re(g=>[g.selectedNode,g.setSelectedNode]),o=Re(g=>g.setHoveredNode),a=Re(g=>g.hoveredNode),c=Re(g=>g.showSelectionGraph),h=((e==null?void 0:e.node_type)||"")==="topic",f=((e==null?void 0:e.node_type)||"")==="guest"||((e==null?void 0:e.node_type)||"")==="person";mn(()=>{if(c&&n.current){const g=uR.set((e==null?void 0:e.x)||0,(e==null?void 0:e.y)||0,(e==null?void 0:e.z)||0);n.current.position.copy(g)}}),P.useEffect(()=>function(){n.current&&n.current.clear()},[n]);const d=P.useMemo(()=>(a==null?void 0:a.ref_id)===(e==null?void 0:e.ref_id),[a==null?void 0:a.ref_id,e==null?void 0:e.ref_id]),p=(s==null?void 0:s.ref_id)===(e==null?void 0:e.ref_id);return h||p&&c||!p?D.jsx("group",{ref:n,position:r,children:D.jsx($m,{center:!0,sprite:!0,zIndexRange:[0,0],children:D.jsxs(cR,{className:q_(e==null?void 0:e.node_type,{selected:p}),color:t,fontColor:zn.white,fontSize:h?64:20,onClick:g=>{g.stopPropagation(),e&&i(e)},onPointerOut:g=>{g.stopPropagation(),o(null)},onPointerOver:g=>{g.stopPropagation(),o(e||null)},scale:d?1.05:1,selected:!1,size:p?100:68,type:(e==null?void 0:e.node_type)||"",children:[!f&&!h?D.jsx("div",{className:"badge-wrapper",children:D.jsx(KS,{type:(e==null?void 0:e.node_type)||""})}):null,h?e==null?void 0:e.label:D.jsx(Z_,{rounded:f,size:p?60:52,src:(e==null?void 0:e.image_url)||"audio_default.svg",type:e==null?void 0:e.node_type})]})})}):null},vw=P.memo(()=>{const r=Re(o=>o.data),e=Ms(),t=Re(o=>o.showSelectionGraph),n=Re(o=>o.selectionGraphData),s=Re(o=>o.selectedNodeRelativeIds),i=P.useMemo(()=>(t?n.nodes:(r==null?void 0:r.nodes)||[]).filter(h=>s.includes((h==null?void 0:h.ref_id)||"")||(e==null?void 0:e.ref_id)===(h==null?void 0:h.ref_id)).slice(0,W_).map(h=>{const f=ig(h.node_type||"",!0),d=new ye((h==null?void 0:h.x)||0,(h==null?void 0:h.y)||0,(h==null?void 0:h.z)||0),p=((r==null?void 0:r.nodes)||[]).filter(g=>g.ref_id&&VS(g,h)).map(g=>(g==null?void 0:g.ref_id)||"")||[];return D.jsx(hR,{color:f,position:d,relativeIds:p,userData:h},`node-badge-${h.ref_id}`)}),[s,r==null?void 0:r.nodes,t,n,e]);return D.jsx(P.Fragment,{children:i.length?i:null},"node-badges")});vw.displayName="RelevanceBadges";const _w=({link:r,animated:e})=>{const t=P.useRef(null),n=Ms(),[s,i]=P.useState(new ye(0,0,0)),[o,a]=P.useState(new ye(0,0,0)),[c,h]=P.useState(8947848),f=Re(d=>d.selectionGraphData);return P.useEffect(()=>{var g,_,y,x,w,T;const d=(n==null?void 0:n.ref_id)||"",p=n&&(d===r.targetRef||d===r.sourceRef);!r.onlyVisibleOnSelect||p?(i(new ye(((g=r.sourcePosition)==null?void 0:g.x)||0,((_=r.sourcePosition)==null?void 0:_.y)||0,((y=r.sourcePosition)==null?void 0:y.z)||0)),a(new ye(((x=r.targetPosition)==null?void 0:x.x)||0,((w=r.targetPosition)==null?void 0:w.y)||0,((T=r.targetPosition)==null?void 0:T.z)||0))):(i(new ye(0,0,0)),a(new ye(0,0,0))),h(p?r.color||N_.children.segmentColor:n?5592405:8947848)},[n,r]),mn(()=>{if(e&&t.current){const d=f.nodes.find(g=>g.ref_id===r.sourceRef),p=f.nodes.find(g=>g.ref_id===r.targetRef);t.current.start.set((d==null?void 0:d.x)||0,(d==null?void 0:d.y)||0,(d==null?void 0:d.z)||0),t.current.end.set((p==null?void 0:p.x)||0,(p==null?void 0:p.y)||0,(p==null?void 0:p.z)||0)}}),D.jsx(wE,{ref:t,color:"0xFFFFFF",end:o,start:s})},fR={font:"/fonts/Inter-Bold.woff",characters:"abcdefghijklmnopqrstuvwxyz0123456789!",fontSize:2,letterSpacing:-.05,lineHeight:1,"material-toneMapped":!1},t0=P.memo(({node:r,hide:e})=>{const t=P.useRef(null),n=Ms(),i=Re(f=>f.selectedNodeRelativeIds).includes((r==null?void 0:r.ref_id)||""),o=!!n&&(n==null?void 0:n.id)===r.id,a=Re(f=>f.showSelectionGraph);mn(({camera:f})=>{t!=null&&t.current&&(t.current.quaternion.copy(f.quaternion),a&&t.current.position.set(r.x,r.y,r.z))});const c=P.useMemo(()=>{let f=(r.scale||1)*4;return a&&o?f=40:!o&&i&&(f=0),f},[r.scale,o,i,a]),h=P.useMemo(()=>n&&n.node_type==="topic"&&!o?.2:1,[o,n]);return D.jsx(am,{ref:t,anchorX:"center",anchorY:"middle",color:zn.white,fillOpacity:h,position:[r.x,r.y,r.z],scale:c,userData:r,visible:!e&&!o,...fR,children:r.label})});t0.displayName="TextNode";let Zp=null;const yw=P.memo(()=>{const r=Zm(),e=Ms(),t=Re(i=>i.selectedNodeRelativeIds),n=Re(i=>i.selectionGraphData),s=Re(i=>i.setSelectionData);return P.useEffect(()=>{const i=r.nodes.filter(a=>a.ref_id===(e==null?void 0:e.ref_id)||t.includes((a==null?void 0:a.ref_id)||"")).map(a=>{const c=a.ref_id===(e==null?void 0:e.ref_id)&&a.node_type!=="topic"?{fx:0,fy:0,fz:0}:{};return{...a,x:0,y:0,z:0,...c}}),o=GS(i,!1,!1);s({nodes:i,links:o})},[r,e,t,s]),P.useEffect(()=>{Zp=HS(n.nodes,n.links,{numDimensions:2,forceLinkStrength:.01,forceCenterStrength:.85,forceChargeStrength:-20,velocityDecay:.9})},[n]),mn(()=>{Zp&&Zp.tick()}),D.jsxs(D.Fragment,{children:[n==null?void 0:n.nodes.map(i=>i.node_type==="topic"?D.jsx(t0,{hide:!0,node:i},`${i.ref_id||i.id}-compact`):D.jsx(e0,{animated:!0,hide:!0,node:i},`${i.ref_id||i.id}-compact`)),D.jsx(Hy,{fog:!0,lineWidth:.9,children:(n==null?void 0:n.links).map((i,o)=>D.jsx(_w,{animated:!0,link:i},o.toString()))},`selection-links-${n==null?void 0:n.links.length}`)]})});yw.displayName="SelectionDataNodes";const xw=P.memo(()=>{const r=Zm(),e=Ms(),t=Re(p=>p.nearbyNodeIds),n=Re(p=>p.setHoveredNode),s=Re(p=>p.showSelectionGraph),i=Re(p=>p.selectionGraphData),o=Ym(p=>p.setTranscriptOpen),a=P.useCallback(p=>!!(s&&!i.nodes.find(g=>g.ref_id===p.ref_id)),[s,i]),c=P.useCallback(p=>{const g=p==null?void 0:p[0];g&&(o(!1),g.userData&&(a(g.userData)||Re.getState().setSelectedNode((g==null?void 0:g.userData)||null)))},[o,a]),h=P.useCallback(p=>{p.stopPropagation(),n(null)},[n]),f=P.useCallback(p=>{var y;const _=p.intersections.map(x=>x.object)[0];if((y=_==null?void 0:_.userData)!=null&&y.ref_id){const x=_.userData;a(x)||(p.stopPropagation(),n(x))}},[n,a]),d=s&&!!e;return D.jsxs(pC,{filter:p=>p.filter(g=>{var _;return!!((_=g.userData)!=null&&_.id)}),onChange:c,onPointerOut:h,onPointerOver:f,children:[D.jsx(oR,{hide:d}),D.jsx(vw,{}),r.nodes.filter(p=>{const g=(p==null?void 0:p.ref_id)===(e==null?void 0:e.ref_id);return t.includes(p.ref_id||"")||lx(p)||g}).map(p=>p.node_type==="topic"?D.jsx(t0,{hide:d,node:p},p.ref_id||p.id):D.jsx(e0,{hide:d,node:p},p.ref_id||p.id)),d&&D.jsx(yw,{})]})});xw.displayName="Cubes";const dR={earthRef:null},pR=F_(r=>({...dR,setEarthRef:e=>r({earthRef:e})})),mR=(r,e)=>{const t=new Kh().setFromUnitVectors(new ye(0,1,0),r.clone().normalize()),n=new Kh().setFromUnitVectors(new ye(0,1,0),e.clone().normalize()),s=new Kh,i=50,o=[];for(let c=0;c<=i;c+=1){const h=c/i;s.slerpQuaternions(t,n,h);const f=new ye(0,1,0).applyQuaternion(s).multiplyScalar(Rc+WS);o.push(f)}return new qS(o).getPoints(i)},gR=({link:r})=>{const e=Ms(),[t,n]=P.useState(8947848);P.useEffect(()=>{const i=(e==null?void 0:e.ref_id)||"",o=e&&(i===r.targetRef||i===r.sourceRef);n(o?r.color||N_.children.segmentColor:e?5592405:8947848)},[e,r]);const s=P.useMemo(()=>{var h,f,d,p,g,_;const i=(e==null?void 0:e.ref_id)||"",o=e&&(i===r.targetRef||i===r.sourceRef);if(!(!r.onlyVisibleOnSelect||o))return[];const a=new ye(((h=r.sourcePosition)==null?void 0:h.x)||0,((f=r.sourcePosition)==null?void 0:f.y)||0,((d=r.sourcePosition)==null?void 0:d.z)||0),c=new ye(((p=r.targetPosition)==null?void 0:p.x)||0,((g=r.targetPosition)==null?void 0:g.y)||0,((_=r.targetPosition)==null?void 0:_.z)||0);return mR(a,c)},[r,e]);return s.length?D.jsx(mC,{color:t,dashed:!1,lineWidth:3,points:s}):null},vR=new ye(0,0,0),_R=()=>{const r=P.useRef(null),e=P.useRef(null),t=Re(c=>c.graphStyle),n=Re(c=>c.showSelectionGraph),s=Re(c=>c.data),i=pR(c=>c.setEarthRef),o=Xo("textures/earth/galaxy.png"),a=Xo("textures/earth/clouds.png");return mn(({camera:c})=>{e.current&&e.current.position.copy(c.getWorldPosition(vR))}),P.useLayoutEffect(()=>{r.current&&i(r)},[i]),t!=="earth"||n?null:D.jsxs(D.Fragment,{children:[D.jsxs("mesh",{ref:r,userData:{type:"earth"},children:[D.jsx("sphereGeometry",{args:[Rc,200,200]}),D.jsx(yR,{})]}),D.jsxs("mesh",{children:[D.jsx("sphereGeometry",{args:[Rc+2,200,200]}),D.jsx("meshStandardMaterial",{alphaMap:a,map:a,transparent:!0})]}),D.jsxs("mesh",{children:[D.jsx("sphereGeometry",{args:[Rc*4,200,200]}),D.jsx("meshStandardMaterial",{map:o,opacity:.4,side:Ki,transparent:!0})]}),D.jsx("directionalLight",{ref:e,intensity:.9,position:[0,0,Rc*3]}),s==null?void 0:s.links.map((c,h)=>D.jsx(gR,{link:c},`curved-${h}`))]})},yR=()=>{const r=Xo("textures/earth/earth.jpeg"),e=Xo("textures/earth/bump.jpeg"),t=Xo("textures/earth/water.png"),n=P.useMemo(()=>new _u({map:r,bumpMap:e,aoMap:e,roughnessMap:e,metalnessMap:t,toneMapped:!0,roughness:35,metalness:0}),[r,e,t]);return D.jsx("meshStandardMaterial",{...n})},Za=2e3,Qh=ef*4,A_=Object.values(a2).map(r=>r),xR=()=>{const r=P.useRef(null);mn(()=>{var o,a,c;const s=((o=r.current)==null?void 0:o.geometry.getAttribute("position")).array,i=((a=r.current)==null?void 0:a.geometry.getAttribute("velocity")).array;if(s&&i){for(let h=0;h<s.length;h+=3){const f=s[h],d=s[h+1],p=s[h+2],g=i[h],_=i[h+1],y=i[h+2];s[h]+=g,s[h+1]+=_,s[h+2]+=y;const x=Math.sqrt(f*f+d*d+p*p);if(x*x>Qh*Qh){const T=Math.random()*Math.PI*2,b=Math.random()*Math.PI*2,E=Math.random()*Qh;s[h]=Math.sin(T)*Math.cos(b)*E,s[h+1]=Math.sin(T)*Math.sin(b)*E,s[h+2]=Math.cos(T)*E}}((c=r.current)==null?void 0:c.geometry.getAttribute("position")).needsUpdate=!0}});const e=P.useMemo(()=>new Float32Array(Za*3),[]),t=P.useMemo(()=>new Float32Array(Za*3),[]);P.useEffect(()=>{const s=Qh;for(let i=0;i<Za;i+=1){const o=i*3,a=Math.acos(1-i/Za*2),c=Math.PI*2*i/Za;e[o]=Math.sin(a)*Math.cos(c)*s,e[o+1]=Math.sin(a)*Math.sin(c)*s,e[o+2]=Math.cos(a)*s,t[o]=Math.random()-.5,t[o+1]=Math.random()-.5,t[o+2]=Math.random()-.5}},[e,t]);const n=P.useRef(null);return P.useEffect(()=>{n.current&&r.current&&(n.current.setAttribute("position",new Vo(e,3)),n.current.setAttribute("velocity",new Vo(t,3)),r.current.geometry=n.current)},[e,t]),P.useEffect(()=>{if(n.current){const s=[];for(let i=0;i<Za;i+=1){const o=Math.floor(Math.random()*A_.length),a=A_[o],c=new rr(a);c.multiplyScalar(2),s.push(c.r,c.g,c.b)}n.current.setAttribute("color",new Vo(new Float32Array(s),3))}},[]),D.jsxs("points",{ref:r,frustumCulled:!1,children:[D.jsx("bufferGeometry",{ref:n}),D.jsx("pointsMaterial",{opacity:.8,size:4,transparent:!0,vertexColors:!0})]})},k_=r=>({close:{backgroundColor:"rgba(48, 51, 66, 1)",borderColor:"#fff",fontColor:"rgba(255, 255, 255, 1)"},focus:{backgroundColor:r?"rgba(255, 255, 255, 0.90);":"rgba(255, 255, 255, 0.90)",borderColor:r?"#FFDB58bb":"#fff",fontColor:"rgba(48, 51, 66, 1)"},menu:{backgroundColor:"#00000066",borderColor:r?"#ffffff66":"#5078f2",fontColor:r?"#ffffff66":"#fff"}}),wR=new ye,ww=P.memo(()=>{const r=P.useRef(null),e=Ym(f=>f.setSidebarOpen),t=Re(f=>f.showSelectionGraph),n=Re(f=>f.selectionGraphData),s=Re(f=>f.data),i=Ms(),o=Re(f=>f.setSelectedNode),a=Re(f=>f.setShowSelectionGraph);mn(()=>{c()});const c=P.useCallback(()=>{const f=t?n:s;if(r.current){const d=f==null?void 0:f.nodes.find(p=>p.ref_id===(i==null?void 0:i.ref_id));if(d){const p=wR.set(d==null?void 0:d.x,d==null?void 0:d.y,d==null?void 0:d.z);r.current.position.copy(p)}}},[i,t,n,s]),h=P.useMemo(()=>[{key:"control-key-1",colors:k_(t).focus,icon:D.jsx(ZS,{}),left:10,className:"expand",onClick:()=>{const f=!t;a(f),f&&e(!0)}},{key:"control-key-2",colors:k_(!0).close,icon:D.jsx(YS,{}),left:40,className:"exit",onClick:()=>{o(null),a(!1)}}],[a,o,e,t]);return i?D.jsx("group",{ref:r,children:D.jsx($m,{center:!0,className:"control-panel",onClick:f=>f.stopPropagation(),onKeyDown:f=>f.stopPropagation(),onPointerDown:f=>f.stopPropagation(),onPointerOut:f=>f.stopPropagation(),onPointerOver:f=>f.stopPropagation(),onPointerUp:f=>f.stopPropagation(),sprite:!0,zIndexRange:[16777271,16777272],children:h.map(f=>D.jsx(SR,{backgroundColor:f.colors.backgroundColor,borderColor:f.colors.borderColor,className:f.className,fontColor:f.colors.fontColor,left:f.left,onClick:d=>{d.stopPropagation(),f.onClick()},children:f.icon},f.key))})}):null});ww.displayName="NodeControls";const SR=Cs.div`
  position: fixed;
  top: -60px;
  left: ${r=>-7+r.left}px;
  width: 24px;
  height: 24px;

  border-radius: 40px;
  display: flex;
  justify-content: center;
  align-items: center;
  background: ${r=>r.backgroundColor?r.backgroundColor:"#000000bb"};
  color: ${r=>r.fontColor?r.fontColor:"#ffffff"};
  border-radius: 100%;
  font-size: 16px;
  cursor: pointer;
  transition: opacity 0.4s;
  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.5);
`,Sw=P.memo(()=>D.jsx(D.Fragment,{children:D.jsx(ww,{})}));Sw.displayName="NodeDetailsPanel";const TR=()=>{const r=Re(h=>h.data),e=Re(h=>h.isFetching),t=Re(h=>h.graphStyle),n=Re(h=>h.showSelectionGraph),s=Re(h=>h.selectedNodeRelativeIds),i=Re(h=>h.selectionGraphData),o=Re(h=>h.selectedNode),a=P.useMemo(()=>n?0:t==="force"?.2:.4,[n,t]),c=P.useMemo(()=>(n?i.nodes:(r==null?void 0:r.nodes)||[]).filter(p=>s.includes((p==null?void 0:p.ref_id)||"")||(o==null?void 0:o.ref_id)===(p==null?void 0:p.ref_id)).slice(0,W_).map(p=>{const g=new ye(o==null?void 0:o.x,o==null?void 0:o.y,o==null?void 0:o.z),_=new ye(p.x,p.y,p.z),y={source:o!=null&&o.id?o.id:"",target:p.id?p.id:"",targetRef:p.ref_id,sourceRef:o==null?void 0:o.ref_id,sourcePosition:g,targetPosition:_};return D.jsx(_w,{link:y},p.id)}),[s,r==null?void 0:r.nodes,n,i,o]);return e?null:D.jsxs(D.Fragment,{children:[D.jsx(xw,{}),D.jsx(_R,{}),D.jsx(xR,{}),t!=="earth"&&D.jsx(Hy,{fog:!0,limit:c.length,lineWidth:a,children:c},`links-${c.length}-${t}`),D.jsx(Sw,{})]})},CR=()=>{const{fogColor:r}=Y_("universe",{fogColor:sS}),e=Re(i=>i.graphStyle),t=P.useRef(null),n=P.useRef(null),s=P.useRef(null);return mn(({camera:i,clock:o})=>{const a=o.getElapsedTime();if(t.current){const h=Math.sin(a/8)*1e3;t.current.position.setZ(h)}if(n.current&&n.current.position.lerp(i.position,.5),s.current){const c=a*.5,h=Math.sin(c)*ef,f=Math.cos(c)*ef;s.current.position.set(h,0,f)}}),D.jsxs(D.Fragment,{children:[D.jsx("hemisphereLight",{args:[zn.white,nS,rS]}),e!=="earth"&&D.jsx("fog",{args:[r,5,18e3],attach:"fog"}),D.jsx("ambientLight",{color:zn.white,intensity:1}),D.jsx("pointLight",{ref:n,color:zn.white,distance:4e3,intensity:5,position:[0,0,0]}),D.jsx("directionalLight",{ref:s,color:zn.white,intensity:8,position:[ef,0,0]}),D.jsx("pointLight",{ref:t,color:zn.white,distance:4e3,intensity:8,position:[0,0,0]})]})};var Tw={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(iS,function(){var t=function(){},n={},s={},i={};function o(p,g){p=p.push?p:[p];var _=[],y=p.length,x=y,w,T,b,E;for(w=function(C,A){A.length&&_.push(C),x--,x||g(_)};y--;){if(T=p[y],b=s[T],b){w(T,b);continue}E=i[T]=i[T]||[],E.push(w)}}function a(p,g){if(p){var _=i[p];if(s[p]=g,!!_)for(;_.length;)_[0](p,g),_.splice(0,1)}}function c(p,g){p.call&&(p={success:p}),g.length?(p.error||t)(g):(p.success||t)(p)}function h(p,g,_,y){var x=document,w=_.async,T=(_.numRetries||0)+1,b=_.before||t,E=p.replace(/[\?|#].*$/,""),C=p.replace(/^(css|img)!/,""),A,M;y=y||0,/(^css!|\.css$)/.test(E)?(M=x.createElement("link"),M.rel="stylesheet",M.href=C,A="hideFocus"in M,A&&M.relList&&(A=0,M.rel="preload",M.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(E)?(M=x.createElement("img"),M.src=C):(M=x.createElement("script"),M.src=p,M.async=w===void 0?!0:w),M.onload=M.onerror=M.onbeforeload=function(k){var R=k.type[0];if(A)try{M.sheet.cssText.length||(R="e")}catch(F){F.code!=18&&(R="e")}if(R=="e"){if(y+=1,y<T)return h(p,g,_,y)}else if(M.rel=="preload"&&M.as=="style")return M.rel="stylesheet";g(p,R,k.defaultPrevented)},b(p,M)!==!1&&x.head.appendChild(M)}function f(p,g,_){p=p.push?p:[p];var y=p.length,x=y,w=[],T,b;for(T=function(E,C,A){if(C=="e"&&w.push(E),C=="b")if(A)w.push(E);else return;y--,y||g(w)},b=0;b<x;b++)h(p[b],T,_)}function d(p,g,_){var y,x;if(g&&g.trim&&(y=g),x=(y?_:g)||{},y){if(y in n)throw"LoadJS";n[y]=!0}function w(T,b){f(p,function(E){c(x,E),T&&c({success:T,error:b},E),a(y,E)},x)}if(x.returnPromise)return new Promise(w);w()}return d.ready=function(g,_){return o(g,function(y){c(_,y)}),d},d.done=function(g){a(g,[])},d.reset=function(){n={},s={},i={}},d.isDefined=function(g){return g in n},d})})(Tw);var ER=Tw.exports;const Lm=Bm(ER);var bR="https://platform.twitter.com/widgets.js",Cw="twttr",zm=Cw,MR=!!(typeof window<"u"&&window.document&&window.document.createElement);function OR(){Lm.isDefined(zm)||Lm(bR,zm)}function AR(){return new Promise(function(r,e){var t=function(){return e(new Error("Could not load remote twitter widgets js"))};OR(),Lm.ready(zm,{success:function(){var s=window[Cw];(!s||!s.widgets)&&t(),r(s.widgets)},error:t})})}function kR(r,e){r&&r.querySelectorAll("*").forEach(function(t){t.hasAttribute(e)&&t.remove()})}function P_(r,e){return r===e?r!==0||e!==0||1/r===1/e:r!==r&&e!==e}function PR(r,e){if(P_(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;var t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(var s=0;s<t.length;s++)if(!Object.prototype.hasOwnProperty.call(e,t[s])||!P_(r[t[s]],e[t[s]]))return!1;return!0}function R_(r){var e=P.useRef();return PR(r,e.current)||(e.current=r),e.current}function D_(r){return typeof r=="object"?Object.assign({},r):r}var I_="twdiv";function RR(r,e,t,n){var s=P.useState(null),i=s[0],o=s[1],a=P.useRef(null);if(!MR)return{ref:a,error:i};var c=[r,R_(e),R_(t)];return P.useEffect(function(){o(null);var h=!1;if(a.current){if(kR(a.current,I_),!a||!a.current)return;var f=document.createElement("div");f.setAttribute(I_,"yes"),a.current.appendChild(f),AR().then(function(d){return d[r](D_(e),f,D_(t))}).then(function(d){if(!d&&!h)throw new Error("Twitter could not create widget. If it is a Timeline or Tweet, ensure the screenName/tweetId exists.");if(!(!a||!a.current)){if(h){f&&f.remove();return}n&&n()}}).catch(function(d){console.error(d),o(d)})}return function(){h=!0}},c),{ref:a,error:i}}var DR=function(e){var t=e.tweetId,n=e.options,s=e.onLoad,i=e.renderError,o=RR("createTweet",t,n,s),a=o.ref,c=o.error;return Vc.createElement("div",{ref:a},c&&i&&i(c))};const IR=({twitterHandle:r,tweetId:e})=>{const[t,n]=P.useState(!0);return D.jsxs(D.Fragment,{children:[D.jsx(cn,{direction:"row",children:D.jsx(cn,{align:"flex-start",pb:12,children:D.jsxs($r,{children:["Tweet by @",r]})})}),D.jsxs(cn,{direction:"column",py:16,children:[t&&D.jsx(cn,{align:"center",direction:"row",justify:"center",p:10,children:D.jsx(X_,{color:zn.white})}),e&&D.jsx(DR,{onLoad:()=>n(!1),renderError:()=>D.jsx(UR,{}),tweetId:e})]})]})},UR=()=>D.jsx(cn,{children:"Error occurred"}),FR=Cs(cn)(({theme:r})=>({position:"absolute",top:"65px",right:"55px",width:"300px",pointerEvents:"none",background:zn.dashboardHeader,boxShadow:"0px 1px 6px rgba(0, 0, 0, 0.1)",color:zn.primaryText1,zIndex:100,transition:"opacity 0.6s",padding:r.spacing(2,3),[r.breakpoints.down("sm")]:{padding:r.spacing(1,1.5)}})),NR=Cs(cn)`
  width: 22.5%;
`,LR=({node:r})=>{if(!r)return null;const{node_type:e,show_title:t,episode_title:n,description:s,label:i,text:o,type:a,tweet_id:c,twitter_handle:h}=r,f=r.guests;let d=!1,p=!1;f&&(f.length&&f[0]!==null&&(d=!0),typeof f[0]=="object"&&(p=!0));let g=r.image_url;if(a==="twitter_space"&&(g="twitter_placeholder.png"),g==null)switch(e){case"guest":g="person_placeholder2.png";break;default:g="noimage.jpeg"}return e==="topic"?null:D.jsx(FR,{borderRadius:8,px:24,py:16,children:e==="tweet"?D.jsx(IR,{tweetId:c,twitterHandle:h}):D.jsxs(D.Fragment,{children:[D.jsxs(cn,{direction:"row",children:[D.jsx(NR,{}),D.jsx(cn,{align:"flex-start",pb:12,children:D.jsx($r,{children:e==null?void 0:e.toUpperCase()})})]}),D.jsxs(cn,{direction:"row",children:[D.jsx(cn,{pr:12,children:D.jsx(Z_,{src:g,type:"person"})}),D.jsxs("div",{children:[a==="guest"?D.jsxs(cn,{direction:"column",children:[D.jsx($r,{children:i}),o&&D.jsx(cn,{pt:4,children:D.jsxs($r,{color:"primaryText1",kind:"tiny",children:["@",o]})})]}):D.jsx($r,{color:"primaryText1",kind:"tiny",children:t}),D.jsxs(cn,{pt:4,children:[e==="clip"||e==="episode"&&D.jsx($r,{color:"primaryText1",children:"Episode"}),e==="clip"?D.jsx($r,{as:"div",kind:"regularBold",children:P1(s)}):D.jsx($r,{color:"primaryText1",kind:"tiny",children:n})]}),D.jsxs(cn,{pt:12,children:[e==="clip"&&D.jsx($r,{color:"primaryText1",children:"Episode"}),D.jsx($r,{color:"primaryText1",kind:"tiny",children:e==="clip"?n:P1(s)})]}),d&&D.jsxs(cn,{pt:12,children:[D.jsx($r,{color:"primaryText1",children:"People"}),D.jsx(cn,{pt:4,children:D.jsx($r,{color:"primaryText1",kind:"tiny",children:p?f.map(_=>_.name?_.name:`@${_.twitter_handle}`).join(", "):f==null?void 0:f.join(", ")})})]})]})]})]})})},zR=()=>{const[r]=Re(e=>[e.hoveredNode]);return D.jsxs(BR,{children:[r&&D.jsx("div",{id:"tooltip-portal",children:D.jsx(LR,{node:r})}),D.jsx(XS,{})]})},BR=Cs("div")(({theme:r})=>({position:"absolute",zIndex:1,top:0,left:0,userSelect:"none",pointerEvents:"none",display:"flex",justifyContent:"flex-end",alignItems:"flex-start",height:"100%",width:"100%",padding:"16px",[r.breakpoints.down("sm")]:{top:50}})),jR=({fullSize:r=!0})=>{const e=Ym(t=>t.sidebarIsOpen);return D.jsx(VR,{align:"center",className:q_({"sidebar-is-open":e&&!r}),justify:"center",children:D.jsx(X_,{color:zn.SECONDARY_BLUE,size:64})})},VR=Cs(cn)`
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  top: 0;
  background-color: ${zn.black};
  z-index: 1;
`,GR=()=>D.jsx($m,{children:D.jsx(oC,{})}),HR=()=>{const{universeColor:r}=Y_("universe",{universeColor:zn.black}),e=Ms(),t=P.useMemo(()=>e!=null&&e.node_type?ig(e.node_type):QS,[e]);return D.jsxs(D.Fragment,{children:[D.jsx("color",{args:[r],attach:"background"}),D.jsx(CR,{}),D.jsx(rR,{}),D.jsxs(EE,{children:[D.jsxs(i4,{autoClear:!1,multisampling:8,children:[D.jsx(c4,{darkness:.7,eskil:!1,offset:.05}),D.jsx(a4,{luminanceThreshold:1,mipmapBlur:!0,resolutionX:jt.AUTO_SIZE,resolutionY:jt.AUTO_SIZE}),D.jsx(l4,{blendFunction:Xe.SCREEN,blur:!0,edgeStrength:4,hiddenEdgeColor:t,visibleEdgeColor:t})]}),D.jsx(TR,{})]})]})};let Yp=null;const WR={aspect:window.innerWidth/window.innerHeight,far:3e4,near:1,position:[Ti.x,Ti.y,Ti.z]},qR=()=>{const[r,e,t]=[no(o=>o.setIsUserScrollingOnHtmlPanel),no(o=>o.setIsUserScrolling),no(o=>o.setUserMovedCamera)],n=Re(o=>o.isFetching),s=P.useCallback(o=>{var h;const{target:a}=o,{offsetParent:c}=a;Yp&&clearTimeout(Yp),(h=c==null?void 0:c.classList)!=null&&h.contains("html-panel")&&c.clientHeight<c.scrollHeight&&r(!0),e(!0),t(!0),Yp=setTimeout(()=>{e(!1),r(!1)},200)},[e,r,t]),i=P.useCallback(o=>oS(o,"threeState"),[]);return D.jsxs(ZR,{children:[D.jsx(P.Suspense,{fallback:null,children:D.jsxs(Sy,{camera:WR,id:"universe-canvas",onCreated:i,onWheel:s,children:[aS&&D.jsx(Db,{position:"top-right"}),D.jsxs(P.Suspense,{fallback:D.jsx(GR,{}),children:[D.jsx(SE,{}),D.jsx(TE,{}),D.jsx(CE,{}),D.jsx(HR,{})]})]})}),n&&D.jsx(jR,{fullSize:!1}),D.jsx(zR,{})]})},ZR=Cs(cn)`
  flex: 1 1 100%;
  position: relative;
`,AD=P.memo(qR);export{AD as Universe};
